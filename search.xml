<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[é˜¿é‡Œäº‘ã€Šäº‘åŸç”Ÿæ¶æ„ç™½çš®ä¹¦ã€‹è§£è¯»ï¼šäº‘è®¡ç®—çš„æœ€ä½³æ¼”è¿›è·¯å¾„]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2F%E9%98%BF%E9%87%8C%E4%BA%91%E3%80%8A%E4%BA%91%E5%8E%9F%E7%94%9F%E6%9E%B6%E6%9E%84%E7%99%BD%E7%9A%AE%E4%B9%A6%E3%80%8B%2F</url>
    <content type="text"><![CDATA[â€œäº‘åŸç”Ÿâ€å·²æˆä¸ºä¸€ä¸ªæˆä¸ºæŠ€æœ¯åœˆå¹¿æ³›ä¼ æ’­çš„æµè¡Œè¯äº†ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯äº‘åŸç”Ÿï¼Ÿäº‘åŸç”Ÿèƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆï¼Ÿæ€ä¹ˆå°†äº‘åŸç”Ÿæ¶æ„è½åœ°ï¼Ÿåº”è¯¥æ˜¯æ¯ä¸ªå…³å¿ƒäº‘è®¡ç®—æ–°æŠ€æœ¯çš„æŠ€æœ¯äººéƒ½å…³å¿ƒçš„å§ï¼Œæˆ‘ä¹Ÿä¸ä¾‹å¤–ï¼Œå½“åœ¨ç¾¤é‡Œå¾—çŸ¥é˜¿é‡Œäº‘è¦å‡ºå“ã€Šäº‘åŸç”Ÿæ¶æ„ç™½çš®ä¹¦ã€‹æ—¶ï¼Œç¬¬ä¸€æ—¶é—´å°±é¢„çº¦äº†è¯•è¯»ã€‚PSï¼šåšä¸ªå°å¹¿å‘Šï¼Œå¦‚æœä½ ä¹Ÿæƒ³æ‹¥æœ‰è¿™æ ·çš„â€œç‰¹æƒâ€ï¼Œå¯ä»¥åŠ å…¥é˜¿é‡Œäº‘MVPğŸ˜œ 7æœˆ17å·å°±æ”¶åˆ°ç¬¬ä¸€éƒ¨åˆ†å†…å®¹ï¼Œçœ‹äº†ç¼–å§”ç»„æˆå‘˜ï¼Œæ»¡æ»¡çš„å¤§ç¥åˆ—è¡¨ã€‚ä»ç»“æ„æ¥çœ‹â€œç™½çš®ä¹¦â€æ€»å…±åˆ†ä¸ºä¸ƒç« ï¼Œä¸»è¦ä»äº‘åŸç”Ÿçš„æ¶æ„å®šä¹‰å’Œç›¸å…³æŠ€æœ¯æ ˆã€é˜¿é‡Œäº‘è‡ªèº«çš„äº§å“å’Œæ¡ˆä¾‹å®è·µã€æœªæ¥å‘å±•è¶‹åŠ¿ä¸‰å¤§éƒ¨åˆ†å…¨é¢ä»‹ç»äº†äº‘åŸç”Ÿæ¶æ„ã€‚ ä»æ¶æ„è®¾è®¡çœ‹äº‘åŸç”Ÿçš„ä»·å€¼æ ¸å¿ƒäº‘åŸç”Ÿçš„æ¦‚å¿µå¾ˆå¤šï¼Œä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡å…³äºã€Šä»€ä¹ˆæ˜¯äº‘åŸç”Ÿã€‹çš„åšå®¢é‡Œé¢å°±æœ‰è¯´åˆ°äº‘åŸç”Ÿçš„å„ç§å®šä¹‰ã€‚â€œç™½çš®ä¹¦â€åˆ™ä»æ¶æ„å’Œè®¾è®¡æ¨¡å¼ä¸Šå¯¹äº‘åŸç”Ÿåšæè¿°ï¼šæ—¨åœ¨å°†äº‘åº”ç”¨ä¸­çš„éä¸šåŠ¡ä»£ç éƒ¨åˆ†è¿›è¡Œæœ€å¤§åŒ–çš„å‰¥ç¦»ï¼Œä»è€Œè®©äº‘è®¾æ–½æ¥ç®¡åº”ç”¨ä¸­åŸæœ‰çš„å¤§é‡éåŠŸèƒ½ç‰¹æ€§ï¼ˆå¦‚å¼¹æ€§ã€éŸ§æ€§ã€å®‰å…¨ã€å¯è§‚æµ‹æ€§ã€ç°åº¦ç­‰ï¼‰ï¼Œä½¿ä¸šåŠ¡ä¸å†æœ‰éåŠŸèƒ½æ€§ä¸šåŠ¡ä¸­æ–­å›°æ‰°çš„åŒæ—¶ï¼Œå…·å¤‡è½»é‡ã€æ•æ·ã€é«˜åº¦è‡ªåŠ¨åŒ–çš„ç‰¹ç‚¹ã€‚ è¿™ç§ä»æ¶æ„å’Œæ¨¡å¼ä¸Šçš„å®šä¹‰æ¯”CNCFå’ŒåäºŒå› ç´ æ›´æ¸…æ™°å’Œå…·è±¡åŒ–ï¼Œä¹Ÿæ›´æ¸…æ™°åœ°ä½“ç°äº‘åŸç”Ÿçš„ä»·å€¼æ ¸å¿ƒï¼šæ¶æ„è®¾è®¡çš„æŒ‡å¯¼å’Œç ”å‘æ•ˆèƒ½çš„æé«˜ã€‚ æ¶æ„è®¾è®¡ä¸»è¦ä½“ç°åœ¨äº‘åŸç”Ÿæ¶æ„æä¾›äº†é«˜å¯ç”¨å’Œå¯æ‰©å±•èƒ½åŠ›ã€‚éåŠŸèƒ½ç‰¹æ€§çš„å»ºè®¾åœ¨å®é™…ä¸šåŠ¡ä¸­å¹¶ä¸ä¼šå¸¦æ¥ç›´æ¥ä¸šåŠ¡ä»·å€¼ï¼Œä½†åˆæ˜¯å¿…ä¸å¯å°‘çš„ã€‚è®°å¾—åœ¨10å¹´å¾®æœåŠ¡åˆšå‡ºæ¥çš„æ—¶å€™ï¼Œéœ€è¦æ„å»ºä¸€ä¸ªé«˜å¯ç”¨å’Œå…·å¤‡å¯æ‰©å±•èƒ½åŠ›çš„ç³»ç»Ÿæ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹æƒ…ï¼Œç¼ºä¹æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œéœ€è¦è‡ªè¡Œè§£å†³ä¸Šä¸‹æ¸¸å¯»å€ã€é€šè®¯ï¼Œä»¥åŠå®¹é”™ç­‰é—®é¢˜ã€‚ç°åœ¨è¿™äº›èƒ½åŠ›è¢«æŠ½è±¡æˆäº‘åŸç”Ÿçš„åŸºç¡€è®¾æ–½ï¼Œæˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡ä»£ç çš„åŒæ—¶ï¼Œè½»æ¾è·å¾—é«˜å¯ç”¨å’Œå¯æ‰©å±•èƒ½åŠ›ã€‚ äº‘åŸç”Ÿå¦ä¸€æ–¹é¢ä»·å€¼ä½“ç°æ˜¯åœ¨æé«˜å›¢é˜Ÿå’Œç»„ç»‡çš„ç ”å‘æ•ˆèƒ½ä¸Šã€‚ä»æ•æ·äº¤ä»˜åˆ°DevOpsï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹äº¤ä»˜å’Œè¿ç»´æ•ˆç‡çš„è¿½æ±‚ã€‚è‡ªåŠ¨åŒ–è®©ç ”å‘å˜å¾—æ›´é«˜æ•ˆï¼ŒéåŠŸèƒ½æ€§ç‰¹æ€§å’Œæ ¸å¿ƒä»£ç åˆ†ç¦»å¯ä»¥è®©æˆ‘ä»¬æ›´ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚ ä»4+1çœ‹é˜¿é‡Œäº‘äº‘åŸç”Ÿæ¶æ„è®¾è®¡é˜¿é‡Œå·´å·´äº‘åŸç”Ÿæ¶æ„ACNAã€Œ4+1ã€çš„æ¶æ„è®¾è®¡æµç¨‹ï¼Œã€Œ4ã€ ä»£è¡¨æ¶æ„è®¾è®¡çš„å…³é”®è§†è§’ï¼ŒåŒ…æ‹¬ä¼ä¸šæˆ˜ç•¥è§†è§’ã€ä¸šåŠ¡å‘å±•è§†è§’ã€ç»„ç»‡èƒ½åŠ›è§†è§’å’Œäº‘åŸç”ŸæŠ€æœ¯æ¶æ„è§†è§’ï¼›ã€Œ1ã€ è¡¨ç¤ºäº‘åŸç”Ÿæ¶æ„çš„æ¶æ„æŒç»­æ¼”è¿›é—­ç¯ã€‚ ä¼ä¸šæˆ˜ç•¥è§†è§’æ¥çœ‹ï¼Œä»»ä½•æ¶æ„éƒ½å¿…é¡»æœåŠ¡äºä¼ä¸šæˆ˜ç•¥ï¼Œäº‘åŸç”Ÿæ¶æ„ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯å‡çº§ï¼Œæ›´æ˜¯ä¸€ä¸ªå¯¹ä¼ä¸šæ ¸å¿ƒä¸šåŠ¡ç”Ÿäº§æµç¨‹çš„é‡æ„ï¼Œå³é€šè¿‡è½¯ä»¶å¼€å‘å’Œè¿è¥æ„å»ºæ•°å­—åŒ–ä¸šåŠ¡ã€‚è¿™æ ·ä»é¡¶å±‚çš„æˆ˜ç•¥ä¸Šå°±éœ€è¦è®¾è®¡æŠ€æœ¯èµ‹èƒ½ä¸šåŠ¡åˆ›æ–°çš„é‡è¦è§’è‰²ã€‚ä»ä¸šåŠ¡å‘å±•è§†è§’çœ‹ï¼Œæ•°å­—åŒ–ä¸šåŠ¡å¯¹æŠ€æœ¯æ¶æ„çš„ä¸»è¦è¯‰æ±‚æ˜¯ä¸šåŠ¡è¿ç»­æ€§ã€ä¸šåŠ¡å¿«é€Ÿä¸Šçº¿ã€æˆæœ¬ä»¥åŠç§‘æŠ€èµ‹èƒ½ä¸šåŠ¡åˆ›æ–°ï¼Œäº‘è®¡ç®—ä½œä¸ºæ–°çš„æŠ€æœ¯å¿…é¡»ä¸ºä¼ä¸šé‡Šæ”¾æˆæœ¬çº¢åˆ©ï¼Œå¸®åŠ©ä¼ä¸šä»åŸæ¥çš„ CAPEX æ¨¡å¼è½¬å˜ä¸º OPEX æ¨¡å¼ã€‚ä»ç»„ç»‡èƒ½åŠ›è§†è§’çœ‹ï¼Œæœ€é‡è¦æ˜¯éœ€è¦ç†æ€§çœ‹å¾…æŠ€æœ¯æ¶æ„ï¼Œéœ€è¦æ»¡è¶³â€œåº·å¨å®šå¾‹â€åŸåˆ™â€”â€”è®©æŠ€æœ¯æ¶æ„ä¸ä¼ä¸šæ²Ÿé€šæ¶æ„éœ€è¦ä¿æŒä¸€è‡´ã€‚ä»äº‘åŸç”ŸæŠ€æœ¯è§†è§’æ¥çœ‹ï¼Œä»æœåŠ¡åŒ–èƒ½åŠ›ã€å¼¹æ€§èƒ½åŠ›ã€æ— æœåŠ¡åŒ–ç¨‹åº¦ã€å¯è§‚å¯Ÿæ€§ã€éŸ§æ€§å’Œè‡ªåŠ¨åŒ–éƒ½éœ€è¦é€æ­¥è¿­ä»£ï¼Œé…åˆä¼ä¸šæˆ˜ç•¥å’Œä¸šåŠ¡è¯‰æ±‚ã€‚ äº‘åŸç”Ÿæ¶æ„çš„å‘å±•æ¼”å˜å’Œæ–°æŠ€æœ¯çš„å±•æœ›äº‘åŸç”ŸæŠ€æœ¯çš„å‘å±•ç»å†äº†è‡ªè¡Œè§£å†³å„ç§åˆ†å¸ƒå¼é—®é¢˜çš„åˆä»£ï¼Œåˆ°æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ã€æœåŠ¡é€šè®¯åŠå®¹é”™æœºåˆ¶é€æ¸æ¨¡å—åŒ–çš„ä¸­ç”Ÿä»£ï¼Œå†åˆ°é€æ¸é‡‡ç”¨æœåŠ¡ç½‘æ ¼(service mesh)ç®¡ç†å¾®æœåŠ¡æ¶æ„çš„æ–°ç”Ÿä»£ï¼Œäº‘åŸç”Ÿæ¶æ„å¯¹åº•å±‚å’Œåˆ†å¸ƒå¼äº‹åŠ¡çš„æŠ½è±¡ç¨‹åº¦è¶Šæ¥è¶Šé«˜ï¼Œè®©å·¥ç¨‹å¸ˆä»¬æ›´ä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡ï¼ŒServerlessã€æ··åˆäº‘é€æ¸æˆä¸ºæŠ€æœ¯é€‰å‹çš„æ–°å¸¸æ€ã€‚éšç€äº‘åŸç”Ÿåº”ç”¨å¿«é€Ÿé“ºå¼€ï¼Œäº‘åŸç”Ÿç”Ÿæ€é€æ¸æ“ä½œç³»ç»ŸåŒ–ï¼Œç±»ä¼¼ OAM è¿™ç§æ ‡å‡†åŒ–äº‘åŸç”Ÿåº”ç”¨æ¡†æ¶çš„å®Œå–„æœªæ¥ä¼šå‚¬ç”Ÿæ–°ä¸€ä»£åº”ç”¨åˆ†å‘äº‘å¸‚åœºã€‚ä¸€æ¬¡å¼€å‘ï¼Œæ‰€æœ‰äº‘å‚å•†å‘å¸ƒå’Œä½¿ç”¨ï¼Œè®©æŠ€æœ¯æœåŠ¡åŒ–å’Œå•†ä¸šèµ‹èƒ½å˜å¾—åƒæ‰‹æœºAPPå®‰è£…ä½¿ç”¨ä¸€æ ·ç®€å•é¡ºç•…ï¼Œæ‰“é€šç”Ÿæ€æ¨¡å¼æœ€åä¸€ç¯ã€‚ ã€Šäº‘åŸç”Ÿæ¶æ„ç™½çš®ä¹¦ã€‹ä¸‹è½½åœ°å€]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>é˜¿é‡Œäº‘</tag>
        <tag>è§£è¯»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºkubernetesçš„kongç½‘å…³å®æˆ˜]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2F%E5%9F%BA%E4%BA%8Ekubernetes%E7%9A%84kong%E7%BD%91%E5%85%B3%E5%AE%9E%E6%88%98%2F</url>
    <content type="text"><![CDATA[Kongåœ¨k8så®‰è£…Kong-ingresså®‰è£…Kong:123456789101112# using YAMLs$ kubectl apply -f https://bit.ly/k4k8s# or using Helm$ helm repo add kong https://charts.konghq.com$ helm repo update# Helm 2$ helm install kong/kong# Helm 3$ helm install kong/kong --generate-name --set ingressController.installCRDs=false éƒ¨ç½²ä¸€ä¸ªåº”ç”¨éƒ¨ç½²ä¸€ä¸ªåº”ç”¨ï¼š ï¼ˆ1ï¼‰æ„å»ºä¸€ä¸ªdeployment:12345678910111213141516171819202122apiVersion: apps/v1kind: Deploymentmetadata: name: app-server labels: name: app-serverspec: replicas: 1 selector: matchLabels: name: app-server template: metadata: labels: name: app-server spec: containers: - name: app-server image: registry.cn-shenzhen.aliyuncs.com/shikanon/ambassador-auth-demo:serverv0.1 imagePullPolicy: IfNotPresent ports: - containerPort: 8080 æ„å»ºä¸€ä¸ªservice:123456789101112apiVersion: v1kind: Servicemetadata: name: app-serverspec: ports: - name: http port: 8000 protocol: TCP targetPort: 8080 selector: name: app-server æ„å»ºä¸€ä¸ªingress:1234567891011121314apiVersion: extensions/v1beta1kind: Ingressmetadata: name: demo annotations: kubernetes.io/ingress.class: "kong"spec: rules: - http: paths: - path: /open/ backend: serviceName: app-server servicePort: 8000 å¦‚æœé›†ç¾¤ä¸­å­˜åœ¨å¤šä¸ª ingress controllerï¼Œéœ€è¦é€šè¿‡åœ¨annotationsä¸­æŒ‡å®škubernetes.io/ingress.classï¼Œå¦‚æœæ˜¯1.18åŠä»¥ä¸Šç‰ˆæœ¬çš„k8sï¼ŒingressClassNameå­—æ®µä»£æ›¿annotationsã€‚ æµ‹è¯•æ¥å£ï¼š1234567891011$ curl -i http://$KongService_IP/open/HTTP/1.1 200 OKContent-Type: text/plain; charset=utf-8Content-Length: 6Connection: keep-aliveDate: Sun, 24 May 2020 10:49:07 GMTX-Kong-Upstream-Latency: 1X-Kong-Proxy-Latency: 0Via: kong/2.0.4/open/ æ’ä»¶è¯•éªŒ### 1234567apiVersion: configuration.konghq.com/v1kind: KongPluginmetadata: name: request-idconfig: header_name: my-request-idplugin: correlation-id]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>ç½‘å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ambassadorç½‘å…³ä¹‹å°è¯•ç‰›åˆ€]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2Fambassador%E7%BD%91%E5%85%B3%E4%B9%8B%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80%2F</url>
    <content type="text"><![CDATA[AmbassadorAmbassadoræ˜¯ä¸€ä¸ªäº‘åŸç”Ÿçš„APIç½‘å…³ï¼Œä¸»è¦ç”¨äºä¸ºé›†ç¾¤æä¾›å—-åŒ—ç½‘å…³ï¼Œå¯¹å¤–ç½‘æµå…¥çš„æµé‡è¿›è¡Œç®¡ç†ï¼ŒåŒ…æ‹¬é™æµã€é‰´æƒç­‰ã€‚ ä»Šå¤©è¿™é‡Œç”¨ambassadoræ„å»ºä¸€ä¸ªçš„é‰´æƒæœåŠ¡ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œå¾…å¡«â€¦ å®‰è£…k8så®‰è£…:1234kubectl apply -f https://www.getambassador.io/yaml/aes-crds.yaml &amp;&amp; \kubectl wait --for condition=established --timeout=180s crd -lproduct=aes &amp;&amp; \kubectl apply -f https://www.getambassador.io/yaml/aes.yaml &amp;&amp; \kubectl -n ambassador wait --for condition=available --timeout=180s deploy -lproduct=aes å…¶ä»–å®‰è£…æ–¹å¼å‚è€ƒå®‰è£…æ‰‹å†Œã€‚ æµ‹è¯•å®‰è£…å¥½åï¼ŒæŸ¥çœ‹services:12345$ kubectl get svc -n ambassadorNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEambassador LoadBalancer 10.43.227.83 &lt;pending&gt; 80:31082/TCP,443:32114/TCP 4h4mambassador-admin ClusterIP 10.43.143.56 &lt;none&gt; 8877/TCP 4h4mambassador-redis ClusterIP 10.43.59.72 &lt;none&gt; 6379/TCP 4h4m ç”±äºè¿™é‡Œæ²¡æœ‰LBï¼Œå†å¯ä¸€ä¸ªnode-port:123456789101112131415161718192021apiVersion: v1kind: Servicemetadata: labels: app: ambassador-nodeport name: ambassador-nodeportspec: externalTrafficPolicy: Cluster ports: - name: "80" port: 80 protocol: TCP targetPort: http - name: "443" port: 443 protocol: TCP targetPort: https selector: service: ambassador sessionAffinity: None type: NodePort ç›´æ¥è®¿é—®æœºå™¨çš„å³å¯çœ‹åˆ°é¡µé¢ï¼š æ·»åŠ ä¸€ä¸ªåç«¯åº”ç”¨quoteï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647---apiVersion: v1kind: Servicemetadata: name: quote namespace: ambassadorspec: ports: - name: http port: 80 protocol: TCP targetPort: http selector: app: quote---apiVersion: apps/v1kind: Deploymentmetadata: name: quote namespace: ambassadorspec: replicas: 1 selector: matchLabels: app: quote strategy: type: RollingUpdate template: metadata: labels: app: quote spec: containers: - name: backend image: registry.cn-shenzhen.aliyuncs.com/shikanon/ambassador-auth-demo:serverv0.1 ports: - name: http containerPort: 8080---apiVersion: getambassador.io/v2kind: Mappingmetadata: name: quote-backend namespace: ambassadorspec: prefix: /backend/ service: quote æ³¨ï¼šè¿™é‡ŒDeploymentçš„portç”¨nameåç§°å«â€httpâ€ï¼Œæ‰€ä»¥serviceå¯ä»¥å†™æˆtargetPort: http æµ‹è¯• æ³¨æ„ï¼šç”±äºè¿™é‡Œç”¨çš„æ˜¯Ambassador Edge Stackç‰ˆæœ¬ï¼Œè®¿é—®å¿…é¡»ç”¨httpsçš„ç«¯å£ï¼š $ kubectl get svc -nambassadorNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEambassador LoadBalancer 10.43.86.4 80:32487/TCP,443:31632/TCP 4h9mambassador-admin ClusterIP 10.43.79.19 8877/TCP 4h9mambassador-nodeport NodePort 10.43.228.37 80:30930/TCP,443:32089/TCP 7m36sambassador-redis ClusterIP 10.43.191.197 6379/TCP 4h9mapp-auth NodePort 10.43.206.119 80:30176/TCP 27mapp-server ClusterIP 10.43.174.101 80/TCP 27mquote ClusterIP 10.43.55.41 80/TCP 7m2s å¿…é¡»ç”¨httpsè®¿é—® $ curl https://10.43.86.4/backend/ â€“insecure æ„å»ºé‰´æƒä»£ç åŸºäºgolangæ„å»ºä¸€ä¸ªç®€å•çš„é‰´æƒæœåŠ¡ï¼š1234567891011121314151617181920212223package mainimport ( "fmt" "net/http")func indexHandler(w http.ResponseWriter, r *http.Request) &#123; username := r.URL.Query().Get("username") passwd := r.URL.Query().Get("passwd") content := fmt.Sprintf("username:%v", username) if username == "shikanon" &amp;&amp; passwd == "123456" &#123; w.WriteHeader(200) &#125; else &#123; w.WriteHeader(403) &#125; fmt.Fprintf(w, content)&#125;func main() &#123; http.HandleFunc("/", indexHandler) http.ListenAndServe(":8000", nil)&#125; æ„å»ºä¸€ä¸ªç®€å•çš„serveræœåŠ¡ï¼š12345678910111213141516171819202122package mainimport ( "fmt" "net/http")func indexHandler(w http.ResponseWriter, r *http.Request) &#123; fmt.Fprintf(w, "this is server") fmt.Println("RequestURI", r.RequestURI)&#125;func lookHandler(w http.ResponseWriter, r *http.Request) &#123; fmt.Fprintf(w, r.RequestURI) fmt.Println("RequestURI", r.RequestURI)&#125;func main() &#123; http.HandleFunc("/", lookHandler) http.HandleFunc("/lookup", indexHandler) http.ListenAndServe(":8080", nil)&#125; ç¼–å†™Dockerfile(ä¸¤ä¸ªæœåŠ¡çš„dockerfileç±»ä¼¼):12345678910111213FROM golang:1.14.3-alpine as buildCOPY . /appWORKDIR /appRUN go build -o auth main.go RUN chmod +x ./authFROM alpine:latestLABEL maintainer="hexo-shikanon-blog &lt;shikanon@tensorbytes.com&gt;"COPY --from=build /app /appEXPOSE 8000CMD ["/app/auth"] ä¸æƒ³è‡ªå·± build å¯ä»¥ç›´æ¥ç”¨æˆ‘ä¸Šä¼ åˆ°é˜¿é‡Œäº‘çš„é•œåƒä»“åº“ï¼š auth: registry.cn-shenzhen.aliyuncs.com/shikanon/ambassador-auth-demo:authv0.1 server: registry.cn-shenzhen.aliyuncs.com/shikanon/ambassador-auth-demo:serverv0.1 ä½¿ç”¨authserviceæœåŠ¡æ„å»ºserveråŸºäºserveré•œåƒæ„å»ºå“åº”æœåŠ¡ï¼š1234567891011121314151617181920212223242526272829303132333435363738---apiVersion: apps/v1kind: Deploymentmetadata: name: app-server namespace: ambassador labels: name: app-serverspec: replicas: 1 selector: matchLabels: name: app-server template: metadata: labels: name: app-server spec: containers: - name: app-server image: registry.cn-shenzhen.aliyuncs.com/shikanon/ambassador-auth-demo:serverv0.1 imagePullPolicy: IfNotPresent ports: - containerPort: 8080---apiVersion: v1kind: Servicemetadata: name: app-server namespace: ambassadorspec: ports: - name: http port: 80 protocol: TCP targetPort: 8080 selector: name: app-server æ„å»ºmappingå®ç°ambassadorè½¬å‘ï¼š123456789apiVersion: getambassador.io/v2kind: Mappingmetadata: name: auth-backend-test namespace: ambassadorspec: prefix: /test/ host_redirect: true service: app-server æµ‹è¯•ä¸€ä¸‹ï¼š $ kubectl get svc -nambassadorNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEambassador LoadBalancer 10.43.47.77 80:31290/TCP,443:31952/TCP 12hambassador-admin ClusterIP 10.43.181.248 8877/TCP 12hambassador-redis ClusterIP 10.43.65.217 6379/TCP 12happ-server ClusterIP 10.43.56.227 80/TCP 26m æµ‹è¯•æ•ˆæœï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344$ curl -L http://10.43.47.77/test/helloworld --insecure* About to connect() to 10.43.47.77 port 80 (#0)* Trying 10.43.47.77...* Connected to 10.43.47.77 (10.43.47.77) port 80 (#0)&gt; GET /test2/helloworld HTTP/1.1&gt; User-Agent: curl/7.29.0&gt; Host: 10.43.47.77&gt; Accept: */*&gt; &lt; HTTP/1.1 301 Moved Permanently&lt; location: https://10.43.47.77/test/helloworld&lt; date: Fri, 22 May 2020 02:03:46 GMT&lt; server: envoy&lt; content-length: 0&lt; * Connection #0 to host 10.43.47.77 left intact* Issue another request to this URL: &apos;https://10.43.47.77/test2/helloworld&apos;* Found bundle for host 10.43.47.77: 0x7fced0* About to connect() to 10.43.47.77 port 443 (#1)* Trying 10.43.47.77...* Connected to 10.43.47.77 (10.43.47.77) port 443 (#1)* Initializing NSS with certpath: sql:/etc/pki/nssdb* skipping SSL peer certificate verification* SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256* Server certificate:* subject: O=Ambassador Edge Stack Self-Signed* start date: May 21 13:32:32 2020 GMT* expire date: May 21 13:32:32 2021 GMT* common name: (nil)* issuer: O=Ambassador Edge Stack Self-Signed&gt; GET /test2/helloworld HTTP/1.1&gt; User-Agent: curl/7.29.0&gt; Host: 10.43.47.77&gt; Accept: */*&gt; &lt; HTTP/1.1 200 OK&lt; date: Fri, 22 May 2020 02:03:46 GMT&lt; content-length: 11&lt; content-type: text/plain; charset=utf-8&lt; x-envoy-upstream-service-time: 0&lt; server: envoy&lt; * Connection #1 to host 10.43.47.77 left intact/helloworld å¦‚æœç”¨httpåè®®ï¼Œè¿™é‡Œå¿…é¡»åŠ -Lï¼Œå› ä¸ºambassadorä¼šå¼ºåˆ¶è½¬æˆhttpsåè®®ï¼Œå¹¶è¿”å›301è¿›è¡Œé‡å®šå‘ã€‚ æ„å»ºauthserviceæ„å»ºå¥½serverï¼Œä¸‹é¢å°±å¯ä»¥æ„å»ºauthserviceåšé‰´æƒéªŒè¯å’Œè½¬å‘ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950apiVersion: apps/v1kind: Deploymentmetadata: name: app-auth namespace: ambassador labels: name: app-authspec: replicas: 1 selector: matchLabels: name: app-auth template: metadata: labels: name: app-auth spec: containers: - name: app-auth image: registry.cn-shenzhen.aliyuncs.com/shikanon/ambassador-auth-demo:authv0.1 imagePullPolicy: IfNotPresent ports: - containerPort: 8000---apiVersion: v1kind: Servicemetadata: name: app-auth namespace: ambassador annotations: getambassador.io/config: | --- apiVersion: getambassador.io/v2 kind: AuthService name: authentication auth_service: "app-auth:80" path_prefix: "/extauth" allowed_request_headers: - "x-qotm-session" allowed_authorization_headers: - "x-qotm-session"spec: ports: - name: http port: 80 protocol: TCP targetPort: 8000 selector: name: app-auth type: NodePort è¿™é‡Œè®¾ç½®äº†å¯¹extauthçš„å‰ç¼€åšéªŒè¯è½¬å‘ï¼Œä¹Ÿå°±æ˜¯ä¼šåŒ¹é…åŒ…å«/extauthçš„urlï¼Œä¼ ç»™éªŒè¯æœåŠ¡ï¼ŒéªŒè¯é€šè¿‡äº†æ‰è½¬åˆ°åº”ç”¨æœåŠ¡ã€‚ éœ€æ³¨æ„ï¼Œåœ¨æ–°ç‰ˆçš„Ambassador Edge Stackä¸­ï¼Œå®˜æ–¹æ›´æ¨èé‡‡ç”¨filterè¿›è¡Œé‰´æƒå’Œè¿‡æ»¤é€»è¾‘ 12345678910111213141516171819202122232425apiVersion: v1kind: Servicemetadata: name: app-auth namespace: ambassadorspec: ports: - name: http port: 80 protocol: TCP targetPort: 8000 selector: name: app-auth type: NodePort---apiVersion: getambassador.io/v2kind: Filtermetadata: name: app-auth namespace: ambassadorspec: External: auth_service: "app-auth:80" # required proto: "http" # optional; default is "http" path_prefix: "/extauth" okayï¼Œä¸‹é¢å¼€å§‹æµ‹è¯•ã€‚ å…ˆæŸ¥çœ‹serviceåœ°å€ï¼š $ kubectl get svc -nambassadorNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEambassador LoadBalancer 10.43.47.77 80:31290/TCP,443:31952/TCP 12hambassador-admin ClusterIP 10.43.181.248 8877/TCP 12hambassador-redis ClusterIP 10.43.65.217 6379/TCP 12happ-auth NodePort 10.43.179.149 80:32711/TCP 12happ-server ClusterIP 10.43.56.227 80/TCP 26m æµ‹è¯•ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748$ curl -Lv https://10.43.47.77/extauth/test/helloworld --insecure* About to connect() to 10.43.47.77 port 443 (#0)* Trying 10.43.47.77...* Connected to 10.43.47.77 (10.43.47.77) port 443 (#0)* Initializing NSS with certpath: sql:/etc/pki/nssdb* skipping SSL peer certificate verification* SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256* Server certificate:* subject: O=Ambassador Edge Stack Self-Signed* start date: May 21 13:32:32 2020 GMT* expire date: May 21 13:32:32 2021 GMT* common name: (nil)* issuer: O=Ambassador Edge Stack Self-Signed&gt; GET /extauth/test/helloworld HTTP/1.1&gt; User-Agent: curl/7.29.0&gt; Host: 10.43.47.77&gt; Accept: */*&gt; &lt; HTTP/1.1 301 Moved Permanently&lt; content-type: text/html; charset=utf-8&lt; location: /test/helloworld&lt; date: Fri, 22 May 2020 02:31:35 GMT&lt; content-length: 52&lt; x-envoy-upstream-service-time: 0&lt; server: envoy&lt; * Ignoring the response-body* Connection #0 to host 10.43.47.77 left intact* Issue another request to this URL: &apos;https://10.43.47.77/test2/helloworld&apos;* Found bundle for host 10.43.47.77: 0x1c73f20* Re-using existing connection! (#0) with host 10.43.47.77* Connected to 10.43.47.77 (10.43.47.77) port 443 (#0)&gt; GET /test2/helloworld HTTP/1.1&gt; User-Agent: curl/7.29.0&gt; Host: 10.43.47.77&gt; Accept: */*&gt; &lt; HTTP/1.1 200 OK&lt; date: Fri, 22 May 2020 02:31:35 GMT&lt; content-length: 11&lt; content-type: text/plain; charset=utf-8&lt; x-envoy-upstream-service-time: 0&lt; server: envoy&lt; * Connection #0 to host 10.43.47.77 left intact/helloworld æˆåŠŸè®¿é—®ï¼ å¯ç”¨etcdctlæ’æŸ¥etcdé—®é¢˜ç”±äºé›†ç¾¤æ˜¯é€šè¿‡rancherå¯åŠ¨çš„ï¼ŒetcdæœåŠ¡é€šè¿‡dockerè¿è¡Œçš„ï¼ŒæŸ¥çœ‹etcdå¯åŠ¨é…ç½®ï¼š123456789101112131415161718192021222324$ docker inspect etcd | jq ".[].Config.Cmd"[ "/usr/local/bin/etcd", "--peer-cert-file=/etc/kubernetes/ssl/kube-etcd-10-17-1-44.pem", "--initial-cluster-token=etcd-cluster-1", "--name=etcd-localhost", "--listen-peer-urls=https://0.0.0.0:2380", "--initial-cluster=etcd-localhost=https://10.17.1.44:2380", "--initial-cluster-state=new", "--heartbeat-interval=500", "--election-timeout=5000", "--data-dir=/var/lib/rancher/etcd/", "--advertise-client-urls=https://10.17.1.44:2379,https://10.17.1.44:4001", "--listen-client-urls=https://0.0.0.0:2379", "--peer-key-file=/etc/kubernetes/ssl/kube-etcd-10-17-1-44-key.pem", "--enable-v2=true", "--trusted-ca-file=/etc/kubernetes/ssl/kube-ca.pem", "--cert-file=/etc/kubernetes/ssl/kube-etcd-10-17-1-44.pem", "--key-file=/etc/kubernetes/ssl/kube-etcd-10-17-1-44-key.pem", "--client-cert-auth=true", "--initial-advertise-peer-urls=https://10.17.1.44:2380", "--peer-trusted-ca-file=/etc/kubernetes/ssl/kube-ca.pem", "--peer-client-cert-auth=true"] è¿™é‡Œendpointsã€certã€keyã€caå››ä¸ªå‚æ•°éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œé€šè¿‡è®¾ç½®è¿™å››ä¸ªå‚è€ƒï¼Œå¯ä»¥é€šè¿‡etcdctlè®¿é—®etcdé›†ç¾¤ï¼š123$ ./etcdctl --endpoints=https://10.17.1.44:2379 --cert=/etc/kubernetes/ssl/kube-etcd-10-17-1-44.pem --key=/etc/kubernetes/ssl/kube-etcd-10-17-1-44-key.pem --cacert=/etc/kubernetes/ssl/kube-ca.pem member list5b0279579bcdfd25, started, etcd-localhost, https://10.17.1.44:2380, https://10.17.1.44:2379,https://10.17.1.44:4001, false kubernetesçš„é”®å€¼å¯¹éƒ½æ˜¯å­˜â€/registryâ€çš„å‰ç¼€ï¼ŒæŸ¥è¯¢ambassadorç›¸å…³é”®å€¼ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566$ ./etcdctl --endpoints=https://10.17.1.44:2379 --cert=/etc/kubernetes/ssl/kube-etcd-10-17-1-44.pem --key=/etc/kubernetes/ssl/kube-etcd-10-17-1-44-key.pem --cacert=/etc/kubernetes/ssl/kube-ca.pem get "/registry" --prefix=true --keys-only | grep ambassador/registry/apiextensions.k8s.io/customresourcedefinitions/authservices.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/consulresolvers.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/filterpolicies.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/filters.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/hosts.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/kubernetesendpointresolvers.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/kubernetesserviceresolvers.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/logservices.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/mappings.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/modules.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/ratelimits.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/ratelimitservices.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/tcpmappings.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/tlscontexts.getambassador.io/registry/apiextensions.k8s.io/customresourcedefinitions/tracingservices.getambassador.io/registry/apiregistration.k8s.io/apiservices/v1.getambassador.io/registry/apiregistration.k8s.io/apiservices/v1beta1.getambassador.io/registry/apiregistration.k8s.io/apiservices/v1beta2.getambassador.io/registry/apiregistration.k8s.io/apiservices/v2.getambassador.io/registry/clusterrolebindings/ambassador/registry/clusterroles/ambassador/registry/deployments/ambassador/ambassador/registry/deployments/ambassador/ambassador-redis/registry/events/ambassador/acmeclient.1611d42103881983/registry/events/ambassador/acmeclient.1611d42a8f657b22/registry/events/ambassador/acmeclient.1611d47c9a2d559e/registry/events/ambassador/acmeclient.1611d487d1df6cb0/registry/events/ambassador/acmeclient.1611d4d75611dcd7/registry/events/ambassador/acmeclient.1611d4e362feb1b6/registry/events/ambassador/acmeclient.1611d53357ac8137/registry/events/ambassador/acmeclient.1611d53bd22dd4a2/registry/events/ambassador/acmeclient.1611d58c6fda74a4/registry/events/ambassador/acmeclient.1611d59770e65ef6/registry/events/ambassador/acmeclient.1611d5ed8b9bbdaa/registry/events/ambassador/acmeclient.1611d5f7bde30c2e/registry/events/ambassador/acmeclient.1611d648ce16e271/registry/events/ambassador/acmeclient.1611d6540f10c97c/registry/events/ambassador/acmeclient.1611d6a71f391f4f/registry/events/ambassador/acmeclient.1611d6b3387b89df/registry/events/ambassador/ambassador-557999754d-c9x75.1611a47290ea5cce/registry/events/ambassador/ambassador-557999754d-c9x75.1611a473b2092b90/registry/events/ambassador/ambassador-557999754d-c9x75.1611a474c7ee3eef/registry/events/ambassador/ambassador-557999754d-c9x75.1611a48b3d997657/registry/events/ambassador/kale.1611d421033db815/registry/events/ambassador/kale.1611d42a8f59d126/registry/events/ambassador/kale.1611d47c99f771ec/registry/events/ambassador/kale.1611d487d1c3addd/registry/events/ambassador/kale.1611d4d755f315c8/registry/events/ambassador/kale.1611d4e362d7ff0c/registry/events/ambassador/kale.1611d5335793f860/registry/events/ambassador/kale.1611d53bd1c28916/registry/events/ambassador/kale.1611d58c6f8ebc8d/registry/events/ambassador/kale.1611d59770e39acb/registry/events/ambassador/kale.1611d5ed8ae22866/registry/events/ambassador/kale.1611d5f7bd50574f/registry/events/ambassador/kale.1611d648ce038245/registry/events/ambassador/kale.1611d6540f3fefdf/registry/events/ambassador/kale.1611d6a71ea592ca/registry/events/ambassador/kale.1611d6b33778d9bd/registry/getambassador.io/authservices/ambassador/ambassador-edge-stack-auth/registry/getambassador.io/mappings/ambassador/ambassador-devportal/registry/getambassador.io/mappings/ambassador/ambassador-devportal-api/registry/getambassador.io/ratelimitservices/ambassador/ambassador-edge-stack-ratelimit/registry/leases/ambassador/acmeclient]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>ç½‘å…³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨nextcloudæ­å»ºä¸ªäººç½‘ç›˜]]></title>
    <url>%2F2020%2F%E8%BF%90%E7%BB%B4%2F%E7%94%A8nextcloud%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%9B%98%2F</url>
    <content type="text"><![CDATA[nextcloudnextcloudæ˜¯ä¸€ä¸ªç§æœ‰äº‘å­˜å‚¨ç½‘ç›˜é¡¹ç›®ï¼Œnextcloudæ˜¯owncloudçš„è¡ç”Ÿç‰ˆæœ¬ï¼Œ2016å¹´4æœˆ27æ—¥ï¼ŒownCloudè”åˆåˆ›å§‹äººFrank Karlitschekå®£å¸ƒç¦»å¼€ownCloud ltc.ï¼Œè½¬è€Œæˆç«‹å¦ä¸€å®¶å…¬å¸â€œNextcloudâ€ï¼Œç”±äºownCloudç¨‹åºæœ¬èº«å½’å…¶å¼€å‘äººå‘˜æ‰€æœ‰ï¼Œæ‰€ä»¥Nextcloudå¯ä»¥ç›´æ¥ä½¿ç”¨ownCloudçš„æ ¸å¿ƒæŠ€æœ¯ã€‚nextcloudå…·æœ‰å¼ºå¤§çš„æ‰©å±•æ€§ï¼ŒåŒæ—¶ä¸»æ‰“ a safe home for all your dataï¼Œæ‰€ä»¥åœ¨å®‰å…¨æ€§ä¸Šnextcloudä¹Ÿååˆ†å‡ºè‰²ã€‚ nextcloudå®‰è£…å‚è€ƒï¼šhttps://hub.docker.com/_/nextcloud/ nextcloudå®‰è£…æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç”¨dockeræ¥æ‹‰èµ·åº”ç”¨ï¼š12345678$ docker run -d \ -v nextcloud:/var/www/html \ -v apps:/var/www/html/custom_apps \ -v config:/var/www/html/config \ -v data:/var/www/html/data \ -v theme:/var/www/html/themes/&lt;YOUR_CUSTOM_THEME&gt; \ -p 8080:80 \ nextcloud nextcloudæ–‡ä»¶ç›®å½•è¯´æ˜ï¼š /var/www/htmlä¸»æ–‡ä»¶å¤¹ var/www/html/custom_appså®‰è£…å…¶ä»–åº”ç”¨APPçš„æ–‡ä»¶å¤¹ /var/www/html/configæœ¬åœ°é…ç½® /var/www/html/datanextcloudçš„å®é™…æ•°æ®å­˜å‚¨ /var/www/html/themes/ä¸»é¢˜ å¦‚æœé‡‡ç”¨é»˜è®¤çš„å½¢å¼å¯åŠ¨ï¼Œå…¶é»˜è®¤æ˜¯é‡‡ç”¨sqliteæ•°æ®åº“åšæ•°æ®çš„å­˜å‚¨ï¼Œå¦‚æœæƒ³ç”¨mysqlæˆ–PostgreSQLå¯ä»¥é€šè¿‡--linkçš„æ–¹å¼è¿æ¥ï¼Œå†è®¾ç½®å¯¹åº”çš„ç¯å¢ƒå˜é‡ï¼š SQLite: SQLITE_DATABASE æ•°æ®åº“åç§° MYSQL/MariaDB: MYSQL_DATABASE æ•°æ®åº“åç§° MYSQL_USER æ•°æ®åº“ç”¨æˆ·å MYSQL_PASSWORD æ•°æ®åº“å¯†ç  MYSQL_HOST æ•°æ®åº“æœåŠ¡å™¨åœ°å€ PostgreSQL: POSTGRES_DB Name æ•°æ®åº“åç§° POSTGRES_USER æ•°æ®åº“ç”¨æˆ·å POSTGRES_PASSWORD æ•°æ®åº“å¯†ç  POSTGRES_HOST æ•°æ®åº“æœåŠ¡å™¨åœ°å€ æ¯”å¦‚è¿æ¥ä¸€ä¸ªMySQL:1234567$ docker run -d \ -e MYSQL_DATABASE="nextcloud" \ -e MYSQL_USER="root" \ -e MYSQL_PASSWORD="123456" \ -e MYSQL_HOST="127.0.0.1:3306" \ -p 8080:80 \ nextcloud dockerè®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·åå¯†ç ï¼š NEXTCLOUD_ADMIN_USERç®¡ç†å‘˜ç”¨æˆ·å NEXTCLOUD_ADMIN_PASSWORDç®¡ç†å‘˜å¯†ç  å¦‚æœåœ¨å®‰è£…å¾—æ—¶å€™æ²¡è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰“å¼€ç•Œé¢å¾—æ—¶å€™ä¼šè®©ä½ è®¾ç½®ã€‚ nextcloud dockerè¿ç§»å¯ä»¥é‡‡ç”¨docker-composeçš„å½¢å¼éƒ¨ç½²ï¼Œå°†æ•°æ®å­˜åœ¨å®¹å™¨çš„æ•°æ®å·ä¸­ï¼Œ12345678910111213141516171819202122232425262728version: '2'volumes: nextcloud: db:services: db: image: mariadb command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW restart: always volumes: - db:/var/lib/mysql environment: - MYSQL_ROOT_PASSWORD= - MYSQL_PASSWORD= - MYSQL_DATABASE=nextcloud - MYSQL_USER=nextcloud app: image: nextcloud ports: - 8080:80 links: - db volumes: - nextcloud:/var/www/html restart: always åœ¨å®¹å™¨å‡çº§æˆ–è€…æ•°æ®è¿ç§»çš„æ—¶å€™ç›´æ¥é‡æ–°æ‹‰èµ·å³å¯:12$ docker-compose pull$ docker-compose up -d]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå°æŠ€å·§]]></title>
    <url>%2F2020%2F%E8%BF%90%E7%BB%B4%2Fgit%E5%B0%8F%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[åŸºç¡€æ¦‚å¿µä¸€ä¸ªæ–‡ä»¶ä»æ”¹åŠ¨åˆ°æäº¤åˆ° Git ä»“åº“ï¼Œéœ€è¦ç»å†ä¸‰ä¸ªçŠ¶æ€ï¼š å·¥ä½œåŒºï¼šå·¥ä½œåŒºæŒ‡çš„æ˜¯æˆ‘ä»¬æœ¬åœ°å·¥ä½œçš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨åˆšæ‰åˆ›å»ºçš„ hackers ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª readme æ–‡ä»¶ï¼Œreadme æ–‡ä»¶è¿™æ—¶åªæ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¿®æ”¹ï¼Œè¿˜æœªå­˜å‚¨åˆ° Gitã€‚ æš‚å­˜(ç´¢å¼•)åŒºï¼šæš‚å­˜å®é™…ä¸Šæ˜¯å°†æˆ‘ä»¬æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„æ”¹åŠ¨è½¬åŒ–ä¸º Git çš„å¯¹è±¡å­˜å‚¨çš„è¿‡ç¨‹ã€‚ ä»“åº“ï¼šgit commit åå°†æäº¤å¯¹è±¡å­˜å‚¨åˆ° Git ä»“åº“ã€‚ git stashåº”ç”¨åœºæ™¯ å½“æ­£åœ¨æŸä¸ªåˆ†æ”¯Aä¸Šå¼€å‘æŸä¸ªé¡¹ç›®ï¼Œè¿™æ—¶é¡¹ç›®ä¸­å‡ºç°ä¸€ä¸ªbugéœ€è¦ç´§æ€¥ä¿®å¤ï¼Œä½†æ˜¯æ­£åœ¨å¼€å‘çš„å†…å®¹åªæ˜¯å®Œæˆä¸€åŠè¿˜ä¸æƒ³æäº¤ï¼Œè¿™æ—¶git stashå‘½ä»¤å¯ä»¥å°†ä¿®æ”¹çš„å†…å®¹ä¿å­˜è‡³å †æ ˆåŒºï¼Œç­‰ä¿®å¤å®Œæˆåï¼Œå†æ¬¡åˆ‡å›åˆ°devåˆ†æ”¯ï¼Œä»å †æ ˆä¸­æ¢å¤åˆšåˆšä¿å­˜çš„å†…å®¹ã€‚ æƒ³æ¯”è¾ƒä¿®æ”¹æ–‡ä»¶éƒ¨åˆ†çš„æ€§èƒ½è¿›äº›æ¯”è¾ƒï¼Œä¸æƒ³å†æ‹·è´ä¸€ä»½æºç ï¼Œå¯ä»¥åˆ©ç”¨git stashè¿›äº›å¤šä¸ªç‰ˆæœ¬çš„åˆ‡æ¢è€Œä¸å¿…æäº¤ã€‚ æœ¬åº”è¯¥åœ¨devåˆ†æ”¯å¼€å‘çš„å†…å®¹ï¼Œå´åœ¨masterä¸Šè¿›è¡Œäº†å¼€å‘ï¼Œéœ€è¦é‡æ–°åˆ‡å›åˆ°devåˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¯ä»¥ç”¨git stashå°†å†…å®¹ä¿å­˜è‡³å †æ ˆä¸­ï¼Œåˆ‡å›åˆ°devåˆ†æ”¯åï¼Œå†æ¬¡æ¢å¤å†…å®¹å³å¯ã€‚ å‘½ä»¤å°†æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼ˆå·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼‰ä¿å­˜è‡³å †æ ˆä¸­ï¼Œå¯ç”¨äºåç»­æ¢å¤å½“å‰å·¥ä½œç›®å½•ã€‚ è¯•éªŒé¡¹ç›®ç›®å½•ï¼š12$ lsLICENSE test 1. æŠŠå½“å‰ä¿®æ”¹æ·»åŠ åˆ°ä¸´æ—¶å †æ ˆä¸­ï¼š123$ git stashSaved working directory and index state WIP on master: 454104b Initial commitHEAD is now at 454104b Initial commit æ³¨ï¼šå¦‚ä½•è¯¥æ–‡ä»¶æ˜¯æ–°æ·»åŠ çš„ï¼Œéœ€è¦git addå…ˆæ·»åŠ åˆ°æš‚å­˜åŒºã€‚ 2. æŠŠå½“å‰ä¿®æ”¹æ·»åŠ åˆ°ä¸´æ—¶å †æ ˆä¸­ï¼Œå¹¶å¯ä»¥é€šè¿‡saveå‘½å:123$ git stash save "fix test field"Saved working directory and index state On master: fix test fieldHEAD is now at 454104b Initial commit 3. æŸ¥çœ‹å½“å‰stashä¸­çš„å†…å®¹ï¼š12$ git stash liststash@&#123;0&#125;: On master: fix test field 4. å°†å½“å‰stashä¸­çš„å†…å®¹å¼¹å‡º(å¼¹å‡ºå†…å®¹ä¼šåˆ é™¤)ï¼Œå¹¶åº”ç”¨åˆ°å½“å‰åˆ†æ”¯å¯¹åº”çš„å·¥ä½œç›®å½•ä¸Šï¼š1$ git stash pop popé‡‡ç”¨çš„æ˜¯å…ˆè¿›åå‡º: 1234567891011121314151617181920212223$ git stash liststash@&#123;0&#125;: On master: add test2stash@&#123;1&#125;: On master: add test1stash@&#123;2&#125;: On master: add test$ git stash pop# On branch master# Changes not staged for commit:# (use "git add &lt;file&gt;..." to update what will be committed)# (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)## modified: LICENSE## Untracked files:# (use "git add &lt;file&gt;..." to include in what will be committed)## testno changes added to commit (use "git add" and/or "git commit -a")Dropped refs/stash@&#123;0&#125; (ea8db073e65ab6d9cad25609838a7f2e49c011a9)$ git stash liststash@&#123;0&#125;: On master: add test1stash@&#123;1&#125;: On master: add test 5. å †æ ˆä¸­çš„å†…å®¹åº”ç”¨åˆ°å½“å‰ç›®å½•ï¼Œè€Œä¸åˆ é™¤ï¼š ä½¿ç”¨applyï¼š12345678910111213$ git stash apply stash@&#123;1&#125;# On branch master# Changes not staged for commit:# (use "git add &lt;file&gt;..." to update what will be committed)# (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)## modified: LICENSE## Untracked files:# (use "git add &lt;file&gt;..." to include in what will be committed)## testno changes added to commit (use "git add" and/or "git commit -a") 6. æ¸…é™¤å †æ ˆä¸­çš„æ‰€æœ‰å†…å®¹:1$ git stash clear 7. ä»å †æ ˆä¸­ç§»é™¤æŸä¸ªæŒ‡å®šçš„stash: 1234567891011$ git stash liststash@&#123;0&#125;: WIP on master: 454104b Initial commitstash@&#123;1&#125;: On master: add test1stash@&#123;2&#125;: On master: add test$ git stash drop stash@&#123;1&#125;Dropped stash@&#123;1&#125; (e998224cb579b6a8ae44795abf40b7658a90d487)$ git stash liststash@&#123;0&#125;: WIP on master: 454104b Initial commitstash@&#123;1&#125;: On master: add test æŸ¥çœ‹å †æ ˆä¸­æœ€æ–°ä¿å­˜çš„stashå’Œå½“å‰ç›®å½•çš„å·®å¼‚:123$ git stash show LICENSE | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-) git commit â€“amendåº”ç”¨åœºæ™¯åœ¨commitä¹‹åå‘ç°å‘ç°æ¼æ‰äº†å‡ ä¸ªæ–‡ä»¶æ²¡æœ‰æ·»åŠ ï¼Œæˆ–è€…æäº¤ä¿¡æ¯å†™é”™ï¼Œå¯ä»¥ç”¨--amendä¿®æ”¹å¹¶é‡æ–°æäº¤ã€‚ å‘½ä»¤æ¯”å¦‚ï¼š123$ git commit -m 'initial commit'$ git add forgotten_file$ git commit --amend æ³¨ï¼šå½“ä½ åœ¨ä¿®è¡¥æœ€åçš„æäº¤æ—¶ï¼Œå¹¶ä¸æ˜¯é€šè¿‡ç”¨æ”¹è¿›åçš„æäº¤ åŸä½æ›¿æ¢ æ‰æ—§æœ‰æäº¤çš„æ–¹å¼æ¥ä¿®å¤çš„ï¼Œ ç†è§£è¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚ä»æ•ˆæœä¸Šæ¥è¯´ï¼Œå°±åƒæ˜¯æ—§æœ‰çš„æäº¤ä»æœªå­˜åœ¨è¿‡ä¸€æ ·ï¼Œå®ƒå¹¶ä¸ä¼šå‡ºç°åœ¨ä»“åº“çš„å†å²ä¸­ã€‚åœ¨ Git ä¸­ä»»ä½• commit çš„ä¸œè¥¿å‡ ä¹æ€»æ˜¯å¯ä»¥æ¢å¤çš„ï¼Œé‚£äº›è¢«åˆ é™¤çš„åˆ†æ”¯ä¸­çš„æäº¤æˆ–ä½¿ç”¨ â€“amend é€‰é¡¹è¦†ç›–çš„æäº¤ä¹Ÿå¯ä»¥æ¢å¤ åœºæ™¯ï¼š1234567$ git status# On branch master# Changes to be committed:# (use "git reset HEAD &lt;file&gt;..." to unstage)## new file: test# å¦‚æœæ·»åŠ é”™äº†ä¸€ä¸ªä¿®æ”¹åˆ°æš‚å­˜åŒºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡git reset HEADçš„æ–¹å¼é‡ç½®ï¼š12345678$ git reset HEAD test$ git status# On branch master# Untracked files:# (use "git add &lt;file&gt;..." to include in what will be committed)## testnothing added to commit but untracked files present (use "git add" to track) æ³¨æ„ï¼šè¯·åŠ¡å¿…è®°å¾— git checkout -- &lt;file&gt; æ˜¯ä¸€ä¸ªå±é™©çš„å‘½ä»¤ã€‚ ä½ å¯¹é‚£ä¸ªæ–‡ä»¶åœ¨æœ¬åœ°çš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šæ¶ˆå¤±â€”â€”Git ä¼šç”¨æœ€è¿‘æäº¤çš„ç‰ˆæœ¬è¦†ç›–æ‰å®ƒã€‚ é™¤éä½ ç¡®å®æ¸…æ¥šä¸æƒ³è¦å¯¹é‚£ä¸ªæ–‡ä»¶çš„æœ¬åœ°ä¿®æ”¹äº†ï¼Œå¦åˆ™è¯·ä¸è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerç£ç›˜ç©ºé—´ç®¡ç†]]></title>
    <url>%2F2020%2F%E8%BF%90%E7%BB%B4%2Fdocker%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[docker å®¹å™¨ç£ç›˜ç©ºé—´ç®¡ç†docker ä¸»è¦åŒ…æ‹¬é•œåƒã€å®¹å™¨å’Œæ•°æ®å·ä¸‰éƒ¨åˆ†ï¼Œå¯¹dockerçš„ç£ç›˜ç©ºé—´ç®¡ç†ä¹Ÿä¸»è¦ä»ç€ä¸‰å—å…¥æ‰‹ï¼Œåœ¨åšdockerç£ç›˜ç©ºé—´åˆ†æä¹‹å‰æˆ‘ä»¬éœ€è¦ç®€å•äº†è§£ä¸‹å®¹å™¨çš„â€œé•œåƒå±‚â€çš„æ¦‚å¿µï¼Œä¸€èˆ¬å®¹å™¨çš„ç£ç›˜ç®¡ç†æœ‰ä¸€å¤§åŠæ˜¯é•œåƒå±‚ç›¸å…³ï¼š ä»€ä¹ˆæ˜¯é•œåƒå±‚? è¯´åˆ°é•œåƒçš„å±‚ï¼Œå°±è¦è¯´è¯´Dockeré•œåƒçš„å­˜å‚¨ç»„ç»‡æ–¹å¼docker é•œåƒæ˜¯é‡‡ç”¨åˆ†å±‚çš„æ–¹å¼æ„å»ºçš„ï¼Œæ¯ä¸ªé•œåƒéƒ½ç”±ä¸€ç³»åˆ—çš„ â€œé•œåƒå±‚â€ ç»„æˆã€‚â€é•œåƒå±‚â€ç”¨æ¥å­˜å‚¨ä¸€ç»„é•œåƒç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä¸»è¦åŒ…æ‹¬é•œåƒçš„æ¶æ„(å¦‚ amd64)ã€é•œåƒé»˜è®¤é…ç½®ä¿¡æ¯ã€æ„å»ºé•œåƒçš„å®¹å™¨é…ç½®ä¿¡æ¯ã€åŒ…å«æ‰€æœ‰é•œåƒå±‚ä¿¡æ¯çš„ rootfsã€‚å½“éœ€è¦ä¿®æ”¹å®¹å™¨é•œåƒå†…çš„æŸä¸ªæ–‡ä»¶æ—¶ï¼Œdocker åˆ©ç”¨ rootfs ä¸­çš„ diff_id è®¡ç®—å‡ºå†…å®¹å¯»å€çš„ç´¢å¼•(chainID) æ¥è·å– layer ç›¸å…³ä¿¡æ¯ï¼Œè¿›è€Œè·å–æ¯ä¸€ä¸ªé•œåƒå±‚çš„æ–‡ä»¶å†…å®¹ï¼Œå®¹å™¨å¯¹é•œåƒçš„ä¿®æ”¹åªå¯¹å¤„äºæœ€ä¸Šæ–¹çš„è¯»å†™å±‚è¿›è¡Œå˜åŠ¨ï¼Œä¸è¦†å†™ä¸‹å±‚å·²æœ‰æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ï¼Œå·²æœ‰æ–‡ä»¶åœ¨åªè¯»å±‚ä¸­çš„åŸå§‹ç‰ˆæœ¬ä»ç„¶å­˜åœ¨ï¼Œä½†ä¼šè¢«è¯»å†™å±‚ä¸­çš„æ–°ç‰ˆæœ¬æ‰€éšè—ã€‚åœ¨å¤šä¸ªå®¹å™¨ä¹‹é—´å…±äº«é•œåƒï¼Œæ¯ä¸ªå®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™å¹¶ä¸éœ€è¦å•ç‹¬å¤åˆ¶ä¸€ä»½é•œåƒæ–‡ä»¶ï¼Œè€Œæ˜¯å°†æ‰€æœ‰é•œåƒå±‚ä»¥åªè¯»çš„æ–¹å¼æŒ‚è½½åˆ°ä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå†åœ¨ä¸Šé¢è¦†ç›–ä¸€ä¸ªå¯è¯»å†™çš„å®¹å™¨å±‚ã€‚è”åˆæŒ‚è½½æŠ€æœ¯å¯ä»¥åœ¨ä¸€ä¸ªæŒ‚è½½ç‚¹åŒæ—¶æŒ‚è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå°†æŒ‚è½½ç‚¹çš„åŸç›®å½•ä¸è¢«æŒ‚è½½å†…å®¹è¿›è¡Œæ•´åˆï¼Œä½¿å¾—æœ€ç»ˆå¯è§çš„æ–‡ä»¶ç³»ç»Ÿå°†ä¼šåŒ…å«æ•´åˆä¹‹åçš„å„å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚è”åˆæŒ‚è½½åŒ…æ‹¬å¯è¯»å†™éƒ¨åˆ†(read-write layer ä»¥åŠ volumes)ã€init-layerã€åªè¯»å±‚(read-only layer) è¿™ 3 éƒ¨åˆ†ç»“æ„ã€‚ layer(é•œåƒå±‚) æ˜¯ docker ç”¨æ¥ç®¡ç†é•œåƒå±‚çš„ä¸€ä¸ªä¸­é—´æ¦‚å¿µï¼Œé•œåƒæ˜¯ç”±é•œåƒå±‚ç»„æˆçš„ï¼Œè€Œå•ä¸ªé•œåƒå±‚å¯èƒ½è¢«å¤šä¸ªé•œåƒå…±äº«ï¼Œæ‰€ä»¥ docker å°† layer ä¸ image çš„æ¦‚å¿µåˆ†ç¦»ã€‚docker é•œåƒç®¡ç†ä¸­çš„ layer ä¸»è¦å­˜æ”¾äº†é•œåƒå±‚çš„ diff_idã€sizeã€cache-id å’Œ parent ç­‰å†…å®¹ã€‚ dockersç£ç›˜ä½¿ç”¨ç©ºé—´åˆ†ææŸ¥çœ‹dockerç›®å½•ç©ºé—´ä»dockerç›®å½•çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š123456789101112131415$ cd /var/lib/docker$ du -h --max-depth=11.1G ./containers0 ./plugins213G ./overlay228M ./image798M ./volumes0 ./trust116K ./network0 ./swarm16K ./builder56K ./buildkit0 ./tmp0 ./runtimes215G . å¯ä»¥çœ‹å‡ºç£ç›˜ä¸»è¦å ç”¨éƒ½åœ¨overlay2å’Œcontainersè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œcontainersæ˜¯å®¹å™¨è¿è¡Œæ—¶æ‰€äº§ç”Ÿçš„æ–‡ä»¶è¯»å†™å˜æ›´ï¼Œoverlay2æ˜¯å®¹å™¨é•œåƒçš„å±‚çš„æ¦‚å¿µã€‚ è¿›åˆ°overlay2ç»§ç»­æ’æŸ¥:1234$ du -h --max-depth=1...196G ./a8f42e1ae9982a4b373d310a9ea1ee08b2d0c571c3757c07f909735c1632f0d7... å‘ç°å…¶ä¸­ä¸€ä¸ªç›®å½•å°±å ç”¨äº†è¿‘200å¤šGï¼Œå¦¥å¦¥çš„å¤§å¤´ï¼Œçœ‹çœ‹å…·ä½“æ˜¯å“ªä¸ªå®¹å™¨ï¼š12345import osoverlay = "a8f42e1ae9982a4b373d310a9ea1ee08b2d0c571c3757c07f909735c1632f0d7"names = [line.split(" ")[-1] for line in os.popen("docker ps -a").read().split("\n") if line ]print([name for name in names[1:] if overlay in os.popen("docker inspect %s"%name).read()])# è¿”å›ç»“æœ: ['livego'] æ‰¾åˆ°æœ€å¤§çš„å…ƒå‡¶å®¹å™¨äº†ï¼Œlivegoæ˜¯ä¹‹å‰åšå¾—ä¸€ä¸ªç›´æ’­åº”ç”¨ï¼Œå› ä¸ºå½“æ—¶åªæ˜¯ä½œä¸ºè¯•éªŒå®¹å™¨ï¼Œæ²¡æœ‰é€‰æ‹©å¤–æŒ‚çš„å½¢å¼ï¼Œå› æ­¤å®¹å™¨ç©ºé—´å¾ˆå¤§ï¼Œç°åœ¨å·²ç»æ²¡ä»€ä¹ˆç”¨äº†ï¼Œå¯ä»¥ç›´æ¥åˆ æ‰:1docker rm -f livego ç£ç›˜ä½¿ç”¨ç©ºé—´èµ„æºé‡Šæ”¾é™¤äº†ç›´æ¥æŸ¥çœ‹dockerç›®å½•ï¼Œè¿˜å¯ä»¥é€šè¿‡docker systemå‘½ä»¤æŸ¥çœ‹å„ç±»èµ„æºä½¿ç”¨çŠ¶å†µï¼š 123456$ docker system dfTYPE TOTAL ACTIVE SIZE RECLAIMABLEImages 34 21 9.211GB 4.939GB (53%)Containers 50 28 13.24MB 12.01MB (90%)Local Volumes 11 5 836.2MB 754.5MB (90%)Build Cache 0 0 0B 0B æœ€åä¸€åˆ—è¡¨ç¤ºå¯å›æ”¶çš„æ¯”ä¾‹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰éƒ¨åˆ†é•œåƒã€å®¹å™¨å’Œå·å¯ä»¥å›æ”¶äº†ï¼Œä¸€èˆ¬æ˜¯è¿™äº›èµ„æºæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€ä¸ªå»æŸ¥çœ‹:1234567891011121314151617181920212223242526272829$ docker system df -vImages space usage:REPOSITORY TAG IMAGE ID CREATED SIZE SHARED SIZE UNIQUE SIZE CONTAINERSiotorbhub_iotorbbec latest 9e80c675d506 13 days ago 1.023GB 802.9MB 220MB 1iotorbhub_iot-web latest 3e6100128e21 13 days ago 1.501GB 908.1MB 592.5MB 1nginx latest 6678c7c2e56c 2 weeks ago 126.8MB 69.21MB 57.56MB 1golang 1.13 3a7408f53f79 3 weeks ago 802.9MB 802.9MB ...Containers space usage:CONTAINER ID IMAGE COMMAND LOCAL VOLUMES SIZE CREATED STATUS NAMES2cb435f35f36 rancher/pause:3.1 "/pause" 0 0B 38 seconds ago Created k8s_POD_default-http-backend-67cf578fc4-rhpkv_ingress-nginx_8d427371-c7c4-44fa-9b5e-745b4fea3dbc_13474a58df48bb9cc jenkins "/bin/tini -- /usr/lâ€¦" 1 0B 47 hours ago Created loving_mcleanbe40bd464972 redis "docker-entrypoint.sâ€¦" 1 0B 11 days ago Up 11 days suspicious_spencea365e2d14c35 nginx "nginx -g 'daemon ofâ€¦" 1 2B 13 days ago Up 13 days iotorbhub_nginx_1...Local Volumes space usage:VOLUME NAME LINKS SIZE33f5c1809964242a82a70a8e8fddaadc413b593be5c4310a5022a52c29917fd7 0 174.1MB70451b6e13e2584f5174cca6d0b30e6e143015d8cbb16160eedfbb1d7b88684a 0 25.27MB9544fd226986dd7d1921b63927072fbf8634847f524326c713505ab74874cde4 1 120B9fef3da76c45dfcba85359ddf1684ac6c9347ba99ab61be05796f5151cd43306 0 41.43MB... ä¹Ÿå¯ä»¥é€šè¿‡docker system pruneçš„å‘½ä»¤ä¸€é”®æ¸…ç†ï¼š1234567891011$ docker system prune --helpUsage: docker system prune [OPTIONS]Remove unused dataOptions: -a, --all Remove all unused images not just dangling ones --filter filter Provide filter values (e.g. 'label=&lt;key&gt;=&lt;value&gt;') -f, --force Do not prompt for confirmation --volumes Prune volumes å†çœ‹çœ‹ï¼š123456$ docker system dfTYPE TOTAL ACTIVE SIZE RECLAIMABLEImages 15 15 3.712GB 71.03MB (1%)Containers 28 28 1.234MB 0B (0%)Local Volumes 11 3 836.2MB 779.8MB (93%)Build Cache 0 0 0B 0B å‘ç°é•œåƒå’Œå®¹å™¨ç©ºé—´éƒ½è¢«é‡Šæ”¾äº†ã€‚ docker é•œåƒç²¾ç®€é™¤äº†å¯¹å·²æœ‰è¿è¡Œç³»ç»Ÿè¿›è¡Œå®¹å™¨ç£ç›˜ç©ºé—´ç®¡ç†å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨é•œåƒçš„æºå¤´è¿›è¡Œç£ç›˜ç©ºé—´çš„ç®¡ç†å·¥ä½œï¼š é€‰æ‹©å°ä½“ç§¯åŸºç¡€é•œåƒdocker é•œåƒç²¾ç®€æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç”¨alpineä½œä¸ºåº•å±‚åŸºç¡€é•œåƒï¼Œåƒ alphine é•œåƒ åªæœ‰ 5MBï¼Œæ˜¯éå¸¸å°çš„ã€‚æˆ–è€…å¯ä»¥ç”¨å¸¦ -slim æ ‡ç­¾çš„é•œåƒï¼Œä¸€èˆ¬è¿™ç±»é•œåƒæ˜¯é€šè¿‡ç˜¦èº«çš„ï¼Œé•œåƒçš„ä½“ç§¯ä¼šæ¯”è¾ƒå°ã€‚ å‡å°‘RUNã€ADDã€COPYä¼šæ”¹å˜å®¹å™¨Layerçš„å‘½ä»¤æ¯ä¸ªé•œåƒéƒ½ç”±ä¸€ç³»åˆ—çš„ â€œé•œåƒå±‚â€ ç»„æˆï¼Œæ¯æ¬¡å¯¹æ–‡ä»¶çš„æ”¹åŠ¨å‘½ä»¤ï¼ˆRUNã€ADDã€COPYï¼‰éƒ½ä¼šè¢«æäº¤åˆ°ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥åº”è¯¥å°½é‡å‡å°‘è¿™äº›å‘½ä»¤çš„ä½¿ç”¨ï¼Œæ¯”å¦‚å¤šä¸ªRUNå¯ä»¥ç”¨&amp;&amp;åˆå¹¶ã€‚ å¯¹äºé•œåƒå±‚æ˜¯å¦å¯ä»¥ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡docker historyå‘½ä»¤æŸ¥çœ‹é•œåƒå„å±‚çš„æ„å»ºï¼š1234567891011121314151617$ docker history shikanon.com/hyperkube:v1.16.6-rancher1IMAGE CREATED CREATED BY SIZE COMMENT4c20a23643b7 2 months ago /bin/sh -c #(nop) LABEL org.label-schema.vcâ€¦ 0B &lt;missing&gt; 2 months ago /bin/sh -c #(nop) LABEL org.label-schema.vcâ€¦ 0B &lt;missing&gt; 2 months ago /bin/sh -c #(nop) LABEL org.label-schema.scâ€¦ 0B &lt;missing&gt; 2 months ago /bin/sh -c #(nop) LABEL org.label-schema.buâ€¦ 0B &lt;missing&gt; 2 months ago /bin/sh -c echo "deb http://deb.debian.org/dâ€¦ 17.4MB &lt;missing&gt; 2 months ago /bin/sh -c sed -i -e 's!\bmain\b!main contriâ€¦ 608MB &lt;missing&gt; 2 months ago /bin/sh -c #(nop) COPY file:0fce35cc22ae9eaeâ€¦ 152MB &lt;missing&gt; 13 months ago /bin/sh -c #(nop) COPY dir:2245a63ce7eafa5c8â€¦ 45.9MB &lt;missing&gt; 13 months ago /bin/sh -c echo b3a101b3-deba-49a1-afe2-d42dâ€¦ 303MB &lt;missing&gt; 13 months ago /bin/sh -c DEBIAN_FRONTEND=noninteractive dpâ€¦ 9.55kB &lt;missing&gt; 13 months ago /bin/sh -c echo "dash dash/sh boolean false"â€¦ 282B &lt;missing&gt; 13 months ago /bin/sh -c echo b3a101b3-deba-49a1-afe2-d42dâ€¦ 1.49MB &lt;missing&gt; 13 months ago /bin/sh -c ln -s /hyperkube /apiserver &amp;&amp; lâ€¦ 140B &lt;missing&gt; 13 months ago /bin/sh -c #(nop) CMD ["/bin/sh"] 0B &lt;missing&gt; 13 months ago /bin/sh -c #(nop) ADD file:813b8c3d7b7496f29â€¦ 42.3MB åˆ©ç”¨FROM AS å’Œ COPY å®ç°ç¼–è¯‘é˜¶æ®µå’Œä»£ç é˜¶æ®µåˆ†ç¦»Docker 17.05ç‰ˆæœ¬ä»¥åæä¾›äº†COPY --fromçš„è¯­æ³•ï¼Œä»–æä¾›äº†ä»é•œåƒå±‚ä¸­ç›´æ¥æ‹·è´æ–‡ä»¶ï¼š 1234567891011121314# å°† ç¼–è¯‘é˜¶æ®µ å‘½åä¸º builderFROM golang:1.10.3 as builder # ç¼–è¯‘çš„å„ç±»æŒ‡ä»¤ADD . /app RUN go build /app/main.go... # è¿è¡Œé˜¶æ®µ# å¤šä¸ª FROM ä¼šä»¥æœ€åä¸€æ¡ FROM ä¸ºå‡†ï¼Œä¹‹å‰çš„ FROM ä¼šè¢«æŠ›å¼ƒFROM scratch # ä»ç¼–è¯‘é˜¶æ®µçš„ä¸­æ‹·è´ç¼–è¯‘ç»“æœåˆ°å½“å‰é•œåƒä¸­COPY --from=builder /build/server / COPY â€“from ä¸ä½†å¯ä»¥ä»å‰ç½®é˜¶æ®µä¸­æ‹·è´ï¼Œè¿˜å¯ä»¥ç›´æ¥ä»ä¸€ä¸ªå·²ç»å­˜åœ¨çš„é•œåƒä¸­æ‹·è´ï¼Œä¾‹å¦‚ï¼š1COPY --from=quay.io/coreos/etcd:v3.3.9 /usr/local/bin/etcd /usr/local/bin/ è¿™æ ·æœ€åè¿è¡Œçš„åªæœ‰äºŒè¿›åˆ¶è€Œæ²¡æœ‰ç¼–è¯‘é˜¶æ®µçš„ä»£ç æ–‡ä»¶ï¼Œå®¹å™¨ä½“ç§¯ä¼šç¼©å°å¾ˆå¤šã€‚ å€ŸåŠ©distrolesså€ŸåŠ©é•œåƒå·¥å…· distroless å‡å°‘é•œåƒç§ä¸å¿…è¦çš„ä¾èµ–ï¼Œdistroless æ˜¯ google å¼€æ”¾çš„ä¼˜åŒ–ç‰ˆå®¹å™¨é•œåƒï¼Œ â€œdistrolessâ€é•œåƒä»…åŒ…å«äº†åº”ç”¨å’Œè¿è¡Œæ—¶ä¾èµ–ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>Dokcer</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>Docker</tag>
        <tag>å®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»å…¸å…±è¯†ç®—æ³•è§£è¯»: raft & paxos]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2F%E4%B8%80%E8%87%B4%E6%80%A7%E7%AE%97%E6%B3%95%E8%A7%A3%E8%AF%BB-raft-paxos%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ä¸€è‡´æ€§(consensus)ä¸€è‡´æ€§(consensus)ï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œå°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¿è¯å„èŠ‚ç‚¹ä¸Šçš„æ•°æ®ä¿æŒä¸€è‡´ã€‚ä¸€è‡´æ€§æ˜¯CAPç†è®ºçš„é‡è¦ä¸€ç¯ï¼Œå¦‚æœæƒ³äº†è§£CAPç†è®ºï¼Œå¯ä»¥å‚è€ƒCAPç®€æ˜“ç†è§£ä¸€æ–‡ã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„ä¸€ç³»åˆ—é—®é¢˜ï¼š performance -&gt; sharding sharding -&gt; failed tolerance tolerance -&gt; replication replication -&gt; inconsistency consistency -&gt; low performance RaftRaft æ”¾åœ¨å‰é¢ï¼Œå› ä¸ºå­¦ä¹ é€‚åˆä»ç®€å•å¼€å§‹ï¼Œraftçš„èµ„æ–™ä¹Ÿæ›´å……è¶³äº›ï¼Œå¯ä»¥å¸®åŠ©ç†è§£ã€‚ RaftåŠ¨æ€å›¾è§£ï¼š Raftå¯ä»¥åˆ†ä¸º Leader Election å’Œ Log Replication ä¸¤ä¸ªé˜¶æ®µã€‚ å„é˜¶æ®µçš„æƒ…å†µ]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿæ¶æ„</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¶æ„</tag>
        <tag>ä¸€è‡´æ€§</tag>
        <tag>å…±è¯†ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èŠèŠäº‘åŸç”Ÿçš„é‚£äº›äº‹]]></title>
    <url>%2F2020%2F%E6%BC%94%E8%AE%B2%2F%E8%81%8A%E8%81%8A%E4%BA%91%E5%8E%9F%E7%94%9F%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%2F</url>
    <content type="text"><![CDATA[å¤§å®¶å¥½,ä»Šå¤©å’Œå¤§å®¶èŠèŠäº‘åŸç”Ÿ,ç›¸ä¿¡è¿™ä¸ªè¯å¤§å®¶åº”è¯¥æˆ–å¤šæˆ–å°‘éƒ½å¬è¿‡, é‚£ä¹ˆä»€ä¹ˆæ˜¯äº‘åŸç”Ÿè®¡ç®—å‘¢?äº‘åŸç”ŸæŠ€æœ¯å¾—æŠ€æœ¯æ ˆæœ‰å“ªäº›å‘¢? ä¸‹é¢ä¸»è¦ä»ä»¥ä¸‹ä¸‰ä¸ªä¸»é¢˜æ¥èŠèŠä»Šå¤©å¾—è¯é¢˜, ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿ, äº‘åŸç”Ÿå¾—å‘å±•å²å’Œäº‘åŸç”Ÿå¾—ç”Ÿæ€åœˆã€‚ äº‘åŸç”Ÿçš„æ¦‚å¿µæœ€æ—©å¼€å§‹äº2010å¹´ï¼Œåœ¨å½“æ—¶ Paul Fremantle çš„ä¸€ç¯‡åšå®¢ä¸­è¢«æåŠï¼Œä»–ä¸»è¦å°†å…¶æè¿°ä¸ºä¸€ç§å’Œäº‘ä¸€æ ·çš„ç³»ç»Ÿè¡Œä¸ºçš„åº”ç”¨çš„ç¼–å†™ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼çš„ã€æ¾æ•£çš„ã€è‡ªæœåŠ¡çš„ã€æŒç»­éƒ¨ç½²ä¸æµ‹è¯•çš„ã€‚å½“æ—¶æå‡ºäº‘åŸç”Ÿæ˜¯ä¸ºäº†èƒ½æ„å»ºä¸€ç§ç¬¦åˆäº‘è®¡ç®—ç‰¹æ€§çš„æ ‡å‡†æ¥æŒ‡å¯¼äº‘è®¡ç®—åº”ç”¨çš„ç¼–å†™ã€‚åæ¥åˆ°2013å¹´ Matt Stineåœ¨æ¨ç‰¹ä¸Šè¿…é€Ÿæ¨å¹¿äº‘åŸç”Ÿæ¦‚å¿µï¼Œå¹¶åœ¨2015å¹´ã€Šè¿ç§»åˆ°äº‘åŸç”Ÿæ¶æ„ã€‹ä¸€ä¹¦ä¸­å®šä¹‰äº†ç¬¦åˆäº‘åŸç”Ÿæ¶æ„çš„ç‰¹å¾ï¼š12å› ç´ ã€å¾®æœåŠ¡ã€è‡ªæœåŠ¡ã€åŸºäºAPIåä½œã€æ‰›è„†å¼±æ€§ã€‚è€Œç”±äºè¿™æœ¬ä¹¦çš„æ¨å¹¿ç•…é”€ï¼Œè¿™ä¹Ÿæˆäº†å¾ˆå¤šäººå¯¹äº‘åŸç”Ÿçš„æ—© CNCFå¾—å®šä¹‰æ€»ç»“ä¸€ä¸‹å°±æ˜¯:ï¼ˆ1ï¼‰åŸºäºå®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼APIæ„å»ºçš„å¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ï¼›ï¼ˆ2ï¼‰åŸºäºè‡ªåŠ¨åŒ–æŠ€æœ¯æ„å»ºå…·å¤‡é«˜å®¹é”™æ€§ã€æ˜“ç®¡ç†å’Œä¾¿äºè§‚å¯Ÿçš„æ¾è€¦åˆç³»ç»Ÿï¼›ï¼ˆ3ï¼‰æ„å»ºä¸€ä¸ªç»Ÿä¸€çš„å¼€æºäº‘æŠ€æœ¯ç”Ÿæ€ï¼Œèƒ½å’Œäº‘å‚å•†æä¾›çš„æœåŠ¡è§£è€¦ï¼Œå¯ä»¥çœ‹å‡ºè¿™ä¸€é˜¶æ®µCNCFå¯¹äº‘åŸç”Ÿçš„å®šä¹‰åŠ ä¸ŠæœåŠ¡ç½‘æ ¼å’Œå£°æ˜å¼APIï¼ŒåŒæ—¶ä¸ºè¿™ä¸€æ¦‚å¿µé˜è¿°æ›´æ·±ä¸€å±‚çš„æ„ä¹‰ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹ä¸€ä¸ªç»Ÿä¸€ä¸­ç«‹çš„å¼€æºäº‘ç”Ÿæ€ï¼ˆè‡³äºæ˜¯å¦ä¸­ç«‹å˜›è¿™é‡Œå°±ä¸è°ˆäº†:ï¼‰ã€‚è¿™å¯¹äº‘åŸç”Ÿçš„ç”Ÿæ€å®šä½ä¼šæ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œä¹Ÿç®—CNCFæœ€åˆæˆç«‹çš„å®—æ—¨ä¹‹ä¸€å§ï¼Œæ‰“ç ´äº‘å·¨å¤´çš„å„æ–­ã€‚ ä¸ºä»€ä¹ˆç”¨â€œè§£æ„â€ï¼Ÿ è§£æ„ï¼Œæˆ–è¯‘ä¸ºâ€œç»“æ„åˆ†è§£â€ï¼Œæ˜¯åç»“æ„ä¸»ä¹‰æå‡ºçš„ä¸€ç§æ‰¹è¯„æ–¹æ³•ã€‚æ˜¯è§£æ„ä¸»ä¹‰è€…å¾·é‡Œè¾¾çš„ä¸€ä¸ªæœ¯è¯­ã€‚â€œè§£æ„â€æ¦‚å¿µæºäºæµ·å¾·æ ¼å°”ã€Šå­˜åœ¨ä¸æ—¶é—´ã€‹ä¸­çš„â€œdeconstructionâ€ä¸€è¯ï¼ŒåŸæ„ä¸ºåˆ†è§£ã€æ¶ˆè§£ã€æ‹†è§£ã€æ­ç¤ºç­‰ï¼Œå¾·é‡Œè¾¾åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¡¥å……äº†â€œæ¶ˆé™¤â€ã€â€œåç§¯æ·€â€ã€â€œé—®é¢˜åŒ–â€ç­‰æ„æ€ã€‚è¿™é‡Œæ˜¯æ‰“ç®—ç”¨è§£æ„å¾—æ€æƒ³ç»™å¤§å®¶æ¥åˆ†æä¸‹â€œäº‘åŸç”Ÿâ€å¾—ç†è§£ï¼š Cloud Nativeï¼Œä»è¯é¢ä¸Šæ‹†è§£å…¶å®å°±æ˜¯ Cloud å’Œ Nativeï¼Œä¹Ÿå°±æ˜¯äº‘è®¡ç®—å’ŒåœŸè‘—çš„æ„æ€â€”â€”äº‘è®¡ç®—ä¸Šçš„åŸç”Ÿå±…æ°‘ï¼Œå³å¤©ç”Ÿå…·å¤‡äº‘è®¡ç®—çš„äº²å’ŒåŠ›ã€‚é‚£æ€ä¹ˆç†è§£â€œäº‘çš„åŸç”Ÿå±…æ°‘â€å‘¢ï¼Ÿé¦–å…ˆä»äº‘çš„è§’åº¦æ¥ç†è§£ï¼Œäº‘æœ¬è´¨å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§æä¾›ç¨³å®šè®¡ç®—å­˜å‚¨èµ„æºçš„å¯¹è±¡ï¼Œä¸ºäº†å®ç°è¿™ç‚¹ï¼Œåƒè™šæ‹ŸåŒ–ã€å¼¹æ€§æ‰©å±•ã€é«˜å¯ç”¨ã€é«˜å®¹é”™æ€§ã€è‡ªæ¢å¤è¿™äº›éƒ½æ˜¯äº‘çš„åŸºæœ¬å±æ€§ï¼Œäº‘åŸç”Ÿä½œä¸ºä¸€ç§äº‘è®¡ç®—ï¼Œè¿™æ˜¯æ‰€å…·å¤‡çš„ç¬¬ä¸€å±‚å«ä¹‰ã€‚ç¬¬äºŒå±‚è¦ä» Native æ¥çœ‹ï¼Œäº‘åŸç”Ÿå’Œä¼ ç»Ÿçš„åœ¨äº‘ä¸Šè·‘çš„åº”ç”¨æ˜¯ä¸åŒã€‚æ¯”å¦‚ä¸€äº›åŸºäºå…¬æœ‰äº‘æ­å»ºçš„åº”ç”¨ï¼Œæ˜¯åŸºäºä¼ ç»Ÿçš„SOAæ¶æ„æ¥æ­å»ºçš„ï¼Œç„¶åå†ç§»æ¤åˆ°äº‘ä¸Šå»è¿è¡Œï¼Œé‚£ä¹ˆä»–å’Œäº‘å¾—æ•´åˆæ˜¯éå¸¸ä½å¾—ã€‚ ä¸ºä»€ä¹ˆä½å‘¢ï¼Ÿäº‘ä½œä¸ºä¸€ç§åˆ†å¸ƒå¼æ¶æ„ï¼Œå…¶â€œåœŸè‘—å±…æ°‘â€ä¹Ÿåº”è¯¥æ˜¯åŸºäºåˆ†å¸ƒå¼æ¶æ„è®¾è®¡å‡ºæ¥å¾—ï¼Œè€Œå¾®æœåŠ¡æˆ–è€…Serverlessè¿™ç§å°†æœåŠ¡æˆ–å‡½æ•°æ‹†åˆ†æˆä¸€ä¸ªä¸ªæ¨¡å—çš„æ¾è€¦åˆç³»ç»Ÿå¤©ç„¶å°±å…·å¤‡åˆ†å¸ƒå¼è®¾è®¡å¾—å±æ€§ã€‚è¿™æ˜¯Nativeçš„ç¬¬ä¸€ç§è¡¨ç°ã€‚å…¶æ¬¡äº‘ä½œä¸ºä¸€ç§PaaSæœåŠ¡ï¼Œè¿™ä½â€œåœŸè‘—å±…æ°‘â€ä»å‡ºç”Ÿ(è®¾è®¡)åˆ°æˆé•¿(å¼€å‘)ï¼Œå†åˆ°ç”Ÿæ´»(éƒ¨ç½²)éƒ½åº”è¯¥æ˜¯åŸºäºäº‘çš„ç†å¿µæ¥å®ç°çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—è‡ªåŠ¨åŒ–çš„å¼€å‘æµç¨‹CI/CDæ¥å®ç°ã€‚è¿™æ˜¯Nativeçš„ç¬¬äºŒç§è¡¨ç°ã€‚è€Œæœ€åâ€œåœŸè‘—å±…æ°‘â€çš„ç‰¹ç‚¹å¸Œæœ›åšåˆ°èƒ½åœ¨æ‰€æœ‰çš„äº‘ç«¯éƒ½æ˜¯é€‚åº”çš„ï¼Œä¸ç®¡æ˜¯å„å‚å•†çš„å…¬æœ‰äº‘ åƒAWSã€Azureã€é˜¿é‡Œäº‘ï¼Œè¿˜æ˜¯å„ä¼ä¸šè‡ªå·±æ­å»ºçš„ç§æœ‰äº‘ï¼Œäº‘åŸç”Ÿçš„åº”ç”¨éƒ½èƒ½åšåˆ°æ— ç¼çš„è¿è¡Œå’Œè¿æ¥ã€‚ äº‘åŸç”Ÿçš„å‘å±•å†å²å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ—¶ä»£, è™šæ‹Ÿæœºæ—¶ä»£-&gt;å®¹å™¨æ—¶ä»£-&gt;äº‘åŸç”Ÿæ—¶ä»£ã€‚ è™šæ‹Ÿæœºæ—¶ä»£:è¿™è¦ä»2006å¹´è¯´èµ·ï¼Œè¿™ä¸€å¹´Avi Kivityå®£å‘Šäº†Kernel-based Virtual Machineçš„è¯ç”Ÿï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„KVMâ€”â€”åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœºï¼Œé‡‡ç”¨ç¡¬ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯çš„å…¨è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆã€‚KVMä»¥å…¶ç²¾ç®€çš„æ¶æ„ï¼Œæ¸…æ™°çš„å®šä½è·å¾—Linuxç¤¾åŒºå¤šæ•°å¼€å‘äººå‘˜çš„æ”¯æŒå¹¶å¿«é€Ÿè¢«åˆå¹¶å…¥ä¸»å¹²,2007å¹´2æœˆï¼ŒKVMå‘å¸ƒåˆ°å†…æ ¸2.6.20ä¸­ã€‚KVMä»è¯ç”Ÿå¼€å§‹å°±å®šä½äºåŸºäºç¡¬ä»¶è™šæ‹ŸåŒ–æ”¯æŒçš„å…¨è™šæ‹ŸåŒ–å®ç°ã€‚å®ƒä»¥å†…æ ¸æ¨¡å—çš„å½¢å¼åŠ è½½ä¹‹åï¼Œå°±å°†Linuxå†…æ ¸å˜æˆäº†ä¸€ä¸ªHypervisorï¼Œä½†ç¡¬ä»¶ç®¡ç†ç­‰è¿˜æ˜¯é€šè¿‡Linux kernelæ¥å®Œæˆçš„ï¼Œä¸€ä¸ªKVMå®¢æˆ·æœºå¯¹åº”äºä¸€ä¸ªLinuxè¿›ç¨‹ï¼Œæ¯ä¸ªvCPUåˆ™æ˜¯è¿™ä¸ªè¿›ç¨‹ä¸‹çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿˜æœ‰å•ç‹¬çš„å¤„ç†IOçš„çº¿ç¨‹ï¼Œä¹Ÿåœ¨ä¸€ä¸ªçº¿ç¨‹ç»„å†…ã€‚æ‰€ä»¥ï¼Œå®¿ä¸»æœºä¸Šå„ä¸ªå®¢æˆ·æœºæ˜¯ç”±å®¿ä¸»æœºå†…æ ¸åƒè°ƒåº¦æ™®é€šè¿›ç¨‹ä¸€æ ·è°ƒåº¦çš„ï¼Œå³å¯ä»¥é€šè¿‡Linuxçš„å„ç§è¿›ç¨‹è°ƒåº¦çš„æ‰‹æ®µæ¥å®ç°ä¸åŒå®¢æˆ·æœºçš„æƒé™é™å®šã€ä¼˜å…ˆçº§ç­‰åŠŸèƒ½ã€‚é™¤äº†KVMï¼Œè¿™ä¸€å¹´ç”±Googleçš„å·¥ç¨‹å¸ˆPaul Menageå’ŒRohit Seth åœ¨2006å¹´å‘èµ·ä¸€ä¸ªå«è¿›ç¨‹å®¹å™¨ï¼ˆprocess containersï¼‰çš„é¡¹ç›®ï¼Œè¿™å°±æ˜¯åé¢å®¹å™¨æ—¶ä»£çš„åŸºçŸ³ä¹‹ä¸€ â€”â€” Cgroupsã€‚åœ¨2007å¹´æ—¶ï¼Œå› ä¸ºåœ¨Linuxå†…æ ¸ä¸­ï¼Œå®¹å™¨ï¼ˆcontainerï¼‰è¿™ä¸ªåè¯æœ‰è®¸å¤šä¸åŒçš„æ„ä¹‰ï¼Œä¸ºé¿å…æ··ä¹±ï¼Œè¢«é‡å‘½åä¸ºCgroupsï¼Œå¹¶ä¸”è¢«åˆå¹¶åˆ°2.6.24ç‰ˆçš„å†…æ ¸ä¸­å»ã€‚éšåï¼Œ2008 å¹´ï¼Œé€šè¿‡å°† Cgroups çš„èµ„æºç®¡ç†èƒ½åŠ›å’Œ Linux Namespace çš„è§†å›¾éš”ç¦»èƒ½åŠ›ç»„åˆåœ¨ä¸€èµ·ï¼ŒLXC å®Œæ•´çš„å®¹å™¨æŠ€æœ¯å‡ºç°åœ¨ Linux å†…æ ¸ä¸­ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å•ä¸ª Linux å†…æ ¸ä¸Šè¿è¡Œè€Œæ— éœ€ä»»ä½•è¡¥ä¸ã€‚éšå2010å¹´7æœˆï¼ŒNASAå’ŒRackspaceå…±åŒå‘å¸ƒäº†è‘—åçš„å¼€æºé¡¹ç›®Openstackï¼ŒOpenstackçš„å¼€æºæ ‡å¿—ç€å¼€æºé¢†åŸŸçœŸæ­£å…·æœ‰ä¸€ä¸ªæˆç†Ÿçš„äº‘è®¡ç®—è§£å†³æ–¹æ¡ˆã€‚ å®¹å™¨æ—¶ä»£ï¼šå®¹å™¨æ—¶ä»£çš„æ ‡å¿—æ€§äº‹ä»¶å°±æ˜¯ dotCloud å¼€æºçš„ä¸€ä¸ªåŸºäº LXC çš„é«˜çº§å®¹å™¨å¼•æ“ Dockerçš„é—®ä¸–ã€‚Dockeräº§å“çš„å‘å¸ƒï¼Œè®©ä¼ä¸šé€æ¸ä»ç¬¨é‡çš„è™šæ‹Ÿæœºè½¬æ¢åˆ°è½»é‡çº§çš„å®¹å™¨éƒ¨ç½²ï¼Œéšç€dockerçš„å‘å¸ƒï¼Œå¸‚é¢ä¸Šæ¶Œç°å‡ºå¤§é‡çš„å®¹å™¨è§£å†³æ–¹æ¡ˆå¤§é‡è½»é‡çº§çš„è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼Œå¦‚Rocketã€Windows Containersç­‰ã€‚ äº‘åŸç”Ÿæ—¶ä»£ï¼šéšç€å®¹å™¨çš„æˆç†Ÿå’Œäº‘è®¡ç®—çš„å‘å±•ï¼Œäººä»¬è¿«åˆ‡éœ€è¦ä¸€ç§åœ¨äº‘ä¸Šçš„æœ€ä½³å®è·µï¼Œäº‘åŸç”Ÿå°±è¢«æå‡ºäº†ã€‚åœ¨2015å¹´ï¼ŒLinuxåŸºé‡‘ä¼šæˆç«‹äº†ä¸€ä¸ªå«The Cloud Native Computing FoundationåŸºé‡‘ç»„ç»‡ï¼Œä¹Ÿå°±æ˜¯CNCFã€‚éšç€å¤§å‚çš„åŠ ç›Ÿï¼ŒåƒGoogleã€AWSã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ã€è…¾è®¯äº‘ã€IBMç­‰ï¼ŒCNCFé€æ¸æˆä¸ºäº‘åŸç”Ÿçš„æœ€æƒå¨ç»„ç»‡ï¼Œå¹¶å°†äº‘åŸç”ŸæŠ€æœ¯æ¨å¹¿åˆ°ä¸–ç•Œå„åœ°ã€‚ è¿™é‡Œä¸»è¦åˆ†æˆäº†å‡ ä¸ªæŠ€æœ¯æ¿å—ï¼Œåº”ç”¨å®šä¹‰åŠéƒ¨ç½²(App Definition and Development)ç¼–æ’ä¸ç®¡ç†(Orchestration &amp; Management)è¿è¡Œç¯å¢ƒ(Runtime)é…ç½®(Provisioning)å¹³å°(Platform)å¯è§‚æµ‹æ€§å’Œåˆ†æ(Observability and Analysis)æ— æœåŠ¡(Serverless)è¿™å‡ å¤§æ¿å—åŸºæœ¬æŠŠäº‘åŸç”ŸæŠ€æœ¯æ‰€æ¶‰åŠé¢†åŸŸéƒ½æ¶µæ‹¬è¿›å»äº†ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸‹å„æ¿å—æ‰€æ¶‰åŠåˆ°çš„æŠ€æœ¯æ ˆã€‚ä»ç³»ç»Ÿå±‚æ¬¡æ¥çœ‹ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ï¼šåº”ç”¨å±‚ï¼šåº”ç”¨å®šä¹‰åŠéƒ¨ç½²(App Definition and Development)ã€é…ç½®(Provisioning)ã€å¯è§‚æµ‹æ€§å’Œåˆ†æ(Observability and Analysis)ã€æ— æœåŠ¡(Serverless)é›†ç¾¤ï¼šç¼–æ’ä¸ç®¡ç†(Orchestration &amp; Management)åº•å±‚è¿è¡Œç¯å¢ƒï¼šè¿è¡Œç¯å¢ƒ(Runtime) æ•°æ®åº“(Database)ï¼šåº”ç”¨å±‚çš„æ•°æ®åº“ï¼Œå…¶ä¸­ PingCAP å…¬å¸æ¨å‡ºçš„ TiDB å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ä¹‹ä¸€ï¼Œå…¶å…·æœ‰æ°´å¹³å¼¹æ€§æ‰©å±•ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰ç‰¹æ€§è®©å…¶å’Œäº‘åŸç”Ÿåº”ç”¨ç†å¿µå¤©ç„¶çš„å¥‘åˆã€‚æµå¼å¤„ç†å’Œæ¶ˆæ¯é˜Ÿåˆ—(Streaming and Messaging)ï¼šå¸¸ç”¨çš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰kafkaã€NATSã€RabbitMQç­‰ï¼Œå¸¸ç”¨çš„åº”ç”¨ç³»ç»Ÿä¸­ä¹Ÿç”¨çš„æ¯”è¾ƒå¤šã€‚æµå¼å¤„ç†æœ‰Spark streamingã€stormã€flinkç­‰ï¼Œéƒ½æ˜¯å¸¸ç”¨çš„å¤§æ•°æ®æµå¼è®¡ç®—æ¡†æ¶ã€‚åº”ç”¨å®šä¹‰å’Œé•œåƒæ„å»º(App Definition and Image Build)ï¼šäº‘åŸç”Ÿçš„åº”ç”¨æ„å»ºä¸€èˆ¬ç”±äºä¸€å † YAML æ–‡ä»¶ç»„æˆï¼Œä¸ºäº†èƒ½æ›´çµæ´»çš„ç”Ÿæˆå’Œæ‰“åŒ…ç®¡ç†è¿™äº›é…ç½®å®šä¹‰æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å·¥å…·ï¼Œè€Œ Helm å°±æ˜¯k8såº”ç”¨æ¯”è¾ƒå¤šçš„ä¸€ç§åº”ç”¨ç¨‹åº Chart çš„åˆ›å»ºã€æ‰“åŒ…ã€å‘å¸ƒä»¥åŠåˆ›å»ºçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²(Continuous Integration and Continuous Delivery)ï¼šæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²æ˜¯ä¸€ç§åŸºäºæ•æ·å¼€å‘æå‡ºçš„å¼€å‘å·¥å…·ï¼Œç”±äºæ•æ·å¼€å‘ä¸­è¦æ±‚è¦ä»¥å¿«æ­¥å°èµ°çš„æ–¹å¼è¿›è¡Œè¿­ä»£ï¼Œä¸ºäº†èŠ‚çº¦æµ‹è¯•ã€éƒ¨ç½²æ—¶é—´å‘¨æœŸï¼Œå¿…é¡»éœ€è¦ä¸€ä¸ªèƒ½åšåˆ°å’Œä»£ç ç®¡ç†è¿›è¡Œç»“åˆçš„è‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²å·¥å…·ï¼Œè€Œè¿™å°±æ˜¯æŒç»­é›†æˆå’Œéƒ¨ç½²ï¼ˆç®€ç§°CI/CDï¼‰ã€‚å¸¸ç”¨çš„CI/CDå·¥å…·æœ‰Jenkinsã€Travis CIã€gitlab runnerç­‰ã€‚ TiDBç®—å¾—ä¸Šæ¯”è¾ƒæ­£å®—çš„äº‘åŸç”Ÿæ•°æ®åº“ï¼Œå…¶é‡‡ç”¨äº†è®¡ç®—å’Œå­˜å‚¨èŠ‚ç‚¹åˆ†ç¦»çš„æ–¹å¼ï¼ŒTiDB å…·æœ‰æ°´å¹³æ‰©å±•å’Œé«˜å¯ç”¨ç‰¹ç‚¹ï¼Œè¿™é‡Œç®€å•å¤§å®¶ä»‹ç»ä¸‹ TiDB çš„æ•´ä½“æ¶æ„ã€‚TiDB é›†ç¾¤ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼šTiDB Serverï¼ŒPD Server å’Œ TiKV Serverã€‚ PD ServerPlacement Driver (ç®€ç§° PD) æ˜¯æ•´ä¸ªé›†ç¾¤çš„ç®¡ç†æ¨¡å—ï¼Œå…¶ä¸»è¦å·¥ä½œæœ‰ä¸‰ä¸ªï¼šä¸€æ˜¯å­˜å‚¨é›†ç¾¤çš„å…ƒä¿¡æ¯ï¼ˆæŸä¸ª Key å­˜å‚¨åœ¨å“ªä¸ª TiKV èŠ‚ç‚¹ï¼‰ï¼›äºŒæ˜¯å¯¹ TiKV é›†ç¾¤è¿›è¡Œè°ƒåº¦å’Œè´Ÿè½½å‡è¡¡ï¼ˆå¦‚æ•°æ®çš„è¿ç§»ã€Raft group leader çš„è¿ç§»ç­‰ï¼‰ï¼›ä¸‰æ˜¯åˆ†é…å…¨å±€å”¯ä¸€ä¸”é€’å¢çš„äº‹åŠ¡ IDã€‚PD é€šè¿‡ Raft åè®®ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚Raft çš„ leader server è´Ÿè´£å¤„ç†æ‰€æœ‰æ“ä½œï¼Œå…¶ä½™çš„ PD server ä»…ç”¨äºä¿è¯é«˜å¯ç”¨ã€‚å»ºè®®éƒ¨ç½²å¥‡æ•°ä¸ª PD èŠ‚ç‚¹ã€‚ TiKV ServerTiKV Server è´Ÿè´£å­˜å‚¨æ•°æ®ï¼Œä»å¤–éƒ¨çœ‹ TiKV æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æä¾›äº‹åŠ¡çš„ Key-Value å­˜å‚¨å¼•æ“ã€‚å­˜å‚¨æ•°æ®çš„åŸºæœ¬å•ä½æ˜¯ Regionï¼Œæ¯ä¸ª Region è´Ÿè´£å­˜å‚¨ä¸€ä¸ª Key Rangeï¼ˆä» StartKey åˆ° EndKey çš„å·¦é—­å³å¼€åŒºé—´ï¼‰çš„æ•°æ®ï¼Œæ¯ä¸ª TiKV èŠ‚ç‚¹ä¼šè´Ÿè´£å¤šä¸ª Regionã€‚TiKV ä½¿ç”¨ Raft åè®®åšå¤åˆ¶ï¼Œä¿æŒæ•°æ®çš„ä¸€è‡´æ€§å’Œå®¹ç¾ã€‚å‰¯æœ¬ä»¥ Region ä¸ºå•ä½è¿›è¡Œç®¡ç†ï¼Œä¸åŒèŠ‚ç‚¹ä¸Šçš„å¤šä¸ª Region æ„æˆä¸€ä¸ª Raft Groupï¼Œäº’ä¸ºå‰¯æœ¬ã€‚æ•°æ®åœ¨å¤šä¸ª TiKV ä¹‹é—´çš„è´Ÿè½½å‡è¡¡ç”± PD è°ƒåº¦ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä»¥ Region ä¸ºå•ä½è¿›è¡Œè°ƒåº¦ã€‚ TiSparkTiSpark ä½œä¸º TiDB ä¸­è§£å†³ç”¨æˆ·å¤æ‚ OLAP éœ€æ±‚çš„ä¸»è¦ç»„ä»¶ï¼Œå°† Spark SQL ç›´æ¥è¿è¡Œåœ¨ TiDB å­˜å‚¨å±‚ä¸Šï¼ŒåŒæ—¶èåˆ TiKV åˆ†å¸ƒå¼é›†ç¾¤çš„ä¼˜åŠ¿ï¼Œå¹¶èå…¥å¤§æ•°æ®ç¤¾åŒºç”Ÿæ€ã€‚è‡³æ­¤ï¼ŒTiDB å¯ä»¥é€šè¿‡ä¸€å¥—ç³»ç»Ÿï¼ŒåŒæ—¶æ”¯æŒ OLTP ä¸ OLAPï¼Œå…é™¤ç”¨æˆ·æ•°æ®åŒæ­¥çš„çƒ¦æ¼ã€‚ å®¹å™¨ç¼–æ’ä¸è°ƒåº¦(Orchestration and Scheduling)ï¼šå®¹å™¨çš„ç¼–æ’å’Œç®¡ç†å¯ä»¥è¯´æ˜¯äº‘åŸç”Ÿçš„åŸºçŸ³ï¼Œè€Œ Kubernetes å¯ä»¥è¯´æ˜¯è¿™ä¸ªé¢†åŸŸçš„äº‹å®æ ‡å‡†ï¼Œä½œä¸º CNCF åŸºé‡‘ä¼šçš„é¦–ä¸ªæ¯•ä¸šé¡¹ç›®å’Œé‡‘å­—æ‹›ç‰Œç”šè‡³å¾ˆå¤šäººè®¤ä¸ºäº‘åŸç”Ÿå°±æ˜¯ k8s å’Œå…¶ç›¸å…³çš„ä¸€ç³»åˆ—æŠ€æœ¯ï¼Œè™½ç„¶è¿™æ ·çš„è¯´æ³•æ˜¯å¾ˆä¸å‡†ç¡®çš„ï¼Œä¸è¿‡ç°åœ¨äº‘åŸç”ŸæŠ€æœ¯ç¡®å®å’Œk8sç»‘å®šçš„è¶Šæ¥è¶Šç´§å¯†ï¼Œç”±æ­¤è€Œè¡ç”Ÿäº†ä¸€å¤§æ‰¹çš„å·¥å…·ç”Ÿæ€ã€‚ä¸€è‡´æ€§ä¸æœåŠ¡å‘ç°(Coordination and Service Discovery)ï¼šå„æœåŠ¡ä¹‹é—´çš„ååŒä»¥åŠæœåŠ¡å‘ç°æ˜¯åˆ†å¸ƒå¼è®¡ç®—ä¸­çš„æ ¸å¿ƒï¼Œåˆ†å¸ƒå¼æ¶æ„ä½œä¸ºäº‘åŸç”Ÿçš„åŸºç¡€ç‰¹æ€§ä¹‹ä¸€å¯ä»¥è¯´æ˜¯ä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ç»„ä»¶ï¼Œä»å¤§æ•°æ®æ—¶ä»£çš„è€ç‰Œçš„Zookeeperåˆ°åˆ°Docker Swarmé‡‡ç”¨çš„Consulï¼Œå†åˆ°k8sä¸­é›†æˆçš„åˆ†å¸ƒå¼é”®å€¼æ•°æ®åº“etcdå’ŒDNSæœåŠ¡å‘ç°CoreDNSéƒ½æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚è¿œç¨‹è°ƒç”¨æœåŠ¡(Remote Procedure Call)ï¼šå¹¿ä¹‰ä¸Šçš„è¿œç¨‹è°ƒç”¨ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§åŸºäºHTTPåè®®ï¼Œä¸€ç§åŸºäºRPCï¼Œè€Œç‹­ä¹‰çš„è¿œç¨‹è°ƒç”¨ä¸€èˆ¬æŒ‡çš„RPCã€‚æ¯”è¾ƒå¸¸ç”¨çš„RPCæ¡†æ¶æœ‰ Google å¼€æºçš„ gRPCå’Œ Apache æ——ä¸‹çš„ Thrift æ¡†æ¶ï¼Œk8sæ˜¯é‡‡ç”¨ gRPC æ¡†æ¶ä½œä¸ºæœåŠ¡é—´è°ƒç”¨ã€‚æœåŠ¡ä»£ç†(Service Proxy)ï¼šå¹³å¸¸ç”¨çš„æœ€å¤šçš„æœåŠ¡ä»£ç†åº”è¯¥å°±æ˜¯nginxäº†ï¼Œä½œä¸ºä¸€ä¸ªé«˜æ€§èƒ½æ”¯æŒæ­£å‘å’Œæ–¹å‘ä»£ç†çš„æœåŠ¡å™¨, nginxå…·å¤‡æˆç†Ÿå’Œå¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚envoy åˆ™æ˜¯ä¸€ä¸ªæ–°ç”Ÿçš„ç”¨goå†™çš„æœåŠ¡ä»£ç†ï¼ŒåƒIstioã€Ambassadorçš„æœåŠ¡ä»£ç†å°±æ˜¯é‡‡ç”¨äº†envoyï¼Œå› æ­¤åœ¨äº‘åŸç”Ÿåº”ç”¨ä¸­ envoy ä¹Ÿå…·å¤‡å¼ºå¤§çš„ç”Ÿå‘½åŠ›ã€‚APIç½‘å…³(API Gateway)ï¼šAPIç½‘æ ¼ä¸»è¦èµ·åˆ°å¯¹æ‰€æœ‰çš„APIçš„è°ƒç”¨è¿›è¡Œç»Ÿä¸€æ¥å…¥å’Œç®¡ç†ã€è®¤è¯ã€æˆæƒç­‰åŠŸèƒ½ã€‚ambassadorã€traefikã€kongç­‰éƒ½æ˜¯ä¼˜ç§€çš„å¾®æœåŠ¡ç½‘å…³ã€‚æœåŠ¡ç½‘æ ¼(Service Mesh)ï¼šæœåŠ¡ç½‘æ ¼æ˜¯ç”¨äºæ§åˆ¶åº”ç”¨çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å¦‚ä½•å…±äº«æ•°æ®ï¼ŒæœåŠ¡ç½‘æ ¼æ˜¯å†…ç½®äºåº”ç”¨ç¨‹åºä¸­çš„ä¸“ç”¨åŸºç¡€æ¶æ„å±‚ï¼Œç”¨äºè®°å½•åº”ç”¨çš„ä¸åŒéƒ¨åˆ†æ˜¯å¦èƒ½æ­£å¸¸äº¤äº’ã€‚æœåŠ¡ç½‘æ ¼å¯ä»¥æ›´ç»†ç²’åº¦åœ°ä¸ºæ¯ä¸ªæœåŠ¡æä¾›é™æµã€ç®¡æ§ã€ç†”æ–­ã€å®‰å…¨ç­‰åŠŸèƒ½ã€‚Istio æ˜¯æœ€æµè¡Œçš„ Service Mesh ä¹‹ä¸€ï¼Œå…¶ä»¥æ˜“ç”¨æ€§ã€æ— ä¾µå…¥ã€åŠŸèƒ½å¼ºå¤§èµ¢å¾—ä¼—å¤šç”¨æˆ·é’çï¼Œç›¸ä¿¡ä¸ä¹…å°†æ¥åº”è¯¥æœ‰å¯èƒ½ä¼šæˆä¸ºæœåŠ¡ç½‘æ ¼çš„äº‹å®æ ‡å‡†ã€‚ å„ç§åº”ç”¨å’Œå·¥ä½œè´Ÿè½½é€æ¸è¿è¡Œåœ¨k8sä¹‹ä¸Šï¼Œæœ‰ä¸ªæ¯”å–»ç‰¹åˆ«å¥½ï¼Œå°±æ˜¯k8sæ˜¯äº‘åŸç”Ÿçš„æ“ä½œç³»ç»Ÿï¼Œè€Œè¿è¡Œåœ¨k8sä¹‹ä¸Šçš„å®¹å™¨åº”ç”¨å°±åƒç”µè„‘çš„appä¸€æ · äº‘åŸç”Ÿå­˜å‚¨(Cloud Native Storage)ï¼šéšç€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ä¸­é—´ä»¶é€æ­¥åœ¨å®¹å™¨ç¯å¢ƒä¸­å¾—åˆ°åº”ç”¨ï¼Œå®¹å™¨æŒä¹…åŒ–å­˜å‚¨çš„éœ€æ±‚ä¹Ÿé€æ­¥å¢å¤šï¼Œéšä¹‹è€Œæ¥çš„æ˜¯å»ºç«‹ä¸€å¥—åŸºäºäº‘åŸç”Ÿçš„å­˜å‚¨ç³»ç»Ÿï¼Œåœ¨k8sä¸­å¯¹åº”çš„å°±æ˜¯CSIâ€”â€”å®¹å™¨å­˜å‚¨æ¥å£ã€‚æŒä¹…åŒ–å­˜å‚¨ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯Cephï¼Œä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼ŒCephæä¾›è¾ƒå¥½çš„æ€§èƒ½ã€å¯é æ€§å’Œå¯æ‰©å±•æ€§ã€‚å®¹å™¨è¿è¡Œæ—¶(Container Runtime)ï¼šå®¹å™¨è¿è¡Œæ—¶å°±æ˜¯æŒ‡å®¹å™¨çš„è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚æœ€å¸¸ç”¨çš„Dockerã€‚é™¤äº†docker,è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒè‘—åçš„å¼€æºå®¹å™¨è¿è¡Œæ—¶æ ‡å‡†ç»„ç»‡ï¼ˆOpen Container Initiativeï¼‰ï¼Œç®€ç§°OCIã€‚OCIç”±LinuxåŸºé‡‘ä¼šäº2015å¹´6æœˆæˆç«‹ï¼Œæ—¨åœ¨å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶åˆ¶å®šä¸€ä¸ªå¼€æ”¾çš„å·¥ä¸šåŒ–æ ‡å‡†ï¼Œç›®å‰ä¸»è¦æœ‰ä¸¤ä¸ªæ ‡å‡†æ–‡æ¡£ï¼šå®¹å™¨è¿è¡Œæ—¶æ ‡å‡† ï¼ˆruntime specï¼‰å’Œ å®¹å™¨é•œåƒæ ‡å‡†ï¼ˆimage specï¼‰ï¼ŒContainerdå°±æ˜¯ä¸€ä¸ªæ»¡è¶³OCIè§„èŒƒçš„æ ¸å¿ƒå®¹å™¨è¿è¡Œæ—¶ã€‚äº‘åŸç”Ÿç½‘ç»œ(Cloud Native Network)ï¼šå®¹å™¨çš„ç½‘ç»œæ–¹æ¡ˆï¼Œä¸ºå®¹å™¨é›†ç¾¤æä¾›ä¸€å±‚è™šæ‹ŸåŒ–çš„ç½‘ç»œï¼Œåƒk8sçš„CNIå°±æ˜¯å…¶ä¸­ä¸€ä¸ªæ ‡å‡†çš„ç½‘ç»œæ¥å£ï¼Œflannelæ˜¯ CoreOS å…¬å¸ä¸»æ¨çš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆï¼Œç°åœ¨ç°åœ¨æ¯”è¾ƒä¸»æµçš„ä¸€ç§ç½‘ç»œä¹‹ä¸€ã€‚ Kubernetesçš„åˆ†å±‚æ¶æ„ï¼šæ ¸å¿ƒå±‚ï¼šKubernetesæœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œå¯¹å¤–æä¾›APIæ„å»ºé«˜å±‚çš„åº”ç”¨ï¼Œå¯¹å†…æä¾›æ’ä»¶å¼åº”ç”¨æ‰§è¡Œç¯å¢ƒåº”ç”¨å±‚ï¼šéƒ¨ç½²ï¼ˆæ— çŠ¶æ€åº”ç”¨ã€æœ‰çŠ¶æ€åº”ç”¨ã€æ‰¹å¤„ç†ä»»åŠ¡ã€é›†ç¾¤åº”ç”¨ç­‰ï¼‰å’Œè·¯ç”±ï¼ˆæœåŠ¡å‘ç°ã€DNSè§£æç­‰ï¼‰ç®¡ç†å±‚ï¼šç³»ç»Ÿåº¦é‡ï¼ˆå¦‚åŸºç¡€è®¾æ–½ã€å®¹å™¨å’Œç½‘ç»œçš„åº¦é‡ï¼‰ï¼Œè‡ªåŠ¨åŒ–ï¼ˆå¦‚è‡ªåŠ¨æ‰©å±•ã€åŠ¨æ€Provisionç­‰ï¼‰ä»¥åŠç­–ç•¥ç®¡ç†ï¼ˆRBACã€Quotaã€PSPã€NetworkPolicyç­‰ï¼‰æ¥å£å±‚ï¼škubectlå‘½ä»¤è¡Œå·¥å…·ã€å®¢æˆ·ç«¯SDKä»¥åŠé›†ç¾¤è”é‚¦ç”Ÿæ€ç³»ç»Ÿï¼šåœ¨æ¥å£å±‚ä¹‹ä¸Šçš„åºå¤§å®¹å™¨é›†ç¾¤ç®¡ç†è°ƒåº¦çš„ç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªèŒƒç•´Kuberneteså¤–éƒ¨ï¼šæ—¥å¿—ã€ç›‘æ§ã€é…ç½®ç®¡ç†ã€CIã€CDã€Workflowã€FaaSã€OTSåº”ç”¨ã€ChatOpsç­‰Kuberneteså†…éƒ¨ï¼šCRIã€CNIã€CVIã€é•œåƒä»“åº“ã€Cloud Providerã€é›†ç¾¤è‡ªèº«çš„é…ç½®å’Œç®¡ç†ç­‰ è‡ªåŠ¨åŒ–ä¸é…ç½®(Automation &amp; Configuration)ï¼šç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®å®¹å™¨è¿è¡Œå¹³å°å’Œç¯å¢ƒï¼Œä»£è¡¨å·¥å…·åŒ…æ‹¬Ansibleã€Chefã€Puppetã€VMwareã€OpenStackã€‚å®¹å™¨æ³¨å†Œ(Container Registry)ï¼šå®¹å™¨æ³¨å†Œæ˜¯æ•´ä¸ªCNCFäº‘åŸç”Ÿä¸­çš„é‡è¦éƒ¨ä»¶ï¼Œå› ä¸ºåŸºäºå®¹å™¨çš„è¿è¡Œç¯å¢ƒä¸­ï¼Œæ‰€æœ‰çš„åº”ç”¨éƒ½éœ€è¦å€ŸåŠ©å®¹å™¨é•œåƒåº“æ¥è¿›è¡Œå®‰è£…å’Œéƒ¨ç½²ã€‚å®¹å™¨æ³¨å†Œå·¥å…·ä¸»è¦åˆ†å…¬æœ‰å·¥å…·å’Œç§æœ‰å·¥å…·ï¼Œå…¬æœ‰çš„å®¹å™¨é•œåƒåº“ä¸»è¦åŒ…æ‹¬dockerå®˜æ–¹çš„registryï¼Œåœ¨ç§æœ‰é•œåƒåº“æœ€è‘—åçš„æ˜¯Harborï¼Œç›®å‰å¸‚é¢ä¸Šå¤§é‡çš„å®¹å™¨å¹³å°ç›®å‰éƒ½åŸºäºHarboræ„å»ºå…¶é•œåƒä»“åº“ã€‚å®‰å…¨ä¸åˆè§„æ€§(Security &amp; Compliance)ï¼šå®‰å…¨æ€§å’Œåˆè§„æ€§åŸºæœ¬æ˜¯æ‰€æœ‰ç³»ç»Ÿéƒ½ä¼šé¢ä¸´çš„ä¸œè¥¿ï¼ŒNotaryå’ŒTUFæ˜¯è¿™ä¸ªé¢†åŸŸä¸¤ä¸ªä¸»è¦çš„é¡¹ç›®ï¼Œå…¶ä¸­TUFæ˜¯ä¸€ä¸ªå¼€æºçš„å®‰å…¨æ ‡å‡†ï¼ŒNotaryæ˜¯å…¶ä¸­ä¸€ä¸ªå®ç°ã€‚å¯†é’¥ç®¡ç†(Key Management)ï¼šç§˜é’¥ç®¡ç†åšæƒé™ç®¡ç†å’Œèº«ä»½è®¤è¯ï¼Œæ¯”å¦‚é›…è™å‘å¸ƒçš„athenzï¼Œå°±æ˜¯ä¸€ä¸ªåŸºäºRBACçš„æƒé™ç®¡ç†å’Œé…ç½®ã€‚SPIFFEé€šç”¨å®‰å…¨èº«ä»½æ¡†æ¶æä¾›äº†ç»Ÿä¸€çš„å·¥ä½œè´Ÿè½½èº«ä»½è§£å†³æ–¹æ¡ˆã€‚ ç›‘æ§(Monitoring)ï¼šç›‘æ§ä¸»è¦æ˜¯å¯¹è¿è¡Œç³»ç»Ÿå’Œåº”ç”¨çš„çŠ¶æ€è¿›è¡Œè§‚æµ‹ä¸é¢„è­¦ï¼Œå¸¸ç”¨çš„ç›‘æ§æœ‰Prometheusã€Zabbixç­‰ï¼ŒGrafanaé€šå¸¸ä¼šé…åˆPrometheusåšå›¾å½¢åŒ–çš„å±•ç¤ºã€‚æ—¥å¿—(Logging)ï¼šæ—¥å¿—é‡‡é›†æ¨¡å—ï¼Œå¦‚ELK(elastic/logstash/kibana)ã€fluentdç­‰ã€‚è¿½è¸ª(Tracing): è¿™é‡Œçš„tracingæ˜¯æŒ‡åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼Œå› ä¸ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå„æœåŠ¡ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä¸€ä¸ªåœ°æ–¹å‡ºé—®é¢˜å¯ä»¥ä¼šå¯¼è‡´å¾ˆå¤šå…¶ä»–æœåŠ¡ä¸Šçš„ç»„ä»¶å‡ºç°è¿é”é—®é¢˜ï¼Œå› æ­¤åœ¨å®šä½é—®é¢˜çš„æ—¶å€™ååˆ†å›°éš¾ï¼Œå¿…é¡»è¦å»ºç«‹åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæ¥å¯¹é”™è¯¯å’Œæ•…éšœè¿›è¡Œå®šä½ï¼Œåˆ†å¸ƒå¼è·Ÿè¸ªæ˜¯å¯¹æ—¥å¿—å’Œç›‘æ§æŒ‡æ ‡çš„é‡è¦è¡¥å……ã€‚OpenTracing æ˜¯ä¸€å¥—åˆ†å¸ƒå¼ç³»ç»Ÿè·Ÿè¸ªæ ‡å‡†åè®®ï¼Œä¸ºå¤§å®¶å»ºç«‹ä¸€å¥—ç»Ÿä¸€çš„æ ‡å‡†æ¥å®ç°åˆ†å¸ƒå¼è·Ÿè¸ªä¿¡æ¯çš„æè¿°å’Œä¼ é€’ã€‚æ··æ²Œå·¥ç¨‹(Chaos Engineering)ï¼šæ··æ²Œå·¥ç¨‹ä¸»è¦æ˜¯è§£å†³åœ¨é«˜å¤æ‚æ€§çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹ä¸Šå»ºç«‹èµ·å€¼å¾—ä¿¡ä»»çš„ç”Ÿäº§éƒ¨ç½²ä½“ç³»ï¼Œæ¯”å¦‚æœåŠ¡ä¸å¯ç”¨æ—¶åå¤‡è®¾ç½®ä¸å½“ ; å› è¶…æ—¶è®¾ç½®ä¸å½“å¯¼è‡´åå¤é‡è¯• ; ä¸‹æ¸¸ä¾èµ–å…³ç³»åœ¨æ¥æ”¶åˆ°å¤§é‡æµé‡æ—¶å‡ºç°ä¸­æ–­ ; å‘ç”Ÿå•ç‚¹æ•…éšœæ—¶è¿é”å¼•å‘åç»­é—®é¢˜ç­‰ä¸€ç³»åˆ—æ··ä¹±çš„éš¾é¢˜ï¼Œå»ºç«‹å—æ§å®éªŒè§‚å¯Ÿåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ æ··æ²Œå·¥ç¨‹ç±»ä¼¼äºâ€œæ•…éšœæ¼”ç»ƒâ€ï¼Œä¸å±€é™äºæµ‹è¯•ï¼Œè€Œæ›´åƒæ˜¯å·¥ç¨‹å®è·µã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Œé€šå¸¸çš„æµ‹è¯•ç”¨ä¾‹ä¼šæœ‰â€œæœŸæœ›ç»“æœâ€å’Œâ€œå®é™…ç»“æœâ€ï¼Œé€šè¿‡å°†ä¸¤ä¸ªç»“æœæ¯”è¾ƒï¼Œæˆ–è€…å¯¹ç”¨æˆ·è¡Œä¸ºçš„é¢„æœŸï¼Œæ¥åˆ¤æ–­æµ‹è¯•é€šè¿‡æˆ–å¤±è´¥ã€‚è€Œæ··æ²Œè¯•éªŒç±»ä¼¼äºâ€æ¢ç´¢æ€§æµ‹è¯•â€œï¼Œè¯•éªŒæœ¬èº«æ²¡æœ‰æ˜ç¡®æ˜¯è¾“å…¥å’Œé¢„æœŸç»“æœï¼Œé€šè¿‡å¯¹ç³»ç»Ÿå’ŒæœåŠ¡çš„å¹²é¢„ï¼Œæ¥è§‚å¯Ÿç³»ç»Ÿçš„â€ååº”â€œã€‚æˆ‘ä»¬å°†æ··æ²Œå·¥ç¨‹åŸåˆ™èå…¥åœ¨è¯•éªŒè¿‡ç¨‹ä¸­ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒå°è§„æ¨¡æ¨¡æ‹Ÿç³»ç»Ÿæ•…éšœå¹¶å®šæœŸè‡ªåŠ¨åŒ–æ‰§è¡Œè¯•éªŒï¼Œé€šè¿‡è¯•éªŒç»“æœä¸æ­£å¸¸ç»“æœè¿›è¡Œæ¯”å¯¹ï¼Œè§‚å¯Ÿç³»ç»Ÿâ€è¾¹ç•Œâ€œã€‚å¼•å…¥æ··æ²Œå®è·µæ—¶éœ€è¦äº†è§£æ··æ²Œå·¥ç¨‹çš„äº”å¤§åŸåˆ™ã€‚1ï¼‰å»ºç«‹ç¨³å®šçŠ¶æ€çš„å‡è®¾åœ¨åšæ··æ²Œå·¥ç¨‹å®éªŒçš„æ—¶å€™ï¼Œé¦–å…ˆå¾—ç¡®å®šéœ€è¦æµ‹è¯•çš„æŒ‡æ ‡å·²ç»åšäº†é«˜å¯ç”¨çš„å·¥ä½œï¼Œæ‰èƒ½è¿›è¡ŒéªŒè¯æŒ‡æ ‡å¯¹ä¸šåŠ¡çš„æ˜¯å¦æœ‰å½±å“ã€‚å¦‚æœæ²¡æœ‰åšå¥½é«˜å¯ç”¨å·¥ä½œï¼Œè€Œå¼•å…¥æ··æ²Œå·¥ç¨‹å®éªŒçš„è¯ï¼Œå¯¹ä¸šåŠ¡è€Œè¨€å°†ä¼šæ˜¯ä¸€å£°ç¾éš¾ã€‚2ï¼‰å¤šæ ·åŒ–ç°å®ä¸–ç•Œäº‹ä»¶ä¸èƒ½å¤Ÿå‡­ç©ºæƒ³åƒå‡ºä¸€äº›äº‹ä»¶æ¥éªŒè¯ï¼Œè€Œæ˜¯å¼•å…¥é‚£äº›çœŸå®å­˜åœ¨çš„ï¼Œé¢‘ç¹å‘ç”Ÿçš„ï¼Œä¸”å½±å“é‡å¤§çš„äº‹ä»¶ã€‚å¯¹æˆ‘ä»¬è€Œè¨€ç»™è¿™äº›äº‹ä»¶åšæ··æ²Œå®éªŒæ‰å…·æœ‰ä»·å€¼ã€‚å¦‚ç£ç›˜æ•…éšœã€ç½‘ç»œå»¶æ—¶ã€ä¸»æœºå®•æœºç­‰ã€‚3ï¼‰åœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œå®éªŒå°½é‡åœ¨ç±»ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒçš„å¤šæ ·æ€§æ˜¯ä»»ä½•å…¶å®ƒç¯å¢ƒæ— æ³•æ¯”æ‹Ÿçš„ã€‚æ··æ²Œå·¥ç¨‹çš„ä»·å€¼å°±æ˜¯ä¿è¯ç”Ÿäº§ä¸Šçš„ä¸šåŠ¡è¿ç»­ä¸ä¸­æ–­ã€‚4ï¼‰æŒç»­è‡ªåŠ¨åŒ–è¿è¡Œå®éªŒå®æ–½æ··æ²Œå·¥ç¨‹å®éªŒä¸€èˆ¬æœ€å¼€å§‹æ˜¯äººå·¥æ‰‹åŠ¨æ“ä½œï¼Œå½“æˆ‘ä»¬å¯¹ä¸šåŠ¡æœ‰è¶³å¤Ÿçš„ä¿¡å¿ƒæ—¶ï¼Œè¦æŠŠæ··æ²Œå®éªŒåšæˆæŒç»­è‡ªåŠ¨åŒ–ã€‚åœ¨ç‰ˆæœ¬å‡çº§ã€ä¸æ–­è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼ŒæŒç»­ä¸æ–­è‡ªåŠ¨åŒ–åœ°åšéªŒè¯ï¼Œæœ€å¤§ç¨‹åºä¿è¯ä¸šåŠ¡çš„è¿ç»­æ€§éªŒè¯ã€‚5ï¼‰æœ€å°åŒ–å½±å“èŒƒå›´åšæ··æ²Œå·¥ç¨‹çš„æ„ä¹‰å°±æ˜¯ä¿è¯ç”Ÿäº§ä¸Šçš„ä¸šåŠ¡ã€‚åœ¨æˆ‘ä»¬å®æ–½æ··æ²Œå®éªŒæ—¶ä¹Ÿå¿…é¡»ä¿è¯å¯¹çº¿ä¸Šä¸šåŠ¡å½±å“æœ€å°ã€‚åœ¨å®æ–½å®éªŒæ—¶ï¼Œä»å°èŒƒå›´å¼€å§‹ï¼Œä¸æ–­æ‰©å¤§èŒƒå›´ï¼Œé¿å¼€é«˜é£é™©æ—¶æ®µï¼Œå¦‚é€‰æ‹©ä¸šåŠ¡é‡æœ€å°çš„æ—¶å€™å®æ–½å®éªŒã€‚ å·¥å…·(Tools)ï¼šä¸€äº›å·¥å…·é›†ï¼Œï¼Œæ¯”å¦‚CNCFçš„landscapeä½œä¸ºä¸€ä¸ªä¿¡æ¯èšåˆç½‘ç«™å¯ä»¥ç”¨äºæŸ¥çœ‹å„ç§æ–°çš„è½¯ä»¶å·¥å…·ã€Dashbirdå¯ä»¥ç”¨äºserverlessç›‘æ§å’Œæ•…éšœæ’æŸ¥å·¥å…·ã€‚å®‰å…¨(Security)ï¼šä¸»è¦æä¾›serverlessçš„å®‰å…¨é˜²æŠ¤ã€‚æ¡†æ¶(Framework)ï¼šæŒ‡ç›´æ¥ç”¨äºæ„å»ºã€ç®¡ç†serverlessåº”ç”¨çš„æ¡†æ¶ï¼Œæ¯”å¦‚Apexå¯ä»¥ç”¨äºæ„å»ºã€å‘å¸ƒå’Œç®¡ç†AWS Lambdaï¼ŒSAM ä¸€ä¸ªPythonçš„å¼€æºserverlessåº”ç”¨æ„å»ºæ¡†æ¶ã€‚æ³¨å†Œå¹³å°(Hosted Platfrom)ï¼šæŒ‡æä¾›ç¬¬ä¸‰æ–¹æ³¨å†Œçš„å‚å•†æœåŠ¡ï¼Œæ¯”å¦‚AWSçš„Lambdaã€é˜¿é‡Œäº‘çš„å‡½æ•°è®¡ç®—æœåŠ¡ã€Googleçš„cloud functionsæœåŠ¡ç­‰ã€‚å¯å®‰è£…å¹³å°(Installable Platform)ï¼šè¿™é‡Œå°±æ˜¯ç”¨äºè‡ªå·±æ­å»ºserverlesså¹³å°çš„å·¥å…·ï¼Œæ¯”å¦‚è‘—åçš„Knativeï¼Œå°±æ˜¯ç”±è°·æ­Œå¼€æºçš„ serverless æ¶æ„æ–¹æ¡ˆã€‚ Serveåœ¨è¿™é‡Œéå¸¸é‡è¦ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§å¸¦æœ‰å†…ç½®Istioçš„ç»„ä»¶ã€‚Istioæä¾›äº†è®¸å¤šåŠŸèƒ½ ï¼Œä¾‹å¦‚æµé‡ç®¡ç†ã€æ™ºèƒ½è·¯ç”±ã€è‡ªåŠ¨ç¼©æ”¾å’Œç¼©æ”¾åˆ°é›¶ç­‰ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é…·çš„æ¦‚å¿µã€‚ä½†å®é™…ä¸Šï¼Œå¯¹äºéæœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œå¼€å‘è€…å¸Œæœ›çš„æ˜¯å¯ä»¥æ‰©å±•åˆ°1000ä¸ªæ•°æ®åŒ…ï¼Œå¹¶ä¸”å½“æ²¡æœ‰äººè®¿é—®æ—¶ï¼Œå°†å…¶æ¢å¤ä¸º0ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹Knative Serve æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é¦–å…ˆï¼Œåœ¨å¯åŠ¨ä¸€ä¸ªä¼ ç»Ÿçš„microserviceæˆ–functionåï¼Œè¯¥æœåŠ¡æŒ‡å‘å¹¶ç®¡ç†ä¸¤ä¸ªä¸åŒçš„äº‹ç‰©ï¼š1ï¼‰Route 2ï¼‰Configã€‚Knative Serveä¸ºæˆ‘ä»¬æä¾›äº†å¿«ç…§ï¼Œæä¾›äº†æ™ºèƒ½çš„ã€å¯æ‹“å±•çš„è·¯ç”±ã€‚ä½¿ç”¨Istioæµé‡ç®¡ç†åŠŸèƒ½ï¼Œå®é™…ä¸Šå¯ä»¥é€šè¿‡Routeç®¡ç†æ‰€æœ‰æµé‡ï¼Œå¹¶å°†å®ƒä»¬è·¯ç”±åˆ°æ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå‡è®¾ï¼Œå¦‚æ‰€æœ‰æµé‡çš„10ï¼…è¢«è·¯ç”±åˆ°ç‰ˆæœ¬2ï¼Œ90ï¼…åœç•™åœ¨ç‰ˆæœ¬1ä¸Šã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>äº‘åŸç”Ÿ</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>äº‘åŸç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº‘åŸç”Ÿç”Ÿæ€ä¸­çš„æŠ€æœ¯æ ˆ]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2F%E4%BA%91%E5%8E%9F%E7%94%9F%E7%94%9F%E6%80%81%E6%8A%80%E6%9C%AF%E6%A0%88%2F</url>
    <content type="text"><![CDATA[äº‘åŸç”Ÿçš„ç”Ÿæ€åœˆæ—¢ç„¶ä»‹ç»äº‘åŸç”Ÿçš„æŠ€æœ¯ç”Ÿæ€ä½“ç³»ï¼Œè¿™é‡Œä¸å¾—ä¸ç¥­å‡ºCNCFçš„è¿™å¼ landscapeã€‚ è¿™å¼ å–è‡ª2020/03/02ï¼Œæœ€æ–°çš„å¯è§ï¼šhttps://github.com/cncf/landscape è¿™é‡Œä¸»è¦åˆ†æˆäº†å‡ ä¸ªæŠ€æœ¯æ¿å—ï¼Œ åº”ç”¨å®šä¹‰åŠéƒ¨ç½²(App Definition and Development) ç¼–æ’ä¸ç®¡ç†(Orchestration &amp; Management) è¿è¡Œç¯å¢ƒ(Runtime) é…ç½®(Provisioning) å¹³å°(Platform) å¯è§‚æµ‹æ€§å’Œåˆ†æ(Observability and Analysis) æ— æœåŠ¡(Serverless) è¿™å‡ å¤§æ¿å—åŸºæœ¬æŠŠäº‘åŸç”ŸæŠ€æœ¯æ‰€æ¶‰åŠé¢†åŸŸéƒ½æ¶µæ‹¬è¿›å»äº†ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸‹å„æ¿å—æ‰€æ¶‰åŠåˆ°çš„æŠ€æœ¯æ ˆã€‚ ä»ç³»ç»Ÿå±‚æ¬¡æ¥çœ‹ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ï¼š åº”ç”¨å±‚ï¼šåº”ç”¨å®šä¹‰åŠéƒ¨ç½²(App Definition and Development)ã€é…ç½®(Provisioning)ã€å¯è§‚æµ‹æ€§å’Œåˆ†æ(Observability and Analysis)ã€æ— æœåŠ¡(Serverless) é›†ç¾¤ï¼šç¼–æ’ä¸ç®¡ç†(Orchestration &amp; Management) åº•å±‚è¿è¡Œç¯å¢ƒï¼šè¿è¡Œç¯å¢ƒ(Runtime) åº”ç”¨å®šä¹‰åŠéƒ¨ç½² è¿™ä¸ªæ¿å—çš„æŠ€æœ¯æ ˆä¸»è¦æ˜¯åº”ç”¨å¼€å‘è¿‡ç¨‹ç§éƒ½ä¼šç”¨åˆ°çš„ï¼Œåƒæ•°æ®åº“ã€æµå¼å¤„ç†å’Œæ¶ˆæ¯é˜Ÿåˆ—ã€åº”ç”¨å®šä¹‰å’Œé•œåƒæ„å»ºã€æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²ã€‚ æ•°æ®åº“(Database)ï¼šåº”ç”¨å±‚çš„æ•°æ®åº“ï¼Œå…¶ä¸­ PingCAP å…¬å¸æ¨å‡ºçš„ TiDB å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ä¹‹ä¸€ï¼Œå…¶å…·æœ‰æ°´å¹³å¼¹æ€§æ‰©å±•ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰ç‰¹æ€§è®©å…¶å’Œäº‘åŸç”Ÿåº”ç”¨ç†å¿µå¤©ç„¶çš„å¥‘åˆã€‚ æµå¼å¤„ç†å’Œæ¶ˆæ¯é˜Ÿåˆ—(Streaming and Messaging)ï¼šå¸¸ç”¨çš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰kafkaã€NATSã€RabbitMQç­‰ï¼Œå¸¸ç”¨çš„åº”ç”¨ç³»ç»Ÿä¸­ä¹Ÿç”¨çš„æ¯”è¾ƒå¤šã€‚æµå¼å¤„ç†æœ‰Spark streamingã€stormã€flinkç­‰ï¼Œéƒ½æ˜¯å¸¸ç”¨çš„å¤§æ•°æ®æµå¼è®¡ç®—æ¡†æ¶ã€‚ åº”ç”¨å®šä¹‰å’Œé•œåƒæ„å»º(App Definition and Image Build)ï¼šäº‘åŸç”Ÿçš„åº”ç”¨æ„å»ºä¸€èˆ¬ç”±äºä¸€å † YAML æ–‡ä»¶ç»„æˆï¼Œä¸ºäº†èƒ½æ›´çµæ´»çš„ç”Ÿæˆå’Œæ‰“åŒ…ç®¡ç†è¿™äº›é…ç½®å®šä¹‰æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å·¥å…·ï¼Œè€Œ Helm å°±æ˜¯k8såº”ç”¨æ¯”è¾ƒå¤šçš„ä¸€ç§åº”ç”¨ç¨‹åº Chart çš„åˆ›å»ºã€æ‰“åŒ…ã€å‘å¸ƒä»¥åŠåˆ›å»ºçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚ æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²(Continuous Integration and Continuous Delivery)ï¼šæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²æ˜¯ä¸€ç§åŸºäºæ•æ·å¼€å‘æå‡ºçš„å¼€å‘å·¥å…·ï¼Œç”±äºæ•æ·å¼€å‘ä¸­è¦æ±‚è¦ä»¥å¿«æ­¥å°èµ°çš„æ–¹å¼è¿›è¡Œè¿­ä»£ï¼Œä¸ºäº†èŠ‚çº¦æµ‹è¯•ã€éƒ¨ç½²æ—¶é—´å‘¨æœŸï¼Œå¿…é¡»éœ€è¦ä¸€ä¸ªèƒ½åšåˆ°å’Œä»£ç ç®¡ç†è¿›è¡Œç»“åˆçš„è‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²å·¥å…·ï¼Œè€Œè¿™å°±æ˜¯æŒç»­é›†æˆå’Œéƒ¨ç½²ï¼ˆç®€ç§°CI/CDï¼‰ã€‚å¸¸ç”¨çš„CI/CDå·¥å…·æœ‰Jenkinsã€Travis CIã€gitlab runnerç­‰ã€‚ ç¼–æ’ä¸ç®¡ç† ç¼–æ’ä¸ç®¡ç†æ¿å—å¯ä»¥è¯´æ˜¯äº‘åŸç”Ÿçš„æ ¸å¿ƒï¼Œå…¶åŒ…æ‹¬äº†å®¹å™¨ç¼–æ’ã€ä¸€è‡´æ€§ä¸æœåŠ¡å‘ç°ã€è¿œç¨‹ç¨‹åºè°ƒç”¨(RPC)ã€æœåŠ¡ä»£ç†ã€APIç½‘å…³ã€æœåŠ¡ç½‘æ ¼ã€‚ å®¹å™¨ç¼–æ’ä¸è°ƒåº¦(Orchestration and Scheduling)ï¼šå®¹å™¨çš„ç¼–æ’å’Œç®¡ç†å¯ä»¥è¯´æ˜¯äº‘åŸç”Ÿçš„åŸºçŸ³ï¼Œè€Œ Kubernetes å¯ä»¥è¯´æ˜¯è¿™ä¸ªé¢†åŸŸçš„äº‹å®æ ‡å‡†ï¼Œä½œä¸º CNCF åŸºé‡‘ä¼šçš„é¦–ä¸ªæ¯•ä¸šé¡¹ç›®å’Œé‡‘å­—æ‹›ç‰Œç”šè‡³å¾ˆå¤šäººè®¤ä¸ºäº‘åŸç”Ÿå°±æ˜¯ k8s å’Œå…¶ç›¸å…³çš„ä¸€ç³»åˆ—æŠ€æœ¯ï¼Œè™½ç„¶è¿™æ ·çš„è¯´æ³•æ˜¯å¾ˆä¸å‡†ç¡®çš„ï¼Œä¸è¿‡ç°åœ¨äº‘åŸç”ŸæŠ€æœ¯ç¡®å®å’Œk8sç»‘å®šçš„è¶Šæ¥è¶Šç´§å¯†ï¼Œç”±æ­¤è€Œè¡ç”Ÿäº†ä¸€å¤§æ‰¹çš„å·¥å…·ç”Ÿæ€ã€‚ ä¸€è‡´æ€§ä¸æœåŠ¡å‘ç°(Coordination and Service Discovery)ï¼šå„æœåŠ¡ä¹‹é—´çš„ååŒä»¥åŠæœåŠ¡å‘ç°æ˜¯åˆ†å¸ƒå¼è®¡ç®—ä¸­çš„æ ¸å¿ƒï¼Œåˆ†å¸ƒå¼æ¶æ„ä½œä¸ºäº‘åŸç”Ÿçš„åŸºç¡€ç‰¹æ€§ä¹‹ä¸€å¯ä»¥è¯´æ˜¯ä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ç»„ä»¶ï¼Œä»å¤§æ•°æ®æ—¶ä»£çš„è€ç‰Œçš„Zookeeperåˆ°åˆ°Docker Swarmé‡‡ç”¨çš„Consulï¼Œå†åˆ°k8sä¸­é›†æˆçš„åˆ†å¸ƒå¼é”®å€¼æ•°æ®åº“etcdå’ŒDNSæœåŠ¡å‘ç°CoreDNSéƒ½æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚ è¿œç¨‹è°ƒç”¨æœåŠ¡(Remote Procedure Call)ï¼šå¹¿ä¹‰ä¸Šçš„è¿œç¨‹è°ƒç”¨ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§åŸºäºHTTPåè®®ï¼Œä¸€ç§åŸºäºRPCï¼Œè€Œç‹­ä¹‰çš„è¿œç¨‹è°ƒç”¨ä¸€èˆ¬æŒ‡çš„RPCã€‚æ¯”è¾ƒå¸¸ç”¨çš„RPCæ¡†æ¶æœ‰ Google å¼€æºçš„ gRPCå’Œ Apache æ——ä¸‹çš„ Thrift æ¡†æ¶ï¼Œk8sæ˜¯é‡‡ç”¨ gRPC æ¡†æ¶ä½œä¸ºæœåŠ¡é—´è°ƒç”¨ã€‚ æœåŠ¡ä»£ç†(Service Proxy)ï¼šå¹³å¸¸ç”¨çš„æœ€å¤šçš„æœåŠ¡ä»£ç†åº”è¯¥å°±æ˜¯nginxäº†ï¼Œä½œä¸ºä¸€ä¸ªé«˜æ€§èƒ½æ”¯æŒæ­£å‘å’Œæ–¹å‘ä»£ç†çš„æœåŠ¡å™¨, nginxå…·å¤‡æˆç†Ÿå’Œå¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚envoy åˆ™æ˜¯ä¸€ä¸ªæ–°ç”Ÿçš„ç”¨goå†™çš„æœåŠ¡ä»£ç†ï¼ŒåƒIstioã€Ambassadorçš„æœåŠ¡ä»£ç†å°±æ˜¯é‡‡ç”¨äº†envoyï¼Œå› æ­¤åœ¨äº‘åŸç”Ÿåº”ç”¨ä¸­ envoy ä¹Ÿå…·å¤‡å¼ºå¤§çš„ç”Ÿå‘½åŠ›ã€‚ APIç½‘å…³(API Gateway)ï¼šAPIç½‘æ ¼ä¸»è¦èµ·åˆ°å¯¹æ‰€æœ‰çš„APIçš„è°ƒç”¨è¿›è¡Œç»Ÿä¸€æ¥å…¥å’Œç®¡ç†ã€è®¤è¯ã€æˆæƒç­‰åŠŸèƒ½ã€‚ambassadorã€traefikã€kongç­‰éƒ½æ˜¯ä¼˜ç§€çš„å¾®æœåŠ¡ç½‘å…³ã€‚ æœåŠ¡ç½‘æ ¼(Service Mesh)ï¼šæœåŠ¡ç½‘æ ¼æ˜¯ç”¨äºæ§åˆ¶åº”ç”¨çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å¦‚ä½•å…±äº«æ•°æ®ï¼ŒæœåŠ¡ç½‘æ ¼æ˜¯å†…ç½®äºåº”ç”¨ç¨‹åºä¸­çš„ä¸“ç”¨åŸºç¡€æ¶æ„å±‚ï¼Œç”¨äºè®°å½•åº”ç”¨çš„ä¸åŒéƒ¨åˆ†æ˜¯å¦èƒ½æ­£å¸¸äº¤äº’ã€‚æœåŠ¡ç½‘æ ¼å¯ä»¥æ›´ç»†ç²’åº¦åœ°ä¸ºæ¯ä¸ªæœåŠ¡æä¾›é™æµã€ç®¡æ§ã€ç†”æ–­ã€å®‰å…¨ç­‰åŠŸèƒ½ã€‚Istio æ˜¯æœ€æµè¡Œçš„ Service Mesh ä¹‹ä¸€ï¼Œå…¶ä»¥æ˜“ç”¨æ€§ã€æ— ä¾µå…¥ã€åŠŸèƒ½å¼ºå¤§èµ¢å¾—ä¼—å¤šç”¨æˆ·é’çï¼Œç›¸ä¿¡ä¸ä¹…å°†æ¥åº”è¯¥æœ‰å¯èƒ½ä¼šæˆä¸ºæœåŠ¡ç½‘æ ¼çš„äº‹å®æ ‡å‡†ã€‚ è¿è¡Œç¯å¢ƒ è¿™é‡Œçš„è¿è¡Œæ—¶æ¿å—æŒ‡çš„å°±æ˜¯å®¹å™¨è¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬äº†å®¹å™¨å­˜å‚¨ã€å®¹å™¨è®¡ç®—ã€å®¹å™¨ç½‘ç»œä¸‰å¤§å·¥å…·ï¼Œåœ¨k8såˆ†åˆ«å¯¹åº”çš„æ˜¯CSIã€CRIå’ŒCNIä¸‰ç±»æ¥å£å®šä¹‰ã€‚ äº‘åŸç”Ÿå­˜å‚¨(Cloud Native Storage)ï¼šéšç€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ä¸­é—´ä»¶é€æ­¥åœ¨å®¹å™¨ç¯å¢ƒä¸­å¾—åˆ°åº”ç”¨ï¼Œå®¹å™¨æŒä¹…åŒ–å­˜å‚¨çš„éœ€æ±‚ä¹Ÿé€æ­¥å¢å¤šï¼Œéšä¹‹è€Œæ¥çš„æ˜¯å»ºç«‹ä¸€å¥—åŸºäºäº‘åŸç”Ÿçš„å­˜å‚¨ç³»ç»Ÿï¼Œåœ¨k8sä¸­å¯¹åº”çš„å°±æ˜¯CSIâ€”â€”å®¹å™¨å­˜å‚¨æ¥å£ã€‚æŒä¹…åŒ–å­˜å‚¨ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯Cephï¼Œä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼ŒCephæä¾›è¾ƒå¥½çš„æ€§èƒ½ã€å¯é æ€§å’Œå¯æ‰©å±•æ€§ã€‚ å®¹å™¨è¿è¡Œæ—¶(Container Runtime)ï¼šå®¹å™¨è¿è¡Œæ—¶å°±æ˜¯æŒ‡å®¹å™¨çš„è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚æœ€å¸¸ç”¨çš„Dockerã€‚é™¤äº†docker,è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒè‘—åçš„å¼€æºå®¹å™¨è¿è¡Œæ—¶æ ‡å‡†ç»„ç»‡ï¼ˆOpen Container Initiativeï¼‰ï¼Œç®€ç§°OCIã€‚OCIç”±LinuxåŸºé‡‘ä¼šäº2015å¹´6æœˆæˆç«‹ï¼Œæ—¨åœ¨å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶åˆ¶å®šä¸€ä¸ªå¼€æ”¾çš„å·¥ä¸šåŒ–æ ‡å‡†ï¼Œç›®å‰ä¸»è¦æœ‰ä¸¤ä¸ªæ ‡å‡†æ–‡æ¡£ï¼šå®¹å™¨è¿è¡Œæ—¶æ ‡å‡† ï¼ˆruntime specï¼‰å’Œ å®¹å™¨é•œåƒæ ‡å‡†ï¼ˆimage specï¼‰ï¼ŒContainerdå°±æ˜¯ä¸€ä¸ªæ»¡è¶³OCIè§„èŒƒçš„æ ¸å¿ƒå®¹å™¨è¿è¡Œæ—¶ã€‚ äº‘åŸç”Ÿç½‘ç»œ(Cloud Native Network)ï¼šå®¹å™¨çš„ç½‘ç»œæ–¹æ¡ˆï¼Œä¸ºå®¹å™¨é›†ç¾¤æä¾›ä¸€å±‚è™šæ‹ŸåŒ–çš„ç½‘ç»œï¼Œåƒk8sçš„CNIå°±æ˜¯å…¶ä¸­ä¸€ä¸ªæ ‡å‡†çš„ç½‘ç»œæ¥å£ï¼Œflannelæ˜¯ CoreOS å…¬å¸ä¸»æ¨çš„å®¹å™¨ç½‘ç»œæ–¹æ¡ˆï¼Œç°åœ¨ç°åœ¨æ¯”è¾ƒä¸»æµçš„ä¸€ç§ç½‘ç»œä¹‹ä¸€ã€‚ é…ç½® é…ç½®æ¿å—ä¸»è¦åŒ…æ‹¬å››ä¸ªæ¨¡å—è‡ªåŠ¨åŒ–ä¸é…ç½®ã€å®¹å™¨æ³¨å†Œã€å®‰å…¨ä¸åˆè§„æ€§ã€å¯†é’¥ç®¡ç†ã€‚ è‡ªåŠ¨åŒ–ä¸é…ç½®(Automation &amp; Configuration)ï¼šç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®å®¹å™¨è¿è¡Œå¹³å°å’Œç¯å¢ƒï¼Œä»£è¡¨å·¥å…·åŒ…æ‹¬Ansibleã€Chefã€Puppetã€VMwareã€OpenStackã€‚ å®¹å™¨æ³¨å†Œ(Container Registry)ï¼šå®¹å™¨æ³¨å†Œæ˜¯æ•´ä¸ªCNCFäº‘åŸç”Ÿä¸­çš„é‡è¦éƒ¨ä»¶ï¼Œå› ä¸ºåŸºäºå®¹å™¨çš„è¿è¡Œç¯å¢ƒä¸­ï¼Œæ‰€æœ‰çš„åº”ç”¨éƒ½éœ€è¦å€ŸåŠ©å®¹å™¨é•œåƒåº“æ¥è¿›è¡Œå®‰è£…å’Œéƒ¨ç½²ã€‚å®¹å™¨æ³¨å†Œå·¥å…·ä¸»è¦åˆ†å…¬æœ‰å·¥å…·å’Œç§æœ‰å·¥å…·ï¼Œå…¬æœ‰çš„å®¹å™¨é•œåƒåº“ä¸»è¦åŒ…æ‹¬dockerå®˜æ–¹çš„registryï¼Œåœ¨ç§æœ‰é•œåƒåº“æœ€è‘—åçš„æ˜¯Harborï¼Œç›®å‰å¸‚é¢ä¸Šå¤§é‡çš„å®¹å™¨å¹³å°ç›®å‰éƒ½åŸºäºHarboræ„å»ºå…¶é•œåƒä»“åº“ã€‚ å®‰å…¨ä¸åˆè§„æ€§(Security &amp; Compliance)ï¼šå®‰å…¨æ€§å’Œåˆè§„æ€§åŸºæœ¬æ˜¯æ‰€æœ‰ç³»ç»Ÿéƒ½ä¼šé¢ä¸´çš„ä¸œè¥¿ï¼ŒNotaryå’ŒTUFæ˜¯è¿™ä¸ªé¢†åŸŸä¸¤ä¸ªä¸»è¦çš„é¡¹ç›®ï¼Œå…¶ä¸­TUFæ˜¯ä¸€ä¸ªå¼€æºçš„å®‰å…¨æ ‡å‡†ï¼ŒNotaryæ˜¯å…¶ä¸­ä¸€ä¸ªå®ç°ã€‚ å¯†é’¥ç®¡ç†(Key Management)ï¼šç§˜é’¥ç®¡ç†åšæƒé™ç®¡ç†å’Œèº«ä»½è®¤è¯ï¼Œæ¯”å¦‚é›…è™å‘å¸ƒçš„athenzï¼Œå°±æ˜¯ä¸€ä¸ªåŸºäºRBACçš„æƒé™ç®¡ç†å’Œé…ç½®ã€‚SPIFFEé€šç”¨å®‰å…¨èº«ä»½æ¡†æ¶æä¾›äº†ç»Ÿä¸€çš„å·¥ä½œè´Ÿè½½èº«ä»½è§£å†³æ–¹æ¡ˆã€‚ å¯è§‚æµ‹æ€§ä¸åˆ†æ å¯è§‚æµ‹æ€§ä¸åˆ†ææ¿å—ä¸»è¦åŒ…æ‹¬äº†ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ªå’Œæ··æ²Œå·¥ç¨‹ã€‚ ç›‘æ§(Monitoring)ï¼šç›‘æ§ä¸»è¦æ˜¯å¯¹è¿è¡Œç³»ç»Ÿå’Œåº”ç”¨çš„çŠ¶æ€è¿›è¡Œè§‚æµ‹ä¸é¢„è­¦ï¼Œå¸¸ç”¨çš„ç›‘æ§æœ‰Prometheusã€Zabbixç­‰ï¼ŒGrafanaé€šå¸¸ä¼šé…åˆPrometheusåšå›¾å½¢åŒ–çš„å±•ç¤ºã€‚ æ—¥å¿—(Logging)ï¼šæ—¥å¿—é‡‡é›†æ¨¡å—ï¼Œå¦‚ELK(elastic/logstash/kibana)ã€fluentdç­‰ã€‚ è¿½è¸ª(Tracing): è¿™é‡Œçš„tracingæ˜¯æŒ‡åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼Œå› ä¸ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå„æœåŠ¡ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä¸€ä¸ªåœ°æ–¹å‡ºé—®é¢˜å¯ä»¥ä¼šå¯¼è‡´å¾ˆå¤šå…¶ä»–æœåŠ¡ä¸Šçš„ç»„ä»¶å‡ºç°è¿é”é—®é¢˜ï¼Œå› æ­¤åœ¨å®šä½é—®é¢˜çš„æ—¶å€™ååˆ†å›°éš¾ï¼Œå¿…é¡»è¦å»ºç«‹åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæ¥å¯¹é”™è¯¯å’Œæ•…éšœè¿›è¡Œå®šä½ï¼Œåˆ†å¸ƒå¼è·Ÿè¸ªæ˜¯å¯¹æ—¥å¿—å’Œç›‘æ§æŒ‡æ ‡çš„é‡è¦è¡¥å……ã€‚OpenTracing æ˜¯ä¸€å¥—åˆ†å¸ƒå¼ç³»ç»Ÿè·Ÿè¸ªæ ‡å‡†åè®®ï¼Œä¸ºå¤§å®¶å»ºç«‹ä¸€å¥—ç»Ÿä¸€çš„æ ‡å‡†æ¥å®ç°åˆ†å¸ƒå¼è·Ÿè¸ªä¿¡æ¯çš„æè¿°å’Œä¼ é€’ã€‚ æ··æ²Œå·¥ç¨‹(Chaos Engineering)ï¼šæ··æ²Œå·¥ç¨‹ä¸»è¦æ˜¯è§£å†³åœ¨é«˜å¤æ‚æ€§çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹ä¸Šå»ºç«‹èµ·å€¼å¾—ä¿¡ä»»çš„ç”Ÿäº§éƒ¨ç½²ä½“ç³»ï¼Œæ¯”å¦‚æœåŠ¡ä¸å¯ç”¨æ—¶åå¤‡è®¾ç½®ä¸å½“ ; å› è¶…æ—¶è®¾ç½®ä¸å½“å¯¼è‡´åå¤é‡è¯• ; ä¸‹æ¸¸ä¾èµ–å…³ç³»åœ¨æ¥æ”¶åˆ°å¤§é‡æµé‡æ—¶å‡ºç°ä¸­æ–­ ; å‘ç”Ÿå•ç‚¹æ•…éšœæ—¶è¿é”å¼•å‘åç»­é—®é¢˜ç­‰ä¸€ç³»åˆ—æ··ä¹±çš„éš¾é¢˜ï¼Œå»ºç«‹å—æ§å®éªŒè§‚å¯Ÿåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ æ— æœåŠ¡ Serverlessæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é¢†åŸŸï¼Œå› æ­¤é’ˆå¯¹ serverless è¿™é‡Œä¸“é—¨åˆç»†åˆ†äº†äº”ä¸ªæ¨¡å—ï¼šå·¥å…·ã€å®‰å…¨ã€æ¡†æ¶ã€æ³¨å†Œå¹³å°å’Œå¯å®‰è£…å¹³å°ã€‚ å·¥å…·(Tools)ï¼šä¸€äº›å·¥å…·é›†ï¼Œï¼Œæ¯”å¦‚CNCFçš„landscapeä½œä¸ºä¸€ä¸ªä¿¡æ¯èšåˆç½‘ç«™å¯ä»¥ç”¨äºæŸ¥çœ‹å„ç§æ–°çš„è½¯ä»¶å·¥å…·(CNCFæ°¸è¿œæŠŠè‡ªå·±æ”¾ç¬¬ä¸€ğŸ˜‚)ã€Dashbirdå¯ä»¥ç”¨äºserverlessç›‘æ§å’Œæ•…éšœæ’æŸ¥å·¥å…·ã€‚ å®‰å…¨(Security)ï¼šä¸»è¦æä¾›serverlessçš„å®‰å…¨é˜²æŠ¤ã€‚ æ¡†æ¶(Framework)ï¼šæŒ‡ç›´æ¥ç”¨äºæ„å»ºã€ç®¡ç†serverlessåº”ç”¨çš„æ¡†æ¶ï¼Œæ¯”å¦‚Apexå¯ä»¥ç”¨äºæ„å»ºã€å‘å¸ƒå’Œç®¡ç†AWS Lambdaï¼ŒSAM ä¸€ä¸ªPythonçš„å¼€æºserverlessåº”ç”¨æ„å»ºæ¡†æ¶ã€‚ æ³¨å†Œå¹³å°(Hosted Platfrom)ï¼šæŒ‡æä¾›ç¬¬ä¸‰æ–¹æ³¨å†Œçš„å‚å•†æœåŠ¡ï¼Œæ¯”å¦‚AWSçš„Lambdaã€é˜¿é‡Œäº‘çš„å‡½æ•°è®¡ç®—æœåŠ¡ã€Googleçš„cloud functionsæœåŠ¡ç­‰ã€‚ å¯å®‰è£…å¹³å°(Installable Platform)ï¼šè¿™é‡Œå°±æ˜¯ç”¨äºè‡ªå·±æ­å»ºserverlesså¹³å°çš„å·¥å…·ï¼Œæ¯”å¦‚è‘—åçš„Knativeï¼Œå°±æ˜¯ç”±è°·æ­Œå¼€æºçš„ serverless æ¶æ„æ–¹æ¡ˆã€‚ å¹³å°è¿™äº›ä¸»è¦æ˜¯äº‘åŸç”Ÿç›¸å…³çš„å¹³å°ä¾›åº”å•†ï¼Œéœ€è¦æ‰¾ç›¸å…³çš„äº§å“å’Œåˆä½œå¯ä»¥åœ¨è¿™é‡Œæ‰¾ã€‚ åè®°äº‘åŸç”Ÿçš„æŠ€æœ¯èŒƒç•´æ˜¯å¾ˆå¹¿çš„ï¼Œå¯ä»¥è¯´æ‰€æœ‰å’Œåˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„æŠ€æœ¯æ ˆåŸºæœ¬éƒ½åŒ…å«äº†ï¼Œä¹Ÿæ˜¯äº‘è®¡ç®—æœ€ä½³å®è·µçš„é›†åˆã€‚é’ˆå¯¹æ¯ä¸ªé¢†åŸŸç»†ç»†ç¢ç£¨ç ”ç©¶ï¼Œä¹Ÿè®¸è¿™æ˜¯æ¡ä¸é”™çš„æŠ€æœ¯ä¹‹è·¯ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>CNCF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿ?èŠèŠäº‘åŸç”Ÿçš„â€œå‰ä¸–ä»Šç”Ÿâ€]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2F%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%91%E5%8E%9F%E7%94%9F-%E8%81%8A%E8%81%8A%E4%BA%91%E5%8E%9F%E7%94%9F%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F%2F</url>
    <content type="text"><![CDATA[äº‘åŸç”Ÿè¿™è¯åœ¨è¿™å‡ å¹´çªç„¶ç«äº†ï¼Œåœ¨å¾ˆå¤šäººè¿˜ä¸äº†è§£å¥¹æ˜¯ä»€ä¹ˆçš„æ—¶å€™é¢‘é¢‘è¢«å¥¹åˆ·å±ã€‚æ‰€ä»¥æˆ‘ç»å¸¸è¯´æŠ€æœ¯äººæ˜¯ä¸€ä¸ªå®¹æ˜“ç„¦è™‘çš„ç¾¤ä½“ï¼Œæ¯å¤©è¢«ä¸€å †æ–°çš„æ¦‚å¿µæ‹‰ç€èµ°ï¼Œæ‰¯ç€å­¦ã€‚æ–°è¯­è¨€å¤šï¼Œæ–°æ¦‚å¿µå¤šï¼Œæ–°æŠ€æœ¯å¤šï¼Œæ²¡ä»€ä¹ˆå®‰å…¨æ„Ÿã€‚å¯¹äºæ–°æ¦‚å¿µï¼Œæˆ‘å–œæ¬¢ä»ä¸‰ä¸ªå±‚æ¬¡å»ç†è§£ï¼Œä¸€ä¸ªæ˜¯è¿™æŠ€æœ¯åè¯è¢«æå‡ºçš„å†å²èƒŒæ™¯ï¼Œä¸€ä¸ªæ˜¯æŠ€æœ¯åè¯æ¦‚å¿µçš„æ¼”åŒ–ï¼Œä¸€ä¸ªæ˜¯ç»“åˆæ¯”è¾ƒä¸»æµçš„è¯è¯­ä½“ç³»çš„è§£è¯»ã€‚å…³äºäº‘åŸç”Ÿï¼Œæˆ‘ä¹Ÿä¼šä»è¿™ä¸‰ä¸ªæ–¹é¢æ¥è§£è¯»ã€‚ äº‘åŸç”Ÿ(Cloud Native)çš„ç”±æ¥äº‘åŸç”Ÿçš„æ¦‚å¿µæœ€æ—©å¼€å§‹äº2010å¹´ï¼Œåœ¨å½“æ—¶ Paul Fremantle çš„ä¸€ç¯‡åšå®¢ä¸­è¢«æåŠï¼Œä»–ä¸»è¦å°†å…¶æè¿°ä¸ºä¸€ç§å’Œäº‘ä¸€æ ·çš„ç³»ç»Ÿè¡Œä¸ºçš„åº”ç”¨çš„ç¼–å†™ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼çš„ã€æ¾æ•£çš„ã€è‡ªæœåŠ¡çš„ã€æŒç»­éƒ¨ç½²ä¸æµ‹è¯•çš„ã€‚å½“æ—¶æå‡ºäº‘åŸç”Ÿæ˜¯ä¸ºäº†èƒ½æ„å»ºä¸€ç§ç¬¦åˆäº‘è®¡ç®—ç‰¹æ€§çš„æ ‡å‡†æ¥æŒ‡å¯¼äº‘è®¡ç®—åº”ç”¨çš„ç¼–å†™ã€‚ åæ¥åˆ°2013å¹´ Matt Stineåœ¨æ¨ç‰¹ä¸Šè¿…é€Ÿæ¨å¹¿äº‘åŸç”Ÿæ¦‚å¿µï¼Œå¹¶åœ¨2015å¹´ã€Šè¿ç§»åˆ°äº‘åŸç”Ÿæ¶æ„ã€‹ä¸€ä¹¦ä¸­å®šä¹‰äº†ç¬¦åˆäº‘åŸç”Ÿæ¶æ„çš„ç‰¹å¾ï¼š12å› ç´ ã€å¾®æœåŠ¡ã€è‡ªæœåŠ¡ã€åŸºäºAPIåä½œã€æ‰›è„†å¼±æ€§ã€‚è€Œç”±äºè¿™æœ¬ä¹¦çš„æ¨å¹¿ç•…é”€ï¼Œè¿™ä¹Ÿæˆäº†å¾ˆå¤šäººå¯¹äº‘åŸç”Ÿçš„æ—©æœŸå°è±¡ï¼ŒåŒæ—¶è¿™æ—¶äº‘åŸç”Ÿä¹Ÿè¢«12è¦ç´ å˜æˆäº†ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µã€‚ CNCFåŸºé‡‘ä¼šæˆç«‹åŠäº‘åŸç”Ÿæ¦‚å¿µçš„æ¼”åŒ–2015å¹´ç”±LinuxåŸºé‡‘ä¼šå‘èµ·äº†ä¸€ä¸ª The Cloud Native Computing Foundationï¼ˆCNCFï¼‰ åŸºé‡‘ç»„ç»‡ï¼ŒCNCFåŸºé‡‘ä¼šçš„æˆç«‹æ ‡å¿—ç€äº‘åŸç”Ÿæ­£å¼è¿›å…¥é«˜é€Ÿå‘å±•è½¨é“ï¼Œgoogleã€Ciscoã€Dockerå„å¤§å‚çº·çº·åŠ å…¥ï¼Œå¹¶é€æ­¥æ„å»ºå‡ºå›´ç»• Cloud Native çš„å…·ä½“å·¥å…·ï¼Œè€Œäº‘åŸç”Ÿè¿™ä¸ªçš„æ¦‚å¿µä¹Ÿé€æ¸å˜å¾—æ›´å…·ä½“åŒ–ã€‚å› æ­¤ï¼ŒCNCFåŸºé‡‘æœ€åˆå¯¹äº‘åŸç”Ÿå®šä¹‰æ˜¯ä¹Ÿæ˜¯æ·±çª„çš„ï¼Œå½“æ—¶æŠŠäº‘åŸç”Ÿå®šä½ä¸ºå®¹å™¨åŒ–å°è£…+è‡ªåŠ¨åŒ–ç®¡ç†+é¢å‘å¾®æœåŠ¡ï¼š The CNCF defines â€œcloud-nativeâ€ a little more narrowly, to mean using open source software stack to be containerized, where each part of the app is packaged in its own container, dynamically orchestrated so each part is actively scheduled and managed to optimize resource utilization, and microservices-oriented to increase the overall agility and maintainability of applications. è¿™ä¸»è¦å› ä¸ºCNCFåŸºé‡‘ä¼šåœ¨å½“æ—¶çš„æ ¸å¿ƒæ‹³å¤´è½¯ä»¶å°±æ˜¯ k8sï¼Œå› æ­¤åœ¨æ¦‚å¿µå®šä¹‰ä¸Šä¸»è¦æ˜¯å›´ç»•ç€å®¹å™¨ç¼–æ’å»ºç«‹èµ·æ¥çš„ç”Ÿæ€ã€‚å…¶å®è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ° CNCF å®šä¹‰äº‘åŸç”Ÿçš„æ—¶å€™æœ‰æ—¶æ„Ÿè§‰å°±æ˜¯å†è¯´å®¹å™¨ç”Ÿæ€ã€‚ åˆ°äº†2017å¹´, äº‘åŸç”Ÿåº”ç”¨çš„æå‡ºè€…ä¹‹ä¸€çš„Pivotalåœ¨å…¶å®˜ç½‘ä¸Šå°†äº‘åŸç”Ÿçš„å®šä¹‰æ¦‚å†µä¸ºDevOpsã€æŒç»­äº¤ä»˜ã€å¾®æœåŠ¡ã€å®¹å™¨è¿™å››å¤§ç‰¹å¾ï¼Œè¿™ä¹Ÿæˆäº†å¾ˆå¤šäººå¯¹ Cloud Nativeçš„åŸºç¡€å°è±¡ã€‚ è€Œåˆ°äº†2018å¹´ï¼Œéšç€Service Meshçš„åŠ å…¥ï¼ŒCNCFå¯¹äº‘åŸç”Ÿçš„å®šä¹‰å‘ç”Ÿäº†æ”¹å˜ï¼Œè€Œè¿™ä¹Ÿé€æ¸ä½œä¸ºè¢«å¤§å®¶è®¤å¯çš„å®˜æ–¹å®šä¹‰ï¼š Cloud native technologies empower organizations to build and run scalable applications in modern, dynamic environments such as public, private, and hybrid clouds. Containers, service meshes, microservices, immutable infrastructure, and declarative APIs exemplify this approach.These techniques enable loosely coupled systems that are resilient, manageable, and observable. Combined with robust automation, they allow engineers to make high-impact changes frequently and predictably with minimal toil.The Cloud Native Computing Foundation seeks to drive adoption of this paradigm by fostering and sustaining an ecosystem of open source, vendor-neutral projects. We democratize state-of-the-art patterns to make these innovations accessible for everyone. æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š ï¼ˆ1ï¼‰åŸºäºå®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼APIæ„å»ºçš„å¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ï¼› ï¼ˆ2ï¼‰åŸºäºè‡ªåŠ¨åŒ–æŠ€æœ¯æ„å»ºå…·å¤‡é«˜å®¹é”™æ€§ã€æ˜“ç®¡ç†å’Œä¾¿äºè§‚å¯Ÿçš„æ¾è€¦åˆç³»ç»Ÿï¼› ï¼ˆ3ï¼‰æ„å»ºä¸€ä¸ªç»Ÿä¸€çš„å¼€æºäº‘æŠ€æœ¯ç”Ÿæ€ï¼Œèƒ½å’Œäº‘å‚å•†æä¾›çš„æœåŠ¡è§£è€¦ï¼Œ å¯ä»¥çœ‹å‡ºè¿™ä¸€é˜¶æ®µCNCFå¯¹äº‘åŸç”Ÿçš„å®šä¹‰åŠ ä¸ŠæœåŠ¡ç½‘æ ¼å’Œå£°æ˜å¼APIï¼ŒåŒæ—¶ä¸ºè¿™ä¸€æ¦‚å¿µé˜è¿°æ›´æ·±ä¸€å±‚çš„æ„ä¹‰ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹ä¸€ä¸ªç»Ÿä¸€ä¸­ç«‹çš„å¼€æºäº‘ç”Ÿæ€ï¼ˆè‡³äºæ˜¯å¦ä¸­ç«‹å˜›è¿™é‡Œå°±ä¸è°ˆäº†:ï¼‰ã€‚è¿™å¯¹äº‘åŸç”Ÿçš„ç”Ÿæ€å®šä½ä¼šæ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œä¹Ÿç®—CNCFæœ€åˆæˆç«‹çš„å®—æ—¨ä¹‹ä¸€å§ï¼Œæ‰“ç ´äº‘å·¨å¤´çš„å„æ–­ã€‚ å¯¹äº‘åŸç”Ÿçš„è§£æ„å¯¹ä¸€ä¸ªè¯çš„è§£è¯»ï¼Œé™¤äº†çœ‹å…¶å†å²å‘å±•èƒŒæ™¯ï¼Œè¿˜æœ‰ä¸€ç§åå‘äºè¯­è¨€å­¦çš„æ–¹æ³•è§£è¯»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä»â€œå­—é¢æ„æ€â€æ¥ç†è§£ä¸ºä½•è¿™äº›ç†å¿µçš„é›†åˆä½“ã€‚ Cloud Nativeï¼Œä»è¯é¢ä¸Šæ‹†è§£å…¶å®å°±æ˜¯ Cloud å’Œ Nativeï¼Œä¹Ÿå°±æ˜¯äº‘è®¡ç®—å’ŒåœŸè‘—çš„æ„æ€â€”â€”äº‘è®¡ç®—ä¸Šçš„åŸç”Ÿå±…æ°‘ï¼Œå³å¤©ç”Ÿå…·å¤‡äº‘è®¡ç®—çš„äº²å’ŒåŠ›ã€‚ é‚£æ€ä¹ˆç†è§£â€œäº‘çš„åŸç”Ÿå±…æ°‘â€å‘¢ï¼Ÿ é¦–å…ˆä»äº‘çš„è§’åº¦æ¥ç†è§£ï¼Œäº‘æœ¬è´¨å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§æä¾›ç¨³å®šè®¡ç®—å­˜å‚¨èµ„æºçš„å¯¹è±¡ï¼Œä¸ºäº†å®ç°è¿™ç‚¹ï¼Œåƒè™šæ‹ŸåŒ–ã€å¼¹æ€§æ‰©å±•ã€é«˜å¯ç”¨ã€é«˜å®¹é”™æ€§ã€è‡ªæ¢å¤è¿™äº›éƒ½æ˜¯äº‘çš„åŸºæœ¬å±æ€§ï¼Œäº‘åŸç”Ÿä½œä¸ºä¸€ç§äº‘è®¡ç®—ï¼Œè¿™æ˜¯æ‰€å…·å¤‡çš„ç¬¬ä¸€å±‚å«ä¹‰ã€‚ ç¬¬äºŒå±‚è¦ä» Native æ¥çœ‹ï¼Œäº‘åŸç”Ÿå’Œä¼ ç»Ÿçš„åœ¨äº‘ä¸Šè·‘çš„åº”ç”¨æ˜¯ä¸åŒã€‚æ¯”å¦‚ä¸€äº›åŸºäºå…¬æœ‰äº‘æ­å»ºçš„åº”ç”¨ï¼Œæ˜¯åŸºäºä¼ ç»Ÿçš„SOAæ¶æ„æ¥æ­å»ºçš„ï¼Œç„¶åå†ç§»æ¤åˆ°äº‘ä¸Šå»è¿è¡Œï¼Œé‚£ä¹ˆä»–å’Œäº‘å¾—æ•´åˆæ˜¯éå¸¸ä½å¾—ã€‚ä¸ºä»€ä¹ˆä½å‘¢ï¼Ÿäº‘ä½œä¸ºä¸€ç§åˆ†å¸ƒå¼æ¶æ„ï¼Œå…¶â€œåœŸè‘—å±…æ°‘â€ä¹Ÿåº”è¯¥æ˜¯åŸºäºåˆ†å¸ƒå¼æ¶æ„è®¾è®¡å‡ºæ¥å¾—ï¼Œè€Œå¾®æœåŠ¡æˆ–è€…Serverlessè¿™ç§å°†æœåŠ¡æˆ–å‡½æ•°æ‹†åˆ†æˆä¸€ä¸ªä¸ªæ¨¡å—çš„æ¾è€¦åˆç³»ç»Ÿå¤©ç„¶å°±å…·å¤‡åˆ†å¸ƒå¼è®¾è®¡å¾—å±æ€§ã€‚è¿™æ˜¯Nativeçš„ç¬¬ä¸€ç§è¡¨ç°ã€‚ å…¶æ¬¡äº‘ä½œä¸ºä¸€ç§PaaSæœåŠ¡ï¼Œè¿™ä½â€œåœŸè‘—å±…æ°‘â€ä»å‡ºç”Ÿ(è®¾è®¡)åˆ°æˆé•¿(å¼€å‘)ï¼Œå†åˆ°ç”Ÿæ´»(éƒ¨ç½²)éƒ½åº”è¯¥æ˜¯åŸºäºäº‘çš„ç†å¿µæ¥å®ç°çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—è‡ªåŠ¨åŒ–çš„å¼€å‘æµç¨‹CI/CDæ¥å®ç°ã€‚è¿™æ˜¯Nativeçš„ç¬¬äºŒç§è¡¨ç°ã€‚ è€Œæœ€åâ€œåœŸè‘—å±…æ°‘â€çš„ç‰¹ç‚¹å¸Œæœ›åšåˆ°èƒ½åœ¨æ‰€æœ‰çš„äº‘ç«¯éƒ½æ˜¯é€‚åº”çš„ï¼Œä¸ç®¡æ˜¯å„å‚å•†çš„å…¬æœ‰äº‘ åƒAWSã€Azureã€é˜¿é‡Œäº‘ï¼Œè¿˜æ˜¯å„ä¼ä¸šè‡ªå·±æ­å»ºçš„ç§æœ‰äº‘ï¼Œäº‘åŸç”Ÿçš„åº”ç”¨éƒ½èƒ½åšåˆ°æ— ç¼çš„è¿è¡Œå’Œè¿æ¥ã€‚ å‚è€ƒæ–‡çŒ® Paul Fremantleâ€™s Blog Cloud-Native: What It Is and How It All Started The Twelve Factor App Migrating to Cloud Native Application Architectures è¿ç§»åˆ°äº‘åŸç”Ÿåº”ç”¨æ¶æ„ å¾®è½¯æŠ€æœ¯æ–‡æ¡£: äº‘åŸç”Ÿçš„å®šä¹‰]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>CNCF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kuberneteså®¹å™¨å¼€æ”¾æ¥å£ç³»åˆ—:å®¹å™¨è¿è¡Œæ—¶æ¥å£(CRI)]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2FKubernetes%E5%AE%B9%E5%99%A8%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3-CRI%2F</url>
    <content type="text"><![CDATA[CRI ç®€ä»‹åœ¨ Kubernetes1.5 ä¹‹å‰ Docker ä½œä¸ºç¬¬ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼ŒKubelet é€šè¿‡å†…åµŒ dockershim æ“ä½œå®¹å™¨APIï¼Œä½†éšç€è¶Šæ¥è¶Šå¤šçš„å®¹å™¨è¿è¡Œæ—¶çš„å¸Œæœ›åŠ å…¥kubeletï¼Œç¤¾åŒºå¼€å§‹æœ‰äººæå‡ºé€šè¿‡åŠ å…¥ä¸€ä¸ªclient/serveræ¥å£æ¥æŠ½è±¡å®¹å™¨è¿è¡Œæ—¶ã€‚åœ¨ v1.6.0 åï¼Œ Kubernetes å¼€å§‹é»˜è®¤å¯ç”¨ CRI(å®¹å™¨è¿è¡Œæ—¶æ¥å£)ï¼Œä¸‹å›¾æ˜¯å®¹å™¨è¿è¡Œæ—¶åœ¨ kubernets ä¸­å¾—ä½œç”¨ã€‚ å›¾1. kubernetsæ“ä½œæ•°æ®æµå›¾ CRI æ¶æ„ä»‹ç»ä»¥ä¸‹ä¸»è¦ä»‹ç»Kubernetes1.18ç‰ˆçš„CRI CRI ä¸º kubelet æä¾›ä¸€å¥—æŠ½è±¡çš„å®¹å™¨è°ƒåº¦çš„æ¥å£ï¼ŒCRI ä¸»è¦æ‰¿æ¥ kubelet å¯¹å®¹å™¨çš„æ“ä½œã€‚CRI å¾—é€šä¿¡åè®®æ˜¯ gRPCï¼Œå½“æ—¶ä¸»è¦è€ƒè™‘åˆ°æ€§èƒ½é—®é¢˜ã€‚åŠ å…¥ CRI å kubelet å¾—æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾2. kubelet æ¶æ„ Kubelet ç°åœ¨ä¸»è¦åŒ…å«ä¸¤ä¸ªè¿è¡Œæ—¶çš„æ¨¡å—ï¼Œä¸€ä¸ªæ˜¯ dockershim, ä¸€ä¸ªæ˜¯ remoteã€‚dockershim æ˜¯åŸæ¥çš„æä¾›Dockerçš„è¿è¡Œæ—¶æ¥å£(PS: dockeræœç„¶è¿˜æ˜¯ä¸€ç­‰å…¬æ°‘ğŸ¤­:)ã€‚remoteåŒ…å¯¹åº”çš„å°±æ˜¯ CRI æ¥å£ï¼Œé‡‡ç”¨gRPCï¼Œé€šè¿‡ RemoteRuntime å’Œ CRI RuntimeServiceç›¸è¿ï¼š12345678910111213141516171819202122232425262728293031...// createAndStartFakeRemoteRuntime creates and starts fakeremote.RemoteRuntime.// It returns the RemoteRuntime, endpoint on success.// Users should call fakeRuntime.Stop() to cleanup the server.func createAndStartFakeRemoteRuntime(t *testing.T) (*fakeremote.RemoteRuntime, string) &#123; endpoint, err := fakeremote.GenerateEndpoint() require.NoError(t, err) fakeRuntime := fakeremote.NewFakeRemoteRuntime() fakeRuntime.Start(endpoint) return fakeRuntime, endpoint&#125;func createRemoteRuntimeService(endpoint string, t *testing.T) internalapi.RuntimeService &#123; runtimeService, err := NewRemoteRuntimeService(endpoint, defaultConnectionTimeout) require.NoError(t, err) return runtimeService&#125;func TestVersion(t *testing.T) &#123; fakeRuntime, endpoint := createAndStartFakeRemoteRuntime(t) defer fakeRuntime.Stop() r := createRemoteRuntimeService(endpoint, t) version, err := r.Version(apitest.FakeVersion) assert.NoError(t, err) assert.Equal(t, apitest.FakeVersion, version.Version) assert.Equal(t, apitest.FakeRuntimeName, version.RuntimeName)&#125; CRI å®¹å™¨è¿è¡Œæ—¶çš„ä¸‰ç±»è¡Œä¸ºCRI å®¹å™¨è¿è¡Œæ—¶ä¸»è¦æè¿°äº†ä¸‰ç§æœåŠ¡çš„è¡Œä¸º Sandboxã€Containerã€Imageï¼š å›¾3. CRIå®¹å™¨è¿è¡Œæ—¶æµç¨‹ Sandbox:12345678910111213141516171819// PodSandboxManager contains methods for operating on PodSandboxes. The methods// are thread-safe.type PodSandboxManager interface &#123; // RunPodSandbox creates and starts a pod-level sandbox. Runtimes should ensure // the sandbox is in ready state. RunPodSandbox(config *runtimeapi.PodSandboxConfig, runtimeHandler string) (string, error) // StopPodSandbox stops the sandbox. If there are any running containers in the // sandbox, they should be force terminated. StopPodSandbox(podSandboxID string) error // RemovePodSandbox removes the sandbox. If there are running containers in the // sandbox, they should be forcibly removed. RemovePodSandbox(podSandboxID string) error // PodSandboxStatus returns the Status of the PodSandbox. PodSandboxStatus(podSandboxID string) (*runtimeapi.PodSandboxStatus, error) // ListPodSandbox returns a list of Sandbox. ListPodSandbox(filter *runtimeapi.PodSandboxFilter) ([]*runtimeapi.PodSandbox, error) // PortForward prepares a streaming endpoint to forward ports from a PodSandbox, and returns the address. PortForward(*runtimeapi.PortForwardRequest) (*runtimeapi.PortForwardResponse, error)&#125; Container:1234567891011121314151617181920212223242526272829// ContainerManager contains methods to manipulate containers managed by a// container runtime. The methods are thread-safe.type ContainerManager interface &#123; // CreateContainer creates a new container in specified PodSandbox. CreateContainer(podSandboxID string, config *runtimeapi.ContainerConfig, sandboxConfig *runtimeapi.PodSandboxConfig) (string, error) // StartContainer starts the container. StartContainer(containerID string) error // StopContainer stops a running container with a grace period (i.e., timeout). StopContainer(containerID string, timeout int64) error // RemoveContainer removes the container. RemoveContainer(containerID string) error // ListContainers lists all containers by filters. ListContainers(filter *runtimeapi.ContainerFilter) ([]*runtimeapi.Container, error) // ContainerStatus returns the status of the container. ContainerStatus(containerID string) (*runtimeapi.ContainerStatus, error) // UpdateContainerResources updates the cgroup resources for the container. UpdateContainerResources(containerID string, resources *runtimeapi.LinuxContainerResources) error // ExecSync executes a command in the container, and returns the stdout output. // If command exits with a non-zero exit code, an error is returned. ExecSync(containerID string, cmd []string, timeout time.Duration) (stdout []byte, stderr []byte, err error) // Exec prepares a streaming endpoint to execute a command in the container, and returns the address. Exec(*runtimeapi.ExecRequest) (*runtimeapi.ExecResponse, error) // Attach prepares a streaming endpoint to attach to a running container, and returns the address. Attach(req *runtimeapi.AttachRequest) (*runtimeapi.AttachResponse, error) // ReopenContainerLog asks runtime to reopen the stdout/stderr log file // for the container. If it returns error, new container log file MUST NOT // be created. ReopenContainerLog(ContainerID string) error&#125; Image:123456789101112131415// ImageManagerService interface should be implemented by a container image// manager.// The methods should be thread-safe.type ImageManagerService interface &#123; // ListImages lists the existing images. ListImages(filter *runtimeapi.ImageFilter) ([]*runtimeapi.Image, error) // ImageStatus returns the status of the image. ImageStatus(image *runtimeapi.ImageSpec) (*runtimeapi.Image, error) // PullImage pulls an image with the authentication config. PullImage(image *runtimeapi.ImageSpec, auth *runtimeapi.AuthConfig, podSandboxConfig *runtimeapi.PodSandboxConfig) (string, error) // RemoveImage removes the image. RemoveImage(image *runtimeapi.ImageSpec) error // ImageFsInfo returns information of the filesystem that is used to store images. ImageFsInfo() ([]*runtimeapi.FilesystemUsage, error)&#125; CRI å®¹å™¨ç”Ÿå‘½å‘¨æœŸæ“ä½œæµç¨‹kubeletåˆ›å»ºä¸€ä¸ªPodä¸»è¦å¯ä»¥æ‹†è§£æˆï¼š è°ƒç”¨RunPodSandoxåˆ›å»ºä¸€ä¸ªpodæ²™ç›’ è°ƒç”¨CreateContaineråˆ›å»ºä¸€ä¸ªå®¹å™¨ è°ƒç”¨StartContainerå¯åŠ¨ä¸€ä¸ªå®¹å™¨ å›¾4. å®¹å™¨ç”Ÿå‘½å‘¨æœŸæ“ä½œæµç¨‹ CRI Streamingæ¥å£streamingæ¥å£ä¸»è¦æ˜¯ç”¨äºæ‰§è¡Œ exec å‘½ä»¤ï¼Œexec å‘½ä»¤ä¸»è¦ç”¨äº attach å®¹å™¨è¿›è¡Œäº¤äº’ï¼Œé€šè¿‡æµå¼æ¥å£çš„å¯ä»¥èŠ‚çœèµ„æºï¼Œæé«˜è¿æ¥çš„å¯é æ€§ã€‚kubelet è°ƒç”¨ Exec() æ¥å£å‘ç»™ RuntimeService ï¼ŒRuntimeService è¿”å›ä¸€ä¸ª url ç»™åˆ° apiserverï¼Œ è®© apiserver è·Ÿ Stream Server ç›´æ¥å»ºç«‹è¿æ¥ï¼Œè·å–æµå¼æ•°æ®ã€‚ ç”±äºç»•è¿‡äº†kubeletï¼Œå› æ­¤Stream Server ä¹Ÿæé«˜è¿æ¥çš„å¯é æ€§CRI ä¸­ Exec() æ¥å£ï¼š12345678910// ContainerManager contains methods to manipulate containers managed by a// container runtime. The methods are thread-safe.type ContainerManager interface &#123; ... // Exec prepares a streaming endpoint to execute a command in the container, and returns the address. Exec(*runtimeapi.ExecRequest) (*runtimeapi.ExecResponse, error) // Attach prepares a streaming endpoint to attach to a running container, and returns the address. Attach(req *runtimeapi.AttachRequest) (*runtimeapi.AttachResponse, error) ...&#125; å›¾5. streamingæ•°æ®æµ CRI protoæ¥å£å®šä¹‰CRI æ˜¯ä¸€ä¸ªä¸ºkubeletæä¾›çš„ä¸€ä¸ªå¹¿æ³›çš„å®¹å™¨è¿è¡Œæ—¶çš„æ— éœ€ç¼–è¯‘çš„æ¥å£æ’ä»¶ã€‚ CRI åŒ…å«äº†ä¸€ä¸ª protocol buffers å’Œ gRPC APIã€‚kubernetes1.18çš„ CRI ä»£ç è·¯å¾„ï¼škubernetes/staging/src/k8s.io/cri-api/ã€‚CRIä¸­å®šä¹‰äº†å®¹å™¨å’Œé•œåƒçš„æœåŠ¡çš„æ¥å£ï¼Œå› ä¸ºå®¹å™¨è¿è¡Œæ—¶ä¸é•œåƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯å½¼æ­¤éš”ç¦»çš„ï¼Œå› æ­¤éœ€è¦å®šä¹‰ä¸¤ä¸ªæœåŠ¡ RuntimeService å’Œ ImageServiceã€‚ RuntimeServiceçš„protoæ¥å£å®šä¹‰æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778// Runtime service defines the public APIs for remote container runtimesservice RuntimeService &#123; // Version returns the runtime name, runtime version, and runtime API version. rpc Version(VersionRequest) returns (VersionResponse) &#123;&#125; // RunPodSandbox creates and starts a pod-level sandbox. Runtimes must ensure // the sandbox is in the ready state on success. rpc RunPodSandbox(RunPodSandboxRequest) returns (RunPodSandboxResponse) &#123;&#125; // StopPodSandbox stops any running process that is part of the sandbox and // reclaims network resources (e.g., IP addresses) allocated to the sandbox. // If there are any running containers in the sandbox, they must be forcibly // terminated. // This call is idempotent, and must not return an error if all relevant // resources have already been reclaimed. kubelet will call StopPodSandbox // at least once before calling RemovePodSandbox. It will also attempt to // reclaim resources eagerly, as soon as a sandbox is not needed. Hence, // multiple StopPodSandbox calls are expected. rpc StopPodSandbox(StopPodSandboxRequest) returns (StopPodSandboxResponse) &#123;&#125; // RemovePodSandbox removes the sandbox. If there are any running containers // in the sandbox, they must be forcibly terminated and removed. // This call is idempotent, and must not return an error if the sandbox has // already been removed. rpc RemovePodSandbox(RemovePodSandboxRequest) returns (RemovePodSandboxResponse) &#123;&#125; // PodSandboxStatus returns the status of the PodSandbox. If the PodSandbox is not // present, returns an error. rpc PodSandboxStatus(PodSandboxStatusRequest) returns (PodSandboxStatusResponse) &#123;&#125; // ListPodSandbox returns a list of PodSandboxes. rpc ListPodSandbox(ListPodSandboxRequest) returns (ListPodSandboxResponse) &#123;&#125; // CreateContainer creates a new container in specified PodSandbox rpc CreateContainer(CreateContainerRequest) returns (CreateContainerResponse) &#123;&#125; // StartContainer starts the container. rpc StartContainer(StartContainerRequest) returns (StartContainerResponse) &#123;&#125; // StopContainer stops a running container with a grace period (i.e., timeout). // This call is idempotent, and must not return an error if the container has // already been stopped. // TODO: what must the runtime do after the grace period is reached? rpc StopContainer(StopContainerRequest) returns (StopContainerResponse) &#123;&#125; // RemoveContainer removes the container. If the container is running, the // container must be forcibly removed. // This call is idempotent, and must not return an error if the container has // already been removed. rpc RemoveContainer(RemoveContainerRequest) returns (RemoveContainerResponse) &#123;&#125; // ListContainers lists all containers by filters. rpc ListContainers(ListContainersRequest) returns (ListContainersResponse) &#123;&#125; // ContainerStatus returns status of the container. If the container is not // present, returns an error. rpc ContainerStatus(ContainerStatusRequest) returns (ContainerStatusResponse) &#123;&#125; // UpdateContainerResources updates ContainerConfig of the container. rpc UpdateContainerResources(UpdateContainerResourcesRequest) returns (UpdateContainerResourcesResponse) &#123;&#125; // ReopenContainerLog asks runtime to reopen the stdout/stderr log file // for the container. This is often called after the log file has been // rotated. If the container is not running, container runtime can choose // to either create a new log file and return nil, or return an error. // Once it returns error, new container log file MUST NOT be created. rpc ReopenContainerLog(ReopenContainerLogRequest) returns (ReopenContainerLogResponse) &#123;&#125; // ExecSync runs a command in a container synchronously. rpc ExecSync(ExecSyncRequest) returns (ExecSyncResponse) &#123;&#125; // Exec prepares a streaming endpoint to execute a command in the container. rpc Exec(ExecRequest) returns (ExecResponse) &#123;&#125; // Attach prepares a streaming endpoint to attach to a running container. rpc Attach(AttachRequest) returns (AttachResponse) &#123;&#125; // PortForward prepares a streaming endpoint to forward ports from a PodSandbox. rpc PortForward(PortForwardRequest) returns (PortForwardResponse) &#123;&#125; // ContainerStats returns stats of the container. If the container does not // exist, the call returns an error. rpc ContainerStats(ContainerStatsRequest) returns (ContainerStatsResponse) &#123;&#125; // ListContainerStats returns stats of all running containers. rpc ListContainerStats(ListContainerStatsRequest) returns (ListContainerStatsResponse) &#123;&#125; // UpdateRuntimeConfig updates the runtime configuration based on the given request. rpc UpdateRuntimeConfig(UpdateRuntimeConfigRequest) returns (UpdateRuntimeConfigResponse) &#123;&#125; // Status returns the status of the runtime. rpc Status(StatusRequest) returns (StatusResponse) &#123;&#125;&#125; ImageService çš„ proto æ¥å£å®šä¹‰æ–‡ä»¶ï¼š1234567891011121314151617// ImageService defines the public APIs for managing images.service ImageService &#123; // ListImages lists existing images. rpc ListImages(ListImagesRequest) returns (ListImagesResponse) &#123;&#125; // ImageStatus returns the status of the image. If the image is not // present, returns a response with ImageStatusResponse.Image set to // nil. rpc ImageStatus(ImageStatusRequest) returns (ImageStatusResponse) &#123;&#125; // PullImage pulls an image with authentication config. rpc PullImage(PullImageRequest) returns (PullImageResponse) &#123;&#125; // RemoveImage removes the image. // This call is idempotent, and must not return an error if the image has // already been removed. rpc RemoveImage(RemoveImageRequest) returns (RemoveImageResponse) &#123;&#125; // ImageFSInfo returns information of the filesystem that is used to store images. rpc ImageFsInfo(ImageFsInfoRequest) returns (ImageFsInfoResponse) &#123;&#125;&#125; CRIå·¥å…·ä»‹ç» CRIå‘½ä»¤å·¥å…·:crictlï¼Œå¸®åŠ©ç”¨æˆ·å’Œå¼€å‘è€…è°ƒè¯•å®¹å™¨é—®é¢˜ CRIæµ‹è¯•å·¥å…·ï¼šcritestï¼Œç”¨äºéªŒè¯CRIæ¥å£çš„æµ‹è¯•å·¥å…·ï¼ŒéªŒè¯æ˜¯å¦æ»¡è¶³Kubeletè¦æ±‚ã€‚ crictl å®‰è£…ï¼š1234VERSION=&quot;v1.17.0&quot;wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/crictl-$VERSION-linux-amd64.tar.gzsudo tar zxvf crictl-$VERSION-linux-amd64.tar.gz -C /usr/local/binrm -f crictl-$VERSION-linux-amd64.tar.gz critest å®‰è£…ï¼š1234VERSION=&quot;v1.17.0&quot;wget https://github.com/kubernetes-sigs/cri-tools/releases/download/$VERSION/critest-$VERSION-linux-amd64.tar.gzsudo tar zxvf critest-$VERSION-linux-amd64.tar.gz -C /usr/local/binrm -f critest-$VERSION-linux-amd64.tar.gz å‚è€ƒæ–‡çŒ® Introducing Container Runtime Interface (CRI) in Kubernetes CNCF x Alibaba äº‘åŸç”ŸæŠ€æœ¯å…¬å¼€è¯¾ cri-tools]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>cri</tag>
        <tag>Kubernetes</tag>
        <tag>æ¥å£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŠ€æœ¯è§„èŒƒ(2): åç«¯æŠ€æœ¯å¼€å‘è§„èŒƒ]]></title>
    <url>%2F2020%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83-2-%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[Python å¼€å‘è§„èŒƒ ä¼˜ç¾èƒœäºä¸‘é™‹æ˜äº†èƒœäºæ™¦æ¶©ç®€æ´èƒœäºå¤æ‚å¤æ‚èƒœäºå‡Œä¹±æ‰å¹³èƒœäºåµŒå¥—é—´éš”èƒœäºç´§å‡‘å¯è¯»æ€§å¾ˆé‡è¦å³ä¾¿å‡å€Ÿç‰¹ä¾‹çš„å®ç”¨æ€§ä¹‹åï¼Œä¹Ÿä¸å¯è¿èƒŒè¿™äº›è§„åˆ™ ä¸Šé¢æ˜¯ Python ä¹‹ç¦…ï¼Œå¾ˆå¥½åœ°ä½“ç°äº† Python è¯­è¨€æ‰€ä¼ è¾¾çš„ç¼–ç¨‹ç†å¿µã€‚ PEP8 æ ‡å‡†PEP8 è§„èŒƒï¼šhttps://www.python.org/dev/peps/pep-0008/ æ ‡å‡†ï¼š ç¼©è¿›ï¼šæ¯ä¸€çº§ç¼©è¿›ä½¿ç”¨4ä¸ªç©ºæ ¼ã€‚ ç»­è¡Œåº”è¯¥ä¸å…¶åŒ…è£¹å…ƒç´ å¯¹é½ï¼Œè¦ä¹ˆä½¿ç”¨åœ†æ‹¬å·ã€æ–¹æ‹¬å·å’ŒèŠ±æ‹¬å·å†…çš„éšå¼è¡Œè¿æ¥æ¥å‚ç›´å¯¹é½ï¼Œè¦ä¹ˆä½¿ç”¨æŒ‚è¡Œç¼©è¿›å¯¹é½3ã€‚å½“ä½¿ç”¨æŒ‚è¡Œç¼©è¿›æ—¶ï¼Œåº”è¯¥è€ƒè™‘åˆ°ç¬¬ä¸€è¡Œä¸åº”è¯¥æœ‰å‚æ•°ï¼Œä»¥åŠä½¿ç”¨ç¼©è¿›ä»¥åŒºåˆ†è‡ªå·±æ˜¯ç»­è¡Œã€‚ 12345678910# ä¸å·¦æ‹¬å·å¯¹é½foo = long_function_name(var_one, var_two, var_three, var_four)# ç”¨æ›´å¤šçš„ç¼©è¿›æ¥ä¸å…¶ä»–è¡ŒåŒºåˆ†# æŒ‚è¡Œç¼©è¿›åº”è¯¥å†æ¢ä¸€è¡Œdef long_function_name( var_one, var_two, var_three, var_four): print(var_one) åœ¨å¤šè¡Œç»“æ„ä¸­çš„å¤§æ‹¬å·/ä¸­æ‹¬å·/å°æ‹¬å·çš„å³æ‹¬å·å¯ä»¥ä¸å†…å®¹å¯¹é½å•ç‹¬èµ·ä¸€è¡Œä½œä¸ºæœ€åä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ 12345678my_list = [ 1, 2, 3, 4, 5, 6, ]result = some_function_that_takes_arguments( 'a', 'b', 'c', 'd', 'e', 'f', ) æ‰€æœ‰è¡Œé™åˆ¶çš„æœ€å¤§å­—ç¬¦æ•°ä¸º79ã€‚ é¡¶å±‚å‡½æ•°å’Œç±»çš„å®šä¹‰ï¼Œå‰åç”¨ä¸¤ä¸ªç©ºè¡Œéš”å¼€ã€‚ç±»é‡Œçš„æ–¹æ³•å®šä¹‰ç”¨ä¸€ä¸ªç©ºè¡Œéš”å¼€ã€‚ importå¯¼å…¥é€šå¸¸åœ¨åˆ†å¼€çš„è¡Œã€‚ 1234æ¨è: import os import sysä¸æ¨è: import sys, os importé¡ºåº:æ ‡å‡†åº“å¯¼å…¥ç›¸å…³ç¬¬ä¸‰æ–¹åº“å¯¼å…¥æœ¬åœ°åº”ç”¨/åº“ç‰¹å®šå¯¼å…¥ï¼ˆåœ¨æ¯ç±»å¯¼å…¥ä¹‹é—´åŠ å…¥ç©ºè¡Œåˆ†å‰²ï¼‰ åƒ __all__ , __author__ , __version__ ç­‰è¿™æ ·çš„æ¨¡å—çº§â€œå‘†åâ€œï¼ˆä¹Ÿå°±æ˜¯åå­—é‡Œæœ‰ä¸¤ä¸ªå‰ç¼€ä¸‹åˆ’çº¿å’Œä¸¤ä¸ªåç¼€ä¸‹åˆ’çº¿ï¼‰ï¼Œåº”è¯¥æ”¾åœ¨æ–‡æ¡£å­—ç¬¦ä¸²çš„åé¢ï¼Œä»¥åŠé™¤ from __future__ ä¹‹å¤–çš„importè¡¨è¾¾å¼å‰é¢ã€‚Pythonè¦æ±‚å°†æ¥åœ¨æ¨¡å—ä¸­çš„å¯¼å…¥ï¼Œå¿…é¡»å‡ºç°åœ¨é™¤æ–‡æ¡£å­—ç¬¦ä¸²ä¹‹å¤–çš„å…¶ä»–ä»£ç ä¹‹å‰ã€‚ 12345678910111213"""This is the example module.This module does stuff."""from __future__ import barry_as_FLUFL__all__ = ['a', 'b', 'c']__version__ = '0.1'__author__ = 'Cardinal Biggles'import osimport sys é¿å…ä½¿ç”¨æ— å…³çš„ç©ºæ ¼ï¼Œé¿å…åœ¨å°¾éƒ¨æ·»åŠ ç©ºæ ¼ã€‚å› ä¸ºå°¾éƒ¨çš„ç©ºæ ¼é€šå¸¸éƒ½çœ‹ä¸è§ï¼Œä¼šäº§ç”Ÿæ··ä¹±ã€‚ æ€»æ˜¯åœ¨äºŒå…ƒè¿ç®—ç¬¦ä¸¤è¾¹åŠ ä¸€ä¸ªç©ºæ ¼ã€‚ å¦‚æœä½¿ç”¨å…·æœ‰ä¸åŒä¼˜å…ˆçº§çš„è¿ç®—ç¬¦ï¼Œè¯·è€ƒè™‘åœ¨å…·æœ‰æœ€ä½ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦å‘¨å›´æ·»åŠ ç©ºæ ¼ã€‚ 12345i = i + 1submitted += 1x = x*2 - 1hypot2 = x*x + y*yc = (a+b) * (a-b) ä¸ä»£ç ç›¸çŸ›ç›¾çš„æ³¨é‡Šæ¯”æ²¡æœ‰æ³¨é‡Šè¿˜ç³Ÿï¼Œå½“ä»£ç æ›´æ”¹æ—¶ï¼Œä¼˜å…ˆæ›´æ–°å¯¹åº”çš„æ³¨é‡Šã€‚ å—æ³¨é‡Šé€šå¸¸é€‚ç”¨äºè·Ÿéšå®ƒä»¬çš„æŸäº›ï¼ˆæˆ–å…¨éƒ¨ï¼‰ä»£ç ï¼Œå¹¶ç¼©è¿›åˆ°ä¸ä»£ç ç›¸åŒçš„çº§åˆ«ã€‚å—æ³¨é‡Šçš„æ¯ä¸€è¡Œå¼€å¤´ä½¿ç”¨ä¸€ä¸ª#å’Œä¸€ä¸ªç©ºæ ¼ï¼ˆé™¤éå—æ³¨é‡Šå†…éƒ¨ç¼©è¿›æ–‡æœ¬ï¼‰ã€‚å—æ³¨é‡Šå†…éƒ¨çš„æ®µè½é€šè¿‡åªæœ‰ä¸€ä¸ª#çš„ç©ºè¡Œåˆ†éš”ã€‚ è¦ä¸ºæ‰€æœ‰çš„å…¬å…±æ¨¡å—ï¼Œå‡½æ•°ï¼Œç±»ä»¥åŠæ–¹æ³•ç¼–å†™æ–‡æ¡£è¯´æ˜ã€‚ 12345678def complex(real=0.0, imag=0.0): &quot;&quot;&quot;Form a complex number. Keyword arguments: real -- the real part (default 0.0) imag -- the imaginary part (default 0.0) &quot;&quot;&quot; ... å‘½åè§„èŒƒ ï¼ˆ1ï¼‰æ¨¡å—åº”è¯¥ç”¨ç®€çŸ­å…¨å°å†™çš„åå­—ï¼Œå¦‚æœä¸ºäº†æå‡å¯è¯»æ€§ï¼Œä¸‹åˆ’çº¿ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ã€‚PythonåŒ…åä¹Ÿåº”è¯¥ä½¿ç”¨ç®€çŸ­å…¨å°å†™çš„åå­—ï¼Œä½†ä¸å»ºè®®ç”¨ä¸‹åˆ’çº¿ã€‚ï¼ˆ2ï¼‰ç±»åä¸€èˆ¬ä½¿ç”¨é¦–å­—æ¯å¤§å†™çš„çº¦å®šã€‚åœ¨æ¥å£è¢«æ–‡æ¡£åŒ–å¹¶ä¸”ä¸»è¦è¢«ç”¨äºè°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°çš„å‘½åé£æ ¼ä»£æ›¿ã€‚æ³¨æ„ï¼Œå¯¹äºå†…ç½®çš„å˜é‡å‘½åæœ‰ä¸€ä¸ªå•ç‹¬çš„çº¦å®šï¼šå¤§éƒ¨åˆ†å†…ç½®å˜é‡æ˜¯å•ä¸ªå•è¯ï¼ˆæˆ–è€…ä¸¤ä¸ªå•è¯è¿æ¥åœ¨ä¸€èµ·ï¼‰ï¼Œé¦–å­—æ¯å¤§å†™çš„å‘½åæ³•åªç”¨äºå¼‚å¸¸åæˆ–è€…å†…éƒ¨çš„å¸¸é‡ã€‚ï¼ˆ3ï¼‰å› ä¸ºå¼‚å¸¸ä¸€èˆ¬éƒ½æ˜¯ç±»ï¼Œæ‰€æœ‰ç±»çš„å‘½åæ–¹æ³•åœ¨è¿™é‡Œä¹Ÿé€‚ç”¨ã€‚ç„¶è€Œï¼Œä½ éœ€è¦åœ¨å¼‚å¸¸ååé¢åŠ ä¸Šâ€œErrorâ€åç¼€ã€‚ï¼ˆ4ï¼‰å‡½æ•°ååº”è¯¥å°å†™ï¼Œå¦‚æœæƒ³æé«˜å¯è¯»æ€§å¯ä»¥ç”¨ä¸‹åˆ’çº¿åˆ†éš”ã€‚ï¼ˆ5ï¼‰å…¨å±€å˜é‡åå’Œå‡½æ•°å‘½åè§„åˆ™ä¸€æ ·ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯é€šè¿‡ from M import * å¯¼å…¥çš„æ¨¡å—åº”è¯¥ä½¿ç”¨allæœºåˆ¶å»é˜²æ­¢å†…éƒ¨çš„æ¥å£å¯¹å¤–æš´éœ²ï¼Œæˆ–è€…ä½¿ç”¨åœ¨å…¨å±€å˜é‡å‰åŠ ä¸‹åˆ’çº¿çš„æ–¹å¼ã€‚ï¼ˆ6ï¼‰å¦‚æœå‡½æ•°çš„å‚æ•°åå’Œå·²æœ‰çš„å…³é”®è¯å†²çªï¼Œåœ¨æœ€ååŠ å•ä¸€ä¸‹åˆ’çº¿æ¯”ç¼©å†™æˆ–éšæ„æ‹¼å†™æ›´å¥½ã€‚ï¼ˆ7ï¼‰å¸¸é‡é€šå¸¸å®šä¹‰åœ¨æ¨¡å—çº§ï¼Œé€šè¿‡ä¸‹åˆ’çº¿åˆ†éš”çš„å…¨å¤§å†™å­—æ¯å‘½åã€‚ä¾‹å¦‚ï¼š MAX_OVERFLOW å’Œ TOTALã€‚ ä»Exceptionç»§æ‰¿å¼‚å¸¸ï¼Œè€Œä¸æ˜¯BaseExceptionã€‚ç›´æ¥ç»§æ‰¿BaseExceptionçš„å¼‚å¸¸é€‚ç”¨äºå‡ ä¹ä¸ç”¨æ¥æ•æ‰çš„å¼‚å¸¸ã€‚ å½“æ•è·åˆ°å¼‚å¸¸æ—¶ï¼Œå¦‚æœå¯ä»¥çš„è¯å†™ä¸Šå…·ä½“çš„å¼‚å¸¸åï¼Œè€Œä¸æ˜¯åªç”¨ä¸€ä¸ªexceptï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªexcept: å—å°†ä¼šæ•è·åˆ°SystemExitå’ŒKeyboardInterruptå¼‚å¸¸ï¼Œè¿™æ ·ä¼šå¾ˆéš¾é€šè¿‡ctrl+Cä¸­æ–­ç¨‹åºï¼Œè€Œä¸”ä¼šæ©ç›–æ‰å…¶ä»–é—®é¢˜ã€‚å¦‚æœä½ æƒ³æ•è·æ‰€æœ‰æŒ‡ç¤ºç¨‹åºå‡ºé”™çš„å¼‚å¸¸ï¼Œä½¿ç”¨ except Exceptionã€‚æ­£ç¡®çš„æ˜¯ï¼š 1234try: import platform_specific_moduleexcept ImportError: platform_specific_module = None æ— è®ºä½•æ—¶è·å–å’Œé‡Šæ”¾èµ„æºï¼Œéƒ½åº”è¯¥é€šè¿‡å•ç‹¬çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œæ¯”å¦‚ä½¿ç”¨with è¡¨è¾¾å¼æ¥ç¡®ä¿è¿™ä¸ªèµ„æºä½¿ç”¨å®Œåè¢«æ¸…ç†å¹²ã€‚ è¿”å›çš„è¯­å¥ä¿æŒä¸€è‡´ã€‚å‡½æ•°ä¸­çš„è¿”å›è¯­å¥éƒ½åº”è¯¥è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæˆ–è€…éƒ½ä¸è¿”å›ã€‚å¦‚æœä¸€ä¸ªè¿”å›è¯­å¥éœ€è¦è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆåœ¨æ²¡æœ‰å€¼å¯ä»¥è¿”å›çš„æƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨ return None æ˜¾å¼æŒ‡æ˜ã€‚12345678910def foo(x): if x &gt;= 0: return math.sqrt(x) else: return Nonedef bar(x): if x &lt; 0: return None return math.sqrt(x) å·¥å…·å…·ä½“çš„å¯ä»¥ä½¿ç”¨Autopep8å·¥å…·ååŠ©æ’ç‰ˆã€‚ å®‰è£…autopep8ï¼š1pip install autopep8 ç”¨æ³•ï¼š1234567891011121314151617181920212223242526272829303132333435363738autopep8 [å‚æ•°] [Pythonæ–‡ä»¶]æ ¸å¿ƒå‚æ•°: -d, --diff print the diff for the fixed source -i, --in-place make changes to files in place --global-config filename path to a global pep8 config file; if this file does not exist then this is ignored (default: ~/.config/pep8) --ignore-local-config don't look for and apply local config files; if not passed, defaults are updated with any config files in the project's root directory -r, --recursive run recursively over directories; must be used with --in-place or --diff -j n, --jobs n number of parallel jobs; match CPU count if value is less than 1 -p n, --pep8-passes n maximum number of additional pep8 passes (default: infinite) -a, --aggressive enable non-whitespace changes; multiple -a result in more aggressive changes --experimental enable experimental fixes --exclude globs exclude file/directory names that match these comma- separated globs --list-fixes list codes for fixes; used by --ignore and --select --ignore errors do not fix these errors/warnings (default: E226,E24,W50,W690) --select errors fix only these errors/warnings (e.g. E4,W) --max-line-length n set maximum allowed line length (default: 79) --line-range line line, --range line line only fix errors found within this inclusive range of line numbers (e.g. 1 99); line numbers are indexed at 1 --hang-closing hang-closing option passed to pycodestyle --exit-code change to behavior of exit code. default behavior of return value, 0 is no differences, 1 is error exit. return 2 when add this option. 2 is exists differences. --in-place ä¼šç›´æ¥å°†ç»“æœä¿å­˜åˆ°æºæ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸åŒ…å«--in-placeé€‰é¡¹ï¼Œåˆ™ä¼šå°†autopep8æ ¼å¼åŒ–ä»¥åçš„ä»£ç ç›´æ¥è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ Go å¼€å‘è§„èŒƒGo è¯­è¨€è§„èŒƒGo ä»£ç å®¡æ ¸è§„èŒƒå®˜æ–¹åœ°å€ï¼šhttps://github.com/golang/go/wiki/CodeReviewComments æ‰€æœ‰ä»£ç åœ¨å‘å¸ƒå‰å‡ä½¿ç”¨gofmtè¿›è¡Œä¿®æ­£ã€‚ æ‰€æœ‰çš„æ³¨é‡Šéƒ½åº”è¯¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­ã€‚å¥å­åº”è¯¥ä»¥ä¸»è¯­å¼€å¤´ï¼Œå¥å·ç»“å°¾ã€‚ å£°æ˜ç©ºçš„æ•°ç»„åˆ†ç‰‡ï¼Œé¿å…åˆ†é…å†…å­˜ç©ºé—´ã€‚å› ä¸ºæœ‰äº›æ—¶å€™ï¼Œå¯èƒ½ä½ ä»æ²¡å‘è¿™ä¸ªæ•°ç»„åˆ†ç‰‡é‡Œé¢appendå…ƒç´  12345// æ¨èè¿™æ ·var t []string// è€Œä¸æ˜¯è¿™æ ·t := []string&#123;&#125;` å¤§å¤šæ•°ä½¿ç”¨ Context çš„å‡½æ•°éƒ½åº”è¯¥æ¥å— Context ä½œä¸ºå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚æ¯”å¦‚è¿™æ ·ï¼š 1func F(ctx context.Context, /* other arguments */) &#123;&#125; ä¸è¦å°† Context æˆå‘˜æ·»åŠ åˆ°æŸä¸ª struct ç±»å‹ä¸­ï¼›è€Œæ˜¯å°† ctx å‚æ•°æ·»åŠ åˆ°è¯¥ç±»å‹çš„æ–¹æ³•ä¸Šã€‚ä¸€ä¸ªä¾‹å¤–æƒ…å†µæ˜¯å½“å‰æ–¹æ³•ç­¾åå¿…é¡»ä¸æ ‡å‡†åº“æˆ–ç¬¬ä¸‰æ–¹åº“ä¸­çš„æ¥å£æ–¹æ³•åŒ¹é…ã€‚ä¸è¦åœ¨å‡½æ•°ç­¾åä¸­åˆ›å»ºè‡ªå®šä¹‰ Context ç±»å‹æˆ–ä½¿ç”¨é™¤äº† Context ä»¥å¤–çš„æ¥å£ã€‚ ä¸ºé¿å…æ„å¤–çš„åˆ«åï¼Œä»å¦ä¸€ä¸ªåŒ…å¤åˆ¶ struct æ—¶è¦å°å¿ƒã€‚ä¾‹å¦‚ï¼Œbytes.Buffer ç±»å‹åŒ…å«ä¸€ä¸ª []byte çš„ sliceï¼Œå¹¶ä¸”ä½œä¸ºçŸ­å­—ç¬¦ä¸²çš„ä¼˜åŒ–ï¼Œslice å¯ä»¥å¼•ç”¨ä¸€ä¸ªçŸ­å­—èŠ‚æ•°ç»„ã€‚å¦‚æœå¤åˆ¶ä¸€ä¸ª Bufferï¼Œå‰¯æœ¬ä¸­çš„ slice å¯èƒ½ä¼šå¯¹åŸå§‹æ•°ç»„è¿›è¡Œåˆ«åæ“ä½œï¼Œä»è€Œå¯¼è‡´åç»­æ–¹æ³•è°ƒç”¨äº§ç”Ÿä»¤äººæƒŠè®¶çš„æ•ˆæœã€‚é€šå¸¸ï¼Œå¦‚æœ T ç±»å‹çš„æ–¹æ³•ä¸å…¶æŒ‡é’ˆç±»å‹ *T ç›¸å…³è”ï¼Œè¯·ä¸è¦å¤åˆ¶ T ç±»å‹çš„å€¼ã€‚ ä¸è¦ä½¿ç”¨åŒ…math/randæ¥ç”Ÿæˆå¯†é’¥ï¼Œå³ä½¿æ˜¯ä¸€æ¬¡æ€§å¯†é’¥ã€‚åœ¨æ²¡æœ‰ç§å­ï¼ˆseedï¼‰çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆå™¨æ˜¯å®Œå…¨å¯ä»¥è¢«é¢„æµ‹çš„ã€‚ä½¿ç”¨time.Nanoseconds()ä½œä¸ºç§å­å€¼ï¼Œç†µåªæœ‰å‡ ä½ã€‚è¯·ä½¿ç”¨crypto/randçš„ Reader ä½œä¸ºæ›¿ä»£ï¼Œå¦‚æœä½ å€¾å‘äºä½¿ç”¨æ–‡æœ¬ï¼Œè¯·è¾“å‡ºæˆåå…­è¿›åˆ¶æˆ– base64 ç¼–ç ï¼š 1234567891011121314151617import ( "crypto/rand" // "encoding/base64" // "encoding/hex" "fmt")func Key() string &#123; buf := make([]byte, 16) _, err := rand.Read(buf) if err != nil &#123; panic(err) // out of randomness, should never happen &#125; return fmt.Sprintf("%x", buf) // or hex.EncodeToString(buf) // or base64.StdEncoding.EncodeToString(buf)&#125; Goæä¾›ä¸¤ç§æ³¨é‡Šé£æ ¼ï¼ŒCçš„å—æ³¨é‡Šé£æ ¼/**/ï¼ŒC++çš„è¡Œæ³¨é‡Šé£æ ¼//ã€‚åŒ…æ³¨é‡Šå¿…é¡»å‡ºç°åœ¨ package å£°æ˜çš„ä¸´è¿‘ä½ç½®ï¼Œæ— ç©ºè¡Œã€‚æ‰€æœ‰çš„é¡¶çº§å¯¼å‡ºçš„åç§°éƒ½åº”è¯¥æœ‰ doc æ³¨é‡Šï¼Œé‡è¦çš„æœªå¯¼å‡ºç±»å‹æˆ–å‡½æ•°å£°æ˜ä¹Ÿåº”å¦‚æ­¤ã€‚æ¯ä¸ªpublicå‡½æ•°éƒ½åº”è¯¥æœ‰æ³¨é‡Šï¼Œæ³¨é‡Šå¥å­åº”è¯¥ä»¥è¯¥å‡½æ•°åå¼€å¤´ï¼Œå¦‚ï¼š 123// Compile parses a regular expression and returns, if successful,// a Regexp that can be used to match against text.func Compile(str string) (*Regexp, error) &#123;&#125; å°½é‡ä¸è¦ä½¿ç”¨panicå¤„ç†é”™è¯¯ã€‚å‡½æ•°åº”è¯¥è®¾è®¡æˆå¤šè¿”å›å€¼ï¼Œå…¶ä¸­åŒ…æ‹¬è¿”å›ç›¸åº”çš„errorç±»å‹ã€‚ é”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²ä¸åº”å¤§å†™ï¼ˆé™¤éä»¥ä¸“æœ‰åè¯æˆ–é¦–å­—æ¯ç¼©ç•¥è¯å¼€å¤´ï¼‰æˆ–ä»¥æ ‡ç‚¹ç¬¦å·ç»“å°¾ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯åœ¨å…¶ä»–ä¸Šä¸‹æ–‡åæ‰“å°çš„ã€‚å³ä½¿ç”¨fmt.Errorf(&quot;something bad&quot;)è€Œä¸è¦ä½¿ç”¨fmt.Errorf(&quot;Something bad&quot;)ï¼Œå› æ­¤log.Printf(&quot;Reading %s: %v&quot;, filename, err)çš„æ ¼å¼ä¸­å°†ä¸ä¼šå‡ºç°é¢å¤–çš„å¤§å†™å­—æ¯ã€‚å¦åˆ™è¿™å°†ä¸é€‚ç”¨äºæ—¥å¿—è®°å½•ï¼Œå› ä¸ºå®ƒæ˜¯éšå¼çš„é¢å‘è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¶ä»–æ¶ˆæ¯ä¸­ç»„åˆã€‚ æ·»åŠ æ–°åŒ…æ—¶ï¼Œè¯·åŒ…å«é¢„æœŸç”¨æ³•çš„ç¤ºä¾‹ï¼šå¯è¿è¡Œçš„ç¤ºä¾‹ï¼Œæˆ–æ˜¯æ¼”ç¤ºå®Œæ•´è°ƒç”¨é“¾çš„ç®€å•æµ‹è¯•ã€‚Exampleå‡½æ•°ä¸€èˆ¬æ”¾åœ¨åŒ…ä¸‹çš„_test.goæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ï¼š 123456789101112package stringutil_testimport ( &quot;fmt&quot; &quot;github.com/golang/example/stringutil&quot;)func ExampleReverse() &#123; fmt.Println(stringutil.Reverse(&quot;hello&quot;)) // Output: olleh&#125; è¿™ç§å†™æ³•çš„å¥½å¤„æ˜¯ä½¿ç”¨ go test -vï¼Œå¦‚æœå’Œæ³¨é‡Šç§çš„ç»“æœä¸€è‡´åªä¼šè¿”å›PASSï¼Œå¦‚æœä¸ä¸€å®šæ‰“å°ã€‚ å½“ä½ ç”Ÿæˆ goroutines æ—¶ï¼Œè¦æ¸…æ¥šå®ƒä»¬ä½•æ—¶æˆ–æ˜¯å¦ä¼šé€€å‡ºã€‚è¯·å°½é‡è®©å¹¶å‘ä»£ç è¶³å¤Ÿç®€å•ï¼Œä»è€Œæ›´å®¹æ˜“åœ°ç¡®è®¤ goroutine çš„ç”Ÿå‘½å‘¨æœŸã€‚ ä¸è¦ä½¿ç”¨ _ å˜é‡ä¸¢å¼ƒ error å¦‚æœå‡½æ•°è¿”å› errorï¼Œè¯·æ£€æŸ¥å®ƒä»¥ç¡®ä¿å‡½æ•°æˆåŠŸã€‚å¤„ç† errorï¼Œè¿”å› errorï¼Œæˆ–è€…åœ¨çœŸæ­£ç‰¹æ®Šçš„æƒ…å†µä¸‹ä½¿ç”¨ panicã€‚ åŒ…å¯¼å…¥æŒ‰ç»„è¿›è¡Œç»„ç»‡ï¼Œç»„ä¸ç»„ä¹‹é—´æœ‰ç©ºè¡Œã€‚æ ‡å‡†åº“åŒ…å§‹ç»ˆä½äºç¬¬ä¸€ç»„ä¸­ã€‚ éƒ¨åˆ†åŒ…ç”±äºå¾ªç¯ä¾èµ–ï¼Œä¸èƒ½ä½œä¸ºæµ‹è¯•åŒ…çš„ä¸€éƒ¨åˆ†è¿›è¡Œæµ‹è¯•æ—¶ï¼Œå¯ä»¥ä»¥.å½¢å¼å¯¼å…¥å®ƒä»¬ï¼š 123456package foo_testimport ( "bar/testutil" // also imports "foo" . "foo") å°†æ­£å¸¸çš„ä»£ç è·¯å¾„ä¿æŒåœ¨æœ€å°çš„ç¼©è¿›å¤„ï¼Œä¼˜å…ˆå¤„ç†é”™è¯¯å¹¶ç¼©è¿›ï¼Œå¦‚ä¸‹ï¼š 12345if err != nil &#123; // error handling return // or continue, etc.&#125;// normal code åç§°ä¸­çš„å•è¯æ˜¯é¦–å­—æ¯æˆ–é¦–å­—æ¯ç¼©ç•¥è¯éœ€è¦å…·æœ‰ç›¸åŒçš„å¤§å°å†™è§„åˆ™ï¼Œä¾‹å¦‚ï¼Œâ€œURLâ€ åº”æ˜¾ç¤ºä¸º â€œURLâ€ æˆ– â€œurlâ€ ï¼ˆå¦‚ â€œurlPonyâ€ æˆ– â€œURLPonyâ€ ï¼‰ï¼Œè€Œä¸æ˜¯ â€œUrlâ€ã€‚ Go æ¥å£é€šå¸¸å±äºä½¿ç”¨ interface ç±»å‹å€¼çš„åŒ…ï¼Œè€Œä¸æ˜¯å®ç°è¿™äº›å€¼çš„åŒ…ã€‚å®ç°åŒ…åº”è¿”å›å…·ä½“ï¼ˆé€šå¸¸æ˜¯æŒ‡é’ˆæˆ–ç»“æ„ï¼‰ç±»å‹ã€‚æ¡ˆä¾‹ï¼šè¿™é‡Œæœ‰ä¸€ä¸ªç”Ÿäº§è€…çš„åŒ…å’Œæ¶ˆè´¹è€…çš„åŒ…ï¼Œä»–ä»¬ä¹‹é—´æœ‰ä¸€ä¸ªThingeråšæ¥å£äº¤äº’ã€‚æ¶ˆè´¹è€…åŒ…ä»£ç ï¼š 12345package consumer // consumer.gotype Thinger interface &#123; Thing() bool &#125;func Foo(t Thinger) string &#123; â€¦ &#125; æ­£ç¡®çš„ç”Ÿäº§è€…åº”è¯¥è¿™æ ·å®ç°ï¼š123456789101112package producertype Thinger struct&#123; â€¦ &#125;func (t Thinger) Thing() bool &#123; â€¦ &#125;func NewThinger() Thinger &#123; return Thinger&#123; â€¦ &#125; &#125;// è€Œä¸æ˜¯åœ¨è¿™é‡Œå†å£°æ˜ä¸€ä¸ªæ¥å£ï¼Œè¿™æ ·æ˜¯æ²¡å¿…è¦çš„// type Thinger interface &#123; Thing() bool &#125;// type defaultThinger struct&#123; â€¦ &#125;// func (t defaultThinger) Thing() bool &#123; â€¦ &#125;// func NewThinger() Thinger &#123; return defaultThinger&#123; â€¦ &#125; &#125; è¿”å›å‚æ•°ç›´æ¥å†™ç±»å‹å°±å¯ä»¥äº†ï¼Œä½†å¦‚æœå‡½æ•°è¿”å›ä¸¤ä¸ªæˆ–ä¸‰ä¸ªç›¸åŒç±»å‹çš„å‚æ•°ï¼Œæˆ–è€…å¦‚æœä»ä¸Šä¸‹æ–‡ä¸­ä¸æ¸…æ¥šè¿”å›ç»“æœçš„å«ä¹‰ï¼Œé‚£ä¹ˆåœ¨æŸäº›ä¸Šä¸‹æ–‡ä¸­æ·»åŠ å‘½åå¯èƒ½å¾ˆæœ‰ç”¨ã€‚æ¯”å¦‚ï¼š 12345678910// åº”è¯¥è¿™æ ·func (n *Node) Parent1() *Nodefunc (n *Node) Parent2() (*Node, error)// ä¸è¦è¿™æ ·func (n *Node) Parent1() (node *Node)func (n *Node) Parent2() (node *Node, err error)// å¤šå€¼çš„æ—¶å€™ï¼Œåº”è¯¥è¿™æ ·func (f *Foo) Location() (lat, long float64, err error)// ä¸è¦è¿™æ ·func (f *Foo) Location() (float64, float64, error) åŒ…ä¸­åç§°çš„æ‰€æœ‰å¼•ç”¨éƒ½å°†ä½¿ç”¨åŒ…åå®Œæˆï¼Œå› æ­¤æ‚¨å¯ä»¥ä»æ ‡è¯†ç¬¦ä¸­çœç•¥è¯¥åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ª chubby åŒ…ï¼Œä½ ä¸åº”è¯¥å®šä¹‰ç±»å‹åç§°ä¸º ChubbyFile ï¼Œå¦åˆ™ä½¿ç”¨è€…å°†å†™ä¸º chubby.ChubbyFileã€‚è€Œæ˜¯åº”è¯¥å‘½åç±»å‹åç§°ä¸º Fileï¼Œä½¿ç”¨æ—¶å°†å†™ä¸º chubby.Fileã€‚ æ–¹æ³•æ¥æ”¶è€…çš„åç§°åº”è¯¥åæ˜ å…¶èº«ä»½ï¼›é€šå¸¸ï¼Œå…¶ç±»å‹çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªå­—æ¯ç¼©å†™å°±è¶³å¤Ÿäº†ï¼ˆä¾‹å¦‚â€œclientâ€çš„â€œcâ€æˆ–â€œclâ€ï¼‰ã€‚ä¸è¦ä½¿ç”¨é€šç”¨åç§°ï¼Œä¾‹å¦‚â€œmeâ€ï¼Œâ€œthisâ€æˆ–â€œselfâ€ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡è¯­è¨€çš„å…¸å‹æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬æ›´å¼ºè°ƒæ–¹æ³•è€Œä¸æ˜¯å‡½æ•°ã€‚åç§°ä¸å¿…åƒæ–¹æ³•è®ºè¯é‚£æ ·å…·æœ‰æè¿°æ€§ï¼Œå› ä¸ºå®ƒçš„ä½œç”¨æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä¸èµ·ä»»ä½•è®°å½•ç›®çš„ã€‚åç§°å¯ä»¥éå¸¸çŸ­ï¼Œå› ä¸ºå®ƒå‡ ä¹å‡ºç°åœ¨æ¯ç§ç±»å‹çš„æ¯ä¸ªæ–¹æ³•çš„æ¯ä¸€è¡Œä¸Šã€‚ æ¥æ”¶å™¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å€¼æˆ–è€…æŒ‡é’ˆï¼šï¼ˆ1ï¼‰å°çš„ä¸å˜ç»“æ„æˆ–åŸºæœ¬ç±»å‹å¯ä»¥ç”¨å€¼æ¥æ”¶å™¨ã€‚è¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚ï¼ˆ2ï¼‰åœ¨ä½ ä¸ç¡®å®šæ˜¯ä½¿ç”¨å€¼è¿˜æ˜¯æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨æ—¶ï¼Œè¯·ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ã€‚ï¼ˆ3ï¼‰å¦‚æœè¯¥æ–¹æ³•éœ€è¦æ”¹å˜æ¥æ”¶å™¨çš„å€¼ï¼Œåˆ™æ¥æ”¶å™¨å¿…é¡»æ˜¯æŒ‡é’ˆã€‚ï¼ˆ4ï¼‰å¦‚æœæ¥æ”¶å™¨æ˜¯ mapï¼Œfuncæˆ– chanï¼Œåˆ™ä¸è¦ä½¿ç”¨æŒ‡å‘å®ƒä»¬çš„æŒ‡é’ˆã€‚å¦‚æœæ¥æ”¶å™¨æ˜¯ slice å¹¶ä¸”è¯¥æ–¹æ³•ä¸é‡æ–°åˆ‡ç‰‡æˆ–ä¸é‡æ–°åˆ†é…åˆ‡ç‰‡ï¼Œåˆ™ä¸è¦ä½¿ç”¨æŒ‡å‘å®ƒçš„æŒ‡é’ˆã€‚ Go è¯­è¨€è§„èŒƒå·¥å…·go çš„å®˜æ–¹å·¥å…·é“¾åšå¾—å¾ˆå¥½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨gofmtå’Œgolintæ£€æŸ¥ä»£ç è§„èŒƒã€‚ å®‰è£…ï¼š12go get github.com/golang/lintgo install github.com/golang/lint ç”¨æ³•ï¼š1golint &lt;æ–‡ä»¶/æ–‡ä»¶ç›®å½•/åŒ…å&gt;]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æŠ€æœ¯æ‰‹å†Œ</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯è§„èŒƒ</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŠ€æœ¯è§„èŒƒ(1): å‰ç«¯æŠ€æœ¯å¼€å‘è§„èŒƒ]]></title>
    <url>%2F2020%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83-1-%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[ESLintå·¥å…·ä»‹ç»ESLintæœ€åˆæ˜¯ç”±Nicholas C. Zakas äº2013å¹´6æœˆåˆ›å»ºçš„å¼€æºé¡¹ç›®ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ’ä»¶åŒ–çš„javascriptä»£ç æ£€æµ‹å·¥å…·ã€‚ ESLint é…ç½®è§„åˆ™ï¼šhttps://cn.eslint.org/docs/rules/ å‘½åè§„èŒƒé¡¹ç›®å‘½åå…¨éƒ¨é‡‡ç”¨å°å†™æ–¹å¼ï¼Œ ä»¥ä¸‹åˆ’çº¿åˆ†éš”ã€‚ä¾‹ï¼šmy_project_name ç›®å½•å‘½åå‚ç…§é¡¹ç›®å‘½åè§„åˆ™ï¼› æœ‰å¤æ•°ç»“æ„æ—¶ï¼Œè¦é‡‡ç”¨å¤æ•°å‘½åæ³•ã€‚ä¾‹ï¼šscripts, styles, images, data_models JSæ–‡ä»¶å‘½åå‚ç…§é¡¹ç›®å‘½åè§„åˆ™ã€‚ ä¾‹ï¼šaccount_model.js CSS, SCSSæ–‡ä»¶å‘½åå‚ç…§é¡¹ç›®å‘½åè§„åˆ™ã€‚ ä¾‹ï¼šretina_sprites.scss HTMLæ–‡ä»¶å‘½åå‚ç…§é¡¹ç›®å‘½åè§„åˆ™ã€‚ ä¾‹ï¼šerror_report.html Vueé¡¹ç›®è§„èŒƒvueæ–‡ä»¶åŸºæœ¬ç»“æ„vueæ–‡ä»¶åŸºæœ¬ç»“æ„ï¼š123456789101112131415161718192021222324&lt;template&gt;&lt;div&gt; &lt;!--å¿…é¡»åœ¨divä¸­ç¼–å†™é¡µé¢--&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; components : &#123; &#125;, data () &#123; return &#123; &#125; &#125;, methods: &#123; &#125;, mounted() &#123; &#125;&#125;&lt;/script&gt;&lt;!--å£°æ˜è¯­è¨€ï¼Œå¹¶ä¸”æ·»åŠ scoped--&gt;&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt; //ç»„ä»¶çš„ data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ //å½“åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ data å±æ€§çš„æ—¶å€™ (é™¤äº† new Vue å¤–çš„ä»»ä½•åœ°æ–¹)ï¼Œå®ƒçš„å€¼å¿…é¡»æ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°ã€‚ vueæ–‡ä»¶æ–¹æ³•å£°æ˜é¡ºåºvueæ–‡ä»¶æ–¹æ³•å£°æ˜é¡ºåºï¼ˆå¦‚ä¸éœ€è¦ä¸€äº›å±æ€§å¯ä¸å¡«ï¼‰ - components - props - data - created - mounted - activited - update - beforeRouteUpdate - metods - filter - computed - watch ä¸åœ¨ mountedã€created ä¹‹ç±»çš„æ–¹æ³•å†™é€»è¾‘ï¼Œå– ajax æ•°æ®ï¼Œ å®šä¹‰å˜é‡ä½¿ç”¨let ,å®šä¹‰å¸¸é‡ä½¿ç”¨const ä½¿ç”¨export ï¼Œimport æ¨¡å—åŒ– ä½¿ç”¨console.log() æ¥debuggeræ—¶ï¼Œ ä½¿ç”¨å®ŒåŠæ—¶åˆ é™¤ method è‡ªå®šä¹‰æ–¹æ³•å‘½å åŠ¨å®¾çŸ­è¯­ï¼ˆgoodï¼šjumpPageã€openCarInfoDialogï¼‰ï¼ˆbadï¼šgoã€nextPageã€showã€openã€loginï¼‰ ajax æ–¹æ³•ä»¥ getã€post å¼€å¤´ï¼Œä»¥ data ç»“å°¾ï¼ˆgoodï¼šgetListDataã€postFormDataï¼‰ï¼ˆbadï¼štakeDataã€confirmDataã€getListã€postFormï¼‰ äº‹ä»¶æ–¹æ³•ä»¥ on å¼€å¤´ï¼ˆonTypeChangeã€onUsernameInputï¼‰ initã€refresh å•è¯é™¤å¤– å°½é‡ä½¿ç”¨å¸¸ç”¨å•è¯å¼€å¤´ï¼ˆsetã€getã€openã€closeã€jumpï¼‰ ç»„ä»¶ç»„ä»¶æ³¨å†Œæ–¹å¼ï¼š1ï¼‰å…¬å…±ç»„ä»¶å…¨å±€æ³¨å†Œ 2ï¼‰å…¶ä½™ç»„ä»¶å±€éƒ¨æ³¨å†Œ ç»„ä»¶çš„æ¯ä¸€ä¸ªå±æ€§å•ç‹¬ä½¿ç”¨ä¸€ä¸ª propsï¼Œå¹¶ä¸”ä½¿ç”¨å‡½æ•°æˆ–æ˜¯åŸå§‹ç±»å‹çš„å€¼ã€‚123456789101112&lt;!-- æ¨è --&gt;&lt;range-slider :values=&quot;[10, 20]&quot; min=&quot;0&quot; max=&quot;100&quot; step=&quot;5&quot; :on-slide=&quot;updateInputs&quot; :on-end=&quot;updateResults&quot;&gt;&lt;/range-slider&gt;&lt;!-- é¿å… --&gt;&lt;range-slider :config=&quot;complexConfigObject&quot;&gt;&lt;/range-slider&gt; é¿å… this.$parent è¿›è¡Œç»„ä»¶é—´é€šä¿¡ç”¨propsä»£æ›¿ ï¼Œè°¨æ…ä½¿ç”¨ this.$refsï¼Œå°½é‡ä¿æŒç»„ä»¶çš„ç›¸å¯¹ç‹¬ç«‹ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æŠ€æœ¯æ‰‹å†Œ</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯è§„èŒƒ</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº‘åŸç”ŸæŠ€æœ¯å¼€å‘æ‰‹å†Œ(æ–°å‘~å¾…å¡«)]]></title>
    <url>%2F2020%2F%E6%9E%B6%E6%9E%84%2F%E4%BA%91%E5%8E%9F%E7%94%9F%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®åœ°å€ï¼šhttps://github.com/shikanon/cloudnative-technical-manual æœ‰å…´è¶£çš„å¯ä»¥ç»™ä¸ªstarï¼Œä¸è¿‡æ˜¯æ–°å‘ï¼Œä¸ç¡®å®šä»€ä¹ˆæ—¶å€™èƒ½å¡«å®Œã€‚ ğŸ™‰ğŸ™‰ğŸ™‰ğŸ™‰ ç« èŠ‚ç›®å½• åŸºç¡€ç¯‡ åŸºæœ¬æ¦‚å¿µ ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿ åç«¯è½¯ä»¶æ¶æ„çš„å‘å±•æ¼”å˜ äº‘åŸç”Ÿå‘å±•å†å² äº‘åŸç”Ÿå¼€å‘å·¥ç¨‹å¸ˆçš„èŒè´£å’ŒåŸºç¡€æŠ€èƒ½ äº‘åŸç”Ÿçš„æŠ€æœ¯èŒƒç•´ äº‘åŸç”Ÿå¼€å‘å·¥ç¨‹å¸ˆçš„å·¥ä½œèŒè´£ äº‘åŸç”Ÿåº”ç”¨å¼€å‘æµç¨‹ è½¯ä»¶å¼€å‘è§„èŒƒ ä»£ç å¼€å‘è§„èŒƒ å‰ç«¯å¼€å‘è§„èŒƒ åç«¯å¼€å‘è§„èŒƒ æ•°æ®åº“è®¾è®¡è§„èŒƒ ä»£ç ç®¡ç†è§„èŒƒ ä»£ç åˆ†æ”¯ç®¡ç†è§„èŒƒ ä»£ç æäº¤è§„èŒƒ CI/CDçš„ä½¿ç”¨è§„èŒƒ ä»£ç å®¡è®¡è§„èŒƒ å¦‚ä½•åšå¥½code review ä»£ç å®¡è®¡ç›®æ ‡å’ŒåŸåˆ™ ä»£ç å®‰å…¨æ€§å®¡è®¡ è¿ç»´è§„èŒƒåŠæ³¨æ„äº‹é¡¹ è¿›é˜¶ç¯‡ äº‘åŸç”Ÿçš„åŸºçŸ³ï¼šå®¹å™¨ä¸è™šæ‹ŸåŒ–æŠ€æœ¯ å®¹å™¨ç¼–æ’ï¼šKubernetes Kubernetesæ¶æ„ Kuberneteså®‰è£… Kubernetesèµ„æºå¯¹è±¡ Podå’Œå®¹å™¨è®¾è®¡æ¨¡å¼ æ— çŠ¶æ€åº”ç”¨ç¼–æ’Deployment å·¥ä½œä»»åŠ¡Jobå’ŒDaemonSet æœ‰çŠ¶æ€åº”ç”¨ç¼–æ’StatefulSet åº”ç”¨é…ç½®config å­˜å‚¨èµ„æºVolume Kuberntesç½‘ç»œåŠç­–ç•¥æ§åˆ¶ Kuberneteså¼€æ”¾æ¥å£ å®¹å™¨è¿è¡Œæ—¶æ¥å£CRI å®¹å™¨ç½‘ç»œæ¥å£CNI å®¹å™¨å­˜å‚¨æ¥å£CSI Kubernetesé›†ç¾¤æ•…éšœæ’æŸ¥ å¸¸è§çš„é—®é¢˜æ’æŸ¥å‘½ä»¤ Podå¼‚å¸¸æ’æŸ¥ ç½‘ç»œå¼‚å¸¸æ’æŸ¥ æŒä¹…åŒ–å¼‚å¸¸æ’æŸ¥ æŒç»­é›†æˆä¸æŒç»­äº¤ä»˜ ä»£ç ç®¡ç†: gitlab CI/CD: Jenkins å’Œ git runner é•œåƒç®¡ç†: harbor æœåŠ¡ç½‘æ ¼: Istio ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ Istioæ¶æ„ PilotæœåŠ¡å‘ç° Gatewayç½‘å…³ é™æµä¸ç†”æ–­ ç°åº¦å‘å¸ƒ åˆ†å¸ƒå¼è¿½è¸ª ç›‘æ§ç³»ç»Ÿï¼šPrometheus Prometheusæ¶æ„ æ­å»ºPrometheusç³»ç»Ÿ ç›‘æ§åº”ç”¨ç¨‹åº æœºå™¨å­¦ä¹ å·¥å…·é›†Kubeflow kubeflowæ ¸å¿ƒç»„ä»¶ TFJob æ¨¡å‹éƒ¨ç½²ï¼šTF-Serving ä»»åŠ¡ç¼–æ’ï¼šArgo æ­å»ºkubeflowç³»ç»Ÿ å®æˆ˜ç¯‡ å‘äº‘åŸç”Ÿè¿ç§»çš„ç¬¬ä¸€ä¸ªé¡¹ç›® äº‹å‰å‡†å¤‡å·¥ä½œ é¡¹ç›®é¢„ç ”ä¸é›†ç¾¤è§„åˆ’ å‡†å¤‡é›†ç¾¤ç¯å¢ƒ å®¹å™¨åŒ–æ”¹é€  æ­å»ºè‡ªæœ‰é•œåƒä»“åº“ ç¼–å†™èµ„æºé…ç½®æ–‡ä»¶ æ„å»ºæŒç»­é›†æˆç¯å¢ƒ]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æŠ€æœ¯æ‰‹å†Œ</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>æŠ€æœ¯æ‰‹å†Œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡å»ºç«‹mockæœåŠ¡å™¨å‡å°‘å‰åç«¯è”è°ƒ]]></title>
    <url>%2F2020%2F%E7%AE%A1%E7%90%86%2F%E9%80%9A%E8%BF%87%E5%BB%BA%E7%AB%8Bmock%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%87%8F%E5%B0%91%E5%89%8D%E5%90%8E%E7%AB%AF%E8%81%94%E8%B0%83%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ç”±äºå¤šç«¯çš„å‡ºç°ï¼Œå‰åç«¯åˆ†ç¦»çš„æŠ€æœ¯æ¶æ„å·²ç»æ˜¯ä¸€ä¸ªä¸å¯é€†çš„è¶‹åŠ¿äº†ï¼Œä½†åœ¨webçš„æµç¨‹ç®¡ç†ä¸Šå‘ç°ç»å¸¸å‡ºç°å›¢é˜Ÿç®¡ç†æ€»æ˜¯éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´è¿›è¡Œâ€œå‰åç«¯è”è°ƒâ€è¿™æ ·ä¸€ä¸ªç¯èŠ‚ï¼Œè¿™è®©äººæ„Ÿè§‰æ˜¯ååˆ†ä½æ•ˆçš„ã€‚æœ¬æ¥å‰åç«¯æŠ€æœ¯åˆ†ç¦»å°±æ˜¯ä¸ºäº†è®©å‰ç«¯ç”¨ç†Ÿæ‚‰çš„å‰ç«¯æŠ€æœ¯è¿…é€Ÿå¼€å‘å¥½å‰ç«¯ï¼Œåç«¯å¼€å‘å¥½åç«¯ï¼Œç„¶åæ ¹æ®å®ç°å®šä¹‰çš„æ¥å£ç›´æ¥ç¼åˆèµ·æ¥å°±è¡Œäº†ï¼Œå°±åƒä¸¤ä¸ªé›¶éƒ¨ä»¶ï¼Œç›´æ¥å°†èºä¸æ‰­ç´§ç»„è£…èµ·æ¥ã€‚ä½†åœ¨å®è·µä¸­ç»å¸¸å‘ç°ï¼Œäº‹å…ˆåå•†å¥½çš„æ•°æ®æ¥å£ç”±äºåç«¯äººå‘˜å¯¹ä¸šåŠ¡ç†è§£çš„ä¸è¶³åœ¨å‰æœŸè®¾è®¡é˜¶æ®µæœ‰é—æ¼ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯¹æ¥å£è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¯¼è‡´å‰ç«¯å¼€å‘äººå‘˜æ¯æ¬¡éƒ½éœ€è¦å†ä¿®æ”¹æ¥å£ï¼Œå¯¼è‡´å‡ºç°äº†ä¸€æ®µåœ¨å¼€å‘é˜¶æ®µæ¯”è¾ƒé•¿æ—¶é—´çš„â€œå‰åç«¯è”è°ƒâ€ã€‚ è§£å†³æ–¹æ¡ˆä½†æ˜¯ï¼Œå¾ˆæ˜æ˜¾è¿™ç§æƒ…å†µæ˜¯éœ€è¦é¿å…çš„ï¼Œé‚£ä¹ˆæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æ–¹æ³•å‘¢ï¼Ÿæ ¸å¿ƒè¿˜æ˜¯å‡ºåœ¨æ¶æ„è®¾è®¡åˆæœŸï¼Œåœ¨æ¶æ„è®¾è®¡åˆæœŸæˆ‘ä»¬åœ¨è®¾è®¡ç³»ç»Ÿæ¶æ„å’Œæ¥å£çš„æ—¶å€™ï¼Œå»ºç«‹ä¸€å¥—èƒ½æä¾›ç»™å‰ç«¯çš„mockæ¥å£ã€‚æˆ‘è¿™é‡Œå†™äº†ä¸€ä¸ªFastAPI-Project-Templateçš„é¡¹ç›®å°è¯•å»åšè¿™ä»¶äº‹æƒ…ï¼Œåˆ©ç”¨fastapiè‡ªå¸¦çš„swagger UIåŠŸèƒ½ï¼Œåœ¨å¼€å‘è®¾è®¡åˆæœŸä¸ºå‰ç«¯æä¾›å¯ç”¨äºè°ƒè¯•çš„mockæ¥å£ï¼Œå¦‚æœåç«¯æ¥å£æœ‰æ”¹åŠ¨åªéœ€è¦ä¿®æ”¹æ¥å£å³å¯ï¼Œè¿™æ ·å°±èƒ½è®©å‰åç«¯è”è°ƒçš„å·¥ä½œæ”¾åˆ°å¼€å‘å‰é¢ã€‚ http code http message200 OK201 Created202 Accepted203 Non-Authoritative Information204 No Content205 Reset Content206 Partial Content300 Multiple Choices301 Moved Permanently302 Found303 See Other304 Not Modified305 Use Proxy306 (Unused)307 Temporary Redirect400 Bad Request401 Unauthorized402 Payment Required403 Forbidden404 Not Found405 Method Not Allowed406 Not Acceptable407 Proxy Authentication Required408 Request Timeout409 Conflict410 Gone411 Length Required412 Precondition Failed413 Request Entity Too Large414 Request-URI Too Long415 Unsupported Media Type416 Requested Range Not Satisfiable417 Expectation Failed450 Parameter Requried451 Method Connect Exception500 Internal Server Error501 Not Implemented502 Bad Gateway503 Service Unavailable504 Gateway Timeout505 HTTP Version Not Supported]]></content>
      <categories>
        <category>ç®¡ç†</category>
        <category>æŠ€æœ¯ç®¡ç†</category>
      </categories>
      <tags>
        <tag>ä¼ä¸šç®¡ç†</tag>
        <tag>mock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vscodeå°æŠ€å·§(ä¸€)]]></title>
    <url>%2F2020%2F%E8%BF%90%E7%BB%B4%2Fvscode%E5%B0%8F%E6%8A%80%E5%B7%A7-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[æ–‡ä»¶è¿œç¨‹åŒæ­¥é€šè¿‡sftpå®ç°è¿œç¨‹æ–‡ä»¶åŒæ­¥ï¼š å®‰è£…liximomoçš„SFTP é…ç½®sftp.jsoné…ç½®æ–‡ä»¶ sftp.jsoné…ç½®:123456789101112131415&#123; &quot;name&quot;: &quot;My Server&quot;, #åå­— &quot;host&quot;: &quot;xxx.xx.xx.xx&quot;, #è¿œç¨‹hoståœ°å€ &quot;protocol&quot;: &quot;sftp&quot;, #åè®®ç±»å‹ &quot;port&quot;: 22, # è¿œç¨‹ç«¯å£ &quot;username&quot;: &quot;shikanon&quot;, # ç”¨æˆ·åï¼Œå¯†ç ç”¨password, &quot;privateKeyPath&quot;: &quot;D:\\keeweb\\xxx.xx.xx.xx&quot;, &quot;remotePath&quot;: &quot;/home/shikanon/software/bd&quot;, #è¿œç¨‹çš„è·¯å¾„(ç»å¯¹è·¯å¾„) &quot;uploadOnSave&quot;: false, # æ¯æ¬¡ä¿å­˜éƒ½ä¸Šä¼  &quot;watcher&quot;: &#123; # ä»€ä¹ˆæ—¶å€™ä¸Šä¼ ï¼Œå½“uploadOnSaveä¸ºfalseèµ·ä½œç”¨ &quot;files&quot;: &quot;glob&quot;, &quot;autoUpload&quot;: true, &quot;autoDelete&quot;: true &#125;&#125; è¯¦ç»†è¯´æ˜è§wiki è°ƒè¯•ç¯å¢ƒé…ç½®è°ƒè¯•ç¯å¢ƒåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§launchï¼Œä¸€ç§attachã€‚ launch è¡¨ç¤ºé€šè¿‡ç›´æ¥è¿è¡Œå‘½ä»¤è¡Œå¯¹ç¨‹åºè¿›è¡Œè°ƒè¯•ï¼Œå³vscodeç‹¬ç«‹è¿è¡Œè°ƒè¯•è¿›ç¨‹ attach è¡¨ç¤ºé€šè¿‡åµŒå…¥å¯¹åº”çš„å¼€å‘å·¥å…·è¿›è¡Œè°ƒè¯•å¯åŠ¨ï¼Œè¿™ç§æ¨¡å¼ä¸€èˆ¬éœ€è¦å†å¦å¤–å¯åŠ¨å¯¹åº”çš„DevToolsã€‚ è¯¦ç»†è¯´æ˜è§wiki Pythonè°ƒè¯•ç¯å¢ƒé…ç½®12345678910111213&quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;Python: æœ¬åœ°&quot;, &quot;type&quot;: &quot;python&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;program&quot;: &quot;D:\\Program Files (x86)\\Python36-32\\Scripts\\uvicorn.exe&quot;, # ç¨‹åºç»å¯¹è·¯å¾„ &quot;args&quot;: [ # ç¨‹åºå‚æ•° &quot;run:app&quot;, &quot;--reload&quot; ], &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot; #å½“å‰ç›®å½• &#125; ]]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¥¥æ¯”æŠ€æœ¯ä¸­å°è§„åˆ’]]></title>
    <url>%2F2019%2F%E6%88%98%E7%95%A5%2F%E5%A5%A5%E6%AF%94%E4%B8%AD%E5%8F%B0%E6%88%98%E7%95%A5%E8%A7%84%E5%88%92%2F</url>
    <content type="text"><![CDATA[IoTäº‘å¹³å°æŠ€æœ¯ä¸­å°è§„åˆ’]]></content>
      <categories>
        <category>ç®¡ç†</category>
        <category>ä¼ä¸šæˆ˜ç•¥</category>
      </categories>
      <tags>
        <tag>ä¼ä¸šæˆ˜ç•¥</tag>
        <tag>ä¸­å°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kubeflowç³»åˆ—(ä¸‰)ï¼šæ¨¡å‹å³æœåŠ¡ï¼Œå…³äºtensorflow servingçš„ä½¿ç”¨]]></title>
    <url>%2F2019%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E6%A8%A1%E5%9E%8B%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1tf-serving%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[kubeflow ä¸­é‡‡ç”¨äº† tensorflow serving ä½œä¸ºå®˜æ–¹çš„tensorflowæ¨¡å‹æ¥å£ï¼Œ TensorFlow Servingæ˜¯GOOGLEå¼€æºçš„ä¸€ä¸ªæœåŠ¡ç³»ç»Ÿï¼Œé€‚ç”¨äºéƒ¨ç½²æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œçµæ´»ã€æ€§èƒ½é«˜ã€å¯ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ TensorFlow Servingå¯ä»¥è½»æ¾éƒ¨ç½²æ–°ç®—æ³•å’Œå®éªŒï¼ŒåŒæ—¶ä¿æŒç›¸åŒçš„æœåŠ¡å™¨æ¶æ„å’ŒAPIã€‚ Tensorflow Serving ç›´æ¥åŠ è½½æ¨¡å‹å³å¯ç”Ÿæˆæ¥å£ï¼Œä¸è¿‡ serving æ”¯æŒçš„æ¨¡å‹åªæœ‰ SaveModelï¼Œå› æ­¤è¿™é‡Œä¸»è¦ä»‹ç» SaveModelã€‚ SaveModelSaveModel æ˜¯ä¸€ç§ä¸“é—¨ç”¨äºtfæ¨¡å‹ æ‹“æ‰‘ç»“æ„(topology) å’Œ æƒé‡(weights) ï¼ŒåŸºäº SaveModel ä¸éœ€è¦è¿è¡ŒåŸå§‹çš„æ¨¡å‹æ„å»ºä»£ç ï¼Œè¿™æ ·éå¸¸åˆ©äºå…±äº«æˆ–éƒ¨ç½²æ¨¡å‹ï¼Œå› æ­¤ä¸€èˆ¬æ¨¡å‹éƒ¨ç½²éƒ½ç”¨ SaveModelã€‚ æ‹“æ‰‘ç»“æ„(Topology): è¿™æ˜¯ä¸€ä¸ªæè¿°æ¨¡å‹ç»“æ„çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚å®ƒä½¿ç”¨çš„äº†å“ªäº›æ“ä½œï¼‰ã€‚å®ƒåŒ…å«å¯¹å­˜å‚¨åœ¨å¤–éƒ¨çš„æ¨¡å‹æƒé‡çš„å¼•ç”¨ã€‚ æƒé‡(Weights): è¿™äº›æ˜¯ä»¥æœ‰æ•ˆæ ¼å¼å­˜å‚¨ç»™å®šæ¨¡å‹æƒé‡çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å®ƒä»¬é€šå¸¸å­˜å‚¨åœ¨ä¸æ‹“æ‰‘ç»“æ„ç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­ã€‚ SaveModelæ–‡ä»¶ç›®å½•:1assets saved_model.pb variables æŸ¥çœ‹MetaGraphDefså’ŒSignatureDefs:1saved_model_cli show --dir &lt;SaveModelè·¯å¾„&gt; --all ç”Ÿæˆæ¨¡å‹éœ€è¦æ¨¡å‹çš„MetaGraphDefså’ŒSignatureDefsï¼ŒMetaGraphDefså°±æ˜¯æˆ‘ä»¬å¸¸è§çš„meta graphï¼Œå…¶ä¸­åŒ…å«äº†å››ç§ä¸»è¦çš„ä¿¡æ¯ï¼š MetaInfoDef: å­˜æ”¾äº†ä¸€äº›å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚ç‰ˆæœ¬å’Œå…¶ä»–ç”¨æˆ·ä¿¡æ¯ï¼› GraphDef: æè¿°çš„Graphä¸­åºåˆ—åŒ–å¾—åˆ°çš„å›¾ï¼Œç”±Protocol Bufferç»„æˆï¼› SaverDef: å›¾çš„Saverä¿¡æ¯ï¼Œä¾‹å¦‚æœ€å¤šåŒæ—¶ä¿å­˜çš„checkpointæ•°é‡ï¼Œéœ€è¦ä¿å­˜çš„Tensoråå­—ç­‰ï¼Œä¸ä¿å­˜Tensorä¸­çš„å®é™…å†…å®¹ï¼› CollectionDef: ä»»ä½•éœ€è¦ç‰¹æ®Šæ³¨æ„çš„pythonå¯¹è±¡ï¼Œéœ€è¦ç‰¹æ®Šçš„æ ‡æ³¨ä»¥æ–¹ä¾¿import_meta_graphåå–å›ï¼Œå¦‚â€predictionâ€ã€‚ SignatureDefsåˆ™æ˜¯æ¨¡å‹çš„ç­¾åå®šä¹‰ï¼Œå®šä¹‰äº† è¾“å…¥ å’Œ è¾“å‡ºå‡½æ•°`ã€‚ SignatureDefs SignatureDef å®šä¹‰äº† TensorFlow graph è®¡ç®—çš„ç­¾åï¼Œå®šä¹‰äº† è¾“å…¥ å’Œ è¾“å‡ºå‡½æ•°ï¼ŒSignatureDef ç»“æ„ ï¼š inputs as a map of string to TensorInfo. outputs as a map of string to TensorInfo. method_name (which corresponds to a supported method name in the loading tool/system). Classification SignatureDefä¾‹å­ å¿…é¡»è¦ä¸€ä¸ªè¾“å…¥ Tensors inputs å’Œä¸¤ä¸ªè¾“å‡ºTensors: classeså’Œ scores123456789101112131415161718192021222324252627282930signature_def: &#123; key : &quot;my_classification_signature&quot; value: &#123; inputs: &#123; key : &quot;inputs&quot; value: &#123; name: &quot;tf_example:0&quot; dtype: DT_STRING tensor_shape: ... &#125; &#125; outputs: &#123; key : &quot;classes&quot; value: &#123; name: &quot;index_to_string:0&quot; dtype: DT_STRING tensor_shape: ... &#125; &#125; outputs: &#123; key : &quot;scores&quot; value: &#123; name: &quot;TopKV2:0&quot; dtype: DT_FLOAT tensor_shape: ... &#125; &#125; method_name: &quot;tensorflow/serving/classify&quot; &#125;&#125; Predict SignatureDefä¾‹å­ 12345678910111213141516171819202122signature_def: &#123; key : &quot;my_prediction_signature&quot; value: &#123; inputs: &#123; key : &quot;images&quot; value: &#123; name: &quot;x:0&quot; dtype: ... tensor_shape: ... &#125; &#125; outputs: &#123; key : &quot;scores&quot; value: &#123; name: &quot;y:0&quot; dtype: ... tensor_shape: ... &#125; &#125; method_name: &quot;tensorflow/serving/predict&quot; &#125;&#125; Regression SignatureDefä¾‹å­ 12345678910111213141516171819202122signature_def: &#123; key : &quot;my_regression_signature&quot; value: &#123; inputs: &#123; key : &quot;inputs&quot; value: &#123; name: &quot;x_input_examples_tensor_0&quot; dtype: ... tensor_shape: ... &#125; &#125; outputs: &#123; key : &quot;outputs&quot; value: &#123; name: &quot;y_outputs_0&quot; dtype: DT_FLOAT tensor_shape: ... &#125; &#125; method_name: &quot;tensorflow/serving/regress&quot; &#125;&#125; ç”Ÿæˆ SaveModel æ–‡ä»¶ç”Ÿæˆ SaveModelæ–‡ä»¶çš„æ–¹å¼ï¼š ï¼ˆ1ï¼‰tf.saved_model # æœ€ç›´æ¥ç®€å• ï¼ˆ2ï¼‰Estimatorçš„export_savedmodel # é«˜çº§API Estimatoræ¨¡å‹å¯¼å‡º 1234classifier = classifier = tf.estimator.Estimator( model_fn=conv_model, model_dir=args.tf_model_dir, config=training_config, params=model_params)classifier.export_savedmodel(args.tf_export_dir, serving_input_receiver_fn=serving_fn) ï¼ˆ3ï¼‰keras.Model.save(output_path) å°† checkpoint æ¨¡å‹æ–‡ä»¶ æ”¹ä¸º SaveModel æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273import sys, os, ioimport tensorflow as tfmodel_version = &quot;1&quot;model_name = &quot;object&quot;def restore_and_save(input_checkpoint, export_path_base): checkpoint_file = tf.train.latest_checkpoint(input_checkpoint) graph = tf.Graph() with graph.as_default(): session_conf = tf.ConfigProto(allow_soft_placement=True, log_device_placement=False) sess = tf.Session(config=session_conf) with sess.as_default(): # è½½å…¥ä¿å­˜å¥½çš„meta graphï¼Œæ¢å¤å›¾ä¸­å˜é‡ï¼Œé€šè¿‡SavedModelBuilderä¿å­˜å¯éƒ¨ç½²çš„æ¨¡å‹ saver = tf.train.import_meta_graph(&quot;&#123;&#125;.meta&quot;.format(checkpoint_file)) saver.restore(sess, checkpoint_file) print (&quot;name scope: &quot;,graph.get_name_scope()) export_path_base = export_path_base export_path = os.path.join( tf.compat.as_bytes(export_path_base), tf.compat.as_bytes(model_name+&quot;/&quot;+model_version)) print(&apos;Exporting trained model to&apos;, export_path) builder = tf.saved_model.builder.SavedModelBuilder(export_path) # æ¨¡å‹çš„å„ç§operator å¯ä»¥é€šè¿‡ graph.get_operations() è·å¾— # input ä¸ºè¾“å…¥å±‚operator inputs = tf.saved_model.utils.build_tensor_info(graph.get_operation_by_name(&quot;Placeholder&quot;).outputs[0]) print(inputs) # output ä¸ºè¾“å‡ºå±‚operator, è¿™é‡Œçš„è¾“å‡ºå±‚ type ä¸º Softmax outputs = tf.saved_model.utils.build_tensor_info(graph.get_operation_by_name(&quot;final_result&quot;).outputs[0]) print(outputs) &quot;&quot;&quot; signature_constantsï¼šSavedModelä¿å­˜å’Œæ¢å¤æ“ä½œçš„ç­¾åå¸¸é‡ã€‚ åœ¨åºåˆ—æ ‡æ³¨çš„ä»»åŠ¡ä¸­ï¼Œè¿™é‡Œçš„method_nameæ˜¯&quot;tensorflow/serving/predict&quot; &quot;&quot;&quot; # å®šä¹‰æ¨¡å‹çš„è¾“å…¥è¾“å‡ºï¼Œå»ºç«‹è°ƒç”¨æ¥å£ä¸tensorç­¾åä¹‹é—´çš„æ˜ å°„ labeling_signature = ( tf.saved_model.signature_def_utils.build_signature_def( inputs=&#123; &quot;Placeholder&quot;: inputs, &#125;, outputs=&#123; &quot;final_result&quot;: outputs, &#125;, method_name=&quot;tensorflow/serving/predict&quot;)) &quot;&quot;&quot; tf.group : åˆ›å»ºä¸€ä¸ªå°†å¤šä¸ªæ“ä½œåˆ†ç»„çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ‰€æœ‰è¾“å…¥çš„æ“ä½œ &quot;&quot;&quot; legacy_init_op = tf.group(tf.tables_initializer(), name=&apos;legacy_init_op&apos;) &quot;&quot;&quot; add_meta_graph_and_variablesï¼šå»ºç«‹ä¸€ä¸ªSaveræ¥ä¿å­˜sessionä¸­çš„å˜é‡ï¼Œ è¾“å‡ºå¯¹åº”çš„åŸå›¾çš„å®šä¹‰ï¼Œè¿™ä¸ªå‡½æ•°å‡è®¾ä¿å­˜çš„å˜é‡å·²ç»è¢«åˆå§‹åŒ–ï¼› å¯¹äºä¸€ä¸ªSavedModelBuilderï¼Œè¿™ä¸ªAPIå¿…é¡»è¢«è°ƒç”¨ä¸€æ¬¡æ¥ä¿å­˜meta graphï¼› å¯¹äºåé¢æ·»åŠ çš„å›¾ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•° add_meta_graph()æ¥è¿›è¡Œæ·»åŠ  &quot;&quot;&quot; # å»ºç«‹æ¨¡å‹åç§°ä¸æ¨¡å‹ç­¾åä¹‹é—´çš„æ˜ å°„ builder.add_meta_graph_and_variables( sess, [tf.saved_model.tag_constants.SERVING], signature_def_map=&#123; tf.saved_model.signature_constants.DEFAULT_SERVING_SIGNATURE_DEF_KEY: labeling_signature&#125;, legacy_init_op=legacy_init_op ) builder.save() print(&quot;Build Done&quot;) Run serverç”Ÿæˆå¥½ SaveModel æ¨¡å‹æ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œ serving æ¥å®ç°æ¨¡å‹æœåŠ¡ï¼š (1)ç”¨DOCKERè¿è¡Œ: 123docker run --rm -it -p 8500:8500 \--mount type=bind,source=/root/inception/models,target=/models \-e MODEL_NAME=1 tensorflow/serving æŒ‚è½½çš„é»˜è®¤ç›®å½•ä¸ºä¸¤çº§ç›®å½•:./&lt;æ¨¡å‹åç§°&gt;/&lt;ç‰ˆæœ¬å·&gt;/save_model.pb, ç‰ˆæœ¬å·å¿…é¡»ä¸ºæ•°å­—ã€‚ (2)æˆ–è€…å¯ä»¥ç”¨k8sè¿è¡Œdeployment(kubeflow)ï¼š 123456789101112131415161718192021222324252627282930313233343536373839apiVersion: extensions/v1beta1kind: Deploymentmetadata: labels: app: inception name: inception-service-local namespace: kubeflowspec: template: metadata: labels: app: inception version: v1 spec: containers: - args: - --port=9000 - --rest_api_port=8500 - --model_name=1 - --model_base_path=/mnt/export command: - /usr/bin/tensorflow_model_server env: - name: modelBasePath value: /mnt/export image: tensorflow/serving:1.11.1 imagePullPolicy: IfNotPresent livenessProbe: initialDelaySeconds: 30 periodSeconds: 30 tcpSocket: port: 9000 name: mnist ports: - containerPort: 9000 - containerPort: 8500 volumeMounts: - mountPath: /mnt name: local-storage æ„å»ºè¯·æ±‚æµ‹è¯•æµ‹è¯•æ¨¡å‹æ¥å£ 12345678910111213import requestsfrom PIL import Imageimport numpy as npfilename = &quot;./CES/astra_mini/1576210854440.png&quot; # å›¾ç‰‡img=Image.open(filename) img_arr=np.array(img,dtype=np.uint8)print(img_arr.shape) # (299, 299, 3)data = json.dumps(&#123;&quot;instances&quot;: [img_arr.tolist()]&#125;)headers = &#123;&quot;content-type&quot;: &quot;application/json&quot;&#125;json_response = requests.post(&apos;http://127.0.0.1:8501/v1/models/object:predict&apos;, data=data, headers=headers)print(json_response.text) å‚è€ƒæ–‡çŒ® https://www.tensorflow.org/tfx/tutorials/serving/rest_simple]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿæ¶æ„</category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>kubeflow</tag>
        <tag>æ¶æ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”Ÿæ´»å°æŠ€èƒ½: å®ç”¨å°ä¼—ç½‘ç«™æ”¶è—]]></title>
    <url>%2F2019%2F%E7%94%9F%E6%B4%BB%2F%E7%94%9F%E6%B4%BB%E5%B0%8F%E6%8A%80%E8%83%BD-%E5%AE%9E%E7%94%A8%E5%B0%8F%E4%BC%97%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F%2F</url>
    <content type="text"><![CDATA[PPTç´ æåº“ å†å²çŸ¥è¯† åŒ»ç–—çŸ¥è¯†]]></content>
      <categories>
        <category>ç”Ÿæ´»æŠ€èƒ½</category>
        <category>ç½‘ç«™ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æ ‡ç­¾</tag>
        <tag>å®ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[k8sæ•…éšœé—®é¢˜æ”¶é›†å¸–]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fk8s%E6%95%85%E9%9A%9C%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86%2F</url>
    <content type="text"><![CDATA[ç½‘ç»œé—®é¢˜Pod ä¸€ç›´å¤„äº ContainerCreating çŠ¶æ€ï¼Œæ˜¾ç¤ºâ€cni0â€ already has an IP address differenté€šè¿‡ kubectl describe pod &lt;pod-name&gt; å‘½ä»¤æŸ¥çœ‹åˆ°å½“å‰ Pod çš„äº‹ä»¶ Events: Type Reason Age From Message Normal Scheduled 89s default-scheduler Successfully assigned local-path-storage/local-path-provisioner-ccbdd96dc-cbthj to ip-172-31-9-78 Warning FailedCreatePodSandBox 88s kubelet, ip-172-31-9-78 Failed create pod sandbox: rpc error: code = Unknown desc = failed to set up sandbox container â€œdbe0dc21f80b8778ceff11a98de477e59f5c3fa982563626ed0c01eba5eaed2câ€ network for pod â€œlocal-path-provisioner-ccbdd96dc-cbthjâ€: NetworkPlugin cni failed to set up pod â€œlocal-path-provisioner-ccbdd96dc-cbthj_local-path-storageâ€ network: failed to set bridge addr: â€œcni0â€ already has an IP address different from 10.42.0.1/24 æŸ¥çœ‹ kubelet æ—¥å¿—ä¹Ÿæ˜¯æ˜¾ç¤ºï¼š E1216 17:30:30.675697 22632 cni.go:331] Error adding local-path-storage_local-path-provisioner-ccbdd96dc-cbthj/ 0d2b1cd6de25ac114e2075f70f8ac25ef72b299048e728038086f3e7324f400a to network flannel/cbr0: failed to set bridge addr: â€œcni0â€ already has an IP address different from 10.42.0.1/24 E1216 17:30:30.922504 22632 remote_runtime.go:105] RunPodSandbox from runtime service failed: rpc error: code = Unknown desc = failed to set up sandbox container â€œ0d2b1cd6de25ac114e2075f70f8ac25ef72b299048e728038086f3e7324f400aâ€ network for pod â€œlocal-path-provisioner-ccbdd96dc-cbthjâ€: NetworkPlugin cni failed to set up pod â€œlocal-path-provisioner-ccbdd96dc-cbthj_local-path-storageâ€ network: failed to set bridge addr: â€œcni0â€ already has an IP address different from 10.42.0.1/24 è¿™ç±»é”™è¯¯æ˜¯å› ä¸º cni0 ç½‘æ¡¥é…ç½®äº†ä¸€ä¸ªä¸åŒç½‘æ®µçš„ IP åœ°å€å¯¼è‡´, åšæ³•æ˜¯åˆ é™¤cni0è®©ç½‘ç»œæ’ä»¶é‡æ–°è‡ªåŠ¨åˆ›å»ºï¼ˆç”±äºcni0æ˜¯ä½œä¸ºdockerçš„ç½‘æ¡¥ï¼Œè¿™é‡Œéœ€è¦å…ˆæš‚åœå¯¹äºæœºå™¨çš„å®¹å™¨ï¼‰:123systemctl stop dockerip link set cni0 downbrctl delbr cni0 Coredns CrashLoopBackOff é—®é¢˜logæ—¥å¿—ï¼š1234kubectl -n kube-system logs coredns-6998d84bf5-r4dbk E1028 06:36:35.489403 1 reflector.go:134] github.com/coredns/coredns/plugin/kubernetes/controller.go:322: Failed to list *v1.Namespace: Get https://10.96.0.1:443/api/v1/namespaces?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to hostE1028 06:36:35.489403 1 reflector.go:134] github.com/coredns/coredns/plugin/kubernetes/controller.go:322: Failed to list *v1.Namespace: Get https://10.96.0.1:443/api/v1/namespaces?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to hostlog: exiting because of error: log: cannot create log: open /tmp/coredns.coredns-8686dcc4fd-7fwcz.unknownuser.log.ERROR.20191028-063635.1: no such file or directory é˜²ç«å¢™ï¼ˆiptablesï¼‰è§„åˆ™é”™ä¹±æˆ–è€…ç¼“å­˜å¯¼è‡´çš„,è§£å†³æ–¹æ¡ˆï¼š12iptables --flushiptables -tnat --flush è¯¥æ“ä½œä¼šä¸¢å¤±é˜²ç«å¢™è§„åˆ™ metrics-server CrashLoopBackOff é—®é¢˜å®æˆ˜æŸ¥çœ‹podå‘ç° metrics-server ä¸€ç›´æ— æ³•å¯åŠ¨ï¼š1234567&gt; kubectl -n kube-system get pods -o wideNAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATEScoredns-5c59fd465f-fjf6n 0/1 Running 0 4d5h 10.42.0.4 node1 &lt;none&gt; &lt;none&gt;coredns-autoscaler-d765c8497-g77ql 1/1 Running 0 4d5h 10.42.0.2 node1 &lt;none&gt; &lt;none&gt;kube-flannel-whrbf 2/2 Running 0 4d5h 10.10.6.85 node1 &lt;none&gt; &lt;none&gt;metrics-server-64f6dffb84-p287x 0/1 CrashLoopBackOff 1110 4d5h 10.42.0.3 node1 &lt;none&gt; &lt;none&gt;... æŸ¥çœ‹logæ—¥å¿—1234&gt; kubectl -n kube-system logs metrics-server-64f6dffb84-p287x...panic: Get https://10.43.0.1:443/api/v1/namespaces/kube-system/configmaps/extension-apiserver-authentication: dial tcp 10.43.0.1:443: connect: no route to host... é€šè¿‡æ—¥å¿—æ¥çœ‹è¿™æ˜¯ä¸ªç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥çœ‹åˆ° coredns è™½ç„¶æ˜¯ runningçŠ¶æ€ï¼Œä½† READY æ˜¯ 0/1ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸‹ coredns ï¼Œæˆ‘ä»¬å†çœ‹çœ‹endpoint:123&gt; kubectl get ep kube-dns --namespace=kube-systemNAME ENDPOINTS AGEkube-dns 4d6h å‘ç° endpoints åˆ—è¡¨ä¸ºç©ºï¼Œè¯´æ˜æœ‰å¯èƒ½æ˜¯ kube-dns pod ç¡®å®æ²¡èµ·æ¥ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼š123456789&gt; kubectl -n kube-system describe pod coredns-5c59fd465f-fjf6n ...Node: node1/10.10.6.85...Events: Type Reason Age From Message ---- ------ ---- ---- ------- Warning DNSConfigForming 9m37s (x4896 over 4d7h) kubelet, node1 Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 10.10.20.2 10.10.20.7 202.96.134.133 Warning Unhealthy 4m30s (x37057 over 4d7h) kubelet, node1 Readiness probe failed: HTTP probe failed with statuscode: 503 è·Ÿè¿›Nameserver limits were exceededå…³é”®è¯æœç´¢ï¼Œå‘ç°ä¸€ç¯‡åŒæ ·é—®é¢˜çš„åšå®¢ï¼ˆhttps://www.cnblogs.com/cuishuai/p/10980852.htmlï¼‰ï¼Œæ„æ€åº”è¯¥æ˜¯ nameserver è¶…å‡ºé™åˆ¶ï¼Œè¶…å‡ºçš„è¢«å¿½ç•¥ï¼Œä¼šä¸ä¼šæ˜¯/etc/resolv.confé‡Œé¢çš„ nameserver å‡ºç°äº†é—®é¢˜ï¼Œç«‹åˆ»å»å¯¹åº”çš„nodeèŠ‚ç‚¹æŸ¥çœ‹ï¼ˆé€šè¿‡ describe æ‰¾åˆ° Node èŠ‚ç‚¹ï¼‰ï¼š123456789cat /etc/resolv.conf# Generated by NetworkManagersearch orbbec.comnameserver 10.10.20.2nameserver 10.10.20.7nameserver 202.96.134.133# NOTE: the libc resolver may not support more than 3 nameservers.# The nameservers listed below may not be recognized.nameserver 202.96.128.86 æœç„¶æœ‰é—®é¢˜ï¼Œå°†ä¸Šé¢nameserveråˆ é™¤ï¼Œé‡å¯docker:1systemctl restart docker]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>kubernetes</tag>
        <tag>ç–‘éš¾æ‚ç—‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ™ºèƒ½ç¡¬ä»¶è®¾å¤‡å…¬å¸åœ¨è§†è§‰äº‘å¹³å°æˆ˜ç•¥å¸ƒå±€â€”â€”IoTçš„èµ·å®¶ä¹‹æœ¬]]></title>
    <url>%2F2019%2F%E6%88%98%E7%95%A5%2F%E5%85%B3%E4%BA%8E%E7%A1%AC%E4%BB%B6%E5%85%AC%E5%8F%B8%E7%9A%84%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%88%98%E7%95%A5%E6%80%9D%E8%80%83%2F</url>
    <content type="text"><![CDATA[ç°åœ¨æ–°æŠ€æœ¯å±‚å‡ºä¸ç©·ï¼Œ5Gã€è¾¹ç¼˜è®¡ç®—ã€äº‘åŸç”Ÿï¼ŒæŠ€æœ¯æ™ƒå¾—æˆ‘ä»¬çœ¼èŠ±ç¼­ä¹±çš„ï¼Œé‚£ä¹ˆä»€ä¹ˆçœŸæ­£æ˜¯æˆ‘ä»¬åº”è¯¥åšçš„ï¼Œç‰¹åˆ«å¯¹äºä»¥ç¡¬ä»¶ä¸ºæ ¸å¿ƒçš„ä¼ä¸šï¼Œå»ºäº‘å¹³å°æœ‰æ²¡æœ‰å¿…è¦æ€§ï¼Ÿæ¯•ç«Ÿä¼ä¸šå‘å±•æ°¸è¿œæ˜¯ç¬¬ä¸€ä½ã€‚æˆ‘ä»¬åœ¨èŠæˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆï¼Œä¸åšä»€ä¹ˆæœ¬è´¨ä¸Šæ˜¯åœ¨è°ˆè¾¹ç•Œçš„é—®é¢˜ã€‚åœ¨è®¨è®ºè¾¹ç•Œçš„æ—¶å€™ï¼Œå‡ºå‘ç‚¹æœ‰ä¸‰ä¸ªï¼šï¼ˆ1ï¼‰è¿™ä¸ªäº‹æƒ…å’Œæˆ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼›ï¼ˆ2ï¼‰è¿™ä¸ªäº‹æƒ…å¯¹æˆ‘æœ‰ä»€ä¹ˆä»·å€¼ï¼›ï¼ˆ3ï¼‰è¿™ä¸ªäº‹æƒ…æˆ‘èƒ½ä¸èƒ½åšï¼› å…³ç³»é—®é¢˜äº‘ã€è¾¹ã€ç«¯ï¼Œæˆ‘ä»¬çŸ¥é“ç«¯ä¾§ç‰¹åˆ«æ˜¯é’ˆå¯¹æ¨¡ç»„è¿™å—æ˜¯ç¦»äº‘ç«¯æœ€è¿œçš„éƒ¨åˆ†ï¼Œå¤§å®¶ç›¸äº’å¾ˆå°‘å¤§äº¤é“ï¼Œé‚£ä¹ˆäº‘åˆ°åº•å’Œæˆ‘æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼ŸIoTçš„ç¼©å†™çš„å…¨ç§°æ˜¯ Internet of Thingsï¼ŒInternet å°±æ˜¯è”ç½‘ï¼Œå°±æ˜¯äº‘ã€‚ç°åœ¨ä¸Šå¸‚å…¬å¸æ²¡æœ‰è°æ„¿æ„è¯´è‡ªå·±æ˜¯ä¸€å®¶æ¨¡ç»„å‚å•†ï¼Œä¸ºå•¥ï¼Ÿå› ä¸ºå¸‚ç›ˆç‡ä½ï¼Œå¸‚å€¼ä½ï¼Œæ²¡æœ‰æƒ³è±¡ç©ºé—´ã€‚é‚£ä¸ºå•¥åŠ ä¸ŠInternetï¼ŒåŠ ä¸Šäº‘å°±ä¸Šå»äº†å‘¢ï¼Ÿå› ä¸ºæœ¬è´¨ä¸Šåœ¨äºæ¨¡å¼å˜äº†ï¼Œå°ç±³å¦‚æœä»–åªå–æ‰‹æœºï¼Œåªå–å®¶å…·ï¼Œä»–ä¸è¿‡æ˜¯ä¸€å †æœ‰å“ç‰Œçš„ç¡¬ä»¶äº§å“ï¼Œå’Œæˆ‘ä»¬åœ¨æ·˜å®ä¸Šä¹°çš„å…¶ä»–ç¡¬ä»¶æ²¡ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ã€‚ä½†ä»–åŠ ä¸Šäº†å¹³å°ï¼ŒåŠ ä¸Šäº†æœåŠ¡ï¼Œå°±è®©å¾ˆå¤šä¸œè¥¿å˜æˆå¯èƒ½äº†ï¼Œæ¯”å¦‚ä½ çš„è®¾å¤‡æ¥å…¥ã€ç®¡ç†ï¼Œæ•°æ®é‡‡é›†ç­‰ç­‰ã€‚äº‘æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æœåŠ¡æ¨¡å¼ï¼Œå°±åƒSDKä¸€æ ·ã€‚ ä»·å€¼é—®é¢˜ç¬¬äºŒå—ï¼Œä»ä»·å€¼æ¥è¯´ã€‚æˆ‘ä»¬ç°åœ¨éœ€è¦äº‘å—ï¼Ÿæˆ–è€…è¯´éœ€è¦äº‘å¹³å°å—ï¼Ÿå³éœ€è¦ï¼Œä¹Ÿä¸éœ€è¦ï¼Œè¿™è¦çœ‹æˆ‘ä»¬è®¤çŸ¥çš„è§’åº¦ã€‚ä»çº¯æ¨¡ç»„çš„ä¾›åº”å•†æ¥çœ‹ï¼Œäº‘å¹³å°æ˜¯ä¸å¿…è¦çš„ï¼Œä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯åˆ«äººçš„ä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬ä¸å…·å¤‡å•ç‹¬çš„ç½‘ç»œé€šä¿¡åŠŸèƒ½ï¼Œæ‰€æœ‰çš„æœåŠ¡çš†æ¥è‡ªäºç¡¬ä»¶æœ¬èº«æ‰€æä¾›çš„èƒ½åŠ›ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸æ˜¯ä¸€ä¸ªæ¨¡ç»„ä¾›åº”å•†ï¼Œæˆ‘ä»¬ä¸ä»…è¦çœ‹æ¸…ä¸–ç•Œï¼Œæ›´è¦çœ‹æ‡‚ä¸–ç•Œã€‚æˆ‘ä»¬è¦åšç®—æ³•ï¼Œæˆ‘ä»¬è¦åšè‡ªå·±çš„å¼€å‘æ¿ï¼Œè€Œè¿™å°±å†³å®šäº†æˆ‘ä»¬å¿…ç„¶ä¼šè·Ÿå¤–éƒ¨æœåŠ¡æ‰“äº¤é“ï¼Œè·Ÿäº‘æ‰“äº¤é“ã€‚åƒæˆ‘ä»¬å…¬å¸å†…éƒ¨å¦‚æœèƒ½æœ‰ä¸€ä¸ªç»Ÿä¸€çš„äº‘å¹³å°å°†è®¡ç®—èµ„æºæ•´åˆï¼Œæˆ‘ä»¬å°±å¯ä»¥åšåˆ°èµ„æºçš„é›†çº¦åŒ–åˆ©ç”¨ï¼ŒèŠ‚çº¦æœºå™¨çš„æˆæœ¬ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªäº‘å¹³å°èƒ½æä¾›å¼€å‘æ¿çš„æ¥å…¥ã€ç®¡ç†æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿å¼€å‘è€…ï¼Œæå‡ä½¿ç”¨è€…ä½¿ç”¨ä½“éªŒã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªç»Ÿä¸€çš„äº‘å¹³å°å¯ä»¥å°†æˆ‘ä»¬çš„å¼€å‘ç®—æ³•å‘å¼€å‘è€…æä¾›æœåŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸ºå¼€å‘è€…èµ‹èƒ½ï¼Œå»ºç«‹ç”Ÿæ€ä½“ç³»ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯å¯¹å†…ã€å¯¹å¤–æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä¸€ä¸ªäº‘å¹³å°çš„æœåŠ¡ã€‚ èƒ½åŠ›é—®é¢˜æœ€åï¼Œè¯´è¯´èƒ½åŠ›ï¼Œå°±æ˜¯è¿™å—ä¸œè¥¿åˆ°åº•èƒ½ä¸èƒ½åšï¼Ÿå¾ˆå¤šäº‹æƒ…èƒ½ä¸èƒ½æ˜¯çœ‹åŸºå› çš„ï¼Œæ¯”å¦‚é˜¿é‡Œåšç¤¾äº¤ï¼ŒæŠ•å…¥å¾ˆå¤§ï¼Œä½†æ˜¯æ€»æ˜¯å¤±è´¥ï¼Œè…¾è®¯åšç”µå•†ï¼Œä¹Ÿæ˜¯åšäº†å¾ˆå¤šå¹´ï¼ŒåŠæ­»ä¸æ´»ï¼Œè¿™å°±æ˜¯åŸºå› ã€‚é‚£ä¹ˆä»¥ç¡¬ä»¶èµ·å®¶çš„å…¬å¸èƒ½ä¸èƒ½åšå¥½äº‘å¹³å°å‘¢ï¼Ÿæˆ‘è§‰å¾—æ˜¯èƒ½åšçš„ï¼Œç›¸å¯¹äºé—¨æ§›æ›´é«˜çš„ç¡¬ä»¶ï¼Œåšè½¯ä»¶åšå¹³å°æ ¸å¿ƒæ˜¯ç”Ÿæ€ï¼Œè€Œæœ‰ç¡¬ä»¶çš„åŸºç¡€ï¼Œåšç”Ÿæ€æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚æœ€å¥½çš„ä¾‹å­å°±æ˜¯è‹¹æœï¼Œè‹¹æœä»¥æ‰‹æœºä¸ºåª’ä»‹ï¼Œåœ¨ä¸Šé¢æ­å»ºäº†ä¸€æ•´å¥—è½¯ä»¶æœåŠ¡ï¼Œå¹¶é€šè¿‡æé«˜æœåŠ¡å¸¦æ¥ç¡¬ä»¶ä»·å€¼çš„æé«˜ã€‚]]></content>
      <categories>
        <category>ç®¡ç†</category>
        <category>ä¼ä¸šæˆ˜ç•¥</category>
      </categories>
      <tags>
        <tag>ä¼ä¸šæˆ˜ç•¥</tag>
        <tag>ä¸­å°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº‘åŸç”ŸæŠ€æœ¯åœ¨ä¼ä¸šå†…éƒ¨çš„è½åœ°å®è·µ(æ¼”è®²ç¨¿)]]></title>
    <url>%2F2019%2F%E6%9E%B6%E6%9E%84%2F%E4%BA%91%E5%8E%9F%E7%94%9F%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BC%81%E4%B8%9A%E5%86%85%E9%83%A8%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5%2F</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>äº‘åŸç”Ÿ</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯åˆ†äº«</tag>
        <tag>äº‘åŸç”Ÿ</tag>
        <tag>ç³»ç»Ÿæ¶æ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kubeflowç³»åˆ—(äºŒ)ï¼škubeflowç»„ä»¶ä»‹ç»]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fkubeflow%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[ä¸ºäº†å¯¹kubeflowæœ‰ä¸ªæ›´ç›´è§‚æ·±å…¥çš„äº†è§£ï¼Œå¯¹kubeflowçš„å„ç»„ä»¶è¿›è¡Œç®€å•çš„ä»‹ç»ï¼Œå…ˆä»æœºå™¨å­¦ä¹ ä»»åŠ¡æ¥çœ‹kubeflowçš„çš„å®ç°ã€‚ æœºå™¨å­¦ä¹ ä»»åŠ¡å·¥ç¨‹åŒ–å®ç°æµç¨‹ä¸€ä¸ªå»ºæ¨¡ä»»åŠ¡ä¸‹æ¥ä¸»è¦å¯ä»¥åˆ†ä¸ºå››å¤§å—ä»»åŠ¡ ä¸šåŠ¡ç†è§£(Business Understanding) æ•°æ®è·å–åŠæ•°æ®ç†è§£(Data Acquistition) ç‰¹å¾å¤„ç†(Feature Engineering)ã€å»ºæ¨¡ä¸æ¨¡å‹è®­ç»ƒ(Model Training)ã€æ¨¡å‹è¯„ä¼°(Model Evaluation) æ¨¡å‹éƒ¨ç½²(Deployment)ï¼Œæä¾›æ¨¡å‹æœåŠ¡ ä¸€ä¸ªæœºå™¨å­¦ä¹ ä»»åŠ¡ä»å¼€å§‹åˆ°ç»“æŸä¸»è¦åˆ†ä¸ºäº†å››å¤§ä»»åŠ¡ï¼ŒKubeflowçš„å„é¡¹åŠŸèƒ½å¯ä»¥è¯´å°±æ˜¯å›´ç»•è¿™å››é¡¹ä»»åŠ¡æ„å»ºçš„ã€‚ kubeflowkubeflow æœ€å¼€å§‹åŸºäºtf-operatorï¼Œåæ¥éšç€é¡¹ç›®å‘å±•æœ€åå˜æˆä¸€ä¸ªåŸºäºäº‘åŸç”Ÿæ„å»ºçš„æœºå™¨å­¦ä¹ ä»»åŠ¡å·¥å…·å¤§é›†åˆã€‚ä»æ•°æ®é‡‡é›†ï¼ŒéªŒè¯ï¼Œåˆ°æ¨¡å‹è®­ç»ƒå’ŒæœåŠ¡å‘å¸ƒï¼Œå‡ ä¹æ‰€æœ‰æ­¥éª¤çš„å°ç»„ä»¶ Kubeflow éƒ½æä¾›è§£å†³æ–¹æ¡ˆçš„ç»„ä»¶ï¼š kubeflowç‰¹ç‚¹ï¼š åŸºäºk8sï¼Œå…·æœ‰äº‘åŸç”Ÿçš„ç‰¹æ€§ï¼šå¼¹æ€§ä¼¸ç¼©ã€é«˜å¯ç”¨ã€DevOpsç­‰ é›†æˆå¤§é‡æœºå™¨å­¦ä¹ æ‰€ç”¨åˆ°çš„å·¥å…· ç»“æ„kubeflowçš„å®Œæ•´ç»“æ„å¯ä»¥çœ‹ä»–çš„kustomizeå®‰è£…æ–‡ä»¶ï¼š12345678910111213141516171819kustomize/â”œâ”€â”€ ambassador.yamlâ”œâ”€â”€ api-service.yamlâ”œâ”€â”€ argo.yamlâ”œâ”€â”€ centraldashboard.yamlâ”œâ”€â”€ jupyter-web-app.yamlâ”œâ”€â”€ katib.yamlâ”œâ”€â”€ metacontroller.yamlâ”œâ”€â”€ minio.yamlâ”œâ”€â”€ mysql.yamlâ”œâ”€â”€ notebook-controller.yamlâ”œâ”€â”€ persistent-agent.yamlâ”œâ”€â”€ pipelines-runner.yamlâ”œâ”€â”€ pipelines-ui.yamlâ”œâ”€â”€ pipelines-viewer.yamlâ”œâ”€â”€ pytorch-operator.yamlâ”œâ”€â”€ scheduledworkflow.yamlâ”œâ”€â”€ tensorboard.yamlâ””â”€â”€ tf-job-operator.yaml ambassador å¾®æœåŠ¡ç½‘å…³argo ç”¨äºä»»åŠ¡å·¥ä½œæµç¼–æ’centraldashboard kubeflowçš„dashboardçœ‹æ¿é¡µé¢tf-job-operator æ·±åº¦å­¦ä¹ æ¡†æ¶å¼•æ“ï¼Œä¸€ä¸ªåŸºäºtensorflowæ„å»ºçš„CRDï¼Œèµ„æºç±»å‹kindä¸ºTFJobtensorboard tensorflowçš„è®­ç»ƒå¯è§†åŒ–UIç•Œé¢katib è¶…å‚æ•°æœåŠ¡å™¨pipeline ä¸€ä¸ªæœºå™¨å­¦ä¹ çš„å·¥ä½œæµç»„ä»¶jupyter ä¸€ä¸ªäº¤äº’å¼ä¸šåŠ¡IDEç¼–ç ç¯å¢ƒ TFJob TFJob æ˜¯å°† tensorflow çš„åˆ†å¸ƒå¼æ¶æ„åŸºäº k8s æ„å»ºçš„ä¸€ç§CRDï¼š Chief è´Ÿè´£åè°ƒè®­ç»ƒä»»åŠ¡ Ps å‚æ•°æœåŠ¡å™¨ï¼Œä¸ºæ¨¡å‹çš„å‚æ•°æä¾›åˆ†å¸ƒå¼çš„æ•°æ®å­˜å‚¨ Worker è´Ÿè´£å®é™…è®­ç»ƒæ¨¡å‹çš„ä»»åŠ¡. åœ¨æŸäº›æƒ…å†µä¸‹ worker 0 å¯ä»¥å……å½“Chiefçš„è´£ä»»ã€‚ Evaluator è´Ÿè´£åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œæ€§èƒ½è¯„ä¼° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879apiVersion: kubeflow.org/v1beta2kind: TFJobmetadata: name: mnist-train namespace: kubeflowspec: tfReplicaSpecs: Chief: # è°ƒåº¦å™¨ replicas: 1 template: spec: containers: - command: - /usr/bin/python - /opt/model.py env: - name: modelDir value: /mnt - name: exportDir value: /mnt/export image: mnist-test:v0.1 name: tensorflow volumeMounts: - mountPath: /mnt name: local-storage workingDir: /opt restartPolicy: OnFailure volumes: - name: local-storage persistentVolumeClaim: claimName: local-path-pvc Ps: # å‚æ•°æœåŠ¡å™¨ replicas: 1 template: spec: containers: - command: - /usr/bin/python - /opt/model.py env: - name: modelDir value: /mnt - name: exportDir value: /mnt/export image: mnist-test:v0.1 name: tensorflow volumeMounts: - mountPath: /mnt name: local-storage workingDir: /opt restartPolicy: OnFailure volumes: - name: local-storage persistentVolumeClaim: claimName: local-path-pvc Worker: # è®¡ç®—èŠ‚ç‚¹ replicas: 2 template: spec: containers: - command: - /usr/bin/python - /opt/model.py env: - name: modelDir value: /mnt - name: exportDir value: /mnt/export image: mnist-test:v0.1 name: tensorflow volumeMounts: - mountPath: /mnt name: local-storage workingDir: /opt restartPolicy: OnFailure volumes: - name: local-storage persistentVolumeClaim: claimName: local-path-pvc tensorboard è®­ç»ƒå¯è§†åŒ–ç•Œé¢æŒ‚è½½æ—¥å¿—æ–‡ä»¶ï¼Œåˆ›å»º tensorboard å¯è§†åŒ–æœåŠ¡ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849apiVersion: v1kind: Servicemetadata: name: tensorboard-tb namespace: kubeflowspec: ports: - name: http port: 8080 targetPort: 80 selector: app: tensorboard tb-job: tensorboard---apiVersion: apps/v1beta1kind: Deploymentmetadata: name: tensorboard-tb namespace: kubeflowspec: replicas: 1 template: metadata: labels: app: tensorboard tb-job: tensorboard name: tensorboard namespace: kubeflow spec: containers: - command: - /usr/local/bin/tensorboard - --logdir=/mnt - --port=80 env: - name: logDir value: /mnt image: tensorflow/tensorflow:1.11.0 name: tensorboard ports: - containerPort: 80 volumeMounts: - mountPath: /mnt name: local-storage serviceAccount: default-editor volumes: - name: local-storage persistentVolumeClaim: claimName: mnist-test-pvc tf-servingtenserflow serving æä¾›ä¸€ä¸ªç¨³å®šçš„æ¥å£ï¼Œä¾›ç”¨æˆ·è°ƒç”¨ï¼Œæ¥åº”ç”¨è¯¥æ¨¡å‹ï¼Œserving é€šè¿‡æ¨¡å‹æ–‡ä»¶ç›´æ¥åˆ›å»ºæ¨¡å‹å³æœåŠ¡(Model as a service) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465apiVersion: v1kind: Servicemetadata: labels: app: mnist name: mnist-service-local namespace: kubeflowspec: ports: - name: grpc-tf-serving port: 9000 targetPort: 9000 - name: http-tf-serving port: 8500 targetPort: 8500 selector: app: mnist type: ClusterIP---apiVersion: extensions/v1beta1kind: Deploymentmetadata: labels: app: mnist name: mnist-service-local namespace: kubeflowspec: template: metadata: labels: app: mnist version: v1 spec: containers: - args: - --port=9000 - --rest_api_port=8500 - --model_name=mnist - --model_base_path=/mnt/export command: - /usr/bin/tensorflow_model_server env: - name: modelBasePath value: /mnt/export image: tensorflow/serving:1.11.1 imagePullPolicy: IfNotPresent livenessProbe: initialDelaySeconds: 30 periodSeconds: 30 tcpSocket: port: 9000 name: mnist ports: - containerPort: 9000 - containerPort: 8500 resources: limits: cpu: &quot;4&quot; memory: 4Gi requests: cpu: &quot;1&quot; memory: 1Gi volumeMounts: - mountPath: /mnt name: local-storage pipelinepipeline æ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„kubeflowä»»åŠ¡å·¥ä½œæµ(Workflow)ï¼Œå®šä¹‰äº†ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾æè¿°çš„æµæ°´çº¿ï¼Œæµæ°´çº¿ä¸­æ¯ä¸€æ­¥æµç¨‹æ˜¯ç”±å®¹å™¨å®šä¹‰ç»„æˆçš„ç»„ä»¶ã€‚ è¿è¡Œæ­¥éª¤ï¼š å…ˆè¦å®šä¹‰ä¸€ä¸ªExperimentå®éªŒ ç„¶åå‘èµ·ä»»åŠ¡ï¼Œå®šä¹‰ä¸€ä¸ªPipeline è¿è¡ŒPipelineå®ä¾‹ ç»“æ„ä»‹ç» pipelineä¸»è¦åˆ†ä¸ºå…«éƒ¨åˆ†ï¼š Python SDK: ç”¨äºåˆ›å»ºkubeflow pipeline çš„DSL DSL compiler: å°†Pythonä»£ç è½¬æ¢æˆYAMLé™æ€é…ç½®æ–‡ä»¶ Pipeline web server: pipelineçš„å‰ç«¯æœåŠ¡ Pipeline Serviceï¼š pipelineçš„åç«¯æœåŠ¡ Kubernetes resources: åˆ›å»ºCRDsè¿è¡Œpipeline Machine learning metadata service: ç”¨äºå­˜å‚¨ä»»åŠ¡æµå®¹å™¨ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼ˆinput/outputï¼‰ Artifact storage: ç”¨äºå­˜å‚¨ Metadata å’Œ Pipeline packages, views Orchestration controllersï¼šä»»åŠ¡ç¼–æ’ï¼Œæ¯”å¦‚Argo Workflow. æ¡ˆä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041import kfpfrom kfp import dsldef gcs_download_op(url): return dsl.ContainerOp( name=&apos;GCS - Download&apos;, image=&apos;google/cloud-sdk:272.0.0&apos;, command=[&apos;sh&apos;, &apos;-c&apos;], arguments=[&apos;gsutil cat $0 | tee $1&apos;, url, &apos;/tmp/results.txt&apos;], file_outputs=&#123; &apos;data&apos;: &apos;/tmp/results.txt&apos;, &#125; )def echo2_op(text1, text2): return dsl.ContainerOp( name=&apos;echo&apos;, image=&apos;library/bash:4.4.23&apos;, command=[&apos;sh&apos;, &apos;-c&apos;], arguments=[&apos;echo &quot;Text 1: $0&quot;; echo &quot;Text 2: $1&quot;&apos;, text1, text2] )@dsl.pipeline( name=&apos;Parallel pipeline&apos;, description=&apos;Download two messages in parallel and prints the concatenated result.&apos;)def download_and_join( url1=&apos;gs://ml-pipeline-playground/shakespeare1.txt&apos;, url2=&apos;gs://ml-pipeline-playground/shakespeare2.txt&apos;): &quot;&quot;&quot;A three-step pipeline with first two running in parallel.&quot;&quot;&quot; download1_task = gcs_download_op(url1) download2_task = gcs_download_op(url2) echo_task = echo2_op(download1_task.output, download2_task.output)if __name__ == &apos;__main__&apos;: kfp.compiler.Compiler().compile(download_and_join, __file__ + &apos;.yaml&apos;) jupyter-notebookjupyter æ˜¯æœ€å¤§é™åº¦çš„åˆ©ç”¨äº¤äº’å¼çš„å·¥ä½œï¼Œä»–çš„ä¸»è¦å·¥ä½œä½“ç°åˆ©ç”¨äº¤äº’å¼çš„æ“ä½œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£æ•°æ®å’Œæµ‹è¯•è¯„ä¼°æ¨¡å‹ã€‚ ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ¨¡å—jupyter-web-app å’Œ notebook-controller, jupyter æ¶æ„ï¼š ä¹Ÿå¯ä»¥ç”¨ jupyterhub ä»£æ›¿jupyter, jupyterhubæä¾›äº†æ›´å¤šåŠŸèƒ½ï¼Œ jupyterhub ç»“æ„ï¼š]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>è¿ç»´</tag>
        <tag>kubeflow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kubeflowç³»åˆ—ï¼šç”¨kustomizeå®‰è£…kubeflow(åŸºäºé˜¿é‡Œäº‘é•œåƒç‰ˆ)]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fkubeflow%E7%9A%84%E6%90%AD%E5%BB%BA%E5%8F%8A%E8%B8%A9%E8%BF%87%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[kubeflowå›½å†…å®Œæ•´çš„å®‰è£…è¸©å‘è®°å½• ç¯å¢ƒå‡†å¤‡kubeflow ä¸ºç¯å¢ƒè¦æ±‚å¾ˆé«˜ï¼Œçœ‹å®˜æ–¹è¦æ±‚ï¼šat least one worker node with a minimum of: 4 CPU 50 GB storage 12 GB memory å½“ç„¶ï¼Œæ²¡è¾¾åˆ°ä¹Ÿèƒ½å®‰è£…ï¼Œä¸è¿‡åœ¨åé¢ä½¿ç”¨ä¸­ä¼šå‡ºç°èµ„æºé—®é¢˜ï¼Œå› ä¸ºè¿™æ˜¯æ•´åŒ…å®‰è£…æ–¹æ¡ˆã€‚ ä¸€ä¸ªå·²ç»å®‰è£…å¥½çš„kubernetesé›†ç¾¤ï¼Œè¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯rancherå®‰è£…çš„é›†ç¾¤ã€‚1sudo docker run -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯k8sçš„1.14ç‰ˆæœ¬ï¼Œkubeflowå’Œk8sä¹‹é—´çš„ç‰ˆæœ¬å…¼å®¹å¯ä»¥æŸ¥çœ‹å®˜ç½‘è¯´æ˜ï¼Œè¿™é‡Œæˆ‘çš„kubeflowé‡‡ç”¨äº†0.6ç‰ˆæœ¬ã€‚ å¦‚æœç›´æ¥æƒ³å®‰è£…å¯ä»¥ç›´æ¥è°ƒåˆ°kubeflowä¸€é”®å®‰è£…éƒ¨åˆ† kustomizeä¸‹è½½kustomizeæ–‡ä»¶å®˜æ–¹çš„æ•™ç¨‹æ˜¯ç”¨ kfclt å®‰è£…çš„ï¼Œkfclt æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨äº† kustomize æ¥å®‰è£…ï¼Œå› æ­¤è¿™é‡Œæˆ‘ç›´æ¥ä¸‹è½½ kustomize æ–‡ä»¶ï¼Œé€šè¿‡ä¿®æ”¹é•œåƒçš„æ–¹å¼å®‰è£…ã€‚ å®˜æ–¹kustomizeæ–‡ä»¶ä¸‹è½½åœ°å€ 12345git clone https://github.com/kubeflow/manifestscd manifestsgit checkout v0.6-branchcd &lt;target&gt;/basekubectl kustomize . | tee &lt;output file&gt; æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œå¯ä»¥ç”¨è„šæœ¬åˆ†åˆ«å¯¼å‡ºï¼Œä¹Ÿå¯ä»¥ç”¨ kfctl å‘½ä»¤ç”Ÿæˆkfctl generate all -V: 12345678910111213141516171819kustomize/â”œâ”€â”€ ambassador.yamlâ”œâ”€â”€ api-service.yamlâ”œâ”€â”€ argo.yamlâ”œâ”€â”€ centraldashboard.yamlâ”œâ”€â”€ jupyter-web-app.yamlâ”œâ”€â”€ katib.yamlâ”œâ”€â”€ metacontroller.yamlâ”œâ”€â”€ minio.yamlâ”œâ”€â”€ mysql.yamlâ”œâ”€â”€ notebook-controller.yamlâ”œâ”€â”€ persistent-agent.yamlâ”œâ”€â”€ pipelines-runner.yamlâ”œâ”€â”€ pipelines-ui.yamlâ”œâ”€â”€ pipelines-viewer.yamlâ”œâ”€â”€ pytorch-operator.yamlâ”œâ”€â”€ scheduledworkflow.yamlâ”œâ”€â”€ tensorboard.yamlâ””â”€â”€ tf-job-operator.yaml ambassador å¾®æœåŠ¡ç½‘å…³argo ç”¨äºä»»åŠ¡å·¥ä½œæµç¼–æ’centraldashboard kubeflowçš„dashboardçœ‹æ¿é¡µé¢tf-job-operator æ·±åº¦å­¦ä¹ æ¡†æ¶å¼•æ“ï¼Œä¸€ä¸ªåŸºäºtensorflowæ„å»ºçš„CRDï¼Œèµ„æºç±»å‹kindä¸ºTFJobkatib è¶…å‚æ•°æœåŠ¡å™¨ æœºå™¨å­¦ä¹ å¥—ä»¶ä½¿ç”¨æµç¨‹ ä¿®æ”¹kustomizeæ–‡ä»¶ä¿®æ”¹kustomizeé•œåƒä¿®æ”¹é•œåƒï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061grc_image = [&quot;gcr.io/kubeflow-images-public/ingress-setup:latest&quot;,&quot;gcr.io/kubeflow-images-public/admission-webhook:v20190520-v0-139-gcee39dbc-dirty-0d8f4c&quot;,&quot;gcr.io/kubeflow-images-public/kubernetes-sigs/application:1.0-beta&quot;,&quot;gcr.io/kubeflow-images-public/centraldashboard:v20190823-v0.6.0-rc.0-69-gcb7dab59&quot;,&quot;gcr.io/kubeflow-images-public/jupyter-web-app:9419d4d&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/katib-controller:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/katib-manager:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/katib-manager-rest:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/suggestion-bayesianoptimization:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/suggestion-grid:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/suggestion-hyperband:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/suggestion-nasrl:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/suggestion-random:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/katib/v1alpha2/katib-ui:v0.6.0-rc.0&quot;,&quot;gcr.io/kubeflow-images-public/metadata:v0.1.8&quot;,&quot;gcr.io/kubeflow-images-public/metadata-frontend:v0.1.8&quot;,&quot;gcr.io/ml-pipeline/api-server:0.1.23&quot;,&quot;gcr.io/ml-pipeline/persistenceagent:0.1.23&quot;,&quot;gcr.io/ml-pipeline/scheduledworkflow:0.1.23&quot;,&quot;gcr.io/ml-pipeline/frontend:0.1.23&quot;,&quot;gcr.io/ml-pipeline/viewer-crd-controller:0.1.23&quot;,&quot;gcr.io/kubeflow-images-public/notebook-controller:v20190603-v0-175-geeca4530-e3b0c4&quot;,&quot;gcr.io/kubeflow-images-public/profile-controller:v20190619-v0-219-gbd3daa8c-dirty-1ced0e&quot;,&quot;gcr.io/kubeflow-images-public/kfam:v20190612-v0-170-ga06cdb79-dirty-a33ee4&quot;,&quot;gcr.io/kubeflow-images-public/pytorch-operator:v1.0.0-rc.0&quot;,&quot;gcr.io/google_containers/spartakus-amd64:v1.1.0&quot;,&quot;gcr.io/kubeflow-images-public/tf_operator:v0.6.0.rc0&quot;,&quot;gcr.io/arrikto/kubeflow/oidc-authservice:v0.2&quot;]doc_image = [&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.ingress-setup:latest&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.admission-webhook:v20190520-v0-139-gcee39dbc-dirty-0d8f4c&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.kubernetes-sigs.application:1.0-beta&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.centraldashboard:v20190823-v0.6.0-rc.0-69-gcb7dab59&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.jupyter-web-app:9419d4d&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.katib-controller:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.katib-manager:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.katib-manager-rest:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.suggestion-bayesianoptimization:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.suggestion-grid:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.suggestion-hyperband:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.suggestion-nasrl:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.suggestion-random:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.katib.v1alpha2.katib-ui:v0.6.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.metadata:v0.1.8&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.metadata-frontend:v0.1.8&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/ml-pipeline.api-server:0.1.23&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/ml-pipeline.persistenceagent:0.1.23&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/ml-pipeline.scheduledworkflow:0.1.23&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/ml-pipeline.frontend:0.1.23&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/ml-pipeline.viewer-crd-controller:0.1.23&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.notebook-controller:v20190603-v0-175-geeca4530-e3b0c4&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.profile-controller:v20190619-v0-219-gbd3daa8c-dirty-1ced0e&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.kfam:v20190612-v0-170-ga06cdb79-dirty-a33ee4&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.pytorch-operator:v1.0.0-rc.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/google_containers.spartakus-amd64:v1.1.0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/kubeflow-images-public.tf_operator:v0.6.0.rc0&quot;,&quot;registry.cn-shenzhen.aliyuncs.com/shikanon/arrikto.kubeflow.oidc-authservice:v0.2&quot;] ä¿®æ”¹PVCï¼Œä½¿ç”¨åŠ¨æ€å­˜å‚¨ä¿®æ”¹pvcå­˜å‚¨ï¼Œé‡‡ç”¨local-path-provisioneråŠ¨æ€åˆ†é…PVã€‚ å®‰è£…local-path-provisionerï¼š1kubectl apply -f https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml å¦‚æœæƒ³ç›´æ¥åœ¨kubeflowä¸­ä½¿ç”¨ï¼Œè¿˜éœ€è¦å°†StorageClassæ”¹ä¸ºé»˜è®¤å­˜å‚¨:1234567891011...apiVersion: storage.k8s.io/v1kind: StorageClassmetadata: name: local-path annotations: #æ·»åŠ ä¸ºé»˜è®¤StorageClass storageclass.beta.kubernetes.io/is-default-class: &quot;true&quot;provisioner: rancher.io/local-pathvolumeBindingMode: WaitForFirstConsumerreclaimPolicy: Delete... å®Œæˆåå¯ä»¥å»ºä¸€ä¸ªPVCè¯•è¯•ï¼š1234567891011apiVersion: v1kind: PersistentVolumeClaimmetadata: name: local-path-pvc namespace: defaultspec: accessModes: - ReadWriteOnce resources: requests: storage: 2Gi æ³¨ï¼šå¦‚æœæ²¡æœ‰è®¾ä¸ºé»˜è®¤storageclasséœ€è¦åœ¨PVCåŠ å…¥storageClassName: local-pathè¿›è¡Œç»‘å®š ä¸€é”®å®‰è£…è¿™é‡Œæˆ‘åˆ¶ä½œäº†ä¸€ä¸ªä¸€é”®å¯åŠ¨çš„å›½å†…é•œåƒç‰ˆkubeflowé¡¹ç›®ï¼šhttps://github.com/shikanon/kubeflow-manifests ä¸­é—´è¸©è¿‡çš„å‘Coredns CrashLoopBackOff é—®é¢˜ logæ—¥å¿—ï¼š1234kubectl -n kube-system logs coredns-6998d84bf5-r4dbk E1028 06:36:35.489403 1 reflector.go:134] github.com/coredns/coredns/plugin/kubernetes/controller.go:322: Failed to list *v1.Namespace: Get https://10.96.0.1:443/api/v1/namespaces?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to hostE1028 06:36:35.489403 1 reflector.go:134] github.com/coredns/coredns/plugin/kubernetes/controller.go:322: Failed to list *v1.Namespace: Get https://10.96.0.1:443/api/v1/namespaces?limit=500&amp;resourceVersion=0: dial tcp 10.96.0.1:443: connect: no route to hostlog: exiting because of error: log: cannot create log: open /tmp/coredns.coredns-8686dcc4fd-7fwcz.unknownuser.log.ERROR.20191028-063635.1: no such file or directory é˜²ç«å¢™ï¼ˆiptablesï¼‰è§„åˆ™é”™ä¹±æˆ–è€…ç¼“å­˜å¯¼è‡´çš„,è§£å†³æ–¹æ¡ˆï¼š12iptables --flushiptables -tnat --flush è¯¥æ“ä½œä¼šä¸¢å¤±é˜²ç«å¢™è§„åˆ™]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>è¿ç»´</tag>
        <tag>kubeflow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[trojanè…¾è®¯äº‘éƒ¨ç½²å®‰è£…]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Ftrojan%E8%85%BE%E8%AE%AF%E4%BA%91%E9%83%A8%E7%BD%B2%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[å¬è¯´ trojan æ¢¯å­çš„ç¨³å®šå’Œé€Ÿåº¦éƒ½ä¸é”™ï¼Œå› ä¸ºä¹‹å‰ä¹°äº†å°å›½å¤–çš„è…¾è®¯äº‘æœåŠ¡å™¨ï¼Œä½†è‡ªå·±æ­çš„VPNä¸€ç›´ä¸å¤ªç¨³å®šï¼Œç»å¸¸æ–­ï¼Œæ­£å¥½æµ‹è¯•ä¸‹ trojan æ˜¯ä¸æ˜¯è¿™ä¹ˆç‰›ã€‚ BBRå®‰è£…BBRåŠ é€Ÿå™¨BBRåŠ é€Ÿå™¨ï¼š å®‰è£…ï¼š1234yum -y install wgetwget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.shchmod +x bbr.sh./bbr.sh trojan å®‰è£…trojanå®‰è£…torjanå‰éœ€è¦å®‰è£…caddyåšwebæœåŠ¡å’Œè‡ªåŠ¨ç”Ÿæˆtlsè¯ä¹¦ï¼š1yum install caddy -y å®‰è£…å¥½caddyä¹‹åå°±å¯ä»¥å®‰è£…trojanäº†ï¼š 1curl -O https://raw.githubusercontent.com/atrandys/trojan/master/trojan_centos7.sh &amp;&amp; chmod +x trojan_centos7.sh &amp;&amp; ./trojan_centos7.sh å®‰è£… trojan è¦ root æƒé™ï¼Œè¿˜æœ‰éœ€è¦å‡†å¤‡ä¸€ä¸ªè§£æåˆ°æœåŠ¡å™¨çš„åŸŸååœ°å€ã€‚å¯ä»¥åœ¨å›½å†…ä¹°ä¹Ÿå¯ä»¥åœ¨å›½å¤–ä¹°ï¼Œè¿™ä¸ªè‡ªè¡Œå†³å®šï¼Œæˆ‘ç”¨çš„æ˜¯è…¾è®¯äº‘ä¹°çš„åŸŸåï¼Œéœ€è¦å°†åŸŸåè§£æåˆ°æœåŠ¡å™¨ï¼Œå› ä¸ºæ˜¯å›½å¤–æœåŠ¡å™¨åªèƒ½ç”¨å¢ƒå¤–åŸŸåè§£æã€‚ å¯åŠ¨åè¿›å…¥äº¤äº’æ¡†ï¼š12345678910111213==================================== ä»‹ç»ï¼šä¸€é”®å®‰è£…trojan ç³»ç»Ÿï¼š&gt;=centos7 ä½œè€…ï¼šatrandys ç½‘ç«™ï¼šwww.atrandys.com Youtubeï¼šatrandys ==================================== 1. å®‰è£…trojan 2. å¸è½½trojan 0. é€€å‡ºè„šæœ¬è¯·è¾“å…¥æ•°å­—:1 ä¸€é”®å®‰è£…ç®€å•æ–¹ä¾¿ã€‚ç„¶åè¾“å…¥åŸŸåå³å¯ï¼š12345....=======================è¯·è¾“å…¥ç»‘å®šåˆ°æœ¬VPSçš„åŸŸå=======================xxxxxxxx.com Serverç«¯å®‰è£…å®Œæˆï¼Œç»™å‡ºå®¢æˆ·ç«¯å®‰è£…æ­¥éª¤ï¼šå…ˆä¸‹è½½ï¼Œç„¶åè§£å‹è¿è¡Œå³å¯ã€‚12345678======================================================================Trojanå·²å®‰è£…å®Œæˆï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é“¾æ¥ä¸‹è½½trojanå®¢æˆ·ç«¯ï¼Œæ­¤å®¢æˆ·ç«¯å·²é…ç½®å¥½æ‰€æœ‰å‚æ•°1ã€å¤åˆ¶ä¸‹é¢çš„é“¾æ¥ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ï¼Œä¸‹è½½å®¢æˆ·ç«¯http://xxxxxxx/xxxxxxxxxx/trojan-cli.zip2ã€å°†ä¸‹è½½çš„å‹ç¼©åŒ…è§£å‹ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€start.batå³æ‰“å¼€å¹¶è¿è¡ŒTrojanå®¢æˆ·ç«¯3ã€æ‰“å¼€stop.batå³å…³é—­Trojanå®¢æˆ·ç«¯4ã€Trojanå®¢æˆ·ç«¯éœ€è¦æ­é…æµè§ˆå™¨æ’ä»¶ä½¿ç”¨ï¼Œä¾‹å¦‚switchyomegaç­‰====================================================================== æˆ‘ä»¬çœ‹çœ‹ä¸‹è½½ä¸‹æ¥çš„å®¢æˆ·ç«¯ç›®å½•ï¼š1234567891011121314151617181920212223242526tree /Få· å·¥ä½œ çš„æ–‡ä»¶å¤¹ PATH åˆ—è¡¨å·åºåˆ—å·ä¸º 0073-9957D:.â”‚ config.jsonâ”‚ CONTRIBUTORS.mdâ”‚ fullchain.cerâ”‚ libcrypto-1_1.dllâ”‚ libmariadb.dllâ”‚ libssl-1_1.dllâ”‚ LICENSEâ”‚ msvcp140.dllâ”‚ msvcp140_1.dllâ”‚ msvcp140_2.dllâ”‚ README.mdâ”‚ start.batâ”‚ stop.batâ”‚ trojan.exeâ”‚ vcruntime140.dllâ”‚ vcruntime140_1.dllâ”‚ VC_redist.x64.exeâ”‚â””â”€examples client.json-example forward.json-example server.json-example æˆ‘ä»¬å¯ä»¥çœ‹çœ‹é‡Œé¢çš„é…ç½®ï¼š12345678910111213141516171819202122232425262728293031&#123; "run_type": "client", "local_addr": "127.0.0.1", "local_port": 1080, "remote_addr": "xxxxxx.com", "remote_port": 443, "password": [ "xxxxxx" ], "log_level": 1, "ssl": &#123; "verify": true, "verify_hostname": true, "cert": "fullchain.cer", "cipher_tls13":"TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384","sni": "", "alpn": [ "h2", "http/1.1" ], "reuse_session": true, "session_ticket": false, "curves": "" &#125;, "tcp": &#123; "no_delay": true, "keep_alive": true, "fast_open": false, "fast_open_qlen": 20 &#125;&#125;]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>VPN</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºrancheräº”åˆ†é’Ÿæ­å»ºç§æœ‰é•œåƒä»“åº“harborå¹¶é…ç½®https]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2F%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93harbor-%E9%85%8D%E7%BD%AEhttps%2F</url>
    <content type="text"><![CDATA[ç”¨rancheråº”ç”¨å•†åŸæ­å»ºharboråœ¨rancheråº”ç”¨å•†åº—æœç´¢ harbor ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œè¿›å…¥åˆ°é…ç½®é¡µé¢ï¼š å¯ä»¥è‡ªå»ºè¯ä¹¦ä¹Ÿå¯ä»¥ç›´æ¥ç”¨kubernetesè¯ä¹¦ï¼Œéƒ¨ç½²æˆåŠŸå¯ä»¥å»workèŠ‚ç‚¹ä¸‹é¢/etc/docker/certs.d/ä¸‹é¢æŸ¥çœ‹ä¼šæœ‰å“åº”è®¾ç½®çš„åŸŸåè¯ä¹¦ï¼ŒæŒ‰ç…§é»˜è®¤é…ç½®ï¼Œç‚¹å‡»å¯åŠ¨ï¼Œè¿™æ ·ä¸€ä¸ªharboråº”ç”¨å°±è¢«æ‹‰èµ·æ¥äº† å¦‚æœç”¨è‡ªå»ºè¯ä¹¦ï¼ˆä¸æ¨èï¼‰ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š (1)opensslç”Ÿæˆç§é’¥1openssl genrsa -out harbor.key 1024 (2)opensslç”Ÿæˆè¯ä¹¦12345678910openssl req -new -x509 -days 36500 -key harbor.key -out harbor.crt-----Country Name (2 letter code) [XX]:CNState or Province Name (full name) []:GUANGDONGLocality Name (eg, city) [Default City]:SHENZHENOrganization Name (eg, company) [Default Company Ltd]:ORBBECOrganizational Unit Name (eg, section) []:ORBBECCommon Name (eg, your name or your server&apos;s hostname) []:*.harbor.orbbecEmail Address []:cifang@orbbec.com ï¼ˆ3ï¼‰å¯¼å…¥è¯ä¹¦ é…ç½®hostsç”±äºæ­å»ºçš„æ—¶å€™é‡‡ç”¨Ingressçš„å†…ç½‘åŸŸåçš„å½¢å¼ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®hostsæˆ–è€…æ­å»ºç§æœ‰çš„DNSæœåŠ¡å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨é»˜è®¤è‡ªå·±ä¿®æ”¹åŸŸå ä¿®æ”¹/etc/hosts1[IPåœ°å€] core.harbor.domain è¿™é‡Œçš„ä¿®æ”¹hostsä¸ä»…ä¿®æ”¹å®¢æˆ·ç«¯ç¯å¢ƒçš„ï¼Œè¿˜è¦ä¿®æ”¹workèŠ‚ç‚¹çš„hosts é…ç½®å¥½hostsä¹‹åï¼Œæˆ‘ä»¬è¿˜è¦é…ç½®ä¿¡ä»»è¯ä¹¦ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ç›´æ¥é€šè¿‡/etc/docker/daemon.jsonçš„insecure-registries:1&#123;&quot;insecure-registries&quot;: [&quot;core.harbor.orbbec&quot;,&quot;notary.harbor.orbbec&quot;]&#125; å¦ä¸€ç§å¯ä»¥åˆ°workèŠ‚ç‚¹ä¸‹çš„/etc/docker/certs.dæ‹·è´åˆ°å®¢æˆ·ç«¯å¯¹åº”ä½ç½® é‡å¯å®¢æˆ·ç«¯dockeræœåŠ¡ï¼š1systemctl restart docker é…ç½®é•œåƒä»“åº“å‡­è¯ï¼š æµ‹è¯•harborä¸Šä¼ ç™»é™†harbor1docker login core.harbor.orbbec è¿™é‡Œçš„ç™»é™†åŸŸåæ˜¯å‰é¢é…ç½®çš„core-harborçš„åŸŸåï¼Œè¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ã€‚ ä¸Šä¼ ç§æœ‰é•œåƒæ‰“æ ‡ç­¾ï¼Œå¹¶ä¸Šä¼ åˆ°library123docker tag [æ„å»ºçš„ç§æœ‰ä»“åº“] core.harbor.orbbec/library/python:nginxdocker push core.harbor.orbbec/library/python:nginx ä¸Šä¼ å¯ä»¥ç™»é™†åˆ° harbor çš„ library é¡¹ç›®ç§æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®å·²ç»æœ‰ä¸€ä¸ªä¸Šä¼ æˆåŠŸçš„é•œåƒäº†ã€‚ æ„å»ºåŸºäºharborçš„deploymentæ„å»ºä¸€ä¸ªæµ‹è¯•deploymentï¼Œçœ‹åº”ç”¨æ˜¯å¦æ­£å¸¸ï¼š1234567891011121314151617181920212223apiVersion: apps/v1kind: Deploymentmetadata: name: test-web-deployment labels: app: my-webspec: replicas: 4 selector: matchLabels: app: my-web template: metadata: labels: app: my-web spec: imagePullSecrets: - name: core-harbor containers: - name: nginx image: core.harbor.orbbec/library/python:nginx ports: - containerPort: 80 è¿™é‡Œéœ€è¦æ³¨æ„è¦åŠ ä¸ŠimagePullSecretsï¼Œè¿™é‡Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰é…ç½®çš„é•œåƒä»“åº“å‡­è¯ã€‚ å‘å¸ƒdeployment:1kubectl apply -f test-web-deployment.yaml é€šè¿‡kubectl get deploymentå¯ä»¥çœ‹åˆ°åº”ç”¨å·²ç»æ­£å¸¸è¿è¡Œäº†]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linux æ–‡æœ¬å·¥å…·ä½¿ç”¨å°æŠ€å·§]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Flinux-%E6%96%87%E6%9C%AC%E6%9F%A5%E8%AF%A2%E5%B0%8F%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[awkawk ç”¨æ³•awk é€šå¸¸è¡¨è¾¾å¼awk &#39;begin{ commands } pattern{ commands } end{ commands }&#39;ï¼Œå…¶ä¸­ begin éƒ¨åˆ†å’Œ end éƒ¨åˆ†å¯ä»¥çœç•¥ï¼Œå³awk &#39;{ä»£ç }&#39;ï¼Œæ¯”å¦‚æœ€ç®€å•çš„æ‰“å°ç¬¬ä¸€åˆ—awk &#39;{print $1}&#39;å°±æ˜¯è¿™æ ·ã€‚è¿è¡ŒåŸç†ï¼š ç¬¬ä¸€æ­¥ï¼šè¿è¡ŒBEGIN{ commands }è¯­å¥å—ä¸­çš„è¯­å¥ã€‚é€šå¸¸ç”¨äºå˜é‡åˆå§‹åŒ–ã€æ‰“å°è¾“å‡ºè¡¨æ ¼çš„è¡¨å¤´ç­‰è¯­å¥é€šå¸¸èƒ½å¤Ÿå†™åœ¨BEGINè¯­å¥å—ä¸­ã€‚å¯é€‰è¯­å—ã€‚ ç¬¬äºŒæ­¥ï¼šä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥(stdin)è¯»å–ä¸€è¡Œã€‚ç„¶åè¿è¡Œpattern{ commands }è¯­å¥å—ï¼Œå®ƒé€è¡Œæ‰«ææ–‡ä»¶ï¼Œä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œåå¤è¿™ä¸ªè¿‡ç¨‹ã€‚ç›´åˆ°æ–‡ä»¶æ‰€æœ‰è¢«è¯»å–å®Œæˆã€‚ ç¬¬ä¸‰æ­¥ï¼šå½“è¯»è‡³è¾“å…¥æµæœ«å°¾æ—¶ã€‚è¿è¡ŒEND{ commands }è¯­å¥å—ã€‚ printå‡½æ•°print åé¢å¯ä»¥è·Ÿå¤šä¸ªå‚æ•°ï¼Œç±»ä¼¼python printæ–¹æ³•ï¼Œå„å‚æ•°ç”¨ç©ºæ ¼åˆ†å¼€&quot; &quot;,ä»¥ä¸‹æ˜¯ä»£è¡¨çš„å„ç§å˜é‡æ„ä¹‰ï¼š $0 å½“å‰è®°å½•ï¼ˆè¿™ä¸ªå˜é‡ä¸­å­˜æ”¾ç€æ•´ä¸ªè¡Œçš„å†…å®¹ï¼‰ $1~$n å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µï¼Œå­—æ®µé—´ç”±FSåˆ†éš” FS è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ é»˜è®¤æ˜¯ç©ºæ ¼æˆ–Tab NF å½“å‰è®°å½•ä¸­çš„å­—æ®µä¸ªæ•°ï¼Œå°±æ˜¯æœ‰å¤šå°‘åˆ— NR å·²ç»è¯»å‡ºçš„è®°å½•æ•°ï¼Œå°±æ˜¯è¡Œå·ï¼Œä»1å¼€å§‹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶è¯ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯ä¸æ–­ç´¯åŠ ä¸­ã€‚ FNR å½“å‰è®°å½•æ•°ï¼Œä¸NRä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯å„ä¸ªæ–‡ä»¶è‡ªå·±çš„è¡Œå· RS è¾“å…¥çš„è®°å½•åˆ†éš”ç¬¦ï¼Œ é»˜è®¤ä¸ºæ¢è¡Œç¬¦ OFS è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼Œ é»˜è®¤ä¹Ÿæ˜¯ç©ºæ ¼ ORS è¾“å‡ºçš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ FILENAME å½“å‰è¾“å…¥æ–‡ä»¶çš„åå­— docker ps | awk &#39;{print NR &quot;\t&quot; $1}&#39; è¡¨ç¤º æ‰“å°è¡Œå·+åˆ¶è¡¨ç¬¦+ç¬¬ä¸€åˆ—æ•°æ®ã€‚ å®è·µä½¿ç”¨æ¡ˆä¾‹ åˆ é™¤æŒ‡å®šå…³é”®å­—å®¹å™¨ï¼šåˆ é™¤å¸¦æœ‰k8så…³é”®å­—çš„æ‰€æœ‰å®¹å™¨1docker rm -f $(docker ps -a | grep k8s | awk '&#123;print $1&#125;') jqå‘½ä»¤å·¥å…·jqè¡¨è¾¾å¼ å•ç‹¬çš„ä¸€ä¸ª&#39;.&#39;ç¬¦å·ç”¨æ¥è¡¨ç¤ºå¯¹ä½œä¸ºè¡¨è¾¾å¼è¾“å…¥çš„æ•´ä¸ª JSON å¯¹è±¡çš„å¼•ç”¨ã€‚ å•ä¸ª&#39;.&lt;attributename&gt;&#39;è¡¨ç¤ºå½“å‰ä¸€çº§ç›®å½•ä¸‹çš„å±æ€§åç§° è®¿é—®ç‰¹å®šæ•°ç»„çš„å…ƒç´ æ“ä½œï¼Œ&#39;.[&lt;index&gt;]&#39;ï¼Œæ¯”å¦‚.[1]è¡¨ç¤ºè®¿é—®æ•°ç»„ç¬¬2ä¸ªå…ƒç´ ï¼Œ.[]è¡¨ç¤ºæ‰€æœ‰å…ƒç´ è¿­ä»£ä¸€æ¬¡æ¥éå† ä¹Ÿå¯ä»¥æ”¯æŒæ•°ç»„åˆ‡ç‰‡æ“ä½œï¼Œç±»ä¼¼pythonï¼Œ&#39;.[&lt;startindex&gt;:&lt;endindex&gt;]&#39; å®è·µä½¿ç”¨æ¡ˆä¾‹ åœ¨å®¹å™¨docker inspectçš„ä½¿ç”¨: æŸ¥çœ‹å®¹å™¨æŒ‚è½½ç›®å½•æœ‰å“ªäº›ï¼šMountsåœ¨ç¬¬äºŒçº§ç›®å½•ä¸‹1docker inspect kubelet | jq ".[].Mounts" æŸ¥çœ‹å®¹å™¨ç½‘ç»œNetworksåœ¨ç¬¬ä¸‰çº§ç›®å½•ä¸‹1docker inspect kubelet | jq .[].NetworkSettings.Networks jq å‘½ä»¤åé¢å¯ä»¥å¸¦åŒå¼•å·ä¹Ÿå¯ä»¥ä¸å¸¦ æŸ¥çœ‹å®¹å™¨é…ç½®ï¼Œæ¯”å¦‚é•œåƒåç§°ã€ç¯å¢ƒå˜é‡ã€entrypoint:1docker inspect kubelet | jq .[].Config grep å’Œ egrepgrepgrepæ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·å‘½ä»¤ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥,grepæ‰€æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344^é”šå®šè¡Œçš„å¼€å§‹ å¦‚ï¼š&apos;^grep&apos;åŒ¹é…æ‰€æœ‰ä»¥grepå¼€å¤´çš„è¡Œã€‚$é”šå®šè¡Œçš„ç»“æŸ å¦‚ï¼š&apos;grep$&apos;åŒ¹é…æ‰€æœ‰ä»¥grepç»“å°¾çš„è¡Œã€‚.åŒ¹é…ä¸€ä¸ªéæ¢è¡Œç¬¦çš„å­—ç¬¦å¦‚ï¼š&apos;gr.p&apos;åŒ¹é…gråæ¥ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚*åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ˆå‰å­—ç¬¦å¦‚ï¼š&apos;*grep&apos;åŒ¹é…æ‰€æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼åç´§è·Ÿgrepçš„è¡Œã€‚ .*ä¸€èµ·ç”¨ä»£è¡¨ä»»æ„å­—ç¬¦ã€‚[]åŒ¹é…ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚&apos;[Gg]rep&apos;åŒ¹é…Grepå’Œgrepã€‚[^]åŒ¹é…ä¸€ä¸ªä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚ï¼š&apos;[^A-FH-Z]rep&apos;åŒ¹é…ä¸åŒ…å«A-Rå’ŒT-Zçš„ä¸€ä¸ªå­—æ¯å¼€å¤´ï¼Œç´§è·Ÿrepçš„è¡Œã€‚..æ ‡è®°åŒ¹é…å­—ç¬¦ï¼Œå¦‚&apos;love&apos;ï¼Œloveè¢«æ ‡è®°ä¸º1ã€‚\&lt;é”šå®šå•è¯çš„å¼€å§‹ï¼Œå¦‚:&apos;\&lt;grep&apos;åŒ¹é…åŒ…å«ä»¥grepå¼€å¤´çš„å•è¯çš„è¡Œã€‚\&gt;é”šå®šå•è¯çš„ç»“æŸï¼Œå¦‚&apos;grep\&gt;&apos;åŒ¹é…åŒ…å«ä»¥grepç»“å°¾çš„å•è¯çš„è¡Œã€‚x\&#123;m\&#125;é‡å¤å­—ç¬¦xï¼Œmæ¬¡ï¼Œå¦‚ï¼š&apos;0\&#123;5\&#125;&apos;åŒ¹é…åŒ…å«5ä¸ªoçš„è¡Œã€‚x\&#123;m,\&#125;é‡å¤å­—ç¬¦x,è‡³å°‘mæ¬¡ï¼Œå¦‚ï¼š&apos;o\&#123;5,\&#125;&apos;åŒ¹é…è‡³å°‘æœ‰5ä¸ªoçš„è¡Œã€‚x\&#123;m,n\&#125;é‡å¤å­—ç¬¦xï¼Œè‡³å°‘mæ¬¡ï¼Œä¸å¤šäºnæ¬¡ï¼Œå¦‚ï¼š&apos;o\&#123;5,10\&#125;&apos;åŒ¹é…5--10ä¸ªoçš„è¡Œã€‚\wåŒ¹é…æ–‡å­—å’Œæ•°å­—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯[A-Za-z0-9]ï¼Œå¦‚ï¼š&apos;G\w*p&apos;åŒ¹é…ä»¥Gåè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªæ–‡å­—æˆ–æ•°å­—å­—ç¬¦ï¼Œç„¶åæ˜¯pã€‚\W\wçš„åç½®å½¢å¼ï¼ŒåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéå•è¯å­—ç¬¦ï¼Œå¦‚ç‚¹å·å¥å·ç­‰ã€‚\bå•è¯é”å®šç¬¦ï¼Œå¦‚: &apos;\bgrep\b&apos;åªåŒ¹é…grepã€‚ egrepegrepæ˜¯grepçš„æ‰©å±•ï¼Œæ”¯æŒæ›´å¤šçš„æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦ï¼Œegrepçš„æ‰©å±•é›†å¦‚ä¸‹:1234567891011121314+åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå…ˆå‰çš„å­—ç¬¦ã€‚å¦‚ï¼š&apos;[a-z]+able&apos;ï¼ŒåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå°å†™å­—æ¯åè·Ÿableçš„ä¸²ï¼Œå¦‚loveable,enable,disableç­‰ã€‚?åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ˆå‰çš„å­—ç¬¦ã€‚å¦‚ï¼š&apos;gr?p&apos;åŒ¹é…gråè·Ÿä¸€ä¸ªæˆ–æ²¡æœ‰å­—ç¬¦ï¼Œç„¶åæ˜¯pçš„è¡Œã€‚a|b|cåŒ¹é…aæˆ–bæˆ–cã€‚å¦‚ï¼šgrep|sedåŒ¹é…grepæˆ–sed()åˆ†ç»„ç¬¦å·ï¼Œå¦‚ï¼šlove(able|rs)ov+åŒ¹é…loveableæˆ–loversï¼ŒåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªovã€‚x&#123;m&#125;,x&#123;m,&#125;,x&#123;m,n&#125;ä½œç”¨åŒx\&#123;m\&#125;,x\&#123;m,\&#125;,x\&#123;m,n\&#125; ç‰¹æ®Šå­—ç¬¦å†™æ³•ä¸ºäº†åœ¨ä¸åŒå›½å®¶çš„å­—ç¬¦ç¼–ç ä¸­ä¿æŒä¸€è‡³ï¼ŒPOSIX(The Portable Operating System Interface)å¢åŠ äº†ç‰¹æ®Šçš„å­—ç¬¦ç±»ï¼Œå¦‚[:alnum:]æ˜¯A-Za-z0-9çš„å¦ä¸€ä¸ªå†™æ³•ã€‚è¦æŠŠå®ƒä»¬æ”¾åˆ°[]å·å†…æ‰èƒ½æˆä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚[A- Za-z0-9]æˆ–[[:alnum:]]ã€‚POSIXçš„å­—ç¬¦ç±»ï¼š1234567891011121314151617181920212223242526272829303132[:alnum:]æ–‡å­—æ•°å­—å­—ç¬¦[:alpha:]æ–‡å­—å­—ç¬¦[:digit:]æ•°å­—å­—ç¬¦[:graph:]éç©ºå­—ç¬¦ï¼ˆéç©ºæ ¼ã€æ§åˆ¶å­—ç¬¦ï¼‰[:lower:]å°å†™å­—ç¬¦[:cntrl:]æ§åˆ¶å­—ç¬¦[:print:]éç©ºå­—ç¬¦ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰[:punct:]æ ‡ç‚¹ç¬¦å·[:space:]æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ˆæ–°è¡Œï¼Œç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦ï¼‰[:upper:]å¤§å†™å­—ç¬¦[:xdigit:]åå…­è¿›åˆ¶æ•°å­—ï¼ˆ0-9ï¼Œa-fï¼ŒA-Fï¼‰ å‘½ä»¤æ¡ˆä¾‹grepå’Œegrepçš„å‘½ä»¤æ ¼å¼éƒ½æ˜¯12grep &lt;å‘½ä»¤å‚æ•°&gt; &lt;è¡¨è¾¾å¼&gt; &lt;æ–‡ä»¶/æ–‡ä»¶å¤¹&gt;egrep &lt;å‘½ä»¤å‚æ•°&gt; &lt;è¡¨è¾¾å¼&gt; &lt;æ–‡ä»¶/æ–‡ä»¶å¤¹&gt; å¸¸ç”¨å‘½ä»¤å‚æ•°:1234567-vï¼š åå‘é€‰å–ï¼Œå°±æ˜¯å¼‚è¿ç®—-oï¼šä»…æ˜¾ç¤ºåŒ¹é…çš„å­—ä¸²ï¼Œè€Œéå­—ä¸²æ‰€åœ¨çš„è¡Œ-iï¼šignore-caseï¼Œå¿½ç•¥å­—ç¬¦å¤§å°å†™-Aï¼šæ˜¾ç¤ºä¹‹åä¸¤è¡Œ-Bï¼šæ˜¾ç¤ºä¹‹å‰ä¸¤è¡Œ-Cï¼šæ˜¾ç¤ºä¸Šä¸‹ä¸¤è¡Œ-R: é€’å½’å¾ªç¯ æ¡ˆä¾‹1ï¼š1grep -R '\.HandleCrash' cmd pkg staging | egrep -v 'test|apiserver|kubectl|controller|proxy|scheduler|ssh' ä»cmdã€pkgã€stagingæ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾åŒ…å«.HandleCrashå­—ç¬¦çš„æ–‡æœ¬çš„è¡Œè¾“å‡ºï¼Œå†è¿”å›ä¸åŒ…å«â€test|apiserver|kubectl|controller|proxy|scheduler|sshâ€è¿™äº›å­—æ®µçš„è¡Œã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[docker registry:è®¾ç½®ç§æœ‰çš„é•œåƒç¼“å­˜ä»“åº“]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fdocker-registry-%E8%AE%BE%E7%BD%AE%E7%A7%81%E6%9C%89%E7%9A%84%E9%95%9C%E5%83%8F%E7%BC%93%E5%AD%98%E4%BB%93%E5%BA%93%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯ä»‹ç»docker æä¾›äº†å®˜æ–¹çš„ registry ä»“åº“é•œåƒï¼Œå¯ä»¥é€šè¿‡docker hubè¿›è¡Œæ‹‰å–ï¼š1docker pull registry ä½†æ˜¯ç›´æ¥æ‹‰å–çš„registryæˆ‘ä»¬å¹¶ä¸çŸ¥é“å¦‚ä½•è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä»–çš„Dockerfileåœ°å€ï¼Œgitåœ°å€ï¼š https://github.com/docker/distribution-library-image é€šè¿‡è¿™ä¸ªä»“åº“çŸ¥é“ä¸»è¦æ˜¯é€šè¿‡config-example.ymlæ¥é…ç½®ã€‚ resgistry çš„é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239version: 0.1log: accesslog: disabled: true level: debug formatter: text fields: service: registry environment: staging hooks: - type: mail disabled: true levels: - panic options: smtp: addr: mail.example.com:25 username: mailuser password: password insecure: true from: sender@example.com to: - errors@example.comloglevel: debug # deprecated: use &quot;log&quot;storage: filesystem: rootdirectory: /var/lib/registry maxthreads: 100 azure: accountname: accountname accountkey: base64encodedaccountkey container: containername gcs: bucket: bucketname keyfile: /path/to/keyfile credentials: type: service_account project_id: project_id_string private_key_id: private_key_id_string private_key: private_key_string client_email: client@example.com client_id: client_id_string auth_uri: http://example.com/auth_uri token_uri: http://example.com/token_uri auth_provider_x509_cert_url: http://example.com/provider_cert_url client_x509_cert_url: http://example.com/client_cert_url rootdirectory: /gcs/object/name/prefix chunksize: 5242880 s3: accesskey: awsaccesskey secretkey: awssecretkey region: us-west-1 regionendpoint: http://myobjects.local bucket: bucketname encrypt: true keyid: mykeyid secure: true v4auth: true chunksize: 5242880 multipartcopychunksize: 33554432 multipartcopymaxconcurrency: 100 multipartcopythresholdsize: 33554432 rootdirectory: /s3/object/name/prefix swift: username: username password: password authurl: https://storage.myprovider.com/auth/v1.0 or https://storage.myprovider.com/v2.0 or https://storage.myprovider.com/v3/auth tenant: tenantname tenantid: tenantid domain: domain name for Openstack Identity v3 API domainid: domain id for Openstack Identity v3 API insecureskipverify: true region: fr container: containername rootdirectory: /swift/object/name/prefix oss: accesskeyid: accesskeyid accesskeysecret: accesskeysecret region: OSS region name endpoint: optional endpoints internal: optional internal endpoint bucket: OSS bucket encrypt: optional enable server-side encryption encryptionkeyid: optional KMS key id for encryption secure: optional ssl setting chunksize: optional size valye rootdirectory: optional root directory inmemory: # This driver takes no parameters delete: enabled: false redirect: disable: false cache: blobdescriptor: redis maintenance: uploadpurging: enabled: true age: 168h interval: 24h dryrun: false readonly: enabled: falseauth: silly: realm: silly-realm service: silly-service token: autoredirect: true realm: token-realm service: token-service issuer: registry-token-issuer rootcertbundle: /root/certs/bundle htpasswd: realm: basic-realm path: /path/to/htpasswdmiddleware: registry: - name: ARegistryMiddleware options: foo: bar repository: - name: ARepositoryMiddleware options: foo: bar storage: - name: cloudfront options: baseurl: https://my.cloudfronted.domain.com/ privatekey: /path/to/pem keypairid: cloudfrontkeypairid duration: 3000s ipfilteredby: awsregion awsregion: us-east-1, use-east-2 updatefrenquency: 12h iprangesurl: https://ip-ranges.amazonaws.com/ip-ranges.json storage: - name: redirect options: baseurl: https://example.com/reporting: bugsnag: apikey: bugsnagapikey releasestage: bugsnagreleasestage endpoint: bugsnagendpoint newrelic: licensekey: newreliclicensekey name: newrelicname verbose: truehttp: addr: localhost:5000 prefix: /my/nested/registry/ host: https://myregistryaddress.org:5000 secret: asecretforlocaldevelopment relativeurls: false draintimeout: 60s tls: certificate: /path/to/x509/public key: /path/to/x509/private clientcas: - /path/to/ca.pem - /path/to/another/ca.pem letsencrypt: cachefile: /path/to/cache-file email: emailused@letsencrypt.com hosts: [myregistryaddress.org] debug: addr: localhost:5001 prometheus: enabled: true path: /metrics headers: X-Content-Type-Options: [nosniff] http2: disabled: falsenotifications: events: includereferences: true endpoints: - name: alistener disabled: false url: https://my.listener.com/event headers: &lt;http.Header&gt; timeout: 1s threshold: 10 backoff: 1s ignoredmediatypes: - application/octet-stream ignore: mediatypes: - application/octet-stream actions: - pullredis: addr: localhost:6379 password: asecret db: 0 dialtimeout: 10ms readtimeout: 10ms writetimeout: 10ms pool: maxidle: 16 maxactive: 64 idletimeout: 300shealth: storagedriver: enabled: true interval: 10s threshold: 3 file: - file: /path/to/checked/file interval: 10s http: - uri: http://server.to.check/must/return/200 headers: Authorization: [Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==] statuscode: 200 timeout: 3s interval: 10s threshold: 3 tcp: - addr: redis-server.domain.com:6379 timeout: 3s interval: 10s threshold: 3proxy: remoteurl: https://registry-1.docker.io username: [username] password: [password]compatibility: schema1: signingkeyfile: /etc/registry/key.json enabled: truevalidation: manifests: urls: allow: - ^https?://([^/]+\.)*example\.com/ deny: - ^https?://www\.example\.com/ å’Œ proxy cache ç›¸å…³çš„å‚æ•°æ˜¯ proxy ã€‚ æ­å»º docker registryokayï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡åŸå§‹dockerfileæ„å»ºä¸€ä¸ªç¼“å­˜ç§æœ‰ä»“åº“ï¼š 1.ä¿®æ”¹config-example.confæ–‡ä»¶ ç”±äºæœ¬æœºæ˜¯intelçš„64ä½ç³»ç»Ÿï¼Œå› æ­¤é€‰æ‹©amd64ï¼Œä¿®æ”¹é‡Œé¢çš„config-example.conf: 1234567891011121314151617181920version: 0.1log: fields: service: registrystorage: cache: blobdescriptor: inmemory filesystem: rootdirectory: /var/lib/registryhttp: addr: :5000 headers: X-Content-Type-Options: [nosniff]health: storagedriver: enabled: true interval: 10s threshold: 3proxy: remoteurl: https://registry-1.docker.io 2.æ„å»ºregistryé•œåƒ æ„å»ºregistryé•œåƒ:1docker build -t docker-registry:v0.1 . 3.è¿è¡Œregistryå®¹å™¨ è¿è¡Œregistryå®¹å™¨: 123docker run -d -p 5000:5000 --restart=always --name docker-registry \ -v /home/registry:/var/lib/registry \ docker-registry:v0.1 æˆ–è€…å¯ä»¥ç›´æ¥å°†é…ç½®æ–‡ä»¶æŒ‚è½½è¿›å»ï¼š1234docker run -d -p 5000:5000 --restart=always --name docker-registry \ -v `pwd`/config-example.yml:/etc/docker/registry/config.yml \ -v /home/registry:/var/lib/registry \ docker-registry:v0.1 4.æµ‹è¯•ç¼“å­˜æ˜¯å¦ç”Ÿæ•ˆ åœ¨æµ‹è¯•çš„daemon.jsoné…ç½®ç›®æ ‡åœ°å€ï¼š123456cat &gt; /etc/docker/daemon.json &lt;&lt; EOF &#123; &quot;insecure-registries&quot;: [&quot;10.10.6.111:5000&quot;], &quot;registry-mirrors&quot;:[&quot;http://10.10.6.111:5000&quot;]&#125;EOF é‡å¯å®¹å™¨æœåŠ¡service docker restart æµ‹è¯•ï¼š1docker pull node:8.4.0-onbuild ç”¨docker logs æŸ¥çœ‹ registry å®¹å™¨ï¼š docker logs -f docker-registry 123456time=&quot;2019-10-31T07:48:33.210442036Z&quot; level=info msg=&quot;Adding new scheduler entry for library/node@sha256:0485a8f7251f7823455cb5efb010ee034e7b44b13414d11080c4daae8af1acb3 with ttl=167h59m59.999996323s&quot; go.version=go1.11.2 instance.id=154296c5-33a6-44cc-bc25-9cb74eb2fc47 service=registry version=v2.7.1 time=&quot;2019-10-31T07:48:33.210850287Z&quot; level=info msg=&quot;response completed&quot; go.version=go1.11.2 http.request.host=&quot;10.10.6.111:5000&quot; http.request.id=05a32ff6-54f1-4b70-b86e-1802959c0ff2 http.request.method=GET http.request.remoteaddr=&quot;10.10.6.19:60562&quot; http.request.uri=&quot;/v2/library/node/manifests/8.4.0-onbuild&quot; http.request.useragent=&quot;docker/19.03.3 go/go1.12.10 git-commit/a872fc2f86 kernel/3.10.0-1062.el7.x86_64 os/linux arch/amd64 UpstreamClient(Docker-Client/19.03.3 \(linux\))&quot; http.response.contenttype=&quot;application/vnd.docker.distribution.manifest.v2+json&quot; http.response.duration=3.632741932s http.response.status=200 http.response.written=2213 10.10.6.19 - - [31/Oct/2019:07:48:29 +0000] &quot;GET /v2/library/node/manifests/8.4.0-onbuild HTTP/1.1&quot; 200 2213 &quot;&quot; &quot;docker/19.03.3 go/go1.12.10 git-commit/a872fc2f86 kernel/3.10.0-1062.el7.x86_64 os/linux arch/amd64 UpstreamClient(Docker-Client/19.03.3 \\(linux\\))&quot;time=&quot;2019-10-31T07:48:35.734990871Z&quot; level=info msg=&quot;response completed&quot; go.version=go1.11.2 http.request.host=&quot;10.10.6.111:5000&quot; http.request.id=76e0c7e6-b6e2-4d48-8baf-bcd296996e69 http.request.method=GET http.request.remoteaddr=&quot;10.10.6.19:60564&quot; http.request.uri=&quot;/v2/library/node/blobs/sha256:d24de6795fb1d44f2ecd12ab0768fefb45c3a31674824961512f71fbf234a704&quot; http.request.useragent=&quot;docker/19.03.3 go/go1.12.10 git-commit/a872fc2f86 kernel/3.10.0-1062.el7.x86_64 os/linux arch/amd64 UpstreamClient(Docker-Client/19.03.3 \(linux\))&quot; http.response.contenttype=&quot;application/octet-stream&quot; http.response.duration=2.522583499s http.response.status=200 http.response.written=8639 10.10.6.19 - - [31/Oct/2019:07:48:33 +0000] &quot;GET /v2/library/node/blobs/sha256:d24de6795fb1d44f2ecd12ab0768fefb45c3a31674824961512f71fbf234a704 HTTP/1.1&quot; 200 8639 &quot;&quot; &quot;docker/19.03.3 go/go1.12.10 git-commit/a872fc2f86 kernel/3.10.0-1062.el7.x86_64 os/linux arch/amd64 UpstreamClient(Docker-Client/19.03.3 \\(linux\\))&quot;time=&quot;2019-10-31T07:48:36.375234583Z&quot; level=info msg=&quot;Adding new scheduler entry for library/node@sha256:d24de6795fb1d44f2ecd12ab0768fefb45c3a31674824961512f71fbf234a704 with ttl=167h59m59.999996974s&quot; go.version=go1.11.2 instance.id=154296c5-33a6-44cc-bc25-9cb74eb2fc47 service=registry version=v2.7.1 ä»æ—¥å¿—å¯ä»¥çœ‹å‡ºç¼“å­˜æˆåŠŸäº†~ PS: é•œåƒç¬¬ä¸€æ¬¡æ‹‰å–è¿˜æ¯”è¾ƒæ…¢ï¼Œç¬¬äºŒæ¬¡æ‹‰å–é€Ÿåº¦ç«‹åˆ»é£èµ·~å¤§å®¶å¯ä»¥è¯•è¯•]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>Dokcer</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>å®¹å™¨</tag>
        <tag>é•œåƒä»“åº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å•å…ƒæµ‹è¯•ä¸­çš„æ‰“æ¡©æŠ€æœ¯ï¼šmockæµ…è°ˆ]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%B8%AD%E7%9A%84%E6%89%93%E6%A1%A9%E6%8A%80%E6%9C%AF%EF%BC%9Amock%E6%B5%85%E8%B0%88%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯æµ‹è¯•ä»ä¸‹åˆ°ä¸Šå¤§è‡´å¯ä»¥åˆ†ä¸ºå•å…ƒæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•å’Œç³»ç»Ÿé›†æˆæµ‹è¯•ã€‚ å•å…ƒæµ‹è¯•æ˜¯æœ€åŸºç¡€çš„ï¼Œä¸€èˆ¬å…¶ä»£ç é‡ä¹Ÿæ˜¯æœ€å¤šçš„ï¼Œä¸€èˆ¬æ˜¯é’ˆå¯¹å‡½æ•°ã€æ–¹æ³•å’Œç±»çš„æµ‹è¯•ï¼Œä½†å…¶å†™å¥½åæ”¹åŠ¨ä¸€èˆ¬æ˜¯æœ€å°çš„ï¼Œå•å…ƒæµ‹è¯•æ˜¯å…¶ä»–æµ‹è¯•çš„åŸºçŸ³ã€‚ç«¯åˆ°ç«¯æµ‹è¯•æ˜¯åŸºäºå•å…ƒæµ‹è¯•ä¹‹ä¸Šçš„ï¼Œä¸»è¦é’ˆå¯¹APIå’Œæ¥å£çš„æµ‹è¯•ï¼Œç”±äºåªé’ˆå¯¹æ¥å£è¿›è¡Œæµ‹è¯•ï¼Œç›¸å¯¹å•å…ƒæµ‹è¯•ï¼Œç«¯åˆ°ç«¯æµ‹è¯•ä»£ç é‡æ›´å°‘ï¼Œä½†é¢å¯¹éœ€æ±‚çš„å˜æ›´å…¶æµ‹è¯•ä»£ç ä¹Ÿæ›´å®¹æ˜“å˜æ›´ã€‚ç³»ç»Ÿé›†æˆæµ‹è¯•ä¸»è¦æ˜¯å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæµ‹è¯•ï¼Œé’ˆå¯¹åœ°æ˜¯å®¢æˆ·ç«¯çš„ä½¿ç”¨ç•Œé¢ã€‚ ä»¥ç°åœ¨ä¸»æµçš„å‰åç«¯åˆ†ç¦»æ¥è¯´æ˜ï¼š å•å…ƒæµ‹è¯• ç«¯åˆ°ç«¯æµ‹è¯• ç³»ç»Ÿé›†æˆæµ‹è¯• é’ˆå¯¹è§†å›¾å±‚ä¸­çš„æŸä¸ªè§†å›¾æ–¹æ³•çš„æµ‹è¯•ï¼Œæˆ–è€…é’ˆå¯¹æ¨¡å‹å±‚ä¸­æŸä¸ªormçš„æµ‹è¯• æ¨¡æ‹Ÿæ¥å£è¯·æ±‚è¿›è¡Œæµ‹è¯• æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œè¿›è¡Œæµ‹è¯• ä»‹ç»å®Œæµ‹è¯•çš„ç±»å‹ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ä¸‹å•å…ƒæµ‹è¯•ä¸­çš„mockæŠ€æœ¯ã€‚mockæ˜¯ä¸€ç§ç”¨äºå•å…ƒæµ‹è¯•æ•°æ®æ¨¡æ‹Ÿçš„æŠ€æœ¯ï¼Œä¿—ç§°æ‰“æ¡©æŠ€æœ¯ã€‚mockçš„å¥½å¤„ï¼š1ã€å¹¶è¡Œå·¥ä½œï¼šå€ŸåŠ©mockï¼Œæ¥å£ä¹‹é—´å¯ä»¥å®ç°è§£è€¦åˆï¼Œå®ç°æµ‹è¯•é©±åŠ¨å¼€å‘2ã€éš”ç¦»ç³»ç»Ÿï¼šå¯ä»¥æ¨¡æ‹Ÿè¯·æ±‚ï¼Œé¿å…æ•°æ®åº“çš„æ±¡æŸ“ï¼ŒåŒæ—¶å¯ä»¥åšç•Œé¢æ¼”ç¤º Go è¯­è¨€ä¸­çš„ mockGoä¸­mockå¯ä»¥ä½¿ç”¨å®˜æ–¹çš„GoMockåŒ…ï¼Œä»¥æœ¬äººçš„https://github.com/shikanon/socks5proxyé¡¹ç›®ä¸ºä¾‹ï¼Œæ¥ä»‹ç» mock åœ¨ Go çš„å•å…ƒæµ‹è¯•ä¸­çš„ä½¿ç”¨ã€‚ mock å®‰è£…123go get -u github.com/golang/mock/gomockgo install github.com/golang/mock/mockgen mockgen ç”Ÿæˆ mock æ–‡ä»¶Go æä¾›äº† mockgen å·¥å…·ï¼Œç”¨æ¥ç”Ÿæˆ:1mockgen -source=socks5.go -destination=./mock/socks5_mock.go -package=mock mockgenæ˜¯æ ¹æ®æ¥å£å‘å°„çš„æ–¹å¼ç”Ÿæˆmockï¼Œæ‰€ä»¥sourceé‡Œé¢å¿…é¡»è¦æœ‰interfaceã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨æ³¨é‡Šå‰åŠ å…¥æ³¨é‡Šå†å€ŸåŠ© go generate æ¥ç”Ÿæˆï¼Œå¦‚ï¼š12345//go:generate mockgen -source=socks5.go -destination=./mock/socks5_mock.go -package=mocktype Protocol interface &#123; HandleHandshake(b []byte) ([]byte, error) SentHandshake(conn net.Conn) error&#125; åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œï¼š1go generate 123456789func (c *Call) After(preReq *Call) *Callfunc (c *Call) AnyTimes() *Callfunc (c *Call) Do(f interface&#123;&#125;) *Callfunc (c *Call) MaxTimes(n int) *Callfunc (c *Call) MinTimes(n int) *Callfunc (c *Call) Return(rets ...interface&#123;&#125;) *Callfunc (c *Call) SetArg(n int, value interface&#123;&#125;) *Callfunc (c *Call) String() stringfunc (c *Call) Times(n int) *Call Python è¯­è¨€ä¸­çš„ mock]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>GO</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>å•å…ƒæµ‹è¯•</tag>
        <tag>GO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CI/CD on k8så®è·µ]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2FCI-CD-on-k8s%E5%AE%9E%E8%B7%B5%2F</url>
    <content type="text"><![CDATA[ã€ç­‰å¾…æ›´æ–°ã€‘]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>gitlab</tag>
        <tag>æŒç»­é›†æˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºk8sçš„Ingresséƒ¨ç½²hexoåšå®¢(httpå’Œhttps)]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2F%E5%9F%BA%E4%BA%8Ek8s%E7%9A%84Ingress%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[æ³¨ï¼škuberntesç‰ˆæœ¬ä¸º1.15 ä»€ä¹ˆæ˜¯ IngressIngress æ˜¯ä¸€ä¸ªæä¾›å¯¹å¤–æœåŠ¡çš„è·¯ç”±å’Œè´Ÿè½½å‡è¡¡å™¨ï¼Œå…¶æœ¬è´¨æ˜¯ä¸ªnginxæ§åˆ¶å™¨æœåŠ¡ã€‚ k8sæ–‡æ¡£ä¸ŠIngressç»å…¸æ•°æ®é“¾è·¯å›¾ï¼š12345 internet |[ Ingress ]--|-----|--[ Services ] å¯¹åšå®¢è¿›è¡Œæ”¹é€ Nginxç‰ˆæ„å»ºDockefileå…ˆå®¹å™¨åŒ–æ•´ä¸ªHexoé¡¹ç›®ï¼Œæ„å»ºDockefileï¼Œè¿™é‡Œé‡‡ç”¨nginx + é™æ€èµ„æºçš„å½¢å¼éƒ¨ç½²ï¼ˆä¸»è¦ä¸ºäº†èŠ‚çº¦å†…å­˜CPUï¼‰:12345FROM nginx:1.13.0-alpineLABEL maintainer=&quot;hexo-shikanon-blog &lt;shikanon@tensorbytes.com&gt;&quot;# è£…è½½ç¼–è¯‘åçš„æ–‡ä»¶å¯¹å¤–è®¿é—®COPY ./public /usr/share/nginx/html æ„å»ºDeploymentæ„å»ºä¸€ä¸ªDeploymentæœåŠ¡å°†å…¶éƒ¨ç½²ä¸Škubernetes: 12345678910111213141516171819202122apiVersion: apps/v1kind: Deploymentmetadata: name: nginx-hexo-blog-delopyment labels: webtype: staticblogspec: replicas: 2 selector: matchLabels: webtype: staticblog template: metadata: labels: webtype: staticblog function: blog spec: containers: - name: hexo-blog image: nginx-hexo-blog:0.0.1 ports: - containerPort: 80 æ„å»ºServiceæš´éœ²æœåŠ¡ç«¯å£æ„å»ºä¸€ä¸ªServiceæš´éœ²ç»Ÿä¸€çš„æœåŠ¡ç«¯å£ï¼š 1234567891011apiVersion: v1kind: Servicemetadata: name: static-blogspec: selector: webtype: staticblog ports: - protocol: TCP port: 80 targetPort: 80 # deploymentçš„ç«¯å£ï¼Œ è¿™é‡Œåˆ›å»ºä¸€ä¸ªåç§°ä¸º â€œstatic-blogâ€ çš„ Service å¯¹è±¡ï¼Œå®ƒä¼šå°†è¯·æ±‚ä»£ç†åˆ°ä½¿ç”¨ TCP ç«¯å£ targetPortï¼Œå¹¶ä¸”å…·æœ‰æ ‡ç­¾ â€œwebtype: staticblogâ€ çš„ Pod ä¸Šã€‚ æŸ¥çœ‹ç«¯å£ä¿¡æ¯ï¼š $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 10.13.0.1 443/TCP 10d static-blog ClusterIP 10.13.83.44 80/TCP 8h æµ‹è¯•ç«¯å£æ˜¯å¦å¯ä»¥è®¿é—®ï¼š $ curl -I 10.13.83.44 HTTP/1.1 200 OK Server: nginx/1.13.0 Date: Wed, 16 Oct 2019 16:51:13 GMT Content-Type: text/html Content-Length: 71636 Last-Modified: Mon, 29 Jul 2019 19:25:29 GMT Connection: keep-alive ETag: â€œ5d3f4829-117d4â€ Accept-Ranges: bytes æ„å»ºIngressæœåŠ¡æœ€åä¸€æ­¥ï¼Œæ„å»ºIngressæœåŠ¡å¯¹å¤–éƒ¨æä¾›æœåŠ¡å’Œåå‘ä»£ç†ï¼š 1234567891011121314apiVersion: extensions/v1beta1kind: Ingressmetadata: name: reverse-proxy annotations: nginx.ingress.kubernetes.io/rewrite-target: /spec: rules: - host: www.shikanon.com http: paths: - backend: serviceName: static-blog servicePort: 80 å®Œæˆ! Nodejsç‰ˆNodeç‰ˆå’ŒNginxç‰ˆçš„ä¸»è¦åŒºåˆ«æ˜¯ dockefile æ„å»ºä¸åŒ:1234567891011FORM node:8.16-onbuildLABEL maintainer=&quot;hexo-shikanon-blog &lt;shikanon@tensorbytes.com&gt;&quot;# å°†æºç æ–‡ä»¶æ”¾å…¥ç›®å½•COPY . /app# å®‰è£…å®‰è£…åŒ…npm install hexo -g --registry=https://registry.npm.taobao.orgCMD [&quot;hexo&quot;,&quot;run&quot;,&quot;serve&quot;] æ„å»ºHTTPSç½‘ç«™ç”¨secretç±»å‹å¯¹è±¡ä¿å­˜å¯†é’¥æ•°æ®Secret å¯¹è±¡ç±»å‹ç”¨æ¥ä¿å­˜æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€OAuth ä»¤ç‰Œå’Œ ssh keyï¼Œå…¶ä¸­ ssh key å°±æ˜¯ä¸€ä¸ªç»å…¸çš„åº”ç”¨ã€‚ Secret å‚æ•°ç”¨ä¾‹:12345678910kubectl create secret -hCreate a secret using specified subcommand.Available Commands: docker-registry Create a secret for use with a Docker registry generic Create a secret from a local file, directory or literal value tls Create a TLS secretUsage: kubectl create secret [flags] [options] åˆ›å»ºSecretåŠ å¯†å¯¹è±¡:1kubectl create secret tls shikanon-ssh-key-secret --cert=/home/shikanon/web/www/ssl/cert.pem --key=/home/shikanon/web/www/ssl/private.key ä¿®æ”¹Ingress:123456789101112131415161718apiVersion: extensions/v1beta1kind: Ingressmetadata: name: reverse-proxy annotations: nginx.ingress.kubernetes.io/rewrite-target: /spec: rules: - host: www.shikanon.com http: paths: - backend: serviceName: static-blog servicePort: 80 tls: - hosts: - www.shikanon.com secretName: shikanon-ssh-key-secret æ³¨ï¼šä¸€ä¸ªIngressåªèƒ½æ”¯æŒä¸€ä¸ªtls æˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘+ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼šhttps://cloud.tencent.com/developer/support-plan?invite_code=1njpdx5b5diz4]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>éƒ¨ç½²</tag>
        <tag>Ingress</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Federated Learning è”åˆå­¦ä¹ ]]></title>
    <url>%2F2019%2F%E6%9E%B6%E6%9E%84%2FFederated-Learning-%E8%81%94%E5%90%88%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[ã€ç­‰å¾…æ›´æ–°ã€‘ èƒŒæ™¯ç°çŠ¶ä»€ä¹ˆæ˜¯Federated Learningï¼ŸFederated Learningï¼Œä¹Ÿå«è”é‚¦å­¦ä¹ ï¼Œæ˜¯ä¸€ç§é€šè¿‡åŠ å¯†æ··æ·†æŠ€æœ¯å®ç°æ•°æ®å®‰å…¨çš„åˆ†å¸ƒå¼è”åˆå»ºæ¨¡çš„æ–¹æ³•ï¼ŒFederated Learningçš„åŸºç¡€æ˜¯å®‰å…¨å¤šæ–¹è®¡ç®—ï¼Œä¸€ç§åˆ†å¸ƒå¼å¯†ç åè®®ã€‚ å®‰å…¨å¤šæ–¹è®¡ç®—æ˜¯ä»€ä¹ˆï¼Ÿå®‰å…¨å¤šæ–¹è®¡ç®—(Secure Multi-Party Computation, MPC)ï¼Œ1982å¹´ç”±å›¾çµå¥–è·å¾—è€…å§šæœŸæ™ºé™¢å£«æå‡ºï¼Œåè®®å…è®¸å¤šä¸ªæ•°æ®æ‰€æœ‰è€…åœ¨äº’ä¸ä¿¡ä»»çš„æƒ…å†µä¸‹è¿›è¡ŒååŒè®¡ç®—ï¼Œè¾“å‡ºè®¡ç®—ç»“æœï¼Œå¹¶ä¿è¯ä»»ä½•ä¸€æ–¹å‡æ— æ³•å¾—åˆ°é™¤åº”å¾—çš„è®¡ç®—ç»“æœä¹‹å¤–çš„å…¶ä»–ä»»ä½•ä¿¡æ¯ã€‚ æ•°å­¦æè¿°ä¸º $P={P_1,â€¦,P_n}$ å®ç°å®‰å…¨å¤šæ–¹è®¡ç®—çš„æ–¹æ³•æœ‰å¤šç§ï¼Œæ¯”å¦‚ä¸ç»æ„ä¼ è¾“åè®®ã€ç§˜å¯†å…±äº«åè®®ã€ ä¸ç»æ„ä¼ è¾“åè®® ä¸ç»æ„ä¼ è¾“åè®®(oblivious transfer protocols, OT) ç›¸å…³æŠ€æœ¯ç®€ä»‹Federated Learning çš„åº”ç”¨Federated Learning åœ¨ä¼ä¸šè”åˆå»ºæ¨¡ä¸­çš„åº”ç”¨Federated Learning åœ¨è¾¹ç¼˜è®¡ç®—çš„åº”ç”¨]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿæ¶æ„</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>è”åˆå­¦ä¹ </tag>
        <tag>éšç§ä¿æŠ¤</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BERTä»£ç å®ç°åŠè§£è¯»]]></title>
    <url>%2F2019%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2FBERT%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%8F%8A%E8%A7%A3%E8%AF%BB%2F</url>
    <content type="text"><![CDATA[æ³¨æ„åŠ›æœºåˆ¶ç³»åˆ—å¯ä»¥å‚è€ƒå‰é¢çš„ä¸€æ–‡ï¼š æ³¨æ„åŠ›æœºåˆ¶åŠå…¶ç†è§£ Transformer BlockBERTä¸­çš„ç‚¹ç§¯æ³¨æ„åŠ›æ¨¡å‹å…¬å¼ï¼š $$ \text{Attention}(\boldsymbol{Q},\boldsymbol{K},\boldsymbol{V}) = \text{softmax}(\frac{\boldsymbol{Q}\boldsymbol{K}^T}{\sqrt{d_k}})\boldsymbol{V} $$ ä»£ç ï¼š 123456789101112131415161718class Attention(nn.Module): &quot;&quot;&quot; Scaled Dot Product Attention &quot;&quot;&quot; def forward(self, query, key, value, mask=None, dropout=None): scores = torch.matmul(query, key.transpose(-2, -1)) \ / math.sqrt(query.size(-1)) if mask is not None: scores = scores.masked_fill(mask == 0, -1e9) # softmaxå¾—åˆ°æ¦‚ç‡å¾—åˆ†p_atten, p_attn = F.softmax(scores, dim=-1) # å¦‚æœæœ‰ dropout å°±éšæœº dropout æ¯”ä¾‹å‚æ•° if dropout is not None: p_attn = dropout(p_attn) return torch.matmul(p_attn, value), p_attn åœ¨ ğ‘ ğ‘’ğ‘™ğ‘“ ğ‘ğ‘¡ğ‘¡ğ‘’ğ‘›ğ‘¡ğ‘–ğ‘œğ‘› çš„è®¡ç®—è¿‡ç¨‹ä¸­, é€šå¸¸ä½¿ç”¨ ğ‘šğ‘–ğ‘›ğ‘– ğ‘ğ‘ğ‘¡ğ‘â„ æ¥è®¡ç®—, ä¹Ÿå°±æ˜¯ä¸€æ¬¡è®¡ç®—å¤šä¸ªå¥å­ï¼Œå¤šå¥è¯å¾—é•¿åº¦å¹¶ä¸ä¸€è‡´ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§æœ€å¤§å¾—é•¿åº¦å¯¹çŸ­å¥å­è¿›è¡Œè¡¥å…¨ï¼Œä¹Ÿå°±æ˜¯paddingé›¶ï¼Œä½†è¿™æ ·åšå¾—è¯ï¼Œsoftmaxè®¡ç®—å°±ä¼šè¢«å½±å“ï¼Œ$e^0=1$ä¹Ÿå°±æ˜¯æœ‰å€¼ï¼Œè¿™æ ·å°±ä¼šå½±å“ç»“æœï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°å¾—ï¼Œå› æ­¤åœ¨è®¡ç®—å¾—æ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠä»–ä»¬maskèµ·æ¥ï¼Œå¡«å……ä¸€ä¸ªè´Ÿæ— ç©·ï¼ˆ-1e9è¿™æ ·å¾—æ•°å€¼ï¼‰ï¼Œè¿™æ ·è®¡ç®—å°±å¯ä»¥ä¸º0äº†ï¼Œç­‰äºæŠŠè®¡ç®—é®æŒ¡ä½ã€‚ å¤šå¤´è‡ªæ³¨æ„åŠ›æ¨¡å‹å…¬å¼ï¼š $$ \text{MultiHead}(Q,K,V) = \text{Concat}(\text{head1},...,\text{head}_h)\boldsymbol{W}^O $$ $$ \text{head}_i = \text{Attention}(\boldsymbol{Q}\boldsymbol{W}_i^Q,\boldsymbol{K}\boldsymbol{W}_i^K,\boldsymbol{V}\boldsymbol{W}_i^V) $$ $$ \text{Attention}(\boldsymbol{Q},\boldsymbol{K},\boldsymbol{V}) = \text{softmax}(\frac{\boldsymbol{Q}\boldsymbol{K}^T}{\sqrt{d_k}})\boldsymbol{V} $$ Attention Mask ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334class MultiHeadedAttention(nn.Module): &quot;&quot;&quot; Take in model size and number of heads. &quot;&quot;&quot; def __init__(self, h, d_model, dropout=0.1): # h è¡¨ç¤ºæ¨¡å‹ä¸ªæ•° super().__init__() assert d_model % h == 0 # d_k è¡¨ç¤º keyé•¿åº¦ï¼Œd_modelè¡¨ç¤ºæ¨¡å‹è¾“å‡ºç»´åº¦ï¼Œéœ€ä¿è¯ä¸ºhå¾—æ­£æ•°å€ self.d_k = d_model // h self.h = h self.linear_layers = nn.ModuleList([nn.Linear(d_model, d_model) for _ in range(3)]) self.output_linear = nn.Linear(d_model, d_model) self.attention = Attention() self.dropout = nn.Dropout(p=dropout) def forward(self, query, key, value, mask=None): batch_size = query.size(0) # 1) Do all the linear projections in batch from d_model =&gt; h x d_k query, key, value = [l(x).view(batch_size, -1, self.h, self.d_k).transpose(1, 2) for l, x in zip(self.linear_layers, (query, key, value))] # 2) Apply attention on all the projected vectors in batch. x, attn = self.attention(query, key, value, mask=mask, dropout=self.dropout) # 3) &quot;Concat&quot; using a view and apply a final linear. x = x.transpose(1, 2).contiguous().view(batch_size, -1, self.h * self.d_k) return self.output_linear(x) Position-wise FFNPosition-wise FFN æ˜¯ä¸€ä¸ªåŒå±‚å¾—ç¥ç»ç½‘ç»œï¼Œåœ¨è®ºæ–‡ä¸­é‡‡ç”¨ReLUåšæ¿€æ´»å±‚ï¼š å…¬å¼ï¼š $$ \text{FFN}(x) = \text{max}(0, x\boldsymbol{W}_1 + b_1)\boldsymbol{W}_2 + b_2 $$ æ³¨ï¼šåœ¨ google githubä¸­çš„BERTçš„ä»£ç å®ç°ä¸­ç”¨Gaussian Error Linear Unitä»£æ›¿äº†RelUä½œä¸ºæ¿€æ´»å‡½æ•° ä»£ç ï¼š123456789101112131415161718192021class PositionwiseFeedForward(nn.Module): def __init__(self, d_model, d_ff, dropout=0.1): super(PositionwiseFeedForward, self).__init__() self.w_1 = nn.Linear(d_model, d_ff) self.w_2 = nn.Linear(d_ff, d_model) self.dropout = nn.Dropout(dropout) self.activation = GELU() def forward(self, x): return self.w_2(self.dropout(self.activation(self.w_1(x))))class GELU(nn.Module): &quot;&quot;&quot; Gaussian Error Linear Unit. This is a smoother version of the RELU. Original paper: https://arxiv.org/abs/1606.08415 &quot;&quot;&quot; def forward(self, x): return 0.5 * x * (1 + torch.tanh(math.sqrt(2 / math.pi) * (x + 0.044715 * torch.pow(x, 3)))) Layer NormalizationLayerNormå®é™…å°±æ˜¯å¯¹éšå«å±‚åšå±‚å½’ä¸€åŒ–ï¼Œå³å¯¹æŸä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒçš„è¾“å…¥è¿›è¡Œå½’ä¸€åŒ–ï¼ˆæ²¿ç€é€šé“channelæ–¹å‘ï¼‰ï¼Œä½¿å¾—å…¶åŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼š å±‚å½’ä¸€åŒ–å…¬å¼ï¼š $$ \sigma^l = \sqrt{\frac{1}{\boldsymbol{H}}\sum_{i=1}^{\boldsymbol{H}}(x_i^l-\mu^l)^2} \\ \mu^l = \frac{1}{\boldsymbol{H}}\sum_{i=1}^{\boldsymbol{H}}x_i^l \\ x^l = w_i^l h^l $$ $l$è¡¨ç¤ºç¬¬Lå±‚ï¼ŒH æ˜¯æŒ‡æ¯å±‚çš„éšè—å•å…ƒæ•°(hidden unit),$\mu$è¡¨ç¤ºå¹³å‡å€¼ï¼Œ$\sigma$è¡¨ç¤ºæ–¹å·®, $\alpha$è¡¨ç¤ºè¡¨å¾å‘é‡ï¼Œ$w$è¡¨ç¤ºçŸ©é˜µæƒé‡ã€‚ $$ \text{LayerNorm}(x) = \alpha \odot \frac{x - \mu}{\sqrt{\sigma^2+\epsilon}} + \beta $$ æ³¨ï¼š$\odot$è¡¨ç¤ºå…ƒç´ ç›¸ä¹˜å…¶ä¸­ï¼Œ$\alpha$å’Œ$\beta$ã€$\epsilon$ä¸ºè¶…å‚æ•°ã€‚ ä»£ç ï¼š1234567891011121314class LayerNorm(nn.Module): &quot;Construct a layernorm module (See citation for details).&quot; def __init__(self, features, eps=1e-6): super(LayerNorm, self).__init__() self.a_2 = nn.Parameter(torch.ones(features)) self.b_2 = nn.Parameter(torch.zeros(features)) self.eps = eps def forward(self, x): # mean(-1) è¡¨ç¤º mean(len(x)), è¿™é‡Œçš„-1å°±æ˜¯æœ€åä¸€ä¸ªç»´åº¦ï¼Œä¹Ÿå°±æ˜¯æœ€é‡Œé¢ä¸€å±‚çš„ç»´åº¦ mean = x.mean(-1, keepdim=True) std = x.std(-1, keepdim=True) return self.a_2 * (x - mean) / (std + self.eps) + self.b_2 æ®‹å·®è¿æ¥æ®‹å·®è¿æ¥å°±æ˜¯å›¾ä¸­Add+Normå±‚ã€‚æ¯ç»è¿‡ä¸€ä¸ªæ¨¡å—çš„è¿ç®—, éƒ½è¦æŠŠè¿ç®—ä¹‹å‰çš„å€¼å’Œè¿ç®—ä¹‹åçš„å€¼ç›¸åŠ , ä»è€Œå¾—åˆ°æ®‹å·®è¿æ¥ï¼Œæ®‹å·®å¯ä»¥ä½¿æ¢¯åº¦ç›´æ¥èµ°æ·å¾„åä¼ åˆ°æœ€åˆå§‹å±‚ã€‚ æ®‹å·®è¿æ¥å…¬å¼ï¼š $$ \boldsymbol{y} = f(\boldsymbol{x}) + \boldsymbol{x} $$ X è¡¨ç¤ºè¾“å…¥çš„å˜é‡ï¼Œå®é™…å°±æ˜¯è·¨å±‚ç›¸åŠ ã€‚ ä»£ç ï¼š123456789101112131415class SublayerConnection(nn.Module): &quot;&quot;&quot; A residual connection followed by a layer norm. Note for code simplicity the norm is first as opposed to last. &quot;&quot;&quot; def __init__(self, size, dropout): super(SublayerConnection, self).__init__() self.norm = LayerNorm(size) self.dropout = nn.Dropout(dropout) def forward(self, x, sublayer): &quot;Apply residual connection to any sublayer with the same size.&quot; # Add and Norm return x + self.dropout(sublayer(self.norm(x))) Transform Block ä»£ç ï¼š1234567891011121314151617181920212223242526272829class TransformerBlock(nn.Module): &quot;&quot;&quot; Bidirectional Encoder = Transformer (self-attention) Transformer = MultiHead_Attention + Feed_Forward with sublayer connection &quot;&quot;&quot; def __init__(self, hidden, attn_heads, feed_forward_hidden, dropout): &quot;&quot;&quot; :param hidden: hidden size of transformer :param attn_heads: head sizes of multi-head attention :param feed_forward_hidden: feed_forward_hidden, usually 4*hidden_size :param dropout: dropout rate &quot;&quot;&quot; super().__init__() # å¤šå¤´æ³¨æ„åŠ›æ¨¡å‹ self.attention = MultiHeadedAttention(h=attn_heads, d_model=hidden) # PFFN self.feed_forward = PositionwiseFeedForward(d_model=hidden, d_ff=feed_forward_hidden, dropout=dropout) # è¾“å…¥å±‚ self.input_sublayer = SublayerConnection(size=hidden, dropout=dropout) # è¾“å‡ºå±‚ self.output_sublayer = SublayerConnection(size=hidden, dropout=dropout) self.dropout = nn.Dropout(p=dropout) def forward(self, x, mask): x = self.input_sublayer(x, lambda _x: self.attention.forward(_x, _x, _x, mask=mask)) x = self.output_sublayer(x, self.feed_forward) return self.dropout(x) EmbeddingåµŒå…¥å±‚Embeddingé‡‡ç”¨ä¸‰ç§ç›¸åŠ çš„å½¢å¼è¡¨ç¤ºï¼š ä»£ç ï¼š12345678910111213141516171819202122232425class BERTEmbedding(nn.Module): &quot;&quot;&quot; BERT Embedding which is consisted with under features 1. TokenEmbedding : normal embedding matrix 2. PositionalEmbedding : adding positional information using sin, cos 3. SegmentEmbedding : adding sentence segment info, (sent_A:1, sent_B:2) sum of all these features are output of BERTEmbedding &quot;&quot;&quot; def __init__(self, vocab_size, embed_size, dropout=0.1): &quot;&quot;&quot; :param vocab_size: total vocab size :param embed_size: embedding size of token embedding :param dropout: dropout rate &quot;&quot;&quot; super().__init__() self.token = TokenEmbedding(vocab_size=vocab_size, embed_size=embed_size) self.position = PositionalEmbedding(d_model=self.token.embedding_dim) self.segment = SegmentEmbedding(embed_size=self.token.embedding_dim) self.dropout = nn.Dropout(p=dropout) self.embed_size = embed_size def forward(self, sequence, segment_label): x = self.token(sequence) + self.position(sequence) + self.segment(segment_label) return self.dropout(x) ä½ç½®ç¼–ç (Positional Embedding) ä½ç½®åµŒå…¥çš„ç»´åº¦ä¸º [ğ‘šğ‘ğ‘¥ ğ‘ ğ‘’ğ‘ğ‘¢ğ‘’ğ‘›ğ‘ğ‘’ ğ‘™ğ‘’ğ‘›ğ‘”ğ‘¡â„, ğ‘’ğ‘šğ‘ğ‘’ğ‘‘ğ‘‘ğ‘–ğ‘›ğ‘” ğ‘‘ğ‘–ğ‘šğ‘’ğ‘›ğ‘ ğ‘–ğ‘œğ‘›] , åµŒå…¥çš„ç»´åº¦åŒè¯å‘é‡çš„ç»´åº¦, ğ‘šğ‘ğ‘¥ ğ‘ ğ‘’ğ‘ğ‘¢ğ‘’ğ‘›ğ‘ğ‘’ ğ‘™ğ‘’ğ‘›ğ‘”ğ‘¡â„ å±äºè¶…å‚æ•°, æŒ‡çš„æ˜¯é™å®šçš„æœ€å¤§å•ä¸ªå¥é•¿. å…¬å¼ï¼š $$ \boldsymbol{P}_{i,2j} = \text{sin}(\frac{i}{10000^{2j/d}}) $$ $$ \boldsymbol{P}_{i,2j+1} = \text{sin}(\frac{i}{10000^{2j/d}}) $$ $$ \boldsymbol{H} = \boldsymbol{X} + \boldsymbol{P}, \\ \boldsymbol{X} \in \Bbb{R}, \boldsymbol{P} \in \Bbb{R} $$ å…¶æ‰€ç»˜åˆ¶çš„å›¾å½¢ï¼š ä»£ç ï¼š12345678910111213141516171819202122class PositionalEmbedding(nn.Module): def __init__(self, d_model, max_len=512): super().__init__() # Compute the positional encodings once in log space. pe = torch.zeros(max_len, d_model).float() pe.require_grad = False position = torch.arange(0, max_len).float().unsqueeze(1) div_term = (torch.arange(0, d_model, 2).float() * -(math.log(10000.0) / d_model)).exp() pe[:, 0::2] = torch.sin(position * div_term) pe[:, 1::2] = torch.cos(position * div_term) # å¯¹æ•°æ®ç»´åº¦è¿›è¡Œæ‰©å……ï¼Œæ‰©å±•ç¬¬0ç»´ pe = pe.unsqueeze(0) # æ·»åŠ ä¸€ä¸ªæŒä¹…ç¼“å†²åŒºpe,ç¼“å†²åŒºå¯ä»¥ä½¿ç”¨ç»™å®šçš„åç§°ä½œä¸ºå±æ€§è®¿é—® self.register_buffer(&apos;pe&apos;, pe) def forward(self, x): return self.pe[:, :x.size(1)] Segment Embeddingä¸»è¦ç”¨æ¥åšé¢å¤–å¥å­æˆ–æ®µè½åˆ’åˆ†æ–°å¤Ÿè¯ï¼Œè¿™é‡ŒåŠ å…¥äº†ä¸‰ä¸ªç»´åº¦ï¼Œåˆ†åˆ«æ˜¯å¥å­å¼€å¤´ã€CLSã€‘,ä¸‹ä¸€å¥ã€STEPã€‘,é®ç›–è¯ã€MASKã€‘ä¾‹å¦‚ï¼š [CLS] the man went to the store [SEP] he bought a gallon of milk [SEP] ä»£ç ï¼š1234class SegmentEmbedding(nn.Embedding): def __init__(self, embed_size=512): # 3ä¸ªæ–°è¯ super().__init__(3, embed_size, padding_idx=0) Token Embeddingä»£ç ï¼š123class TokenEmbedding(nn.Embedding): def __init__(self, vocab_size, embed_size=512): super().__init__(vocab_size, embed_size, padding_idx=0) BERT123456789101112131415161718192021222324252627282930313233343536373839404142class BERT(nn.Module): &quot;&quot;&quot; BERT model : Bidirectional Encoder Representations from Transformers. &quot;&quot;&quot; def __init__(self, vocab_size, hidden=768, n_layers=12, attn_heads=12, dropout=0.1): &quot;&quot;&quot; :param vocab_size: æ‰€æœ‰å­—çš„é•¿åº¦ :param hidden: BERTæ¨¡å‹éšè—å±‚å¤§å° :param n_layers: Transformer blocks(layers)æ•°é‡ :param attn_heads: å¤šå¤´æ³¨æ„åŠ›headæ•°é‡ :param dropout: dropout rate &quot;&quot;&quot; super().__init__() self.hidden = hidden self.n_layers = n_layers self.attn_heads = attn_heads # paper noted they used 4*hidden_size for ff_network_hidden_size self.feed_forward_hidden = hidden * 4 # åµŒå…¥å±‚, positional + segment + token self.embedding = BERTEmbedding(vocab_size=vocab_size, embed_size=hidden) # å¤šå±‚transformer blocks self.transformer_blocks = nn.ModuleList( [TransformerBlock(hidden, attn_heads, hidden * 4, dropout) for _ in range(n_layers)]) def forward(self, x, segment_info): # attention masking for padded token # torch.ByteTensor([batch_size, 1, seq_len, seq_len) mask = (x &gt; 0).unsqueeze(1).repeat(1, x.size(1), 1).unsqueeze(1) # embedding the indexed sequence to sequence of vectors x = self.embedding(x, segment_info) # å¤šä¸ªtransformer å †å  for transformer in self.transformer_blocks: x = transformer.forward(x, mask) return x è¯­è¨€æ¨¡å‹è®­ç»ƒçš„å‡ ç‚¹æŠ€å·§BERTå¦‚ä½•åšåˆ°è‡ªè®­ç»ƒçš„ï¼Œä¸€ä¸‹æ˜¯å‡ ä¸ªå°tipï¼Œè®©å…¶åšåˆ°è‡ªç›‘ç£è®­ç»ƒ: Maskéšæœºé®ç›–æˆ–æ›¿æ¢ä¸€å¥è¯é‡Œé¢ä»»æ„å­—æˆ–è¯, ç„¶åè®©æ¨¡å‹é€šè¿‡ä¸Šä¸‹æ–‡çš„ç†è§£é¢„æµ‹é‚£ä¸€ä¸ªè¢«é®ç›–æˆ–æ›¿æ¢çš„éƒ¨åˆ†, ä¹‹ååšğ¿ğ‘œğ‘ ğ‘ çš„æ—¶å€™åªè®¡ç®—è¢«é®ç›–éƒ¨åˆ†çš„ğ¿ğ‘œğ‘ ğ‘ ã€‚ éšæœºæŠŠä¸€å¥è¯ä¸­ 15% çš„ ğ‘¡ğ‘œğ‘˜ğ‘’ğ‘› æ›¿æ¢æˆä»¥ä¸‹å†…å®¹: 1) è¿™äº› ğ‘¡ğ‘œğ‘˜ğ‘’ğ‘› æœ‰ 80% çš„å‡ ç‡è¢«æ›¿æ¢æˆ ã€ğ‘šğ‘ğ‘ ğ‘˜ã€‘ ; 2) æœ‰ 10% çš„å‡ ç‡è¢«æ›¿æ¢æˆä»»æ„ä¸€ä¸ªå…¶ä»–çš„ ğ‘¡ğ‘œğ‘˜ğ‘’ğ‘› ; 3) æœ‰ 10% çš„å‡ ç‡åŸå°ä¸åŠ¨. è®©æ¨¡å‹é¢„æµ‹å’Œè¿˜åŸè¢«é®ç›–æ‰æˆ–æ›¿æ¢æ‰çš„éƒ¨åˆ†ï¼ŒæŸå¤±å‡½æ•°åªè®¡ç®—éšæœºé®ç›–æˆ–æ›¿æ¢éƒ¨åˆ†çš„Lossã€‚ ä»£ç ï¼š1234567891011121314151617class MaskedLanguageModel(nn.Module): &quot;&quot;&quot; predicting origin token from masked input sequence n-class classification problem, n-class = vocab_size &quot;&quot;&quot; def __init__(self, hidden, vocab_size): &quot;&quot;&quot; :param hidden: output size of BERT model :param vocab_size: total vocab size &quot;&quot;&quot; super().__init__() self.linear = nn.Linear(hidden, vocab_size) self.softmax = nn.LogSoftmax(dim=-1) def forward(self, x): return self.softmax(self.linear(x)) é¢„æµ‹ä¸‹ä¸€å¥ä»£ç ï¼š1234567891011121314151617class NextSentencePrediction(nn.Module): &quot;&quot;&quot; 2-class classification model : is_next, is_not_next &quot;&quot;&quot; def __init__(self, hidden): &quot;&quot;&quot; :param hidden: BERT model output size &quot;&quot;&quot; super().__init__() self.linear = nn.Linear(hidden, 2) # è¿™é‡Œé‡‡ç”¨äº†logsoftmaxä»£æ›¿äº†softmaxï¼Œ # å½“softmaxå€¼è¿œç¦»çœŸå®å€¼çš„æ—¶å€™æ¢¯åº¦ä¹Ÿå¾ˆå°ï¼Œlogsoftmaxçš„æ¢¯åº¦ä¼šæ›´å¥½äº› self.softmax = nn.LogSoftmax(dim=-1) def forward(self, x): return self.softmax(self.linear(x[:, 0])) æŸå¤±å‡½æ•°è´Ÿå¯¹æ•°æœ€å¤§ä¼¼ç„¶æŸå¤±(negative log likelihood)ï¼Œä¹Ÿå«äº¤å‰ç†µ(Cross-Entropy)å…¬å¼ï¼š $$ E(t,y) = -\sum_i t_i \text{log}y_i $$ ä»£ç ï¼š1234567891011# åœ¨Pytorchä¸­ CrossEntropyLoss()ç­‰äºNLLLoss+ softmaxï¼Œå› æ­¤å¦‚æœç”¨CrossEntropyLossæœ€åä¸€å±‚å°±ä¸ç”¨softmaxäº†criterion = nn.NLLLoss(ignore_index=0)# 2-1. NLL(negative log likelihood) loss of is_next classification resultnext_loss = criterion(next_sent_output, data[&quot;is_next&quot;])# 2-2. NLLLoss of predicting masked token wordmask_loss = criterion(mask_lm_output.transpose(1, 2), data[&quot;bert_label&quot;])# 2-3. Adding next_loss and mask_loss : 3.4 Pre-training Procedureloss = next_loss + mask_loss è¯­è¨€æ¨¡å‹è®­ç»ƒä»£ç ï¼š1234567891011121314151617181920class BERTLM(nn.Module): &quot;&quot;&quot; BERT Language Model Next Sentence Prediction Model + Masked Language Model &quot;&quot;&quot; def __init__(self, bert: BERT, vocab_size): &quot;&quot;&quot; :param bert: BERT model which should be trained :param vocab_size: total vocab size for masked_lm &quot;&quot;&quot; super().__init__() self.bert = bert self.next_sentence = NextSentencePrediction(self.bert.hidden) self.mask_lm = MaskedLanguageModel(self.bert.hidden, vocab_size) def forward(self, x, segment_label): x = self.bert(x, segment_label) return self.next_sentence(x), self.mask_lm(x) äº‘ç«¯éƒ¨ç½²BERT SERVICEä¸‹è½½BERTé¢„è®­ç»ƒæ¨¡å‹ï¼š12 BERT-as-serviceæ¶æ„ï¼š å…ˆå»ºç«‹serviceå®¹å™¨æ­å»ºkubernetesæœåŠ¡###]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>æ³¨æ„åŠ›æœºåˆ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ³¨æ„åŠ›æœºåˆ¶åŠå…¶ç†è§£]]></title>
    <url>%2F2019%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%8F%8A%E5%85%B6%E6%84%8F%E4%B9%89%2F</url>
    <content type="text"><![CDATA[æ³¨æ„åŠ›æœºåˆ¶ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æœºåˆ¶æ³¨æ„åŠ›æœºåˆ¶å°±æ˜¯å¯¹è¾“å…¥æƒé‡åˆ†é…çš„å…³æ³¨ï¼Œæœ€å¼€å§‹ä½¿ç”¨åˆ°æ³¨æ„åŠ›æœºåˆ¶æ˜¯åœ¨ç¼–ç å™¨-è§£ç å™¨(encoder-decoder)ä¸­, æ³¨æ„åŠ›æœºåˆ¶é€šè¿‡å¯¹ç¼–ç å™¨æ‰€æœ‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€åšåŠ æƒå¹³å‡æ¥å¾—åˆ°ä¸‹ä¸€å±‚çš„è¾“å…¥å˜é‡ï¼š æ³¨æ„åŠ›æœºåˆ¶çš„é€šç”¨è¡¨è¾¾å¼å¯ä»¥å†™ä¸ºï¼š $$\boldsymbol{O} = \text{softmax}(\boldsymbol{Q}\boldsymbol{K}^\top)\boldsymbol{V}$$ æ³¨æ„åŠ›æœºåˆ¶å¹¿ä¹‰ä¸Šå¯ä»¥ç†è§£æˆä¸€ä¸ªç”±æŸ¥è¯¢é¡¹çŸ©é˜µ $\boldsymbol{Q}$ å’Œæ‰€å¯¹åº”çš„é”®é¡¹ $\boldsymbol{K}$ å’Œ éœ€åŠ æƒå¹³å‡çš„å€¼é¡¹ $\boldsymbol{V}$ æ‰€æ„æˆçš„ä¸€å±‚æ„ŸçŸ¥æœº(softmaxæ±‚å’Œ)ã€‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªè§†è§’æ¥çœ‹ï¼š ä»å·¥ç¨‹å­¦ä¸Šç†è§£ä»å·¥ç¨‹å­¦ä¸Šç®€å•ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ³¨æ„åŠ›æœºåˆ¶ç†è§£æˆä»æ•°æ®åº“(å†…å­˜æ§½)Qä¸­é€šè¿‡é”®Kå’Œå€¼Vå¾—åˆ°è¾“å‡ºOï¼Œç”±äºVæ˜¯è¾“å…¥ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£æ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒå°±æ˜¯å¦‚ä½•æ„å»ºæ•°æ®åº“Qå’Œé”®å€¼Kçš„æ–¹æ³•ã€‚ ä»ç®—æ³•ä¸Šç†è§£ä»ç®—æ³•ä¸Šæ¥ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ³¨æ„åŠ›æœºåˆ¶å’Œæ± åŒ–åšç±»æ¯”ï¼Œå³å°†å·ç§¯ç¥ç»ç½‘ç»œä¸­çš„æ± åŒ–çœ‹æˆä¸€ç§ç‰¹æ®Šçš„å¹³å‡åŠ æƒçš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œæˆ–è€…è¯´æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸€ç§å…·æœ‰å¯¹è¾“å…¥åˆ†é…åå¥½çš„é€šç”¨æ± åŒ–æ–¹æ³•(å«å‚æ•°çš„æ± åŒ–æ–¹æ³•)ã€‚ ä»æ„å»ºæŸ¥è¯¢é¡¹çœ‹æ³¨æ„åŠ›æœºåˆ¶æœ€æ—©çš„Attentionçš„æå‡ºåœ¨æœ€æ—©æå‡ºæ³¨æ„åŠ›æœºåˆ¶çš„è®ºæ–‡ã€ŠNeural Machine Translation by Jointly Learning to Align and Translateã€‹ä¸­ï¼Œå…¶ä¸»è¦æ˜¯ç”¨æ¥ä½œç¿»è¯‘æ¨¡å‹ï¼Œè§£å†³ç¿»è¯‘æ ¸å¯¹é½é—®é¢˜ï¼ˆè®ºæ–‡é‡‡ç”¨äº†seq2seq+attentionï¼‰ã€‚æ–‡ä¸­QKçš„è®¡ç®—è¡¨ç¤ºï¼š $$\boldsymbol{c}_{t'} = \sum_{t=1}^T\alpha_{t' t}\boldsymbol{h}_t$$ $$\alpha_{t' t} = \text{softmax}(\sigma(\boldsymbol{s}_{t' - 1}, \boldsymbol{h}_t))$$ $$\sigma(\boldsymbol{s}_{t' - 1}, \boldsymbol{h}_t) = \boldsymbol{v}^\top \tanh(\boldsymbol{W}_s \boldsymbol{s}_{t' - 1} + \boldsymbol{W}_h \boldsymbol{h}_t)$$ $\boldsymbol{c}_{tâ€™}$è¡¨ç¤ºè¾“å‡ºå˜é‡ï¼Œ$\boldsymbol{h}_t$ä¸ºéšè—å±‚ï¼Œ$\alpha_{t' t}$è¡¨ç¤ºä¸€ä¸ªæƒé‡çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå³QKå¾—softmaxå€¼ï¼Œè¿™é‡Œå¾—æŸ¥è¯¢é¡¹çŸ©é˜µQé‡‡ç”¨äº†ä¸€ä¸ª$\tanh(\boldsymbol{W}_s \boldsymbol{s} + \boldsymbol{W}_h \boldsymbol{h})$ï¼Œæ‰€ä»¥$\sigma$å…¶æœ¬è´¨åœ¨æ˜¯ä¸€ä¸ªå•å±‚çš„æ„ŸçŸ¥æœºã€‚ç”±äºè¿™ç§æ³¨æ„åŠ›æœºåˆ¶ç”±Bahdanauåœ¨seq2seqä¸­æ­£å¼æå‡ºï¼Œä¹Ÿå«å¾ªç¯æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ›´åŠ $\sigma$å‡½æ•°å³å…¶å‚æ•°ä¸åŒæˆ‘ä»¬å¯ä»¥æŠŠæ³¨æ„åŠ›æœºåˆ¶åˆ†æˆå¤šç§å½¢å¼ã€‚ æœ€åŸºç¡€å½¢æ€çš„æ³¨æ„åŠ›æœºåˆ¶ ä»ä¸Šé¢æˆ‘ä»¬å°†æ³¨æ„åŠ›æœºåˆ¶æŠ½è±¡å‡ºæ¥å³ï¼š $$\boldsymbol{c}_{t} = \sum_{t=1}^T\sigma(\boldsymbol{q},\boldsymbol{k}_t)\boldsymbol{h}_t$$ q ä¸ºæŸ¥è¯¢é¡¹ï¼Œ k ä¸ºé”®å€¼é¡¹ï¼Œ hä¸ºéšå«å±‚è¾“å…¥å˜é‡ï¼Œ$\sigma$ ä¸ºå˜æ¢å‡½æ•°ï¼Œcè¡¨ç¤ºæ¨¡å‹è¾“å‡ºçš„context vetorã€‚å‘ƒï¼Œè¶£å‘³ç‚¹çš„è¯ä¹Ÿå¯ä»¥ç†è§£ï¼Œè¾“å…¥çš„hï¼Œé€šè¿‡å…¶å¯¹åº”é”®å€¼kæŸ¥è¯¢qï¼Œé€šè¿‡$\sigma$è¾“å‡ºc å±‚æ¬¡æ³¨æ„åŠ›(Hierarchical Attention Networks)å±‚æ¬¡æ³¨æ„åŠ›ç”± Zichao Yang æå‡ºï¼Œä¸»è¦ç”¨äºè§£å†³å¤šå±‚æ¬¡é—®é¢˜ï¼Œæ¯”å¦‚åœ¨æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¯ä½œä¸ºä¸€å±‚ï¼ŒæŠŠæ®µè½ä½œä¸ºä¸€å±‚ï¼Œè¿™æ ·å°±æœ‰äº†å¤šå±‚ï¼Œè€Œä¸”ä¸‹é¢ä¸€å±‚ä¼šå¯¹ä¸Šä¸€å±‚æœ‰å½±å“ï¼Œå› æ­¤å»ºç«‹äº†ä¸€ç§å †å çš„å±‚æ¬¡æ³¨æ„åŠ›æ¨¡å‹ï¼š å±‚æ¬¡æ³¨æ„åŠ›æœºåˆ¶å°±æ˜¯å †å äº†å¤šä¸ªæ³¨æ„åŠ›æ¨¡å‹ï¼Œå½¢æˆå¤šå±‚æ¬¡æ³¨æ„åŠ›ï¼Œå…¶å…¬å¼è¡¨è¾¾å¯ä»¥å†™æˆï¼š $$ \boldsymbol{c}_{t}^{(\boldsymbol{i+1})} = \sum_{t=1}^T\sigma^{(\boldsymbol{i})}(\boldsymbol{q}^{(\boldsymbol{i})},\boldsymbol{k}_t^{(\boldsymbol{i})})\boldsymbol{h}_t^{(\boldsymbol{i})},\\ \boldsymbol{h}_{t}^{(\boldsymbol{i})} = \boldsymbol{v}_{t}^{(\boldsymbol{i+1})}\boldsymbol{c}_{i}^{(\boldsymbol{t})}$$ $$\boldsymbol{h}_{0} = \boldsymbol{W}_{t}^{(0)}\boldsymbol{X}$$ q ä¸ºæŸ¥è¯¢é¡¹ï¼Œ k ä¸ºé”®å€¼é¡¹ï¼Œ hä¸ºéšå«å±‚è¾“å…¥å˜é‡ï¼Œ$\sigma$ ä¸ºå˜æ¢å‡½æ•°ï¼Œcè¡¨ç¤ºæ¨¡å‹è¾“å‡ºçš„context vetorï¼Œiè¡¨ç¤ºå±‚çº§ã€‚ ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿé¦–å…ˆï¼Œå¯ä»¥çœ‹åˆ°ä¸Šå±‚çš„æ³¨æ„åŠ›æ˜¯ä»¥ä¸‹å±‚çš„è¾“å‡ºä½œä¸ºè¾“å…¥ï¼Œä¸€å±‚ä¸€å±‚å †å ä¸Šå»ã€‚ å¾ªç¯æ³¨æ„åŠ› å‰é¢è®²åˆ°ï¼Œå…¶å®æ‰€è°“çš„å¾ªç¯æ³¨æ„åŠ›æ¨¡å‹å°±æ˜¯æœ€æ—©æå‡ºçš„seq2seqçš„ç¿»è¯‘æ¨¡å‹ï¼š $$ \begin{align} \boldsymbol{o}_{i} &= f(\boldsymbol{s}_{i}) \\ \boldsymbol{s}_{i} &= a(\boldsymbol{s}_{i-1},\boldsymbol{o}_{i-1},\boldsymbol{s}_{i}) \\ \boldsymbol{c}_{t'} &= \sum_{t=1}^T\alpha_{t' t}\boldsymbol{h}_t \\ \alpha_{t' t} &= \frac{\exp(e_{t' t})}{ \sum_{k=1}^T \exp(e_{t' k}) },\quad t=1,\ldots,T \\ e_{t' t} &= \sigma(\boldsymbol{s}_{t' - 1}, \boldsymbol{h}_t) \\ \sigma(\boldsymbol{s}_{t' - 1}, \boldsymbol{h}_t) &= \boldsymbol{V}^\top \tanh(\boldsymbol{W}_s \boldsymbol{s}_{t' - 1} + \boldsymbol{W}_h \boldsymbol{h}_t) \\ \end{align} $$ å…¶ä¸­ ä»–çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸‹ä¸€ä¸ªè¾“å‡ºçš„çŠ¶æ€$\boldsymbol{s}_{t-1}$ä¸€èµ·è¾“å…¥$\sigma$å‡½æ•°ã€‚$\alpha_{tâ€™ t}$å°±æ˜¯æ³¨æ„åŠ›æ¨¡å‹ä¸­çš„æƒé‡é¡¹ï¼ŒOè¡¨ç¤ºè¾“å‡ºï¼Œsè¡¨ç¤ºè§£ç å™¨ä¸­çš„éšè—å±‚å˜é‡,cè¡¨ç¤ºcontext vetor, hè¡¨ç¤ºç¼–ç å™¨ä¸­çš„éšè—å±‚å˜é‡ã€‚ å…¨å±€æ³¨æ„åŠ›æ¨¡å‹ï¼ˆGobal Attentionï¼‰å…¨å±€æ³¨æ„åŠ›æ¨¡å‹æ˜¯ç”±Minh-Thang Luongåœ¨2015å¹´çš„ã€ŠEffective Approaches to Attention-based Neural Machine Translationã€‹ä¸­æå‡ºï¼š è¿™ä¸ªå…¨å±€æ³¨æ„åŠ›æ¨¡å‹æ˜¯åœ¨å¾ªç¯æ³¨æ„åŠ›æ¨¡å‹ä¸Šå·¦çš„æ”¹è¿›ï¼ŒåŠ ä¸ªä¸€å±‚Global align weightsï¼ˆè§ä¸Šå›¾ï¼‰ï¼ŒåŸå¾ªç¯æ³¨æ„åŠ›æ¨¡å‹çš„é”®å€¼é¡¹Kæ˜¯ç›´æ¥é‡‡ç”¨$\boldsymbol{h}_t$ã€‚å…¶å…¬å¼ï¼š $$ \begin{align} \alpha_t(s) &= \text{align}(\boldsymbol{h}_t, \bar{\boldsymbol{h}_s}) \\ &= \frac{ \text{exp}(\text{score}(\boldsymbol{h}_t, \bar{\boldsymbol{h}_s}))} { \sum_{\boldsymbol{s'}} \text{exp}(\text{score}(\boldsymbol{h}_t, \bar{\boldsymbol{h}_{s'}})) } \end{align} $$ $\boldsymbol{h}_{t}$ è¡¨ç¤ºå½“å‰ç›®æ ‡æ—¶åˆ» t çš„ç¼–ç å™¨çš„éšè—å˜é‡ï¼Œ$\bar{\boldsymbol{h}_s}$è¡¨ç¤ºæ‰€æœ‰çš„åŸæ—¶åˆ»çš„ç¼–ç å™¨çš„éšè—å˜é‡scoreè¡¨ç¤ºä¸€ç§æ‰“åˆ†æ–¹å¼ï¼Œå…¶ä¸­è®ºæ–‡ä¸­ç»™å‡ºçš„æ˜¯ä¸‰ç§ï¼š $$ \text{score}(\boldsymbol{h}_t, \bar{\boldsymbol{h}_s)} = \begin{cases} \boldsymbol{h}_t^T \bar{\boldsymbol{h}_s}, &\text{dot}\\ \boldsymbol{h}_t^T \boldsymbol{W}_a \bar{\boldsymbol{h}_s}, &\text{general}\\ \boldsymbol{v}_a^T \text{tanh}(\boldsymbol{W}_a[\boldsymbol{h}_t;\bar{\boldsymbol{h}_s}]),&\text{concat} \end{cases} $$ dotè¡¨ç¤ºç‚¹ä¹˜/ç‚¹ç§¯ï¼Œconcatè¡¨ç¤ºè”æ¥ï¼Œå³å°†ä¸¤ä¸ªå˜é‡è¿æ¥èµ·æ¥ï¼Œgeneralæ˜¯ä¸€èˆ¬å½¢å¼ï¼Œä¸­é—´åŠ æƒé‡å‚æ•°ã€‚ æ³¨ï¼š While our global attention approach is similar in spirit to the model proposed by Bahdanau et al. (2015), there are several key differences which reï¬‚ect how we have both simpliï¬ed and generalized from the original model. å±€éƒ¨æ³¨æ„åŠ›æ¨¡å‹ï¼ˆLocal Attentionï¼‰å±€éƒ¨æ³¨æ„åŠ›æ¨¡å‹å…¶å®æ˜¯å’Œå…¨å±€æ³¨æ„åŠ›æ¨¡å‹åœ¨åŒä¸€ç¯‡è®ºæ–‡æå‡ºçš„ï¼Œå±€éƒ¨æ³¨æ„åŠ›æ¨¡å‹åœ¨å…¨å±€æ³¨æ„åŠ›æ¨¡å‹çš„åŸºç¡€ä¸Šå¢åŠ äº†aligned positionå¸®åŠ©å®šä½ï¼Œä½¿æŸ¥è¯¢é¡¹Qå’Œé”®å€¼é¡¹Kèƒ½ä¸“æ³¨éƒ¨åˆ†ä¿¡æ¯ï¼š ä½ç½®aligned positionçš„å…¬å¼: $$p_t = S \cdot \text{sigmod}(\boldsymbol{v}_p^T \text{tanh}(\boldsymbol{W}_p\boldsymbol{h}_t)), \\p_t \in [0, S]$$ Sè¡¨ç¤ºåŸå¥çš„é•¿åº¦ï¼ŒWå’Œvä¸ºé¢„æµ‹å‚æ•°ã€‚ é”®å€¼å’ŒæŸ¥è¯¢é¡¹çš„æƒé‡: $$\alpha_t(s) = \text{align}(\boldsymbol{h}_t, \bar{\boldsymbol{h}_s})\text{exp}(- \frac{(s-p_t)^2}{2\sigma^2})$$ $p_t$çš„èŒƒå›´æ˜¯ã€0ï¼ŒSã€‘ï¼Œsä¸º$p_t$çª—ä½“ä¸­é—´çš„æ­£æ•°,$\sigma=\frac{D}{2}$: è‡ªæ³¨æ„åŠ›(Self Attention)1ã€ä»nä¸ªè¾“å…¥ç›´æ¥è¾“å‡ºnä¸ªè¾“å‡ºï¼Œæ²¡æœ‰åºåˆ—ï¼Œæ¯ä¸ªè¾“å…¥å¯¹åº”ç€ä¸€ä¸ªK,V,Qï¼›2ã€å¯ä»¥å¹¶è¡Œè¿ç®— å¤šå¤´æ³¨æ„åŠ›æ¨¡å‹(Multi-Head Attention) å¤šå¤´è‡ªæ³¨æ„åŠ›æ¨¡å‹å…¶å…¬å¼ï¼š $$ \text{MultiHead}(Q,K,V) = \text{Concat}(\text{head1},...,\text{head}_h)\boldsymbol{W}^O $$ $$ \text{head}_i = \text{Attention}(\boldsymbol{Q}\boldsymbol{W}_i^Q,\boldsymbol{K}\boldsymbol{W}_i^K,\boldsymbol{V}\boldsymbol{W}_i^V) $$ $$ \text{Attention}(\boldsymbol{Q},\boldsymbol{K},\boldsymbol{V}) = \text{softmax}(\frac{\boldsymbol{Q}\boldsymbol{K}^T}{\sqrt{d_k}})\boldsymbol{V} $$ æ³¨æ„åŠ›æ¨¡å‹çš„åº”ç”¨TransformerTransformeræ¨¡å‹æ˜¯ Google å›¢é˜Ÿåœ¨2017å¹´ã€ŠAttention is All You Needã€‹ä¸­æå‡ºï¼ŒTransformeræ¨¡å‹åœ¨åé¢æˆä¸ºæ„æˆ BERT çš„åŸºçŸ³ä¹‹ä¸€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯æ€ä¹ˆé€šè¿‡è‡ªæ³¨æ„åŠ›æ¨¡å‹æ„å»ºTransformerçš„ï¼š Transformerä»ç»“æ„ä¸Šæ¥è¯´ä¾ç„¶æ˜¯ä¸ªEncoder-Decoderæ¨¡å‹ï¼Œä½†æ˜¯ï¼Œå®ƒå’Œä¼ ç»Ÿçš„seq2seqä¸»è¦æœ‰ä¸‰ç‚¹ä¸åŒï¼š ä½¿ç”¨ä½ç½®ç¼–ç ï¼Œä¹Ÿå°±æ˜¯Positional Encodingä»£æ›¿åºåˆ—ä¿¡æ¯ã€‚ ä½¿ç”¨Transformer Blockæ¥å®ç°æ³¨æ„åŠ›æœºåˆ¶ é‡‡ç”¨å¤šå¤´è‡ªæ³¨æ„åŠ›ï¼Œå¯ä»¥å¹¶è¡Œè¿ç®— ä½ç½®ç¼–ç (Positional Encoding)å…¬å¼ï¼š $$ \boldsymbol{P}_{i,2j} = \text{sin}(\frac{i}{10000^{2j/d}}) $$ $$ \boldsymbol{P}_{i,2j+1} = \text{sin}(\frac{i}{10000^{2j/d}}) $$ $$ \boldsymbol{H} = \boldsymbol{X} + \boldsymbol{P}, \\ \boldsymbol{X} \in \Bbb{R}, \boldsymbol{P} \in \Bbb{R} $$ Position-wise FFN input(batch, seq len, fea size) è½¬æ¢æˆ (batch*seq len, fea siz) ä½¿ç”¨äº†ä¸¤å±‚MLP æœ€åçš„è¾“å‡ºåœ¨è½¬åŒ–ä¸º3-D ç­‰äºä½¿ç”¨äº†ä¸€ä¸ª$1\times1$çš„å·ç§¯å±‚ Layer Normalizaiton Layer NormalizationLayer Normalizationæœ€æ—©ç”± Jimmy Lei Ba åœ¨2016å¹´ã€ŠLayer Normalizationã€‹ä¸€æ–‡ä¸­æå‡ºã€‚ shape:[N, C, H, W]N ä»£è¡¨batché•¿åº¦ï¼ŒCä»£è¡¨é€šé“æ•°ï¼ŒHä»£è¡¨æ¯å±‚çš„éšè—å•å…ƒæ•°ï¼ŒWä»£è¡¨æ¯å±‚çš„æƒé‡ï¼› BatchNormæ˜¯åœ¨batchä¸Šï¼Œå¯¹NHWåšå½’ä¸€åŒ–ï¼› LayerNormåœ¨channelæ–¹å‘ä¸Šï¼Œå¯¹CHWå½’ä¸€åŒ–ï¼› InstanceNormåœ¨å•ä¸ªé€šé“åƒç´ ä¸Šï¼Œå¯¹HWåšå½’ä¸€åŒ–ï¼› GroupNormï¼Œæœ‰ç‚¹ç±»ä¼¼LayerNorm,å°†channelåˆ†ç»„ï¼Œç„¶åå†åšå½’ä¸€åŒ–ï¼› BERTBERTï¼Œå…¨ç§° Bidirectional Encoder Representations from Transformersï¼Œæ˜¯ç”± BERTç‰¹ç‚¹ï¼š ä½¿ç”¨ Transformer Block ä»£æ›¿ RNNï¼Œé€šè¿‡å †å Transformer Blockå°†æ¨¡å‹å˜æ·±ï¼› ä½¿ç”¨éšæœº Mark çš„æ–¹å¼è®­ç»ƒ; ä½¿ç”¨åŒå‘ç¼–ç çš„å½¢å¼ï¼› åé¢æˆ‘ä»¬é€šè¿‡å®ç°BERTæ¥å›å½’æ•´ä¸ªAttentionç³»åˆ—:BERTä»£ç å®ç°åŠè§£è¯» ### æ¨èç³»ç»Ÿä¸­çš„æ³¨æ„åŠ›æœºåˆ¶Jun Xiao, et al. Attentional Factorization Machines: Learning the Weight of Feature Interactions via Attention Networks. 2017 å‚è€ƒæ–‡çŒ® https://github.com/d2l-ai/d2l-zh Neural Machine Translation by Jointly Learning to Align and Translate. Dzmitry Bahdanau, Kyunghyun Cho, and Yoshua Bengio. ICLR, 2015. Hierarchical attention networks for document classification. Zichao Yang et al. ACL, 2016. Effective approaches to attention-based neural machine translation. Minh-Thang Luong, Hieu Pham, and Christopher D Manning. EMNLP, 2015. Long Short-Term Memory-Networks for Machine Reading. Jianpeng Cheng, Li Dong and Mirella Lapata. EMNLP, 2016. Attention Is All You Need. Ashish Vaswani, et al. NIPS, 2017.]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>ç®—æ³•</tag>
        <tag>æ³¨æ„åŠ›æœºåˆ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[weekly kaggle ç»ƒä¹ é¢˜è§£è¯»(House Prices)]]></title>
    <url>%2F2019%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2Fweekly-kaggle-%E7%BB%83%E4%B9%A0%E5%86%8C%2F</url>
    <content type="text"><![CDATA[æ¯æ—¥ä¸€è¯¾ Kaggle ç»ƒä¹ è®²è§£æ¯å‘¨ä¸€é“Kaggleé¢˜ï¼Œå­¦ä¹ æœºå™¨å­¦ä¹ ï¼ ä»Šå¤©ç»™å¤§å®¶æ¥è®²è®²ã€ŠHouse Prices: Advanced Regression Techniquesã€‹ï¼ˆæˆ¿ä»·é¢„æµ‹æ¨¡å‹ï¼‰çš„æ€è·¯: ï¼ˆ1ï¼‰ æ•°æ®å¯è§†åŒ–å’Œæ•°æ®åˆ†å¸ƒå˜æ¢ ï¼ˆ2ï¼‰ ç¼ºçœå€¼å¤„ç† ï¼ˆ3ï¼‰ æ•°æ®ç‰¹å¾å˜æ¢ ï¼ˆ4ï¼‰ æ•°æ®å»ºæ¨¡åŠäº¤å‰æ£€éªŒ ï¼ˆ5ï¼‰ æ¨¡å‹ç»„åˆ 1234567891011import numpy as npimport pandas as pd import matplotlib.pyplot as pltimport seaborn as snsfrom scipy import statsfrom scipy.stats import norm, skewfrom scipy.special import boxcox1pfrom scipy.stats import boxcox_normmaxfrom sklearn.model_selection import KFold, cross_val_scorefrom sklearn.preprocessing import LabelEncoder%matplotlib inline åŠ è½½æ•°æ®å»é™¤ID 12345train_path = "http://kaggle.shikanon.com/house-prices-advanced-regression-techniques/train.csv"test_path = "http://kaggle.shikanon.com/house-prices-advanced-regression-techniques/test.csv"train_df = pd.read_csv(train_path)test_df = pd.read_csv(test_path)train_df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } .rendered_html th, .rendered_html td { text-align: right; vertical-align: middle; padding: 0.5em 0.5em; line-height: normal; white-space: nowrap; width: 80px; border: none; } Id MSSubClass MSZoning LotFrontage LotArea Street Alley LotShape LandContour Utilities ... PoolArea PoolQC Fence MiscFeature MiscVal MoSold YrSold SaleType SaleCondition SalePrice 0 1 60 RL 65.0 8450 Pave NaN Reg Lvl AllPub ... 0 NaN NaN NaN 0 2 2008 WD Normal 208500 1 2 20 RL 80.0 9600 Pave NaN Reg Lvl AllPub ... 0 NaN NaN NaN 0 5 2007 WD Normal 181500 2 3 60 RL 68.0 11250 Pave NaN IR1 Lvl AllPub ... 0 NaN NaN NaN 0 9 2008 WD Normal 223500 3 4 70 RL 60.0 9550 Pave NaN IR1 Lvl AllPub ... 0 NaN NaN NaN 0 2 2006 WD Abnorml 140000 4 5 60 RL 84.0 14260 Pave NaN IR1 Lvl AllPub ... 0 NaN NaN NaN 0 12 2008 WD Normal 250000 5 rows Ã— 81 columns æˆ‘ä»¬åœ¨åˆ†æä¹‹å‰è¦å…ˆäº†è§£ä¸ªå­—æ®µçš„æ„æ€ï¼š 1train_df.columns Index([&apos;Id&apos;, &apos;MSSubClass&apos;, &apos;MSZoning&apos;, &apos;LotFrontage&apos;, &apos;LotArea&apos;, &apos;Street&apos;, &apos;Alley&apos;, &apos;LotShape&apos;, &apos;LandContour&apos;, &apos;Utilities&apos;, &apos;LotConfig&apos;, &apos;LandSlope&apos;, &apos;Neighborhood&apos;, &apos;Condition1&apos;, &apos;Condition2&apos;, &apos;BldgType&apos;, &apos;HouseStyle&apos;, &apos;OverallQual&apos;, &apos;OverallCond&apos;, &apos;YearBuilt&apos;, &apos;YearRemodAdd&apos;, &apos;RoofStyle&apos;, &apos;RoofMatl&apos;, &apos;Exterior1st&apos;, &apos;Exterior2nd&apos;, &apos;MasVnrType&apos;, &apos;MasVnrArea&apos;, &apos;ExterQual&apos;, &apos;ExterCond&apos;, &apos;Foundation&apos;, &apos;BsmtQual&apos;, &apos;BsmtCond&apos;, &apos;BsmtExposure&apos;, &apos;BsmtFinType1&apos;, &apos;BsmtFinSF1&apos;, &apos;BsmtFinType2&apos;, &apos;BsmtFinSF2&apos;, &apos;BsmtUnfSF&apos;, &apos;TotalBsmtSF&apos;, &apos;Heating&apos;, &apos;HeatingQC&apos;, &apos;CentralAir&apos;, &apos;Electrical&apos;, &apos;1stFlrSF&apos;, &apos;2ndFlrSF&apos;, &apos;LowQualFinSF&apos;, &apos;GrLivArea&apos;, &apos;BsmtFullBath&apos;, &apos;BsmtHalfBath&apos;, &apos;FullBath&apos;, &apos;HalfBath&apos;, &apos;BedroomAbvGr&apos;, &apos;KitchenAbvGr&apos;, &apos;KitchenQual&apos;, &apos;TotRmsAbvGrd&apos;, &apos;Functional&apos;, &apos;Fireplaces&apos;, &apos;FireplaceQu&apos;, &apos;GarageType&apos;, &apos;GarageYrBlt&apos;, &apos;GarageFinish&apos;, &apos;GarageCars&apos;, &apos;GarageArea&apos;, &apos;GarageQual&apos;, &apos;GarageCond&apos;, &apos;PavedDrive&apos;, &apos;WoodDeckSF&apos;, &apos;OpenPorchSF&apos;, &apos;EnclosedPorch&apos;, &apos;3SsnPorch&apos;, &apos;ScreenPorch&apos;, &apos;PoolArea&apos;, &apos;PoolQC&apos;, &apos;Fence&apos;, &apos;MiscFeature&apos;, &apos;MiscVal&apos;, &apos;MoSold&apos;, &apos;YrSold&apos;, &apos;SaleType&apos;, &apos;SaleCondition&apos;, &apos;SalePrice&apos;], dtype=&apos;object&apos;) MSSubClass: å»ºç­‘çš„ç­‰çº§ï¼Œç±»å‹ï¼šç±»åˆ«å‹ MSZoning: åŒºåŸŸåˆ†ç±»ï¼Œç±»å‹ï¼šç±»åˆ«å‹ LotFrontage: è·ç¦»è¡—é“çš„ç›´çº¿è·ç¦»ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šè‹±å°º LotArea: åœ°çš®é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º Street: è¡—é“ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Alley: å··å­ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ LotShape: æˆ¿å­æ•´ä½“å½¢çŠ¶ï¼Œç±»å‹ï¼šç±»åˆ«å‹ LandContour: å¹³æ•´åº¦çº§åˆ«ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Utilities: å…¬å…±è®¾æ–½ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ LotConfig: æˆ¿å±‹é…ç½®ï¼Œç±»å‹ï¼šç±»åˆ«å‹ LandSlope: å€¾æ–œåº¦ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Neighborhood: å¸‚åŒºç‰©ç†ä½ç½®ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Condition1: ä¸»å¹²é“æˆ–è€…é“è·¯ä¾¿åˆ©ç¨‹åº¦ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Condition2: ä¸»å¹²é“æˆ–è€…é“è·¯ä¾¿åˆ©ç¨‹åº¦ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BldgType: ä½å®…ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ HouseStyle: ä½å®…é£æ ¼ï¼Œç±»å‹ï¼šç±»åˆ«å‹ OverallQual: æ•´ä½“ææ–™å’Œé¥°é¢è´¨é‡ï¼Œç±»å‹ï¼šæ•°å€¼å‹ OverallCond: æ€»ä½“çŠ¶å†µè¯„ä»·ï¼Œç±»å‹ï¼šæ•°å€¼å‹ YearBuilt: å»ºç­‘å¹´ä»½ï¼Œç±»å‹ï¼šæ•°å€¼å‹ YearRemodAdd: æ”¹å»ºå¹´ä»½ï¼Œç±»å‹ï¼šæ•°å€¼å‹ RoofStyle: å±‹é¡¶ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ RoofMatl: å±‹é¡¶ææ–™ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Exterior1st: ä½å®…å¤–å¢™ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Exterior2nd: ä½å®…å¤–å¢™ï¼Œç±»å‹ï¼šç±»åˆ«å‹ MasVnrType: ç Œä½“é¥°é¢ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ MasVnrArea: ç Œä½“é¥°é¢é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º ExterQual: å¤–éƒ¨ææ–™è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ ExterCond: å¤–éƒ¨ææ–™çš„ç°çŠ¶ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Foundation: åœ°åŸºç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtQual: åœ°ä¸‹å®¤é«˜åº¦ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtCond: åœ°ä¸‹å®¤æ¦‚å†µï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtExposure: èŠ±å›­åœ°ä¸‹å®¤å¢™ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtFinType1: åœ°ä¸‹å®¤è£…é¥°è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtFinSF1: åœ°ä¸‹å®¤è£…é¥°é¢ç§¯ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtFinType2: åœ°ä¸‹å®¤è£…é¥°è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtFinSF2: åœ°ä¸‹å®¤è£…é¥°é¢ç§¯ï¼Œç±»å‹ï¼šç±»åˆ«å‹ BsmtUnfSF: æœªè£…é¥°çš„åœ°ä¸‹å®¤é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º TotalBsmtSF: åœ°ä¸‹å®¤æ€»é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º Heating: ä¾›æš–ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ HeatingQC: ä¾›æš–è´¨é‡å’Œæ¡ä»¶ï¼Œç±»å‹ï¼šç±»åˆ«å‹ CentralAir: ä¸­å¤®ç©ºè°ƒçŠ¶å†µï¼Œç±»å‹ï¼šç±»åˆ«å‹ Electrical: ç”µåŠ›ç³»ç»Ÿï¼Œç±»å‹ï¼šç±»åˆ«å‹ 1stFlrSF: é¦–å±‚é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º 2ndFlrSF: äºŒå±‚é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º LowQualFinSF: ä½è´¨è£…é¥°é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º GrLivArea: åœ°é¢ä»¥ä¸Šå±…ä½é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º BsmtFullBath: åœ°ä¸‹å®¤å…¨æµ´å®¤ï¼Œç±»å‹ï¼šæ•°å€¼ BsmtHalfBath: åœ°ä¸‹å®¤åŠæµ´å®¤ï¼Œç±»å‹ï¼šæ•°å€¼ FullBath: é«˜æ¡£å…¨æµ´å®¤ï¼Œç±»å‹ï¼šæ•°å€¼ HalfBath: é«˜æ¡£åŠæµ´å®¤ï¼Œç±»å‹ï¼šæ•°å€¼ BedroomAbvGr: åœ°ä¸‹å®¤ä»¥ä¸Šçš„å§å®¤æ•°é‡ï¼Œç±»å‹ï¼šæ•°å€¼ KitchenAbvGr: å¨æˆ¿æ•°é‡ï¼Œç±»å‹ï¼šæ•°å€¼ KitchenQual: å¨æˆ¿è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ TotRmsAbvGrd: åœ°ä¸Šé™¤å§å®¤ä»¥å¤–çš„æˆ¿é—´æ•°ï¼Œç±»å‹ï¼šæ•°å€¼ Functional: æˆ¿å±‹åŠŸç”¨æ€§è¯„çº§ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Fireplaces: å£ç‚‰æ•°é‡ï¼Œç±»å‹ï¼šæ•°å€¼ FireplaceQu: å£ç‚‰è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ GarageType: è½¦åº“ä½ç½®ï¼Œç±»å‹ï¼šç±»åˆ«å‹ GarageYrBlt: è½¦åº“å»ºé€ å¹´ä»½ï¼Œç±»åˆ«ï¼šæ•°å€¼å‹ GarageFinish: è½¦åº“å†…é¥°ï¼Œç±»å‹ï¼šç±»åˆ«å‹ GarageCars: è½¦åº“è½¦å®¹é‡å¤§å°ï¼Œç±»åˆ«ï¼šæ•°å€¼å‹ GarageArea: è½¦åº“é¢ç§¯ï¼Œç±»åˆ«ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º GarageQual: è½¦åº“è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ GarageCond: è½¦åº“æ¡ä»¶ï¼Œç±»å‹ï¼šç±»åˆ«å‹ PavedDrive: é“ºçš„è½¦é“æƒ…å†µï¼Œç±»å‹ï¼šç±»åˆ«å‹ WoodDeckSF: æœ¨åœ°æ¿é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º OpenPorchSF: å¼€æ”¾å¼é—¨å»ŠåŒºé¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º EnclosedPorch: å°é—­å¼é—¨å»ŠåŒºé¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º 3SsnPorch: ä¸‰ä¸ªå­£èŠ‚é—¨å»Šé¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º ScreenPorch: çº±é—¨é—¨å»Šé¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º PoolArea: æ³³æ± é¢ç§¯ï¼Œç±»å‹ï¼šæ•°å€¼å‹ï¼Œå•ä½ï¼šå¹³æ–¹è‹±å°º PoolQC:æ³³æ± è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ Fence: å›´å¢™è´¨é‡ï¼Œç±»å‹ï¼šç±»åˆ«å‹ MiscFeature: å…¶ä»–ç‰¹å¾ï¼Œç±»å‹ï¼šç±»åˆ«å‹ MiscVal: å…¶ä»–æ‚é¡¹ç‰¹å¾å€¼ï¼Œç±»å‹ï¼šç±»åˆ«å‹ MoSold: å–å‡ºæœˆä»½ï¼Œç±»åˆ«ï¼šæ•°å€¼å‹ YrSold: å–å‡ºå¹´ä»½ï¼Œç±»åˆ«ï¼šæ•°å€¼å‹ SaleType: äº¤æ˜“ç±»å‹ï¼Œç±»å‹ï¼šç±»åˆ«å‹ SaleCondition: äº¤æ˜“æ¡ä»¶ï¼Œç±»å‹ï¼šç±»åˆ«å‹æ•°æ®å¤„ç†å’Œç‰¹å¾åˆ†æ 123456#Saving Idstrain_ID = train_df['Id']test_ID = test_df['Id']#Dropping Idstrain_df.drop("Id", axis = 1, inplace = True)test_df.drop("Id", axis = 1, inplace = True) æ•°æ®è§‚å¯Ÿå’Œå¯è§†åŒ–æ›´åŠ å¸¸è¯†ï¼Œä¸€èˆ¬å’Œæˆ¿ä»·æœ€ç›¸å…³çš„æ˜¯å±…ä½é¢ç§¯ï¼Œä¹Ÿå°±æ˜¯GrLivAreaï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸‹GrLivAreaå’ŒSalePriceçš„å…³ç³» 12345fig, ax = plt.subplots()ax.scatter(x = train_df['GrLivArea'], y = train_df['SalePrice'], c = "skyblue")plt.ylabel('SalePrice', fontsize=8)plt.xlabel('GrLivArea', fontsize=8)plt.show() æˆ‘ä»¬å‘ç°æœ‰ä¸ªåˆ«å€¼ç‰¹åˆ«çš„åç¦»ï¼ŒGrLivAreaæœ‰ä¸¤ä¸ªç‚¹åœ¨4000ä»¥ä¸Šï¼Œä½†å…¶ä»·æ ¼ä¸åˆ°200000ï¼Œé¦–å…ˆè¿™ç§ç‚¹ç‰¹åˆ«å°‘ï¼ˆä¸åˆ°æ€»æ•°çš„3%ï¼‰ï¼Œæˆ‘ä»¬æŠŠä»–ä½œä¸ºå¼‚å¸¸å€¼å»æ‰ï¼ˆå…¶å®æ˜¯å¦å»æ‰æˆ‘ä»¬å¯ä»¥å¤šåšå‡ æ¬¡å®éªŒæ¥éªŒè¯ï¼‰Kaggleçš„ä½œè€…åœ¨è¿™é‡Œæœ‰å»ºè®®å»æ‰:) 1train_df.drop(train_df[(train_df['GrLivArea']&gt;4000)&amp;(train_df['GrLivArea']&lt;30000)].index,inplace=True) 12345fig, ax = plt.subplots()ax.scatter(x = train_df['GrLivArea'], y = train_df['SalePrice'], c = "skyblue")plt.ylabel('SalePrice', fontsize=8)plt.xlabel('GrLivArea', fontsize=8)plt.show() æœ€åä¸€è¡Œæ˜¯ SalePriceï¼Œ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¥¹è·Ÿå„å˜é‡çš„å…³ç³»ï¼Œè¿˜æœ‰å„å˜é‡ç›¸äº’ä¹‹é—´çš„å…³ç³»è§‚å¯Ÿæ•°æ®åˆ†å¸ƒåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¯¹æ•°æ®çš„è®¤è¯†æ˜¯å¾ˆé‡è¦çš„ï¼Œä»–ä¼šå½±å“æˆ‘ä»¬çš„ç‰¹å¾æ„å»ºå’Œå»ºæ¨¡ï¼Œç‰¹åˆ«å¯¹äºåæ€åˆ†å¸ƒï¼Œæˆ‘ä»¬è¦åšä¸€äº›å˜æ¢ 12# ç»Ÿè®¡è¡¨è¿°train_df['SalePrice'].describe() count 1456.000000 mean 180151.233516 std 76696.592530 min 34900.000000 25% 129900.000000 50% 163000.000000 75% 214000.000000 max 625000.000000 Name: SalePrice, dtype: float64 1234# ç»˜åˆ¶åˆ†å¸ƒå›¾sns.distplot(train_df['SalePrice'], kde_kws=&#123;"color": "coral", "lw": 1, "label": "KDE"&#125;, hist_kws=&#123;"histtype": "stepfilled", "linewidth": 3, "alpha": 1, "color": "skyblue"&#125;); Q-Qå›¾ï¼Œå…¨ç§° Quantile Quantile Plotï¼Œä¸­æ–‡åå«åˆ†ä½æ•°å›¾ï¼ŒQ-Qå›¾æ˜¯ä¸€ä¸ªæ¦‚ç‡å›¾ï¼Œç”¨äºæ¯”è¾ƒè§‚æµ‹ä¸é¢„æµ‹å€¼ä¹‹é—´çš„æ¦‚ç‡åˆ†å¸ƒå·®å¼‚ï¼Œè¿™é‡Œçš„æ¯”è¾ƒå¯¹è±¡ä¸€èˆ¬é‡‡ç”¨æ­£æ€åˆ†å¸ƒï¼ŒQ-Qå›¾å¯ä»¥ç”¨äºæ£€éªŒæ•°æ®åˆ†å¸ƒçš„ç›¸ä¼¼æ€§ï¼Œè€ŒP-På›¾æ˜¯æ ¹æ®å˜é‡çš„ç´¯ç§¯æ¦‚ç‡å¯¹åº”äºæ‰€æŒ‡å®šçš„ç†è®ºåˆ†å¸ƒç´¯ç§¯æ¦‚ç‡ç»˜åˆ¶çš„æ•£ç‚¹å›¾ï¼Œä¸¤è€…åŸºæœ¬ä¸€æ · 1234# ç»˜åˆ¶P-På›¾fig = plt.figure()res = stats.probplot(train_df['SalePrice'], dist="norm", plot=plt)plt.show() çº¢è‰²çº¿æ˜¯æ­£æ€åˆ†å¸ƒï¼Œè“è‰²çº¿æ˜¯æˆ‘ä»¬çš„æ•°æ®ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„æ•°æ®å¤´å°¾éƒ½ä¸¥é‡åç¦»äº†æ­£å¤ªåˆ†å¸ƒ,æˆ‘ä»¬å°è¯•å¯¹æ•°æ®åšå˜æ¢ï¼Œå¸¸ç”¨çš„å˜æ¢æœ‰æŒ‡æ•°å˜æ¢ã€å¯¹æ•°å˜æ¢ã€å¹‚å‡½æ•°ç­‰ã€‚ 123456789101112# å¯¹æ•°å˜æ¢train_df['SalePrice_Log'] = np.log(train_df['SalePrice'])sns.distplot(train_df['SalePrice_Log'], kde_kws=&#123;"color": "coral", "lw": 1, "label": "KDE"&#125;, hist_kws=&#123;"histtype": "stepfilled", "linewidth": 3, "alpha": 1, "color": "skyblue"&#125;); # ååº¦ä¸å³°å€¼(skewness and kurtosis)print("Skewness: %f" % train_df['SalePrice_Log'].skew())print("Kurtosis: %f" % train_df['SalePrice_Log'].kurt())fig = plt.figure()res = stats.probplot(train_df['SalePrice_Log'], plot=plt)plt.show() Skewness: 0.065449 Kurtosis: 0.666438 123456789101112# æŒ‡æ•°å˜æ¢train_df['SalePrice_Exp'] = np.exp(train_df['SalePrice']/train_df['SalePrice'].mean())sns.distplot(train_df['SalePrice_Exp'], kde_kws=&#123;"color": "coral", "lw": 1, "label": "KDE"&#125;, hist_kws=&#123;"histtype": "stepfilled", "linewidth": 3, "alpha": 1, "color": "skyblue"&#125;); # ååº¦ä¸å³°å€¼(skewness and kurtosis)print("Skewness: %f" % train_df['SalePrice_Exp'].skew())print("Kurtosis: %f" % train_df['SalePrice_Exp'].kurt())fig = plt.figure()res = stats.probplot(train_df['SalePrice_Exp'], plot=plt)plt.show() Skewness: 6.060076 Kurtosis: 56.822460 123456789101112# å¹‚å‡½æ•°å˜æ¢train_df['SalePrice_Square'] = train_df['SalePrice']**0.5sns.distplot(train_df['SalePrice_Square'], kde_kws=&#123;"color": "coral", "lw": 1, "label": "KDE"&#125;, hist_kws=&#123;"histtype": "stepfilled", "linewidth": 3, "alpha": 1, "color": "skyblue"&#125;); # ååº¦ä¸å³°å€¼(skewness and kurtosis)print("Skewness: %f" % train_df['SalePrice_Square'].skew())print("Kurtosis: %f" % train_df['SalePrice_Square'].kurt())fig = plt.figure()res = stats.probplot(train_df['SalePrice_Square'], plot=plt)plt.show() Skewness: 0.810797 Kurtosis: 1.245798 ä¸‰ä¸ªå‡½æ•°æ‹Ÿåˆå¯¹æ¯”ï¼Œå¯¹æ•°è½¬æ¢æœ€å»åˆ,ä½†æ˜¯æˆ‘ä»¬çŸ¥é“å¯¹æ•°æ„å‘³ç€å°äº1çš„æ—¶å€™ä¸ºè´Ÿæ•°ï¼Œè¿™æ˜æ˜¾å’Œè®¤çŸ¥ä¸ç¬¦åˆï¼Œåº”è¯¥é‡‡ç”¨log(1+x)ï¼Œä¹Ÿå°±æ˜¯log1pï¼Œä¿è¯äº†xæ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œå½“xå¾ˆå°æ—¶,å¦‚: 10^{-16} ï¼Œç”±äºå¤ªå°è¶…è¿‡æ•°å€¼æœ‰æ•ˆæ€§ï¼Œç”¨log(x+1)è®¡ç®—å¾—åˆ°ç»“æœä¸º0 123456789101112# å¯¹æ•°å˜æ¢train_df['SalePrice_Log1p'] = np.log1p(train_df['SalePrice'])sns.distplot(train_df['SalePrice_Log1p'], kde_kws=&#123;"color": "coral", "lw": 1, "label": "KDE"&#125;, hist_kws=&#123;"histtype": "stepfilled", "linewidth": 3, "alpha": 1, "color": "skyblue"&#125;); # ååº¦ä¸å³°å€¼(skewness and kurtosis)print("Skewness: %f" % train_df['SalePrice_Log1p'].skew())print("Kurtosis: %f" % train_df['SalePrice_Log1p'].kurt())fig = plt.figure()res = stats.probplot(train_df['SalePrice_Log1p'], plot=plt)plt.show() Skewness: 0.065460 Kurtosis: 0.666423 123del train_df['SalePrice_Square']del train_df["SalePrice_Exp"]del train_df['SalePrice_Log'] 1del train_df["SalePrice"] å°†æµ‹è¯•æ•°æ®å’Œè®­ç»ƒæ•°æ®è”åˆä¸€èµ·è¿›è¡Œç‰¹å¾åˆ†æ 12345size_train_df = train_df.shape[0]size_test_df = test_df.shape[0]target_variable = train_df['SalePrice_Log1p'].valuesdata = pd.concat((train_df, test_df),sort=False).reset_index(drop=True)data.drop(['SalePrice_Log1p'], axis=1, inplace=True) ç¼ºå¤±å€¼å¤„ç†ç¼ºå¤±å€¼æ˜¯å®é™…æ•°æ®åˆ†æå¾ˆé‡è¦çš„ä¸€å—ï¼Œåœ¨å®é™…ç”Ÿäº§ä¸­ä¸€ç›´éƒ½ä¼šæœ‰å¤§é‡çš„ç¼ºå¤±å€¼å­˜åœ¨ï¼Œå¦‚ä½•å¤„ç†å¥½ç¼ºå¤±å€¼æ˜¯å¾ˆå…³é”®ä¹Ÿå¾ˆé‡è¦çš„ä¸€æ­¥ã€‚å¸¸è§çš„ç¼ºå¤±å€¼å¤„ç†æœ‰ï¼š ï¼ˆ1ï¼‰æŠŠç¼ºå¤±å€¼å•ç‹¬ä½œä¸ºä¸€ç±»ï¼Œæ¯”å¦‚å¯¹ç±»åˆ«å‹ç”¨noneã€‚ ï¼ˆ2ï¼‰é‡‡ç”¨å¹³å‡æ•°ã€ä¸­å€¼ã€ä¼—æ•°ç­‰ç‰¹å®šç»Ÿè®¡å€¼æ¥å¡«å……ç¼ºå¤±å€¼ã€‚ ï¼ˆ3ï¼‰é‡‡ç”¨å‡½æ•°é¢„æµ‹ç­‰æ–¹æ³•å¡«å……ç¼ºå¤±å€¼ã€‚è¿™é‡Œçš„å„å˜é‡å¡«å……ç­–ç•¥ï¼šNA for â€˜PoolQCâ€™ means â€œNo Poolâ€.MiscFeature: NA means â€œNoneâ€Alley: NA means â€œNo alley accessâ€Fence: NA means â€œNo fenceâ€FireplaceQu: NA means â€œNo fireplaceâ€LotFrontage: fill missing values with median LotFrontage of neighborhoodGarageFinish: NA means â€œNoneâ€GarageQual: NA means â€œNoneâ€GarageCond: NA means â€œNoneâ€GarageYrBlt: NA means 0GarageType: NA means â€œNoneâ€BsmtCond: NA means â€œNoneâ€BsmtExposure: NA means â€œNoneâ€BsmtQual: NA means â€œNoneâ€BsmtFinType2: NA means â€œNoneâ€BsmtFinType1: NA means â€œNoneâ€MasVnrType: NA means â€œNoneâ€MasVnrArea: NA means â€œ0â€BsmtHalfBath: NA means â€œ0â€BsmtFullBath: NA means â€œ0â€BsmtFinSF1: NA means â€œ0â€BsmtFinSF2: NA means â€œ0â€BsmtUnfSF: NA means â€œ0â€TotalBsmtSF: NA means â€œ0â€GarageCars: NA means 0GarageArea: NA means 0 1data.count().sort_values().head(20) # é€šè¿‡ count å¯ä»¥æ‰¾å‡ºæœ‰ç¼ºå¤±å€¼çš„æ•°æ® PoolQC 8 MiscFeature 105 Alley 198 Fence 570 FireplaceQu 1495 LotFrontage 2429 GarageCond 2756 GarageYrBlt 2756 GarageFinish 2756 GarageQual 2756 GarageType 2758 BsmtExposure 2833 BsmtCond 2833 BsmtQual 2834 BsmtFinType2 2835 BsmtFinType1 2836 MasVnrType 2891 MasVnrArea 2892 MSZoning 2911 BsmtFullBath 2913 dtype: int64 123456789data_na = (data.isnull().sum() / len(data)) * 100data_na.drop(data_na[data_na==0].index,inplace=True)data_na = data_na.sort_values(ascending=False)f, ax = plt.subplots(figsize=(10, 10))plt.xticks(rotation='90')sns.barplot(x=data_na.index, y=data_na)plt.xlabel('Features', fontsize=10)plt.ylabel('Percent of missing values', fontsize=10)plt.title('Percent missing data by feature', fontsize=10) Text(0.5, 1.0, &apos;Percent missing data by feature&apos;) 1234var = 'Utilities'train_var_count = train_df[var].value_counts()fig = sns.barplot(x=train_var_count.index, y=train_var_count)plt.xticks(rotation=90); 1234var = 'MSZoning'train_var_count = train_df[var].value_counts()fig = sns.barplot(x=train_var_count.index, y=train_var_count)plt.xticks(rotation=90); 12345678910111213141516171819202122232425# å¡«å……nilfeatures_fill_na_none = ['PoolQC','MiscFeature','Alley','Fence','FireplaceQu', 'GarageQual','GarageCond','GarageFinish','GarageType', 'BsmtExposure','BsmtCond','BsmtQual','BsmtFinType1','BsmtFinType2', 'MasVnrType']# å¡«å……0features_fill_na_0 = ['GarageYrBlt', 'GarageArea', 'GarageCars', 'MasVnrArea', 'BsmtFullBath','BsmtHalfBath', 'BsmtFinSF1', 'BsmtFinSF2', 'BsmtUnfSF', 'TotalBsmtSF']# å¡«ä¼—æ•°features_fill_na_mode = ["Functional", "MSZoning", "SaleType", "Electrical", "KitchenQual", "Exterior2nd", "Exterior1st"]for feature_none in features_fill_na_none: data[feature_none].fillna('None',inplace=True) for feature_0 in features_fill_na_0: data[feature_0].fillna(0,inplace=True)for feature_mode in features_fill_na_mode: mode_value = data[feature_mode].value_counts().sort_values(ascending=False).index[0] data[features_fill_na_mode] = data[features_fill_na_mode].fillna(mode_value)# ç”¨ä¸­å€¼ä»£æ›¿data["LotFrontage"] = data.groupby("Neighborhood")["LotFrontage"].transform( lambda x: x.fillna(x.median()))# åƒ Utilities è¿™ç§æ€»å…±æ‰ä¸¤ä¸ªå€¼ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªå€¼æ˜¯ä½œä¸ºä¸»è¦çš„ï¼Œè¿™ç§å­—æ®µæ˜¯æ— æ„ä¹‰çš„ï¼Œåº”è¯¥åˆ é™¤data.drop(['Utilities'], axis=1,inplace=True) 1234data_na = (data.isnull().sum() / len(data)) * 100data_na.drop(data_na[data_na==0].index,inplace=True)data_na = data_na.sort_values(ascending=False)data_na # data_na ä¸ºç©º Series([], dtype: float64) ç±»å‹è½¬æ¢ï¼Œå°†æŸäº›å®é™…æ˜¯ç±»åˆ«ç±»å‹ä½†ç”¨æ•°å­—è¡¨ç¤ºçš„å¼ºåˆ¶è½¬æ¢æˆæ–‡æœ¬ï¼Œæ¯”å¦‚æœ‰äº›è°ƒæŸ¥ç”·è¡¨ç¤º1ï¼Œå¥³è¡¨ç¤º0ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥é€šè¿‡dataframeç±»å‹åˆ¤æ–­ä¼šå¯¼è‡´é”™è¯¯ï¼Œæˆ‘ä»¬è¦æ ¹æ®å®é™…æƒ…å†µåšè½¬æ¢ 123456789#MSSubClass=The building classdata['MSSubClass'] = data['MSSubClass'].apply(str)#Changing OverallCond into a categorical variabledata['OverallCond'] = data['OverallCond'].astype(str)#Year and month sold are transformed into categorical features.data['YrSold'] = data['YrSold'].astype(str)data['MoSold'] = data['MoSold'].astype(str) ç»˜åˆ¶å…³ç³»çŸ©é˜µå…³ç³»çŸ©é˜µå¯ä»¥å¾ˆç›´è§‚çš„å‘Šè¯‰æˆ‘ä»¬é‚£äº›å˜é‡ä¹‹é—´ç›¸å…³ï¼Œå“ªäº›å˜é‡å¹¶ä¸ç›¸å…³ 123# å…³ç³»çŸ©é˜µcorrmat = train_df.corr()corrmat .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } .rendered_html th, .rendered_html td { text-align: right; vertical-align: middle; padding: 0.5em 0.5em; line-height: normal; white-space: nowrap; width: 80px; border: none; } MSSubClass LotFrontage LotArea OverallQual OverallCond YearBuilt YearRemodAdd MasVnrArea BsmtFinSF1 BsmtFinSF2 ... WoodDeckSF OpenPorchSF EnclosedPorch 3SsnPorch ScreenPorch PoolArea MiscVal MoSold YrSold SalePrice_Log1p MSSubClass 1.000000 -0.408655 -0.142192 0.032416 -0.059277 0.027689 0.040459 0.022800 -0.075268 -0.065598 ... -0.012853 -0.006687 -0.011966 -0.043802 -0.025979 0.007957 -0.007666 -0.013512 -0.021330 -0.075083 LotFrontage -0.408655 1.000000 0.387570 0.225994 -0.055673 0.113913 0.079785 0.162026 0.133704 0.056971 ... 0.077154 0.116131 0.017010 0.075575 0.047832 0.075160 0.005636 0.028042 0.010598 0.363286 LotArea -0.142192 0.387570 1.000000 0.088719 -0.002832 0.006590 0.006930 0.081170 0.173426 0.114691 ... 0.167040 0.061679 -0.016108 0.021505 0.045620 0.033875 0.039192 0.007188 -0.013014 0.258945 OverallQual 0.032416 0.225994 0.088719 1.000000 -0.090692 0.571712 0.550971 0.400028 0.213079 -0.057520 ... 0.232819 0.297803 -0.112407 0.031621 0.067732 0.018121 -0.031068 0.076414 -0.024321 0.819240 OverallCond -0.059277 -0.055673 -0.002832 -0.090692 1.000000 -0.375691 0.074703 -0.130053 -0.042542 0.040015 ... -0.003063 -0.029649 0.070103 0.025419 0.054617 0.008079 0.068729 -0.003135 0.043755 -0.036843 YearBuilt 0.027689 0.113913 0.006590 0.571712 -0.375691 1.000000 0.591906 0.314066 0.248272 -0.048393 ... 0.222690 0.183905 -0.386904 0.031717 -0.049703 -0.014373 -0.034193 0.013881 -0.012593 0.588977 YearRemodAdd 0.040459 0.079785 0.006930 0.550971 0.074703 0.591906 1.000000 0.176067 0.121690 -0.067188 ... 0.204020 0.222649 -0.193348 0.045596 -0.038176 -0.009490 -0.010100 0.022629 0.036597 0.568986 MasVnrArea 0.022800 0.162026 0.081170 0.400028 -0.130053 0.314066 0.176067 1.000000 0.235557 -0.071337 ... 0.149491 0.106073 -0.109453 0.020270 0.065296 -0.016025 -0.029691 0.004019 -0.004880 0.430073 BsmtFinSF1 -0.075268 0.133704 0.173426 0.213079 -0.042542 0.248272 0.121690 0.235557 1.000000 -0.048738 ... 0.201462 0.071851 -0.103053 0.029879 0.070026 0.016380 0.005149 -0.001773 0.018506 0.382710 BsmtFinSF2 -0.065598 0.056971 0.114691 -0.057520 0.040015 -0.048393 -0.067188 -0.071337 -0.048738 1.000000 ... 0.069028 0.005083 0.036269 -0.030090 0.088676 0.053178 0.004871 -0.015726 0.031384 0.006420 BsmtUnfSF -0.140890 0.142075 -0.003774 0.310164 -0.137267 0.148810 0.180972 0.111684 -0.526140 -0.209286 ... -0.006876 0.129148 -0.002336 0.020843 -0.012435 -0.031244 -0.023802 0.035456 -0.040834 0.223248 TotalBsmtSF -0.255441 0.313392 0.221940 0.532666 -0.176000 0.399867 0.294866 0.337869 0.460324 0.116478 ... 0.229984 0.215559 -0.095872 0.041762 0.094511 0.004418 -0.018253 0.030026 -0.012192 0.641553 1stFlrSF -0.265001 0.398400 0.267644 0.462042 -0.145613 0.279929 0.238304 0.316507 0.386453 0.106134 ... 0.230865 0.179049 -0.063074 0.060553 0.097093 0.032088 -0.020801 0.045081 -0.010014 0.613742 2ndFlrSF 0.311294 0.049902 0.037277 0.279745 0.031297 0.002953 0.136103 0.156796 -0.183358 -0.098241 ... 0.083670 0.198407 0.065690 -0.023740 0.043308 0.038375 0.017111 0.039163 -0.024874 0.306605 LowQualFinSF 0.046499 0.042589 0.005675 -0.029826 0.025406 -0.183720 -0.062215 -0.069533 -0.066611 0.014714 ... -0.025114 0.019339 0.060975 -0.004334 0.026713 0.073070 -0.003822 -0.022441 -0.029074 -0.037698 GrLivArea 0.077956 0.341427 0.231887 0.583519 -0.078567 0.192645 0.289264 0.363472 0.121479 -0.004995 ... 0.241827 0.307325 0.016148 0.023967 0.112408 0.064346 -0.000974 0.065328 -0.031898 0.718844 BsmtFullBath 0.003282 0.074686 0.147595 0.104092 -0.053107 0.185009 0.116765 0.080342 0.661933 0.160254 ... 0.174636 0.056251 -0.049034 0.000249 0.024075 0.037039 -0.022877 -0.023770 0.067665 0.238851 BsmtHalfBath -0.002509 -0.009424 0.047391 -0.047172 0.117207 -0.039945 -0.013297 0.012157 0.068869 0.071986 ... 0.034626 -0.024385 -0.007803 0.035565 0.032902 0.027886 -0.007211 0.038478 -0.045303 -0.014974 FullBath 0.132131 0.187048 0.117336 0.543791 -0.194167 0.466710 0.438212 0.266317 0.037159 -0.075291 ... 0.182131 0.252911 -0.113812 0.036304 -0.006557 0.021509 -0.013872 0.058197 -0.016574 0.590919 HalfBath 0.177476 0.037031 0.005981 0.267431 -0.059927 0.240144 0.181136 0.195264 -0.014508 -0.031243 ... 0.104538 0.194921 -0.094317 -0.004590 0.073497 0.001010 0.001589 -0.007127 -0.008853 0.311191 BedroomAbvGr -0.023627 0.269945 0.118960 0.096848 0.013249 -0.072623 -0.041919 0.099176 -0.121893 -0.015134 ... 0.044039 0.093803 0.042402 -0.024263 0.044941 0.064118 0.007965 0.048477 -0.034849 0.204117 KitchenAbvGr 0.281783 -0.002959 -0.016565 -0.184281 -0.087204 -0.174481 -0.149288 -0.036558 -0.082722 -0.040926 ... -0.089670 -0.069738 0.037113 -0.024670 -0.051779 -0.012306 0.062294 0.026340 0.031454 -0.147891 TotRmsAbvGrd 0.040247 0.330249 0.173629 0.415834 -0.055766 0.089207 0.187520 0.265334 0.001877 -0.033490 ... 0.159720 0.219969 0.006790 -0.005908 0.061924 0.041588 0.025640 0.041966 -0.032190 0.533446 Fireplaces -0.046377 0.238140 0.259701 0.387425 -0.022277 0.143162 0.108732 0.236906 0.236219 0.049027 ... 0.194972 0.160647 -0.022885 0.012042 0.187656 0.051221 0.001943 0.053947 -0.022567 0.487126 GarageYrBlt 0.084926 0.058055 -0.033111 0.547320 -0.323836 0.825192 0.641445 0.249917 0.146532 -0.087353 ... 0.222580 0.224239 -0.296517 0.023897 -0.074779 -0.035670 -0.032231 0.006725 -0.000030 0.544005 GarageCars -0.040490 0.289064 0.150977 0.598739 -0.185494 0.536749 0.419573 0.362122 0.224043 -0.037331 ... 0.223010 0.209762 -0.150590 0.036290 0.051622 0.003360 -0.042886 0.041608 -0.037179 0.680408 GarageArea -0.100145 0.318820 0.162183 0.554905 -0.150679 0.477311 0.369590 0.361810 0.268651 -0.016485 ... 0.219967 0.228089 -0.120615 0.036213 0.053732 0.011637 -0.027088 0.034602 -0.025870 0.655212 WoodDeckSF -0.012853 0.077154 0.167040 0.232819 -0.003063 0.222690 0.204020 0.149491 0.201462 0.069028 ... 1.000000 0.053498 -0.125151 -0.032472 -0.073489 0.068309 -0.009287 0.024595 0.023860 0.330573 OpenPorchSF -0.006687 0.116131 0.061679 0.297803 -0.029649 0.183905 0.222649 0.106073 0.071851 0.005083 ... 0.053498 1.000000 -0.092094 -0.005148 0.077261 0.030360 -0.018277 0.072515 -0.056326 0.327038 EnclosedPorch -0.011966 0.017010 -0.016108 -0.112407 0.070103 -0.386904 -0.193348 -0.109453 -0.103053 0.036269 ... -0.125151 -0.092094 1.000000 -0.037427 -0.083154 0.068796 0.018277 -0.029565 -0.010343 -0.148636 3SsnPorch -0.043802 0.075575 0.021505 0.031621 0.025419 0.031717 0.045596 0.020270 0.029879 -0.030090 ... -0.032472 -0.005148 -0.037427 1.000000 -0.031526 -0.006770 0.000326 0.029386 0.018516 0.056065 ScreenPorch -0.025979 0.047832 0.045620 0.067732 0.054617 -0.049703 -0.038176 0.065296 0.070026 0.088676 ... -0.073489 0.077261 -0.083154 -0.031526 1.000000 0.063724 0.031884 0.022863 0.010383 0.123860 PoolArea 0.007957 0.075160 0.033875 0.018121 0.008079 -0.014373 -0.009490 -0.016025 0.016380 0.053178 ... 0.068309 0.030360 0.068796 -0.006770 0.063724 1.000000 0.035480 -0.022901 -0.062640 0.040679 MiscVal -0.007666 0.005636 0.039192 -0.031068 0.068729 -0.034193 -0.010100 -0.029691 0.005149 0.004871 ... -0.009287 -0.018277 0.018277 0.000326 0.031884 0.035480 1.000000 -0.006657 0.004806 -0.019752 MoSold -0.013512 0.028042 0.007188 0.076414 -0.003135 0.013881 0.022629 0.004019 -0.001773 -0.015726 ... 0.024595 0.072515 -0.029565 0.029386 0.022863 -0.022901 -0.006657 1.000000 -0.146229 0.062231 YrSold -0.021330 0.010598 -0.013014 -0.024321 0.043755 -0.012593 0.036597 -0.004880 0.018506 0.031384 ... 0.023860 -0.056326 -0.010343 0.018516 0.010383 -0.062640 0.004806 -0.146229 1.000000 -0.034319 SalePrice_Log1p -0.075083 0.363286 0.258945 0.819240 -0.036843 0.588977 0.568986 0.430073 0.382710 0.006420 ... 0.330573 0.327038 -0.148636 0.056065 0.123860 0.040679 -0.019752 0.062231 -0.034319 1.000000 37 rows Ã— 37 columns 123mask = np.zeros_like(corrmat) # è¿”å›ç›¸åŒå¤§å°çš„0çŸ©é˜µmask[np.triu_indices_from(mask)] = True # triu_indices_from: å‡½æ•°çš„ä¸Šä¸‰è§’çŸ©é˜µmask array([[1., 1., 1., ..., 1., 1., 1.], [0., 1., 1., ..., 1., 1., 1.], [0., 0., 1., ..., 1., 1., 1.], ..., [0., 0., 0., ..., 1., 1., 1.], [0., 0., 0., ..., 0., 1., 1.], [0., 0., 0., ..., 0., 0., 1.]]) 123# ç»˜åˆ¶çƒ­åŠ›å›¾plt.subplots(figsize=(12,9))sns.heatmap(corrmat, mask=mask, linewidths=.5, vmax=0.9, square=True, cmap="YlGnBu") &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f8c20d156d8&gt; ç‰¹å¾å·¥ç¨‹å¯¹æ•°æ®åšç‰¹å¾å˜æ¢:å¯¹äºç±»åˆ«æ•°æ®ï¼Œä¸€èˆ¬é‡‡ç”¨LabelEncoderçš„æ–¹å¼ï¼ŒæŠŠæ¯ä¸ªç±»åˆ«çš„æ•°æ®å˜æˆæ•°å€¼å‹ï¼›ä¹Ÿå¯ä»¥é‡‡ç”¨one-hotå˜æˆç¨€ç–çŸ©é˜µå¯¹äºæ•°å€¼å‹çš„æ•°æ®ï¼Œå°½é‡å°†å…¶å˜ä¸ºæ­£æ€åˆ†å¸ƒã€‚ 12345678910111213141516171819encode_cat_variables = ('Alley', 'BldgType', 'BsmtCond', 'BsmtExposure', 'BsmtFinType1', 'BsmtFinType2', 'BsmtQual', 'CentralAir', 'Condition1', 'Condition2', 'Electrical', 'ExterCond', 'ExterQual', 'Exterior1st', 'Exterior2nd', 'Fence', 'FireplaceQu', 'Foundation', 'Functional', 'GarageCond', 'GarageFinish', 'GarageQual', 'GarageType', 'Heating', 'HeatingQC', 'HouseStyle', 'KitchenQual', 'LandContour', 'LandSlope', 'LotConfig', 'LotShape', 'MSSubClass', 'MSZoning', 'MasVnrType', 'MiscFeature', 'MoSold', 'Neighborhood', 'OverallCond', 'PavedDrive', 'PoolQC', 'RoofMatl', 'RoofStyle', 'SaleCondition', 'SaleType', 'Street', 'YrSold')numerical_features = [col for col in data.columns if col not in encode_cat_variables]# for variable in encode_cat_variables:# lbl = LabelEncoder() # lbl.fit(list(data[variable].values)) # data[variable] = lbl.transform(list(data[variable].values))for variable in data.columns: if variable not in encode_cat_variables: data[variable] = data[variable].apply(float) else: data[variable] = data[variable].apply(str)print(data.shape)data = pd.get_dummies(data)print(data.shape) (2915, 78) (2915, 343) 12# å¯ä»¥è®¡ç®—ä¸€ä¸ªæ€»é¢ç§¯æŒ‡æ ‡data['TotalSF'] = data['TotalBsmtSF'] + data['1stFlrSF'] + data['2ndFlrSF'] 12print("Categorical Features: %d"%len(encode_cat_variables))print("Numerical Features: %d"%len(numerical_features)) Categorical Features: 46 Numerical Features: 32 æ•°å€¼å‹å˜é‡çš„åˆ†å¸ƒ 123456789#Boxplot for numerical_featuressns.set_style("whitegrid")f, ax = plt.subplots(figsize=(15, 15))ax.set_xscale("log")ax = sns.boxplot(data=data[numerical_features] , orient="h", palette="ch:2.5,-.2,dark=.3")ax.set(ylabel="Features")ax.set(xlabel="Value")ax.set(title="Distribution")sns.despine(trim=True, left=True) box-coxå˜æ¢Box-Coxå˜æ¢æ˜¯Boxå’ŒCoxåœ¨1964å¹´æå‡ºçš„ä¸€ç§å¹¿ä¹‰å¹‚å˜æ¢æ–¹æ³•ï¼Œç”¨äºè¿ç»­çš„å“åº”å˜é‡ä¸æ»¡è¶³æ­£æ€åˆ†å¸ƒçš„æƒ…å†µã€‚Box-Coxå˜æ¢ä¹‹åï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå‡å°ä¸å¯è§‚æµ‹çš„è¯¯å·®å’Œé¢„æµ‹å˜é‡çš„ç›¸å…³æ€§ã€‚Box-Coxå˜æ¢çš„ä¸»è¦ç‰¹ç‚¹æ˜¯å¼•å…¥ä¸€ä¸ªå‚æ•°ï¼Œé€šè¿‡æ•°æ®æœ¬èº«ä¼°è®¡è¯¥å‚æ•°è¿›è€Œç¡®å®šåº”é‡‡å–çš„æ•°æ®å˜æ¢å½¢å¼ 123# è®¡ç®—æ•°å€¼å‹å˜é‡çš„åæ€skewed_features = data[numerical_features].apply(lambda x: skew(x.dropna())).sort_values(ascending=False)skewed_features MiscVal 21.932147 PoolArea 18.701829 LotArea 13.123758 LowQualFinSF 12.080315 3SsnPorch 11.368094 KitchenAbvGr 4.298845 BsmtFinSF2 4.142863 EnclosedPorch 4.000796 ScreenPorch 3.943508 BsmtHalfBath 3.942892 MasVnrArea 2.600697 OpenPorchSF 2.529245 WoodDeckSF 1.848285 1stFlrSF 1.253011 LotFrontage 1.092709 GrLivArea 0.977860 BsmtFinSF1 0.974138 BsmtUnfSF 0.920135 2ndFlrSF 0.843237 TotRmsAbvGrd 0.749579 Fireplaces 0.725958 HalfBath 0.698770 TotalBsmtSF 0.662657 BsmtFullBath 0.622820 BedroomAbvGr 0.328129 GarageArea 0.217748 OverallQual 0.181902 FullBath 0.159917 GarageCars -0.219402 YearRemodAdd -0.449113 YearBuilt -0.598087 GarageYrBlt -3.903046 dtype: float64 123456789skewed_features = skewed_features[abs(skewed_features) &gt; 0.75]print("There are &#123;&#125; skewed numerical features to Box Cox transform".format(skewed_features.shape[0]))from scipy.special import boxcox1pskewed_features_name = skewed_features.indexlam = 0.15 # è¶…å‚æ•°for feat in skewed_features_name: tranformer_feat = boxcox1p(data[feat], lam) data[feat] = tranformer_featdata[numerical_features].apply(lambda x: skew(x.dropna())).sort_values(ascending=False) There are 20 skewed numerical features to Box Cox transform PoolArea 16.487849 3SsnPorch 8.918476 LowQualFinSF 8.737917 MiscVal 5.592866 BsmtHalfBath 3.798589 KitchenAbvGr 3.695780 ScreenPorch 2.975708 BsmtFinSF2 2.561989 EnclosedPorch 2.023182 TotRmsAbvGrd 0.749579 Fireplaces 0.725958 HalfBath 0.698770 TotalBsmtSF 0.662657 MasVnrArea 0.636713 BsmtFullBath 0.622820 2ndFlrSF 0.329999 BedroomAbvGr 0.328129 WoodDeckSF 0.225571 GarageArea 0.217748 OverallQual 0.181902 LotArea 0.178523 1stFlrSF 0.173668 FullBath 0.159917 GrLivArea 0.102287 OpenPorchSF 0.100679 GarageCars -0.219402 YearRemodAdd -0.449113 BsmtFinSF1 -0.488447 YearBuilt -0.598087 LotFrontage -0.808022 BsmtUnfSF -1.536727 GarageYrBlt -3.922152 dtype: float64 123456789#Boxplot for numerical_featuressns.set_style("whitegrid")f, ax = plt.subplots(figsize=(15, 15))ax.set_xscale("log")ax = sns.boxplot(data=data[numerical_features] , orient="h", palette="ch:2.5,-.2,dark=.3")ax.set(ylabel="Features")ax.set(xlabel="Value")ax.set(title="Distribution")sns.despine(trim=True, left=True) ç‰¹å¾å¤„ç†å®Œåå¯ä»¥å°†æ•°æ®å†åˆ†å‰²å¼€ï¼š 12train = data[:size_train_df]test = data[size_train_df:] å»ºæ¨¡æ„å»ºç®—æ³•æ¨¡å‹ï¼Œå¸¸ç”¨çš„å‡ ä¸ªç®—æ³•æ¨¡å‹éƒ½è¯•è¯•ï¼Œç„¶åè®¾ç½®äº¤å‰æ£€éªŒ: 12345678910from sklearn.linear_model import ElasticNet, Lasso, BayesianRidge, LassoLarsICfrom sklearn.ensemble import RandomForestRegressor, GradientBoostingRegressorfrom sklearn.kernel_ridge import KernelRidgefrom sklearn.pipeline import make_pipelinefrom sklearn.preprocessing import RobustScalerfrom sklearn.base import BaseEstimator, TransformerMixin, RegressorMixin, clonefrom sklearn.model_selection import KFold, cross_val_score, train_test_splitfrom sklearn.metrics import mean_squared_errorimport xgboost as xgbimport lightgbm as lgb å®šä¹‰ä¸€ä¸ªäº¤å‰è¯„ä¼°å‡½æ•° 123456#Validation functionn_folds = 5def rmsle_cv(model): kf = KFold(n_folds, shuffle=True, random_state=42).get_n_splits(train.values) rmse= np.sqrt(-cross_val_score(model, train.values, target_variable, scoring="neg_mean_squared_error", cv = kf)) return(rmse) LASSOå›å½’(LASSO Regression)é‡‡ç”¨äº†L1èŒƒæ•°ï¼Œå³ç»å¯¹å€¼ä¹‹å’Œã€‚æ³¨ï¼šå½“æ•°æ®åŒ…å«è®¸å¤šå¼‚å¸¸å€¼ï¼Œä½¿ç”¨å‡å€¼å’Œæ–¹å·®ç¼©æ”¾å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ robust_scale ä»¥åŠ RobustScaler ä½œä¸ºæ›¿ä»£å“ã€‚ 123lasso = make_pipeline(RobustScaler(), Lasso(alpha =0.0005, random_state=1))score = rmsle_cv(lasso)print("\nLasso score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Lasso score: 0.1101 (0.0058) å²­å›å½’ï¼ˆKernel Ridge Regressionï¼‰é‡‡ç”¨äº†L2èŒƒæ•°ï¼Œå³å¹³æ–¹å’Œã€‚ 123KRR = make_pipeline(RobustScaler(), KernelRidge(alpha=0.6, kernel='polynomial', degree=2, coef0=2.5))score = rmsle_cv(KRR)print("\nLasso score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Lasso score: 0.1152 (0.0043) å¼¹æ€§ç½‘ç»œå›å½’(Elastic Net Regression)ElasticNet æ˜¯ä¸€ç§ä½¿ç”¨L1å’ŒL2å…ˆéªŒä½œä¸ºæ­£åˆ™åŒ–çŸ©é˜µçš„çº¿æ€§å›å½’æ¨¡å‹,å¼¹æ€§ç½‘ç»œæ˜¯ç»“åˆäº†å²­å›å½’å’ŒLassoå›å½’ï¼Œç”±ä¸¤è€…åŠ æƒå¹³å‡æ‰€å¾—ã€‚https://www.jianshu.com/p/65a573b9fe32 123ENet = make_pipeline(RobustScaler(), ElasticNet(alpha=0.0005, l1_ratio=.9, random_state=3))score = rmsle_cv(ENet)print("\nLasso score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Lasso score: 0.1100 (0.0059) ç»„åˆæ¨¡å‹ç°åœ¨å¸¸ç”¨çš„ç»„åˆæ¨¡å‹æœ‰æå‡æ ‘(Gradient Boosting Regression)ã€XGBoostã€LightGBM ç­‰æå‡æ ‘(Gradient Boosting Regression): 123456GBoost = GradientBoostingRegressor(n_estimators=3000, learning_rate=0.05, max_depth=4, max_features='sqrt', min_samples_leaf=15, min_samples_split=10, loss='huber', random_state=5)score = rmsle_cv(GBoost)print("\nLasso score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Lasso score: 0.1164 (0.0082) XGBoost 12345678model_xgb = xgb.XGBRegressor(colsample_bytree=0.4603, gamma=0.0468, learning_rate=0.05, max_depth=3, min_child_weight=1.7817, n_estimators=2200, reg_alpha=0.4640, reg_lambda=0.8571, subsample=0.5213, silent=1, random_state =7, nthread = -1)score = rmsle_cv(model_xgb)print("\nLasso score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Lasso score: 0.1172 (0.0053) LightGBM 12345678model_lgb = lgb.LGBMRegressor(objective='regression',num_leaves=5, learning_rate=0.05, n_estimators=720, max_bin = 55, bagging_fraction = 0.8, bagging_freq = 5, feature_fraction = 0.2319, feature_fraction_seed=9, bagging_seed=9, min_data_in_leaf =6, min_sum_hessian_in_leaf = 11)score = rmsle_cv(model_lgb)print("\nLasso score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Lasso score: 0.1162 (0.0060) å¯»æ‰¾æœ€ä¼˜å‚æ•°é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼æ¥çœ‹çœ‹å¦‚ä½•å¯»æ‰¾æ¨¡å‹æœ€ä¼˜å‚æ•° 123alphas = [0.00005, 0.0001, 0.0005, 0.001, 0.005, 0.01]cv_ridge_score = [rmsle_cv(make_pipeline(RobustScaler(), Lasso(alpha=alpha, random_state=1))).mean() for alpha in alphas] 1234cv_ridge = pd.Series(cv_ridge_score, index = alphas)cv_ridge.plot(title = "Validation - Just Do It")plt.xlabel("alpha")plt.ylabel("rmse") Text(0, 0.5, &apos;rmse&apos;) å‡ ä¸ªåŸºç¡€æ¨¡å‹é¢„æµ‹å€¼çš„æ¯”è¾ƒ: 1234567train_size = int(len(train)*0.7)X_train = train.values[:train_size]X_test = train.values[train_size:]y_train = target_variable[:train_size]y_test = target_variable[train_size:]GBoost.fit(X_train, y_train)ENet.fit(X_train, y_train) Pipeline(memory=None, steps=[(&apos;robustscaler&apos;, RobustScaler(copy=True, quantile_range=(25.0, 75.0), with_centering=True, with_scaling=True)), (&apos;elasticnet&apos;, ElasticNet(alpha=0.0005, copy_X=True, fit_intercept=True, l1_ratio=0.9, max_iter=1000, normalize=False, positive=False, precompute=False, random_state=3, selection=&apos;cyclic&apos;, tol=0.0001, warm_start=False))]) æ®‹å·®å›¾ 123preds = pd.DataFrame(&#123;"preds":GBoost.predict(X_test), "true":y_test&#125;)preds["residuals"] = preds["true"] - preds["preds"]preds.plot(x = "preds", y = "residuals",kind = "scatter") &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f8c1a72aef0&gt; 123preds = pd.DataFrame(&#123;"preds":ENet.predict(X_test), "true":y_test&#125;)preds["residuals"] = preds["true"] - preds["preds"]preds.plot(x = "preds", y = "residuals",kind = "scatter") &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f8c1a6ed128&gt; 1234xgb_preds = np.expm1(GBoost.predict(X_test))lasso_preds = np.expm1(ENet.predict(X_test))predictions = pd.DataFrame(&#123;"xgb":xgb_preds, "lasso":lasso_preds&#125;)predictions.plot(x = "xgb", y = "lasso", kind = "scatter") &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f8c00ba9d30&gt; é›†æˆå­¦ä¹ (æ¨¡å‹èåˆ)Stacking models æ˜¯æŒ‡é€šè¿‡å°†å¤šä¸ªæ¨¡å‹è¿›è¡Œé›†æˆä»¥å–å¾—æ›´å°é¢„æµ‹æ–¹å·®çš„æ–¹æ³•, é€šè¿‡å‰é¢çš„ä¸¤ä¸ªæ¨¡å‹æ®‹å·®å›¾çš„åˆ†å¸ƒå¯ä»¥å‘ç°å…·æœ‰ä¸€å®šçš„äº’è¡¥æ€§ï¼Œæ‰€ä»¥è¿™æ‰æ˜¯èåˆçš„ç›®çš„ï¼Œå°†ä»–çš„æ®‹å·®åˆ†å¸ƒå˜å¾—æ›´å‡åŒ€ã€‚å¹³å‡æ¨¡å‹ 12345678910111213141516171819class AveragingModels(BaseEstimator, RegressorMixin, TransformerMixin): def __init__(self, models): self.models = models # we define clones of the original models to fit the data in def fit(self, X, y): self.models_ = [clone(x) for x in self.models] # Train cloned base models for model in self.models_: model.fit(X, y) return self #Now we do the predictions for cloned models and average them def predict(self, X): predictions = np.column_stack([ model.predict(X) for model in self.models_ ]) return np.mean(predictions, axis=1) 123averaged_models = AveragingModels(models = (ENet, GBoost, KRR, lasso))score = rmsle_cv(averaged_models)print(" Averaged base models score: &#123;:.4f&#125; (&#123;:.4f&#125;)\n".format(score.mean(), score.std())) Averaged base models score: 0.1081 (0.0056) å †å æ¨¡å‹(Stacking Averaged Models)å…¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯åŸºå‡†æ¨¡å‹ï¼Œä¸€éƒ¨åˆ†æ˜¯å›å½’æ¨¡å‹ï¼šåŸºå‡†æ¨¡å‹å’Œå¤§é‡æ•°æ®ç»„åˆé¢„æµ‹ä¸€å †ç»“æœï¼Œç„¶åæ ¹æ®é¢„æµ‹ç»“æœé€šè¿‡å›å½’æ¨¡å‹é¢„æµ‹å’ŒçœŸå®å€¼çš„å·®å¼‚ã€‚å…·ä½“å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031class StackingAveragedModels(BaseEstimator, RegressorMixin, TransformerMixin): def __init__(self, base_models, meta_model, n_folds=5): self.base_models = base_models self.meta_model = meta_model self.n_folds = n_folds def fit(self, X, y): self.base_models_ = [list() for x in self.base_models] self.meta_model_ = clone(self.meta_model) # å¤åˆ¶åŸºå‡†æ¨¡å‹ï¼Œå› ä¸ºè¿™é‡Œä¼šæœ‰å¤šä¸ªæ¨¡å‹ kfold = KFold(n_splits=self.n_folds, shuffle=True, random_state=156) # è®­ç»ƒåŸºå‡†æ¨¡å‹ï¼ŒåŸºäºåŸºå‡†æ¨¡å‹è®­ç»ƒçš„ç»“æœå¯¼å‡ºæˆç‰¹å¾ # that are needed to train the cloned meta-model out_of_fold_predictions = np.zeros((X.shape[0], len(self.base_models))) for i, model in enumerate(self.base_models): for train_index, holdout_index in kfold.split(X, y): #åˆ†ä¸ºé¢„æµ‹å’Œè®­ç»ƒ instance = clone(model) self.base_models_[i].append(instance) instance.fit(X[train_index], y[train_index]) y_pred = instance.predict(X[holdout_index]) out_of_fold_predictions[holdout_index, i] = y_pred # å°†åŸºå‡†æ¨¡å‹é¢„æµ‹æ•°æ®ä½œä¸ºç‰¹å¾ç”¨æ¥ç»™meta_modelè®­ç»ƒ self.meta_model_.fit(out_of_fold_predictions, y) return self def predict(self, X): meta_features = np.column_stack([ np.column_stack([model.predict(X) for model in base_models]).mean(axis=1) for base_models in self.base_models_ ]) return self.meta_model_.predict(meta_features) 1234567from sklearn.linear_model import LinearRegressionmeta_model = LinearRegression()stacked_averaged_models = StackingAveragedModels(base_models = (ENet, GBoost, KRR, lasso), meta_model = meta_model, n_folds=10)score = rmsle_cv(stacked_averaged_models)print("Stacking Averaged models score: &#123;:.4f&#125; (&#123;:.4f&#125;)".format(score.mean(), score.std())) Stacking Averaged models score: 0.1086 (0.0060) å‚è€ƒèµ„æ–™https://www.kaggle.com/serigne/stacked-regressions-top-4-on-leaderboardhttps://www.kaggle.com/jolasa/eda-anda-data-preparation-7th-placehttps://www.kaggle.com/apapiu/regularized-linear-models]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>kaggle</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>kaggle</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NLPæ•°æ®é›†ä»‹ç»]]></title>
    <url>%2F2019%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2FNLP%E6%95%B0%E6%8D%AE%E9%9B%86%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[ä¸­æ–‡è¯å‘é‡è…¾è®¯AI Lab è¯å‘é‡ å¼€æºä¸­æ–‡è¯å‘é‡ å®ä½“è¯†åˆ«ä¸é“¾æŒ‡CCKS 2019 ä¸­æ–‡çŸ­æ–‡æœ¬çš„å®ä½“é“¾æŒ‡ é“¾æ¥: https://pan.baidu.com/s/1PIqV0l8tr1SLxfBRSpsHJw æå–ç : 58i4]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ•°æ®é›†</tag>
        <tag>NLP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HEXO MathJax éƒ¨åˆ†æ¸²æŸ“å‡ºé”™é—®é¢˜è§£å†³]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fhexo-mathjax-%E9%83%A8%E5%88%86%E6%B8%B2%E6%9F%93%E5%87%BA%E9%94%99%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%2F</url>
    <content type="text"><![CDATA[hexo çš„éƒ¨åˆ†mathjax åœ¨æ¸²æŸ“çš„æ—¶å€™ç”±äºè¢« markdown è‡ªèº«çš„è½¬ä¹‰ä¼šå‡ºç°æ¸²æŸ“é”™è¯¯çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š 1$$\alpha_&#123;t&apos; t&#125; = \text&#123;softmax&#125;(\sigma(\boldsymbol&#123;s&#125;_&#123;t&apos; - 1&#125;, \boldsymbol&#123;h&#125;_t))$$ åœ¨hexoä¸­ä¼šæ˜¾ç¤ºä¸ºï¼š$$\alpha{tâ€™ t} = \text{softmax}(\sigma(\boldsymbol{s}{tâ€™ - 1}, \boldsymbol{h}_t))$$ è¿™æ˜¯ç”±äºhexoåœ¨å¤„ç†è½¬ä¹‰é€ æˆçš„ï¼Œ_æ˜¯æ–œä½“ï¼Œä½†æ˜¯åœ¨latexä¸­ï¼Œå´æœ‰ä¸‹æ ‡çš„æ„æ€ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œ\\çš„æ¢è¡Œï¼Œåœ¨markdownä¸­ï¼Œ\\ä¼šè¢«è½¬ä¹‰ä¸º\,è¿™æ ·ä¹Ÿä¼šå½±å“å½±å“mathjaxå¯¹å…¬å¼ä¸­çš„\\è¿›è¡Œæ¸²æŸ“ï¼Œç½‘ä¸Šå¾ˆå¤šäººçš„å»ºè®®æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­å»æ”¹Hexoä¸­çš„é€ƒé€¸å­—ç¬¦ï¼Œå¦‚ï¼šhttps://segmentfault.com/a/1190000007261752http://wangwlj.com/2017/09/21/markdown_mathjax/ å…¶å®è¿™æ ·çš„åšæ³•å¹¶ä¸ä¼˜é›…ï¼Œå¦‚æœåœ¨æŸç§æƒ…å†µé‡åˆ°éœ€è¦ç”¨åˆ°è¿™ç§é€ƒé€¸å­—ç¬¦çš„æ—¶å€™ï¼Œå°±ä¼šå¤±æ•ˆï¼Œå®˜æ–¹æ¨èçš„æ˜¯ç”¨{\% raw \%}MathJax{\% endraw \%}æ¥è§£å†³ $$\alpha_{t' t} = \text{softmax}(\sigma(\boldsymbol{s}_{t' - 1}, \boldsymbol{h}_t))$$]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å‘½ä»¤å·¥å…·</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆCGO]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E6%B5%85%E8%B0%88CGO%2F</url>
    <content type="text"><![CDATA[C è¯­è¨€ä½œä¸ºæœ€å¤è€çš„ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ï¼Œå…¶å…·æœ‰å¤§é‡çš„é«˜æ€§èƒ½çš„å‡½æ•°åº“ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æä¾›äº†C è¯­è¨€çš„è°ƒç”¨æ¥å£ï¼ŒGO ä½œä¸ºæ–°æ—¶ä»£çš„å¼€æ‹“è€…ï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œ CGO å°±æ˜¯ä¸€ä¸ªæä¾› GO å’Œ C ç›¸äº’è°ƒç”¨çš„æ¡¥æ¢å·¥å…·ã€‚ CGO çš„åŸºæœ¬è¯­æ³•åœ¨ GO ä¸­è°ƒç”¨ Cï¼š123456789package main//#include &lt;stdio.h&gt;import &quot;C&quot;func main() &#123; C.puts(C.CString(&quot;vim-go&quot;))&#125; ç›´æ¥åœ¨goçš„æºç é‡Œé¢åŠ å…¥import &quot;C&quot;å°±å¯ä»¥å¯¼å…¥CGOã€‚åœ¨import &quot;C&quot;å‰é¢çš„æ³¨é‡Šä¼šè¢«é»˜è®¤æˆ C ä»£ç ï¼ˆä¸èƒ½ç©ºè¡Œï¼Œå¿…é¡»åœ¨é¡¶è¡Œç›¸è¿ï¼‰è¿™é‡Œçš„ â€œCâ€ ä¸æ˜¯åŒ…åï¼Œè€Œæ˜¯ä¸€ç§ç±»ä¼¼åå­—ç©ºé—´çš„æ¦‚å¿µï¼Œæˆ–å¯ä»¥ç†è§£ä¸ºä¼ªåŒ…ï¼ŒCè¯­è¨€æ‰€æœ‰è¯­æ³•å…ƒç´ å‡åœ¨è¯¥ä¼ªåŒ…ä¸‹é¢å¦‚C.uintã€C.printã€C.freeç­‰ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>CGO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jupyter-notebookåšå¹»ç¯ç‰‡]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fjupyter-notebook%E5%81%9A%E5%B9%BB%E7%81%AF%E7%89%87%2F</url>
    <content type="text"><![CDATA[è®¾ç½®å¹»ç¯ç‰‡è®¾ç½®å¹»ç¯ç‰‡ï¼š å¯åŠ¨å¹»ç¯ç‰‡æœåŠ¡ï¼š jupyter nbconvert notebook.ipynb â€“to slides â€“post serve åˆ©ç”¨IFrameæ¥åŠ è½½ç½‘é¡µå¼€å¯è·¨åŸŸè¯·æ±‚è®¾ç½®ï¼š jupyter notebook â€“generate-config åœ¨ç”¨æˆ·ç›®å½•ä¸‹æ‰¾åˆ°.jupyter/jupyter_notebook_config.py12345c.NotebookApp.tornado_settings = &#123; &apos;headers&apos;: &#123; &apos;Content-Security-Policy&apos;: &quot;frame-ancestors self *; report-uri /api/security/csp-report&quot; &#125; &#125;]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>jupyter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[golangæ€§èƒ½æµ‹è¯•åŠä¼˜åŒ–(ä¸Š)]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2Fgolang%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%8F%8A%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[ä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—ä½œä¸ºæµ‹è¯•ç”¨ä¾‹:1234567891011121314package fibfunc Fib(n int) int &#123; switch n &#123; case 0: return 0 case 1: return 1 case 2: return 2 default: return Fib(n-1) + Fib(n-2) &#125;&#125; æ€§èƒ½æµ‹è¯•Benchmarksçš„ç”¨æ³•å’Œå•å…ƒæµ‹è¯•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨çš„testingï¼Œæ€§èƒ½æµ‹è¯•ç”¨*testing.Bä»£æ›¿*testing.T å•å…ƒæµ‹è¯•æ—¥å¿— æ–¹æ³• è¯´æ˜ Log æ‰“å°æ—¥å¿—ï¼ŒåŒæ—¶ç»“æŸæµ‹è¯• Logf æ ¼å¼åŒ–æ‰“å°æ—¥å¿—ï¼ŒåŒæ—¶ç»“æŸæµ‹è¯• Error æ‰“å°é”™è¯¯æ—¥å¿—ï¼ŒåŒæ—¶ç»“æŸæµ‹è¯• Errorf æ ¼å¼åŒ–æ‰“å°é”™è¯¯æ—¥å¿—ï¼ŒåŒæ—¶ç»“æŸæµ‹è¯• Fatal æ‰“å°è‡´å‘½æ—¥å¿—ï¼ŒåŒæ—¶ç»“æŸæµ‹è¯• Fatalf æ ¼å¼åŒ–æ‰“å°è‡´å‘½æ—¥å¿—ï¼ŒåŒæ—¶ç»“æŸæµ‹è¯• ä»¥ä¸Šæ–¹æ³•testing.Bä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ ç¼–å†™æ€§èƒ½æµ‹è¯•fib_test.go:1234567891011package fibimport ( &quot;testing&quot;)func BenchmarkFib20(b *testing.B) &#123; for n := 0; n &lt; b.N; n++ &#123; Fib(20) // run the Fib function b.N times &#125;&#125; è¿è¡Œgo test -bench=., ç»“æœï¼š goos: linux goarch: amd64 BenchmarkFib20-8 50000 37932 ns/op PASS Windows ä¸‹ä½¿ç”¨ go test å‘½ä»¤è¡Œæ—¶ï¼Œ-bench=.åº”å†™ä¸º-bench=&quot;.&quot; å‚æ•°-cpuè¡¨ç¤ºå¼€å¯CPUçš„æ ¸æ•°ï¼Œé€šè¿‡GOMAXPROCSè¿›è¡Œæ§åˆ¶ï¼Œæ¯”å¦‚-cpu=1,2,4è¡¨ç¤ºåˆ†åˆ«å¼€å¯1æ ¸ã€2æ ¸ã€4æ ¸è¿›è¡Œæµ‹è¯•ï¼š $ go test -bench=. -cpu=1,2,4 goos: linux goarch: amd64 BenchmarkFib20 50000 36877 ns/op BenchmarkFib20-2 50000 36843 ns/op BenchmarkFib20-4 30000 36231 ns/op å‚æ•°-benchtimeå¯ä»¥è®©æˆ‘ä»¬è‡ªå·±æ§åˆ¶æµ‹è¯•çš„æ—¶é—´ï¼Œæ¯”å¦‚: $ go test -bench=. -benchtime=3s goos: linux goarch: amd64 BenchmarkFib20-8 100000 46070 ns/op PASS ok _/home/shikanon/study/fib 5.018s ä½ ä¼šå‘ç°æ€»çš„è¿è¡Œæ—¶é—´å¹¶ä¸æ˜¯3sï¼Œè€Œä¸”ä¸åŒçš„è¿è¡Œå…¶æ—¶é—´ä¼šæœ‰å·®å¼‚ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºç”±äºGCæ´»åŠ¨ã€åå°è¿è¡Œç¨‹åºã€å†…å­˜ä½ç½®ã€CPUçš„è°ƒæ•´é¢‘ç‡æ‰€å½±å“ã€‚ ä¸ºäº†è·å¾—ç¨³å®šçš„ç»Ÿè®¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨-countå‚æ•°æ¥è·å¾—å¤šæ¬¡æµ‹è¯•ã€‚ $ go test -bench=. -count=10 goos: linux goarch: amd64 BenchmarkFib20-8 50000 38395 ns/op BenchmarkFib20-8 50000 37019 ns/op BenchmarkFib20-8 50000 36974 ns/op BenchmarkFib20-8 50000 41050 ns/op BenchmarkFib20-8 50000 36131 ns/op BenchmarkFib20-8 30000 37317 ns/op BenchmarkFib20-8 30000 42872 ns/op BenchmarkFib20-8 30000 41711 ns/op BenchmarkFib20-8 50000 36517 ns/op BenchmarkFib20-8 50000 40240 ns/op PASS ok _/home/shikanon/study/fib 20.996s æ¥ä¸‹æ¥å¯ä»¥åˆ©ç”¨benchstatåŒ…è®¡ç®—å¹³å‡å€¼ï¼Œbenchstatæ˜¯å®˜æ–¹prefé¡¹ç›®ä¸­çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥åšå„ç§æ€§èƒ½æµ‹è¯•çš„åˆ†æï¼Œæ¯”å¦‚è®¡ç®—å¤šæ¬¡æµ‹è¯•çš„å¹³å‡å€¼æ ¸æ–¹å·®ï¼š $benchstat old.txt name time/op Fib20-8 39.4Âµs Â±13% ps:ç”±äºprefæ˜¯golang/xä¸­çš„åŒ…ï¼Œæˆ‘ä»¬éœ€è¦git cloneä¸‹è½½ä¸‹æ¥ï¼Œç„¶ååˆ°benchstatç›®å½•ä¸‹åšç¼–è¯‘go build -o $GOROOT/bin/benchstat main.go ä¹Ÿå¯ä»¥ç”¨æ¥è®¡ç®—ä¸¤ç§ä¸åŒæ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œçœ‹ä»–ä»¬çš„på€¼æ˜¯å¦æ˜¾è‘—ã€‚åœ¨å¯¹æ¯”ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„ç”¨ä¾‹æ—¶å¯ä»¥ç”¨go test -cç”ŸæˆäºŒè¿›åˆ¶æµ‹è¯•æ–‡ä»¶ã€‚ ./fib2.test -bench=. -test.count=10 &gt; old.txt ./fib.test -bench=. -test.count=10 &gt; new.txt $ benchstat old.txt new.txt name old time/op new time/op delta Fib20-8 44.3Âµs Â± 6% 25.6Âµs Â± 2% -42.31% (p=0.000 n=10+10) å…³äº golang çš„ for range çš„æ€§èƒ½æ¯”è¾ƒåœ¨æ½œæ„è¯†ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè§‰å¾—éå†ä¸€ä¸ªæ•°ç»„ä¼šæ›´æ…¢ï¼Œä½†ç”±äºfor rangeéå†çš„æ—¶å€™ä¸éœ€è¦å¯¹å¯¹ä¸‹æ ‡è¶Šç•Œçš„åˆ¤æ–­ï¼Œå› æ­¤æ€§èƒ½ä¼šæ¯”éå†åˆ¤æ–­æ›´å¥½äº›ã€‚ 123456789101112131415161718192021222324package mainimport ( &quot;testing&quot;)func BenchmarkArray(b *testing.B) &#123; var a = 0 for i := 0; i &lt; b.N; i++ &#123; var times [100][0]int for range times &#123; a += 1 &#125; &#125;&#125;func BenchmarkInt(b *testing.B) &#123; var a = 0 for i := 0; i &lt; b.N; i++ &#123; for i := 0; i &lt; 100; i++ &#123; a += 1 &#125; &#125;&#125; ï¼ˆæ³¨ï¼š[100][0]intç±»å‹çš„æ•°ç»„ç”±äºå…ƒç´ [0]intçš„å†…å­˜ä¸º0ï¼Œå³ä½¿ç¬¬ä¸€ç»´æ•°ç»„æœ‰é•¿åº¦ä¹Ÿä¸éœ€è¦ä»˜å‡ºé¢å¤–çš„ä»£ä»·ï¼‰ æµ‹è¯•ç»“æœï¼š go test -bench=. goos: windows goarch: amd64 BenchmarkArray-8 50000000 36.1 ns/op BenchmarkInt-8 20000000 65.9 ns/op PASS æˆ‘ä»¬å¯ä»¥çœ‹å‡º for rangeä¸€ä¸ªç©ºæ•°ç»„æ¯”forè¦å¿«ä¸€å€ã€‚ åˆ‡ç‰‡é«˜æ•ˆåˆ é™¤æŒ‡å®šå…ƒç´ æ“ä½œåˆ©ç”¨äº†é›¶é•¿åˆ‡ç‰‡çš„ç‰¹æ€§ï¼Œå®ç°é«˜æ•ˆåˆ é™¤æŠ€å·§ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950func TrimSpaceWithAssignment(s []byte) []byte &#123; var b = make([]byte, len(s)) for i, x := range s &#123; if x != &apos; &apos; &#123; b[i] = x &#125; &#125; return b&#125;func TrimSpaceWithNil(s []byte) []byte &#123; var b = make([]byte, 0, len(s)) for _, x := range s &#123; if x != &apos; &apos; &#123; b = append(b, x) &#125; &#125; return b&#125;func TrimSpaceWithOrigin(s []byte) []byte &#123; b := s[:0] for _, x := range s &#123; if x != &apos; &apos; &#123; b = append(b, x) &#125; &#125; return b&#125;func BenchmarkAssignment(b *testing.B) &#123; s := []byte(&quot;asdf asdf sa fd dsa f d&quot;) for i := 0; i &lt; b.N; i++ &#123; TrimSpaceWithAssignment(s) &#125;&#125;func BenchmarkNilSlice(b *testing.B) &#123; s := []byte(&quot;asdf asdf sa fd dsa f d&quot;) for i := 0; i &lt; b.N; i++ &#123; TrimSpaceWithNil(s) &#125;&#125;func BenchmarkOrignSlice(b *testing.B) &#123; s := []byte(&quot;asdf asdf sa fd dsa f d&quot;) for i := 0; i &lt; b.N; i++ &#123; TrimSpaceWithOrigin(s) &#125;&#125; æµ‹è¯•ç»“æœï¼š go test -bench=. goos: windows goarch: amd64 BenchmarkAssignment-8 30000000 43.7 ns/op BenchmarkNilSlice-8 30000000 47.6 ns/op BenchmarkOrignSlice-8 50000000 22.7 ns/op å‚è€ƒhttps://dave.cheney.net/high-performance-go-workshop/dotgo-paris.htmlhttps://github.com/chai2010/advanced-go-programming-book/blob/master/ch1-basic/ch1-03-array-string-and-slice.md]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ±½è½¦å¤§æ•°æ®:å¤©çœ¼çŒäº§å“çŸ©é˜µä»‹ç»]]></title>
    <url>%2F2019%2F%E6%9E%B6%E6%9E%84%2F%E6%B1%BD%E8%BD%A6%E5%A4%A7%E6%95%B0%E6%8D%AE-%E5%A4%A9%E7%9C%BC%E7%8C%8E%E4%BA%A7%E5%93%81%E7%9F%A9%E9%98%B5%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[å¤©çœ¼çŒä¸»è¦ç”±ä¸‰ä¸ªäº§å“çŸ©é˜µç»„æˆï¼Œæä¾›ç»™ç»é”€å•†ã€äºŒæ‰‹è½¦å•†çš„å¤©çœ¼çŒ-æ½œå®¢åˆ†æå¹³å°å·¥å…·ï¼Œç”¨äºæä¾›ç»™ç”¨æˆ·åšç”¨æˆ·å¹¿å‘Šè§¦è¾¾çš„å¤©çœ¼çŒ-ç²¾å‡†æŠ•æ”¾å¹³å°ï¼Œè¿˜æœ‰ä¸€æ¬¾2Cçš„äº§å“å¤©çœ¼çŒ-è½¦è½¦æ‹¼å°ç¨‹åºã€‚ å¤©çœ¼çŒ-æ½œå®¢åˆ†æå¹³å°ä¸ºç”¨æˆ·æä¾›äº†å¸‚åœºåˆ†æã€ç”¨æˆ·ç”»åƒã€æ¸ é“ç›‘æµ‹ç­‰åŠŸèƒ½ã€‚ å¤©çœ¼çŒ-ç²¾å‡†æŠ•æ”¾å¹³å°ç²¾å‡†æŠ•æ”¾å¹³å°ä¸»è¦æä¾›äº†æŠ•æ”¾è½¦å‹ã€ç¤¾ä¼šå±æ€§ã€æŠ•æ”¾æ—¶é—´æ®µå’ŒæŠ•æ”¾åœ°åŸŸç­‰ç‰¹å¾ã€‚ å¤©çœ¼çŒ-è½¦è½¦æ‹¼å°ç¨‹åºè½¦è½¦æ‹¼æ˜¯ä¸€æ¬¾ç”¨äºæ²Ÿé€šâ€œæ‹¼å›¢â€è´­å…¥æ–°è½¦çš„å°ç¨‹åºå¹³å°ï¼Œä¸»è¦ç”¨äºç»™ç»é”€å•†åšçº¿ä¸Šæ´»åŠ¨æ¨å¹¿å’Œæ‹¼å›¢æ´»åŠ¨ã€‚]]></content>
      <categories>
        <category>éšç¬”æ—¥å¿—</category>
        <category>é¡¹ç›®ç®¡ç†</category>
      </categories>
      <tags>
        <tag>é¡¹ç›®ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ„å»ºè‡ªå·±çš„Pythonå¼€æºåŒ…]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84Python%E5%BC%80%E6%BA%90%E5%BA%93%2F</url>
    <content type="text"><![CDATA[è¦èå…¥ç¤¾åŒºï¼Œç¬¬ä¸€æ­¥å½“ç„¶æ˜¯è¦æ’°å†™ä¸€ä¸ªè‡ªå·±çš„åŒ…ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸»è¦åˆ†ä¸ºäº”æ­¥ï¼š é¡¹ç›®åˆ›å»º æ­å»ºè™šæ‹Ÿè¿è¡Œç¯å¢ƒ ç¼–å†™é¡¹ç›®ä»£ç  ç¼–å†™å®‰è£…è„šæœ¬ ä¸Šä¼ PyPi GIT åˆ›å»ºé¡¹ç›®åˆ›å»ºé¡¹ç›®ï¼Œç¡®å®šé¡¹ç›®åç§°ï¼Œdescription, licenseç­‰ï¼š é¡¹ç›®åœ°å€ï¼šhttps://github.com/shikanon/BaiduMapAPI æ­å»ºè™šæ‹Ÿç¯å¢ƒæˆ‘ä»¬åœ¨æ­å»ºè‡ªå·±çš„åº“çš„æ—¶å€™ï¼Œæ˜¯å¸Œæœ›æœ‰ä¸€ä¸ªå¹²å‡€çš„é¡¹ç›®ç¯å¢ƒçš„ï¼Œè¿™æ—¶å€™virtualenvå°±å¾ˆæœ‰ç”¨äº†ï¼Œé‡‡ç”¨ virtualev æ­å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥æ–¹ä¾¿ä¸ºåé¢ç”Ÿæˆç§æœ‰é¡¹ç›®çš„ requirement.txt ä¾èµ–åŒ…æ–‡ä»¶ã€‚ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ1virtualev venv å¯ç”¨ virtualev :1source venv/Script/activate æ„å»ºé¡¹ç›®ä»£ç ç®€å•ï¼Œå¿«é€Ÿæ„å»ºæ¡†æ¶åŸå‹å’Œéª¨æ¶ï¼Œè®°å¾—åŒ…ä¹‹é—´éœ€è¦ __init__.py æ–‡ä»¶ï¼Œåé¢åœ¨ç¼–å†™setup.pyä¹Ÿä¼šå¾ˆæœ‰ç”¨ã€‚é¡¹ç›®ç»“æ„ï¼š æ„å»ºå¥½æ¶æ„åï¼Œå¯ä»¥å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼Œpytestæ˜¯ä¸ªç®€å•æ˜“ç”¨çš„åº“ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®Œæˆå•å…ƒæµ‹è¯•æ„å»ºã€‚ æ„å»ºå®‰è£…è„šæœ¬ï¼Œç¼–å†™ setup.py æ–‡ä»¶å®Œæˆä»£ç æ„å»ºå’Œæµ‹è¯•å°±å¯ä»¥å¼€å§‹è¿›å…¥æ„å»ºå®‰è£…åŒ…ç¯èŠ‚ã€‚Pythonä¸‰æ–¹åº“å®‰è£…å¸¸ç”¨çš„ä¸»è¦æœ‰ä¸¤ç§æ¨¡å¼ï¼šä¸€ç§æ˜¯ç›´æ¥ä» github ä¸Š clone ä¸‹æ¥ç”¨ setup.py å®‰è£…ï¼Œå¦ä¸€ç§æ˜¯ç”¨ pip install æ¥å®‰è£…ã€‚ä¸¤ç§å®‰è£…æ–¹æ³•éƒ½æ˜¯éœ€è¦ç¼–å†™ setup.py æ–‡ä»¶çš„ã€‚ å¯¹äºç¬¬ä¸€ç§æ–¹æ³•æˆ‘ä»¬åœ¨å®‰è£…å‰ä¸€èˆ¬è¿˜è¦æä¾›å®‰è£…çš„ä¾èµ–åŒ…ï¼Œ ä¹Ÿå°±æ˜¯requirement.txtæ–‡ä»¶ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ pip freeze å‘½ä»¤ç”Ÿæˆï¼š 1pip freeze &gt; requirement.txt å› ä¸ºæˆ‘ä»¬æ˜¯é‡‡ç”¨æ–°å»ºçš„è™šæ‹Ÿç¯å¢ƒå¼€å‘ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æŠŠç¯å¢ƒä¸­çš„ä¸‰æ–¹åº“å¯¼å…¥åˆ°requirement.txt æ–‡ä»¶ä¸­ã€‚ æ„å»ºå¥½ requirement.txtåï¼Œå°±å¯ä»¥ç¼–å†™å®‰è£…è„šæœ¬ã€‚è¿™é‡Œé‡‡ç”¨äº†setuptoolsç¼–å†™å®‰è£…è„šæœ¬ï¼ŒSetuptoolsæ˜¯ä¸€ä¸ªåŒ…å¼€å‘è¿‡ç¨‹åº“ï¼Œå…¶å¢å¼ºPythonæ ‡å‡†åº“distutilsï¼Œä½¿å¾—æ‰“åŒ…Pythoné¡¹ç›®æ›´ç®€å•ã€‚ setup.pyæ–‡ä»¶æ¡ˆä¾‹ï¼š 123456789101112131415161718192021222324252627282930from setuptools import Command, find_packages, setup__lib_name__ = &quot;BaiduMapAPI&quot;__lib_version__ = &quot;0.1.1&quot;__description__ = &quot;The Package of Baidu Map, with unofficial&quot;__url__ = &quot;https://github.com/shikanon/BaiduMapAPI&quot;__author__ = &quot;shikanon&quot;__author_email__ = &quot;account@shikanon.com&quot;__license__ = &quot;MIT&quot;__keywords__ = [&quot;Baidu&quot;, &quot;map&quot;]__requires__ = [&quot;requests&quot;,]with open(&quot;README.rst&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f: __long_description__ = f.read()setup( name = __lib_name__, version = __lib_version__, description = __description__, url = __url__, author = __author__, author_email = __author_email__, license = __license__, packages = find_packages(exclude=(&quot;tests&quot;, &quot;exmaple&quot;)), install_requires = __requires__, zip_safe = False, include_package_data = True, data_files = [(&quot;BaiduMapAPI/data&quot;, [&quot;BaiduMapAPI/data/BaiduMap_cityCode_1102.txt&quot;])], long_description = __long_description__) name åŒ…åç§°version ç‰ˆæœ¬å·description åŒ…æè¿°url åŒ…åœ°å€license æˆæƒä¿¡æ¯packages éœ€è¦å¤„ç†çš„åŒ…ç›®å½•ï¼Œä¹Ÿå°±æ˜¯åŒ…å«__init__.pyçš„æ–‡ä»¶å¤¹install_requires éœ€è¦å®‰è£…çš„ä¾èµ–åŒ…data_files å¯ä»¥ç”¨äºå¼•å…¥ä¸€äº›é¢å¤–çš„ä¿¡æ¯æ–‡ä»¶å’Œæ•°æ®ï¼Œå¦‚å›¾ç‰‡ã€é…ç½®æ–‡ä»¶ï¼Œ [(&#39;æ–‡ä»¶è¦æ”¾å…¥çš„æ–‡ä»¶å¤¹1&#39;,[&#39;file1&#39;,file2&#39;]),(&#39;æ–‡ä»¶è¦æ”¾å…¥çš„æ–‡ä»¶å¤¹2&#39;,[&#39;file3&#39;,file4&#39;])] ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡æœ€ååœ¨æ–‡ä»¶è¦æ”¾çš„ä½ç½®/ç›®å½•ï¼Œå¦‚æœç©ºå­—ç¬¦ï¼Œè¡¨ç¤ºæ”¾åœ¨æ ¹ç›®å½•ï¼Œç¬¬äºŒä¸ªå…ƒç´ æŒ‡åŸæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ã€‚long_description åŒ…çš„è¯¦ç»†æè¿°ï¼Œåç»­ä¸Šä¼ åˆ°pypiï¼Œå¯ä»¥ç”¨äºæ˜¾ç¤ºåœ¨ä¸»é¡µä¸Šçš„æè¿° find_packages():è¿™ä¸ªå‡½æ•°ä¼šé»˜è®¤åœ¨å’Œsetup.pyåŒä¸€ç›®å½•ä¸‹æœç´¢å„ä¸ªå«æœ‰init.pyçš„åŒ…ã€‚é™¤äº†é€šè¿‡data_filesæ·»åŠ æ•°æ®åŒ…æ–‡ä»¶ï¼Œè¿˜å¯ä»¥é€šè¿‡package_dataè®¾ç½®å¯ä»¥è¢«find_packagesæ‰¾åˆ°æ·»åŠ çš„æ–‡ä»¶ï¼š 12345packages = find_packages(exclude=(&quot;tests&quot;, &quot;exmaple&quot;)), # æ‰€æœ‰åŒ…é™¤äº†testså’Œexmaplepackage_data = &#123; &apos;&apos;: [&apos;*.csv&apos;], # ä»»ä½•åŒ…ä¸­å«æœ‰.csvæ–‡ä»¶ï¼Œéƒ½åŒ…å«å®ƒ &apos;data&apos;: [&apos;data/*.dat&apos;], # åŒ…å«dataåŒ…dataæ–‡ä»¶å¤¹ä¸­çš„ *.datæ–‡ä»¶&#125; å†™å¥½setup.pyæ–‡ä»¶ï¼Œå¯ä»¥python setupy installè¿›è¡Œå®‰è£…æµ‹è¯•ã€‚ æ³¨å†Œ pypi å¹¶ä¸Šä¼ è‡ªå·±çš„åº“ç¼–å†™å¥½å®‰è£…è„šæœ¬ï¼Œå°±å¯ä»¥ä¸Šä¼ PyPiï¼Œå½“ç„¶ï¼Œä¸Šä¼ å‰è¦å…ˆçœ‹çœ‹ä¸Šé¢æ˜¯å¦å·²ç»æœ‰ç¼–å†™å¥½çš„ç›¸å…³åº“äº†ã€‚å¦‚æœå¾ˆå¹¸è¿æ²¡æœ‰ï¼Œé‚£ä¹ˆå¯ä»¥å¼€å§‹ä¸Šä¼ è‡ªå·±çš„åŒ…äº†ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨twineååŠ©ä¸Šä¼ ã€‚ é¦–å…ˆï¼Œå®ŒæˆPyPiçš„è´¦æˆ·æ³¨å†Œã€‚ åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º.pypircæ–‡ä»¶ï¼Œ Linuxåœ¨$HOMEåˆ›å»º.pypircï¼Œ Windowsåœ¨%HOMEDRIVE%ä¸‹åˆ›å»º.pypircï¼ŒåŠ å…¥ï¼š 1234567891011121314[distutils]index-servers = pypi pypitest[pypi]repository: https://upload.pypi.org/legacy/username: è´¦æˆ·password: å¯†ç [pypitest]repository: https://test.pypi.org/legacy/username: è´¦æˆ·password: å¯†ç  å®‰è£…twine: pip install twine åˆ›å»ºï¼š python setup.py sdist bdist_wheel ä¸Šä¼ PyPi: twine upload dist/* ä¸Šä¼ æˆåŠŸåå¯ä»¥è¿è¡Œpip installå‘½ä»¤æµ‹è¯•ã€‚ ç¼–å†™æ–‡æ¡£ç¼–å†™README.mdå’Œè¯´æ˜æ–‡æ¡£docsï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨sphinxåº“æ¥åˆ›å»ºæ–‡æ¡£æ¶æ„ï¼Œsphinxæ˜¯ä¸€ä¸ªæ™ºèƒ½ã€æ¼‚äº®çš„æ–‡æ¡£ç”Ÿæˆå·¥å…·ã€‚ åˆå§‹åŒ–docsæ–‡ä»¶å¤¹1sphinx-quickstart ç¼–å†™rstæ–‡ä»¶ï¼Œè¿è¡Œmake htmlå³å¯ç”Ÿæˆhtmlæ–‡æ¡£, rstæ–‡æ¡£ä¾‹å­ï¼š1234567891011121314151617Welcome to BaiduMapAPI&apos;s documentation!=======================================.. toctree:: :caption: Basic concepts :hidden: api dataset Indices and tables==================* :ref:`genindex`* :ref:`modindex`* :ref:`search` æ³¨ï¼šå¦‚æœå·²ç»æœ‰é…ç½®æ–‡ä»¶äº†ï¼Œå¯ä»¥ç”¨sphinx-buildæ¥æŒ‡å®šç”Ÿæˆç›®å½•sphinx-build -b html source/ build/ ä¸Šä¼ githubæœ€åä¸Šä¼ åˆ° githubï¼Œè¿™æ ·ä¸€ä¸ªå®Œæ•´çš„ Python ä¸‰æ–¹åŒ…çš„å¼€æºå®Œæˆäº†ã€‚ Windowsä¸Šå¾—ä¸­æ–‡PythonäºŒè¿›åˆ¶åŒ…èµ„æºï¼šhttps://www.lfd.uci.edu/~gohlke/pythonlibs/]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆï¼šGolang å¹¶å‘]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E6%B5%85%E8%B0%88%EF%BC%9A%E5%B9%B6%E5%8F%91%2F</url>
    <content type="text"><![CDATA[è¿›ç¨‹ä¸çº¿ç¨‹æ¦‚å¿µ åœ¨é¢å‘è¿›ç¨‹è®¾è®¡çš„ç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹(process)æ˜¯ç¨‹åºçš„åŸºæœ¬æ‰§è¡Œå®ä½“ï¼›åœ¨å½“ä»£é¢å‘çº¿ç¨‹è®¾è®¡çš„è®¡ç®—æœºç»“æ„ä¸­ï¼Œè¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨ã€‚è¿›ç¨‹æ˜¯ç¨‹åº(æŒ‡ä»¤å’Œæ•°æ®)çš„çœŸæ­£è¿è¡Œå®ä¾‹ã€‚ç”¨æˆ·ä¸‹è¾¾è¿è¡Œç¨‹åºçš„å‘½ä»¤åï¼Œå°±ä¼šäº§ç”Ÿè¿›ç¨‹ã€‚åŒä¸€ç¨‹åºå¯äº§ç”Ÿå¤šä¸ªè¿›ç¨‹ï¼ˆä¸€å¯¹å¤šå…³ç³»ï¼‰ï¼Œä»¥å…è®¸åŒæ—¶æœ‰å¤šä½ç”¨æˆ·è¿è¡ŒåŒä¸€ç¨‹åºï¼Œå´ä¸ä¼šç›¸å†²çªã€‚ çº¿ç¨‹(thread)æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹åˆ†ä¸ºå†…æ ¸çº¿ç¨‹ã€è½»é‡çº§è¿›ç¨‹ã€ç”¨æˆ·çº¿ç¨‹ï¼›å†…æ ¸çº¿ç¨‹æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†…æ ¸è°ƒåº¦çš„çº¿ç¨‹ï¼Œå¦‚Win32çº¿ç¨‹ï¼›ç”¨æˆ·çº¿ç¨‹æ˜¯ç”±ç”¨æˆ·è¿›ç¨‹è‡ªè¡Œè°ƒåº¦çš„çº¿ç¨‹ï¼Œå¦‚Linuxå¹³å°çš„POSIX Thread; è½»é‡çº§è¿›ç¨‹(LWP)æ˜¯å»ºç«‹åœ¨å†…æ ¸ä¹‹ä¸Šå¹¶ç”±å†…æ ¸æ”¯æŒçš„ç”¨æˆ·çº¿ç¨‹ã€‚ ã€å†…æ ¸çº¿ç¨‹ã€‘&lt;-&gt;ã€è½»é‡çº§è¿›ç¨‹ã€‘&lt;-&gt;ã€ç”¨æˆ·çº¿ç¨‹ã€‘ åœ¨ç”¨æˆ·ç©ºé—´æ¨¡æ‹Ÿæ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹çš„è°ƒåº¦ï¼Œæ¥è°ƒç”¨ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªè¿è¡Œæ—¶ç³»ç»Ÿï¼Œç”¨æ¥è°ƒåº¦çº¿ç¨‹ã€‚æ­¤æ—¶å½“è¯¥è¿›ç¨‹è·å–cpuæ—¶ï¼Œè¿›ç¨‹å†…å†è°ƒåº¦å‡ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ å†…æ ¸çº§çº¿ç¨‹:åˆ‡æ¢ç”±å†…æ ¸æ§åˆ¶ï¼Œå½“çº¿ç¨‹è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™ï¼Œç”±ç”¨æˆ·æ€è½¬åŒ–ä¸ºå†…æ ¸æ€ã€‚åˆ‡æ¢å®Œæ¯•è¦ä»å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€ã€‚ ç³»ç»Ÿè°ƒåº¦ çº¿ç¨‹æœ¬è´¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ç³»åˆ—çš„æŒ‡ä»¤é›†ã€‚ çº¿ç¨‹ä¸€èˆ¬åˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼š é˜»å¡æ€ï¼šè¡¨ç¤ºçº¿ç¨‹å·²ç»åœæ­¢ï¼Œéœ€è¦ç­‰å¾…ä¸€äº›äº‹æƒ…å‘ç”Ÿåæ‰å¯ç»§ç»­ã€‚è¿™æœ‰å¾ˆå¤šç§åŸå› ï¼Œæ¯”å¦‚éœ€è¦ç­‰å¾…ç¡¬ä»¶ï¼ˆç£ç›˜æˆ–ç½‘ç»œï¼‰ï¼Œç³»ç»Ÿè°ƒç”¨ï¼Œæˆ–è€…äº’æ–¥é”ï¼ˆatomic, mutexesï¼‰ã€‚è¿™ç±»æƒ…å†µå¯¼è‡´çš„å»¶è¿Ÿï¼Œå¾€å¾€æ˜¯æ€§èƒ½ä¸ä½³çš„æ ¹æœ¬åŸå› ã€‚ å°±ç»ªæ€ï¼šè¿™ä»£è¡¨çº¿ç¨‹æƒ³è¦ä¸€ä¸ª CPU æ ¸æ¥æ‰§è¡Œè¢«åˆ†é…çš„æœºå™¨æŒ‡ä»¤ã€‚å¦‚æœä½ æœ‰å¾ˆå¤šä¸ªçº¿ç¨‹éœ€è¦ CPUï¼Œé‚£ä¹ˆçº¿ç¨‹å°±ä¸å¾—ä¸ç­‰å¾…æ›´é•¿æ—¶é—´ã€‚æ­¤æ—¶ï¼Œå› ä¸ºè®¸å¤šçš„çº¿ç¨‹éƒ½åœ¨äº‰ç”¨ CPUï¼Œæ¯ä¸ªçº¿ç¨‹å¾—åˆ°çš„è¿è¡Œæ—¶é—´ä¹Ÿå°±ç¼©çŸ­äº†ã€‚ è¿è¡Œæ€ï¼šè¿™è¡¨ç¤ºçº¿ç¨‹å·²ç»è¢«åˆ†é…äº†ä¸€ä¸ª CPU æ ¸ï¼Œæ­£åœ¨æ‰§è¡Œå®ƒçš„æŒ‡ä»¤ã€‚ä¸åº”ç”¨ç›¸å…³çš„å·¥ä½œæ­£åœ¨è¢«å®Œæˆã€‚è¿™æ˜¯æ¯ä¸ªäººéƒ½æƒ³è¦çš„çŠ¶æ€ã€‚ CPUå¯†é›†å‹ä»»åŠ¡å’ŒIOå¯†é›†å‹ä»»åŠ¡CPUå¯†é›†å¤„ç†ä»»åŠ¡ä¸­çº¿ç¨‹å¾ˆå°‘è¿›å…¥é˜»å¡æ€ã€‚å®ƒä¸€ç›´éƒ½éœ€è¦ä½¿ç”¨ CPUï¼Œå› æ­¤çº¿ç¨‹çš„åˆ‡æ¢å¹¶æ²¡æœ‰ç”¨ï¼Œç”šè‡³ä¼šäº§ç”Ÿè´Ÿé¢æ•ˆæœï¼Œä¸»è¦é€šè¿‡å¤šæ ¸å¹¶è¡Œæ¥è§£å†³é—®é¢˜ã€‚è¿™ç§å·¥ä½œé€šå¸¸éƒ½æ˜¯æ•°å­¦è®¡ç®—ã€‚æ¯”å¦‚è®¡ç®—åœ†å‘¨ç‡çš„ç¬¬ n ä½çš„å·¥ä½œå°±å±äº CPUå¯†é›†å‹çš„å·¥ä½œã€‚IOå¯†é›†ä»»åŠ¡çº¿ç¨‹ä¼šç»å¸¸è¿›å…¥é˜»å¡æ€ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚èµ„æºï¼Œæˆ–è€…ç³»ç»Ÿè°ƒç”¨ã€‚ä¸€ä¸ªéœ€è¦è®¿é—®æ•°æ®åº“çš„çº¿ç¨‹å±äº IOå¯†é›†çš„ã€‚äº’æ–¥é”çš„ä½¿ç”¨ä¹Ÿå±äºè¿™ç§ã€‚è¿™æ—¶å€™çº¿ç¨‹çš„åˆ‡æ¢æ¥æå‡å¹¶å‘é‡ã€‚ çº¿ç¨‹è°ƒåº¦å­˜åœ¨çš„é—®é¢˜æ˜‚è´µçš„ä»£ä»· ä¸Šä¸‹æ–‡åˆ‡æ¢ Cache Line å‘½ä¸­ç‡ ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯æŒ‡è°ƒåº¦å™¨æŠŠä¸€ä¸ªçº¿ç¨‹ä»CPUæ ¸ä¸Šæ‹¿ä¸‹æ¥ï¼ŒæŠŠå¦ä¸€ä¸ªå°±ç»ªæ€çš„çº¿ç¨‹æ”¾åˆ°CPUæ ¸ä¸Šã€‚çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶é—´ä¸€èˆ¬æ˜¯50~100nsï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå¦‚æœå¯¹äºè®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡é¢‘ç¹åˆ‡æ¢åè€Œä¼šå¯¼è‡´æ•ˆæœæ›´å·®ã€‚ Cache Line å‘½ä¸­ç‡ç”±äºè®¿é—®ä¸»å†…å­˜å¾ˆè€—æ—¶é—´ï¼ŒCPUå¤§éƒ¨åˆ†ä¼šè®¿é—®cacheï¼Œç°ä»£CPUç¼“å­˜ä¸€èˆ¬åˆ†ä¸ºäº†ä¸‰å±‚ã€‚ç¦»CPUè¶Šè¿œçš„ï¼Œå…¶è®¿é—®é€Ÿåº¦è¶Šæ…¢ã€‚å› æ­¤æé«˜ Cache Line å‘½ä¸­ç‡æ˜¯æé«˜æ€§èƒ½çš„å¾ˆé‡è¦çš„è€Œä¸€ç§æ–¹æ³•ï¼Œä¸€èˆ¬æ¥è¯´ä¼˜åŒ–ç¼“å­˜å¯ä»ä¸‰ä¸ªæ–¹é¢å…¥æ‰‹ï¼šä¸€ã€å‡å°‘å‘½ä¸­æ—¶é—´ï¼›äºŒã€é™ä½å¤±æ•ˆç‡ï¼›ä¸‰ã€å‡è½»å¤±æ•ˆä»£ä»·ã€‚ä½†æ˜¯ï¼Œå¯¹äºå¤šæ ¸ç³»ç»Ÿæ¥è¯´ï¼Œå¤šçº¿ç¨‹åœ¨æ¯ä¸ªæ ¸éƒ½æœ‰ä¸€ä»½å®ƒè‡ªå·±æ‰€éœ€è¦æ•°æ®çš„æ‹·è´ï¼Œéšç€ CPU æ ¸ä¸Šè¿è¡Œçš„çº¿ç¨‹çš„æ”¹å˜ï¼Œä¸åŒçš„çº¿ç¨‹éœ€è¦è®¿é—®çš„æ•°æ®ä¸åŒï¼Œä»è€Œå¯¼è‡´åŒä¸€ä¸ª cache line ä¸­çš„æ•°æ®è¢«ä¿®æ”¹äº†ï¼Œå…¶ä»–æ‰€æœ‰æ ¸ä¸Šçš„ cache line æ‹·è´éƒ½æ ‡è®°ä¸ºâ€œä¸å¯ç”¨â€ï¼Œå½“å…¶ä»–æ ¸ä¸Šçš„çº¿ç¨‹è¯•å›¾è®¿é—®æˆ–ä¿®æ”¹è¿™ä¸ªæ•°æ®æ—¶ï¼Œéœ€è¦é‡æ–°ä»ä¸»å†…å­˜ä¸Šæ‹·è´æœ€æ–°çš„æ•°æ®åˆ°è‡ªå·±çš„ cache ä¸­ã€‚ Goroutine çš„æ¨¡å‹è®¾è®¡ Pï¼šæ˜¯ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨çš„æ¦‚å¿µï¼Œå½“Pæœ‰ä»»åŠ¡æ—¶éœ€è¦åˆ›å»ºæˆ–è€…å”¤é†’ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹æ¥æ‰§è¡Œå®ƒé˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼Œæ‰€ä»¥P/Mç»‘å®šæ„æˆä¸€ä¸ªæ‰§è¡Œå•å…ƒã€‚å½“ä½ çš„ Go ç¨‹åºå¯åŠ¨ä¹‹åˆï¼Œå®ƒä¼šè¢«åˆ†é…ä¸€ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œæ¯ä¸€ä¸ª P ä¼šè¢«åˆ†é…ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹(M)ã€‚è¿™ä¸ª M ä¼šè¢«æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼Œæ“ä½œç³»ç»ŸæŠŠçº¿ç¨‹(M)æ”¾åˆ°ä¸€ä¸ª CPU Core ä¸Šå»æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¢«ç»‘å®šä¸Šäº†ä¸€ä¸ªç‹¬ç«‹çš„ P ã€‚ Mï¼šæ˜¯ä¸€ä¸ªçº¿ç¨‹æˆ–ç§°ä¸ºMachineï¼Œæ‰€æœ‰Mæ˜¯æœ‰çº¿ç¨‹æ ˆçš„ã€‚ Gï¼šè¡¨ç¤ºä¸€ä¸ªGoroutineã€‚ æ‰§è¡Œé˜Ÿåˆ—åœ¨ Go è°ƒåº¦å™¨ä¸­æœ‰ 2 ä¸ªä¸åŒçš„æ‰§è¡Œé˜Ÿåˆ—ï¼šå…¨å±€é˜Ÿåˆ—ï¼ˆGlobal Run Queue, ç®€ç§° GRQï¼‰å’Œæœ¬åœ°é˜Ÿåˆ—ï¼ˆLocal Run Queueï¼Œç®€ç§° LRQï¼‰ã€‚æ¯ä¸€ä¸ª P éƒ½ä¼šæœ‰ä¸€ä¸ª LRQ æ¥ç®¡ç†åˆ†é…ç»™ P ä¸Šçš„ Goroutineã€‚è¿™äº› Goroutine è½®æµè¢«äº¤ä»˜ç»™ M æ‰§è¡Œã€‚GRQ æ˜¯ç”¨æ¥ä¿å­˜è¿˜æ²¡æœ‰è¢«åˆ†é…åˆ° P çš„ Goroutineã€‚LRQæ˜¯ Lock-Free çš„ï¼Œå¤„ç†é€Ÿåº¦å¿«ï¼›GRQä¸ºä¿è¯æ•°æ®ç«äº‰é—®é¢˜ï¼Œéœ€è¦åŠ é”å¤„ç†ï¼Œé€Ÿåº¦æ¯”LRQæ…¢ï¼Œå› æ­¤ P å¤„ç†å®ŒLRQçš„æ—¶å€™ä¼šå…ˆæ‰¾å…¶ä»– P çš„LRQï¼Œæœ€åå†å»æ‰¾GRQã€‚ goroutineé˜Ÿåˆ—è°ƒåº¦12345678runtime.schedule() &#123; // only 1/61 of the time, check the global runnable queue for a G. // if not found, check the local queue. // if not found, // try to steal from other Ps. // if not, check the global runnable queue. // if not found, poll network.&#125; Goroutineè°ƒåº¦ä¸ºä½•æ›´å¥½ï¼Ÿ Goçš„è°ƒåº¦æ˜¯åŸºäºç”¨æˆ·æ€äº‹ä»¶è€ŒéæŠ¢å å¼çš„ï¼Œæ¯”å¦‚å…³é”®å­—goã€åƒåœ¾å›æ”¶ã€åŒæ­¥äº’æ–¥æ“ä½œå¦‚Lock() Unlock()ã€‚ Goé€šè¿‡å°½å¯èƒ½å¤šåœ¨Mä¸Šæ¥è¿è¡Œgoroutineï¼Œä»è€Œæé«˜CPUçš„åˆ©ç”¨ç‡ï¼ŒGoé€šè¿‡â€spinning threadsâ€æœ€å°åŒ–ç³»ç»Ÿçº¿ç¨‹çš„åˆ‡æ¢ã€‚ åˆ©ç”¨gorountineå¯ä»¥é¿å…ç³»ç»Ÿçº¿ç¨‹çš„åˆ‡æ¢ï¼Œä»è€Œæé«˜Cache Line å‘½ä¸­ç‡ã€‚ çº¿ç¨‹çš„stack sizeæ›´å¤§(â‰¥ 1MB)ï¼Œè€Œgorountineå¾—stack sizeåªæœ‰2KBï¼Œå¯åŠ¨æ›´æ…¢ã€‚ å‚è€ƒæ–‡çŒ®https://www.cnblogs.com/Eva-J/articles/8306047.html#_label7 http://www.imooc.com/article/42071 http://baijiahao.baidu.com/s?id=1587634508058779877&amp;wfr=spider&amp;for=pc https://rakyll.org/scheduler/ https://www.ardanlabs.com/blog/2018/08/scheduling-in-go-part2.html]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>GO</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹è¯­è¨€</tag>
        <tag>Golang</tag>
        <tag>å¹¶å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…èŠå…³äº nginx çš„ rewrite]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2F%E6%B5%85%E8%81%8A%E5%85%B3%E4%BA%8E-nginx-%E7%9A%84-rewrite%2F</url>
    <content type="text"><![CDATA[rewriteç”¨æ³•rewriteç”¨æ³•12Syntax: rewrite regex replacement [flag];Context: server, location, if rewriteçš„ä¸»è¦æ”¾åœ¨serverã€locationæˆ–è€…ifä¸­ã€‚ è¯­æ³•ï¼š rewrite æ­£åˆ™è¡¨è¾¾å¼ æ›¿æ¢å†…å®¹ [æ ‡è¯†ç¬¦] rewriteæ ‡è¯†ç¬¦ä¸»è¦åŒ…å«å››ç§ï¼š123456789101112- laststops processing the current set of ngx_http_rewrite_module directives and starts a search for a new location matching the changed URI;å®Œæˆè¯¥rewriteè§„åˆ™çš„æ‰§è¡Œåï¼Œåœæ­¢å¤„ç†åç»­rewriteæŒ‡ä»¤é›†ï¼›ç„¶åæŸ¥æ‰¾åŒ¹é…æ”¹å˜åURIçš„æ–°locationï¼›- breakstops processing the current set of ngx_http_rewrite_module directives as with the break directive;å®Œæˆè¯¥rewriteè§„åˆ™çš„æ‰§è¡Œåï¼Œåœæ­¢å¤„ç†åç»­rewriteæŒ‡ä»¤é›†ï¼Œå¹¶ä¸å†é‡æ–°æŸ¥æ‰¾ï¼›ä½†æ˜¯å½“å‰locationå†…å‰©ä½™érewriteè¯­å¥å’Œlocationå¤–çš„çš„érewriteè¯­å¥å¯ä»¥æ‰§è¡Œï¼›- redirectreturns a temporary redirect with the 302 code; used if a replacement string does not start with â€œhttp://â€, â€œhttps://â€, or â€œ$schemeâ€;è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼Œåœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„åœ°å€ï¼›- permanentreturns a permanent redirect with the 301 code.è¿”å›301æ°¸ä¹…é‡å®šå‘ï¼Œåœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„åœ°å€ï¼›å³è¡¨ç¤ºå¦‚æœå®¢æˆ·ç«¯ä¸æ¸…ç†æµè§ˆå™¨ç¼“å­˜ï¼Œé‚£ä¹ˆè¿”å›çš„ç»“æœå°†æ°¸ä¹…ä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­äº†ã€‚ 1ï¼‰lastä¸€èˆ¬å†™åœ¨serverå’Œifä¸­ï¼Œè€Œbreakä¸€èˆ¬ä½¿ç”¨åœ¨locationä¸­ï¼›2ï¼‰lastä¸ç»ˆæ­¢é‡å†™åçš„urlåŒ¹é…ï¼Œå³æ–°çš„urlä¼šå†ä»serverèµ°ä¸€éåŒ¹é…æµç¨‹ï¼Œè€Œbreakç»ˆæ­¢é‡å†™åçš„åŒ¹é…ï¼›3ï¼‰breakå’Œlastéƒ½èƒ½ç»„ç»‡ç»§ç»­æ‰§è¡Œåé¢çš„rewriteæŒ‡ä»¤ã€‚ æ­£åˆ™è¡¨è¾¾å¼å’Œå˜é‡æ›¿æ¢å†…å®¹$1å’Œ$2è¡¨ç¤ºå‰é¢åŒ¹é…çš„ç¬¬ä¸€ä¸ªæ‹¬å·å’Œç¬¬äºŒä¸ªæ‹¬å·çš„å†…å®¹ï¼Œç±»ä¼¼äºPythonçš„reæ¨¡å—çš„findallå‘½ä»¤ï¼Œæ¯”å¦‚ä¸‹é¢ä¾‹å­1rewrite &apos;^/([0-9]&#123;4&#125;)/\d+/\d+/(.*)$&apos; &apos;/$1/$2&apos; last; $1è¡¨ç¤º([0-9]{4})åŒ¹é…æ‰€å¾—åˆ°çš„å€¼;$2è¡¨ç¤º(.*)åŒ¹é…æ‰€å¾—åˆ°çš„å€¼ï¼› ^è¡¨ç¤ºä»¥æ­¤ä¸ºå¼€å¤´çš„å®Œå…¨åŒ¹é…$è¡¨ç¤ºä»¥æ­¤ä¸ºç»“å°¾çš„å®Œå…¨åŒ¹é…]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éšç¬”:åˆ›ä¸šè¿™ä¸€å¹´é‚£äº›äº‹(2)]]></title>
    <url>%2F2019%2F%E6%9E%B6%E6%9E%84%2F%E9%9A%8F%E7%AC%94-%E5%88%9B%E4%B8%9A%E8%BF%99%E4%B8%80%E5%B9%B4%E9%82%A3%E4%BA%9B%E4%BA%8B-2%2F</url>
    <content type="text"><![CDATA[ç®¡ç†ç¯‡åœ¨åˆ›ä¸šè¿‡ç¨‹ä¸­ï¼Œæœ€æ ¸å¿ƒçš„æ˜¯â€œäººâ€ï¼Œå› æ­¤å›¢é˜Ÿæ­å»ºçš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ å›¢é˜Ÿæ­å»ºé—®é¢˜æ€»ç»“ï¼š 1ã€å‘˜å·¥é—´çš„è–ªèµ„å¹³è¡¡æœ‰æ—¶å€™ä¼šä¸¥é‡å½±å“å¯¹ä¼˜ç§€äººæ‰çš„å¼•è¿›å’Œå›¢é˜Ÿå‡çº§ã€‚ å…¶å®è¿™ä¸ªç‚¹å°±æ˜¯ä¼ è¯´ä¸­æ–°äººè¿›æ¥å·¥èµ„å€’æŒ‚é—®é¢˜ï¼Œç”±äºå›¢é˜Ÿæ¯”è¾ƒå°ï¼Œå¤§å®¶ç»å¸¸æ··è¿¹åœ¨ä¸€èµ·ï¼Œå¦‚æœå‘˜å·¥ä¹‹é—´çš„å¾…é‡ä»æš—åœ°é‡Œèµ°åˆ°æ˜é¢ä¸Šçš„è¯ï¼Œé‚£ä¹ˆå½“éœ€è¦æ‹›è˜ä¸€ä¸ªæ›´ä¼˜ç§€çš„æ–°äººçš„æ—¶å€™ï¼Œå›¢é˜Ÿçš„ç»“æ„å°±ä¼šå¼€å§‹å˜å¾—ä¸ç¨³å®šã€‚ç‰¹åˆ«å¯¹äºåˆ›ä¸šåˆæœŸï¼Œæ•´ä¸ªå›¢é˜Ÿç»“æ„ååˆ†å¾—æ‰å¹³åŒ–å¾—æ—¶å€™ï¼ŒAå’ŒBå¹²å¾—æ˜¯ç›¸ä¼¼å¾—æ´»ï¼Œå¦‚æœBæ¯”Aé«˜å‡ºäº†ä¸€æˆªï¼Œé‚£ä¹ˆAå¿…ç„¶ä¼šæ„¤æ„¤ä¸å¹³ï¼Œè™½ç„¶åœ¨æ½œåŠ›ä¸ŠBæ¯”Aè¦å¥½å¾ˆå¤šã€‚ 2ã€å¤§é‡ä½¿ç”¨å®ä¹ ç”Ÿï¼Œè™½ç‰©ç¾ä»·å»‰ï¼Œä½†å¦‚æœæ²¡æœ‰ç®¡ç†å¥½äººå’Œä»£ç è´¨é‡ï¼Œåœ¨å¹³å‡¡ç¦»èŒæ‹›è˜å¾ªç¯ä¸­ä¼šç»™å›¢é˜Ÿå¸¦æ¥å¤§é‡å¾—éšæ€§æˆæœ¬æŸå¤± åˆ›ä¸šå›¢é˜Ÿåœ¨å‰æœŸä½¿ç”¨å®ä¹ ç”Ÿå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶æˆæœ¬ï¼Œä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å…¶å®å­˜åœ¨ç€éšæ€§æˆæœ¬ï¼ŒåŒ…æ‹¬ä¸¤å¤§å—ï¼šæŠ€æœ¯åŸ¹è®­æˆæœ¬ã€ç¦»èŒäº¤æ¥æˆæœ¬ï¼›æŠ€æœ¯åŸ¹è®­æˆæœ¬å…¶å®å°±æ˜¯å¸¸è¯´çš„å¸¦äººï¼Œå¦‚æœä¸€ä¸ªå›¢é˜Ÿä¸­å¾ˆå¤šæ ¸å¿ƒéƒ¨åˆ†ä¹Ÿé€æ¸äº¤ç»™å®ä¹ ç”Ÿï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ”¾ä»»ä»–ä»¬è‡ªå·±å»åšï¼Œéœ€è¦åœ¨ä»£ç è§„èŒƒã€ç¼–ç¨‹èŒƒå¼ã€æŠ€æœ¯é€‰å‹ä¸Šåšå¥½æŠŠæ§ï¼Œè€Œè¿™æ ·å°±éœ€è¦æœ‰ç»éªŒçš„ç¨‹åºå‘˜æŒç»­åœ°è·Ÿè¿›ï¼Œè€Œè€ç¨‹åºå‘˜åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­çš„æŒ‡å¯¼æˆæœ¬æ˜¯ä¸€å—å¾ˆå¤§çš„éšæ€§æˆæœ¬ã€‚ç¬¬äºŒå—æ¯”è¾ƒå¤§çš„éšæ€§æˆæœ¬æ¥è‡³äºä¸ç¨³å®šå¯¼è‡´çš„ç¦»èŒç‡é«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ˜¥æ‹›å’Œç§‹æ‹›ä¹‹å­£ï¼Œå¦‚æœå›¢é˜Ÿçš„å‡èšåŠ›ä¸å¤Ÿé‚£ä¹ˆä¼šæœ‰ä¸€å¤§æ³¢çš„ç¦»èŒæ½®ã€‚å› æ­¤ï¼Œåœ¨æ‹›å¤§é‡ä»»ç”¨å®ä¹ ç”Ÿçš„æ—¶å€™]]></content>
      <categories>
        <category>éšç¬”æ—¥å¿—</category>
        <category>åˆ›ä¸š</category>
      </categories>
      <tags>
        <tag>é¡¹ç›®ç®¡ç†</tag>
        <tag>åˆ›ä¸š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éšç¬”:åˆ›ä¸šè¿™ä¸€å¹´é‚£äº›äº‹(1)]]></title>
    <url>%2F2019%2F%E6%9E%B6%E6%9E%84%2F%E9%9A%8F%E7%AC%94-%E5%88%9B%E4%B8%9A%E8%BF%99%E4%B8%80%E5%B9%B4%E9%82%A3%E4%BA%9B%E4%BA%8B-1%2F</url>
    <content type="text"><![CDATA[2018å¹´åˆï¼Œé‚£æ—¶å€™â€œä¸‰ç‚¹é’Ÿâ€ç¾¤ä¸€æ—¶ä¹‹é—´ç‚’çˆ†äº†å…¨å›½ï¼Œæ‰€æœ‰äººéƒ½å¸¦ç€ç‹‚çƒ­ï¼Œå¸‚åœºä¸€ç‰‡æ¬£æ¬£å‘è£çš„å…‰æ™¯ï¼Œå¹´è½»äººä»¬éƒ½è¢«â€œä¼˜ç§€çš„åŒé¾„äººâ€çš„ç„¦è™‘æ‰€ç¼ ç»•ã€‚ã€‚ã€‚ å¤§å¹´åˆä¸‰ï¼Œå¤§å®¶è¿˜éƒ½è¡æ¼¾åœ¨å¼€æ˜¥çš„å–œæ‚¦ä¸­ï¼ŒRioæ‰¾åˆ°æˆ‘ï¼Œè¯´å¸Œæœ›å¯ä»¥ç ”ç©¶ä¸‹åŒºå—é“¾æŠ€æœ¯ï¼Œé‚£æ—¶å€™æ­£å¥½å¯¹åŒºå—é“¾æ„Ÿå…´è¶£ï¼Œå¹´å‰è¿˜æ•´ç†è¿‡ä¸€ä»½åŒºå—é“¾æŠ€æœ¯åŸ¹è®­çš„èµ„æ–™ï¼Œå°±ç­”åº”ä¸‹æ¥äº†ã€‚è¿‡å®Œå¹´ï¼ŒRioå°±çº¦æˆ‘è¿‡å»å¼€ä¼šï¼Œä¼šåç»™æˆ‘ä»‹ç»äº†Frankieï¼Œä¹‹å‰ä¸€ä¸ªè·Ÿç”µä¿¡åˆä½œçš„å…¬å¸çš„è€æ¿ï¼Œä¹‹å‰æœ‰è¿‡ä¸€é¢ä¹‹ç¼˜ï¼Œäº’æ¢è¿‡åç‰‡ï¼Œä½†å½±å“å¹¶ä¸æ˜¯å¾ˆæ·±åˆ»ã€‚Frankieè§åˆ°æˆ‘ä¸€è¿‡æ¥å°±å¼€é—¨è§å±±ï¼Œè·Ÿæˆ‘è¯´å¸Œæœ›ä½ å¯ä»¥åŠ å…¥æˆ‘ä»¬å…¬å¸â€¦ Frankieæ‰¾åˆ°æˆ‘ï¼Œè¯´å¸Œæœ›èƒ½åŠ å…¥ä»–ä»¬å…¬å¸ä¸€èµ·åˆ›ä¸šï¼Œåšæ±½è½¦äº’è”ç½‘ã€‚å…¶å®å¯¹äºæ±½è½¦è¿™ä¸ªè¡Œä¸šæˆ‘ä¸€ç›´ä¸æ˜¯å¾ˆäº†è§£ï¼Œè™½ç„¶ä½œä¸ºä¸€ä¸ªç›´ç”·ï¼Œä½†æˆ‘æ˜¯å¾ˆå°‘äº†è§£æœ‰äº†è§£å…³æ³¨æ±½è½¦ï¼Œåœ¨å½±å“ä¸­å¥½åƒåªçŸ¥é“å®é©¬å¤§ä¼—ä¹‹ç±»çš„ã€‚ä½†é‚£æ—¶å€™å·²ç»æœ‰æ¢æ–°å·¥ä½œçš„æƒ³æ³•äº†ï¼Œæ¯•ç«Ÿåœ¨useeaseå‘†äº†ä¸‰å¹´å¤šäº†ï¼Œè€Œä¸”åŒæœŸè¿›æ¥çš„ä¼™ä¼´ä»¬ä¹Ÿéƒ½é—¯å—èµ°åŒ—å»äº†ï¼Œæƒ³äº†å¤§åŠä¸ªæœˆï¼ŒæœŸé—´ä¹Ÿå»è¿‡å…¬å¸ç®€å•è€ƒå¯Ÿè¿‡å°±ç­”åº”ä¸‹æ¥äº†ã€‚å…¶å®ï¼Œæœ€åè®©ä¸‹å†³å¿ƒæ˜¯ä¸¤ä¸ªå› ç´ ï¼Œä¸€ä¸ªæ˜¯Frankieç»™äººæ„Ÿè§‰è¿˜å¯ä»¥ï¼Œè™½ç„¶åœ¨æŠ€æœ¯ä¸Šä¸æ˜¯å¾ˆæ‡‚ï¼Œä½†ä¹Ÿæ„¿æ„å¬å–æ„è§ï¼›ä¸€ä¸ªæ˜¯è‡ªå·±æƒ³å‡ºå»é—¯é—¯ï¼Œæ¯•ç«Ÿâ€œå¤–é¢â€é—¹å¾—è¿™ä¹ˆçƒ­è…¾ï¼Œè€Œä¸”ä¹Ÿæƒ³é”¤ç‚¼ä¸‹è‡ªå·±çš„å…¨å±€èƒ½åŠ›ï¼Œæ¯•ç«Ÿåœ¨useeaseç®¡ç†è¿‡å›¢é˜Ÿä¹Ÿç ”ç©¶è¿‡æŠ€æœ¯ï¼Œä½†ä¸€ç›´æ²¡å°è¯•è¿‡ä»äº§å“åˆ°ç ”å‘å’Œè¿è¥çš„ä¸€æ•´å¥—æ‰“æ³•ã€‚ å®šåŸºè°ƒåˆ°å…¬å¸ç¬¬ä¸€ä»¶äº‹ï¼Œæˆ‘åšäº†æˆ˜ç•¥æ¡†æ¶çš„æ¢³ç†ï¼Œé¦–å…ˆå‘Frankieã€Jasonä¸¤ä½åˆ›å§‹äººäº†è§£äº†å…¬å¸çš„å®šä½â€”â€”æˆä¸ºä¸€å®¶ç±»ä¼¼äºåŸƒæ£®å“²çš„é›†å¹¿å‘Šä¸è¥é”€äºä¸€èº«çš„å’¨è¯¢ç±»ç§‘æŠ€å…¬å¸ã€‚æ—¢ç„¶å®šä¸‹äº†åŸºè°ƒï¼Œé‚£ä¹ˆå…ˆç¡®å®šæ ¸å¿ƒçš„ä¼˜åŠ¿ï¼Œä»å“ªé‡Œé‡ç‚¹åˆ‡å…¥ï¼Ÿå…¶å®ï¼Œåœ¨å½“æ—¶æˆ‘ä»¬å·²ç»è·Ÿè¿è¥å•†åˆä½œå¼€å‘äº†åŠå¹´å¤šäº†ï¼Œè¿™æ˜¯ä¸€å—å¾ˆå¤§çš„èµ„æœ¬ï¼Œæ‰€ä»¥ï¼Œåœ¨é‚£æ—¶å½’çº³èµ·æ¥å°±æ˜¯æ•°æ®ï¼Œé‚£ä¹ˆï¼Œæˆ‘æŠŠæŠ€æœ¯åŸºè°ƒå®šä½æ„å»ºä¸€å¥—è§„æ¨¡åºå¤§è€Œæœ‰ç”¨çš„æ±½è½¦å¤§æ•°æ®ä¸­å¿ƒã€‚ å…¶å®ï¼Œè¿™ä¸­é—´è¿˜æœ‰ä¸€ä¸ªå°æ’æ›²ã€‚è¿™é‡Œæš‚æ—¶ä¸ä»‹ç»ã€‚ å°æ’æ›²å°±è¯´åˆ°è¿™ï¼Œåé¢ä¹Ÿåšäº›å‰æœŸçš„æŠ€æœ¯è§„åˆ’å’Œæ€»ç»“ã€‚ æ­å»ºæŠ€æœ¯å›¢é˜ŸåŠæŠ€æœ¯é€‰å‹ç¬¬ä¸€æ¬¡ä»¥ä¸€å®¶åˆ›ä¸šå…¬å¸æŠ€æœ¯è´Ÿè´£äººèº«ä»½æ¥æ€è€ƒå›¢é˜Ÿæ¶æ„å’Œç›®æ ‡ã€‚ ä¹‹å‰åœ¨useeaseæ‹…ä»»ç ”å‘æŠ€æœ¯ç»ç†ï¼Œä¸»è¦æ˜¯ç®¡ç†é¡¹ç›®å’Œåˆ¶å®šäº§å“ï¼Œäººå‘˜ä¸Šä»¥å°è§„æ¨¡å›¢é˜Ÿä½œæˆ˜ä¸ºä¸»ï¼Œç”±äºä¸šåŠ¡å’Œç›®æ ‡æ˜ç¡®ï¼Œè¾ƒå°‘éœ€è¦æ€è€ƒå›¢é˜Ÿç»„ç»‡æ¶æ„å’Œèµ„æºè§„åˆ’ã€‚ï¼ˆç”±äºæ˜¯å†…éƒ¨é¡¹ç›®ï¼Œäººå‘˜èµ„æºä¸è¶³å¯ä»¥å‘ä¸Šé¢åè°ƒå’Œå€Ÿè°ƒï¼Œè€Œä¸”åƒäº§å“ã€ç¾å·¥ã€æµ‹è¯•å…¬å¸éƒ½æ˜¯ç»Ÿä¸€ä½¿ç”¨çš„ï¼Œè®¾å¤‡ä¹Ÿæ˜¯åœ¨ç»Ÿä¸€çš„é›†ç¾¤èµ„æºä¸Šåˆ†é…ï¼‰ é¦–å…ˆä»è®¾å¤‡é€‰å‹ã€æ–¹æ¡ˆè®¾è®¡ã€æ ¸å¿ƒç®—æ³•é€‰æ‹©ã€å¯é æ€§ã€å®‰å…¨æ€§çš„è€ƒè™‘ï¼Œä»¥åŠé£é™©ç®¡ç†è¿›è¡Œç»„ç»‡è§„åˆ’ã€‚ è®¾å¤‡é€‰å‹å› ä¸ºå‰æœŸè®¡åˆ’æ˜¯å…ˆåšRTBç¨‹åºåŒ–å¹¿å‘Šç³»ç»Ÿçš„ï¼Œå¯¹å»¶è¿Ÿæ€§å’Œå¹¶å‘æœ‰è¦æ±‚ï¼Œåœ¨å•æœºé€‰å‹ä¸Šé€‰äº† Dell PowerEdge R730ï¼Œ 2U çš„æœºæ¶ç»“æ„å’Œä»–é‚£å¼ºåŠ²çš„CPU Xeon E5-2640 v4 è±¡å¾ç€åŠ›é‡ä¸å®åŠ›ï¼Œå†…å­˜æ˜¯4æ¡ 16G çš„å†…å­˜æ¡ï¼Œé…å¤‡ 8TB ç¡¬ç›˜ ï¼ˆåæ¥åœ¨æ•°æ®å¤„ç†çš„æ—¶å€™å‘ç°ç¡¬ç›˜è¯»å†™å­˜åœ¨ç“¶é¢ˆï¼ŒåˆåŠ äº†2TBå›ºæ€ç¡¬ç›˜ï¼‰ï¼Œåœ¨å•æœºæ€§èƒ½ä¸Šè¿˜ç®—æ˜¯è¿‡å¾—å»äº†ã€‚ ç¡¬ç›˜å­˜å‚¨æ–¹æ¡ˆé€‰æ‹© RAID 5ï¼Œåœ¨æ•°æ®ä¿éšœå’Œç£ç›˜åˆ©ç”¨ç‡ä¹‹å‰æŠ˜ä¸­ 8TB ç¡¬ç›˜å®é™…å˜æˆ 6T å¤šï¼Œç³»ç»Ÿé€‰ç”¨äº† Centos 7 ï¼ŒRed Hat ä»¥ç¨³å®šæ€§è‘—ç§°ï¼Œä¹Ÿé€‚åˆçº¿ä¸Šç¯å¢ƒè¿è¡Œã€‚ ç³»ç»Ÿç›®å½•ç»“æ„åˆ†é…ï¼š1234567891011/dev/mapper/centos-root 1.2T 4.9G 1.2T 1% /devtmpfs 32G 0 32G 0% /devtmpfs 32G 0 32G 0% /dev/shmtmpfs 32G 92M 32G 1% /runtmpfs 32G 0 32G 0% /sys/fs/cgroup/dev/sda2 94G 231M 93G 1% /boot/dev/mapper/centos-home 3.2T 2.7G 3.1T 1% /home/dev/mapper/centos-var 917G 152G 719G 18% /var/dev/mapper/fastDevice-docker 689G 154G 501G 24% /var/lib/dockertmpfs 6.3G 4.0K 6.3G 1% /run/user/42tmpfs 6.3G 48K 6.3G 1% /run/user/1000 fastDevice-dockeræ˜¯åé¢åŠ å…¥çš„å›ºæ€ç¡¬ç›˜ï¼Œä¸»è¦ç”¨äºæ‰©å…… docker å­˜å‚¨ï¼Œç»™ç¨‹åºåšè¯»å†™åŠ é€Ÿã€‚ æ–¹æ¡ˆè®¾è®¡ è™šæ‹ŸåŒ–æ–¹æ¡ˆ å®¹å™¨åŒ–å’Œè™šæ‹ŸåŒ–ä¸ç®¡å¯¹äºå°å›¢é˜Ÿä½œæˆ˜ä¹Ÿå¥½ï¼Œå¤§è§„æ¨¡åº”ç”¨å¼€å‘ä¹Ÿå¥½ï¼Œéƒ½æ˜¯å›¢é˜Ÿä¸é”™çš„é€‰æ‹©ã€‚å¯¹äºå°å›¢é˜Ÿï¼Œç‰¹åˆ«æ˜¯æœåŠ¡å™¨èµ„æºæœ‰é™çš„å›¢é˜Ÿï¼Œè¿›è¡Œè™šæ‹ŸåŒ–å¯ä»¥æ›´æ–¹ä¾¿åè°ƒå›¢é˜Ÿèµ„æºï¼Œåˆ’åˆ†å¤šç¯å¢ƒå¼€å‘ï¼ŒåŒæ—¶è™šæ‹ŸåŒ–ä¹Ÿæ›´å®¹æ˜“è¿›è¡Œé£æ§ï¼Œæ›´å®‰å…¨ã€‚åæœŸéšç€è§„æ¨¡é€æ­¥æ‰©å¤§ï¼Œä¹Ÿå¯ä»¥éå¸¸æ–¹ä¾¿åœ°è½¬å‹æˆå¾®æœåŠ¡åº”ç”¨ï¼Œå¸®å¿™å¤§å›¢é˜Ÿä»¥å°å›¢é˜Ÿçš„æ•ˆç‡è¿›è¡Œå¼€å‘è¿­ä»£ã€‚å› æ­¤åº•å±‚é‡‡ç”¨è™šæ‹ŸåŒ–æ–¹æ¡ˆå°†ç¡¬ä»¶å’Œèµ„æºè¿›è¡Œåˆ†ç¦»ã€‚ è™šæ‹ŸåŒ–æ–¹æ¡ˆé€‰æ‹©äº†æ›´è½»é‡çš„ Docker ä»£æ›¿è™šæ‹Ÿæœºï¼Œå®¹å™¨ç®¡ç†é€‰æ‹© Kubernetesï¼Œä¸»è¦ç»å†äº† 2017 çš„å®¹å™¨ç¼–ç å¤§æˆ˜ä¹‹åï¼ŒKubernetes é¡¹ç›®å·²ç»æˆä¸ºäº†æ„å»ºå®¹å™¨åŒ–å¹³å°ä½“ç³»çš„é»˜è®¤é€‰æ‹©ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å®¹å™¨åº”ç”¨çš„éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¼ä¸šå®ç°åŸç”Ÿäº‘(Cloud Native)æ¦‚å¿µçš„æ”¯æŒã€‚ æ•°æ®å±‚ å…³ç³»å‹æ•°æ®åº“é‡‡ç”¨MySQLï¼Œè¿™é‡Œä¸»è¦é‡‡è´­äº†è…¾è®¯äº‘çš„MySQLé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆã€‚ ç¼“å­˜å±‚é‡‡ç”¨Redis,ä¸»è¦ç”¨äºç¼“å­˜ç”¨æˆ·è¯·æ±‚ä¿¡æ¯ã€‚ Hadoopä½œä¸ºåº•å±‚çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä¸»è¦ç”¨äºå­˜å‚¨è¿è¥å•†ä¼ è¿‡æ¥çš„DPIåˆ†æç»“æœæ•°æ®ã€‚æ¯å¤©çš„è§„æ¨¡åœ¨2~3Gï¼Œkafkaä½œä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ è®¡ç®—å±‚ è®¡ç®—å±‚ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å¯¹æ•°æ®åšä¼ ç»Ÿçš„ç»Ÿè®¡åˆ†ææˆ–è€…è¿ç”¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œå»ºæ¨¡ï¼Œä¸»è¦ç”¨Sparkä½¿ç”¨ï¼›ä¸€éƒ¨åˆ†æ˜¯åŸºäºæ·±åº¦å­¦ä¹ æ¡†æ¶è¿›è¡Œå»ºæ¨¡ï¼Œè¿™é‡Œåˆ†ä¸ºä¸¤ä¸ªå·¥å…·ï¼Œä¸€ä¸ªæ˜¯ç”¨äºç®—æ³•ç ”å‘é˜¶æ®µä½¿ç”¨çš„ï¼šPyTorchï¼Œä¸€ä¸ªæ˜¯ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæˆç†Ÿç¨³å®šçš„ï¼šTensorflowã€‚ åº”ç”¨å±‚ æœ€åä¸€å±‚æ˜¯åº”ç”¨å±‚ã€‚æ¯ä¸ªåº”ç”¨ä»¥å®¹å™¨çš„å½¢å¼è¿è¡Œåœ¨ç³»ç»Ÿä¸Šï¼Œä¸ä½œä¸ºä¸­å°çš„è®¡ç®—å±‚è¿›è¡Œäº¤äº’ã€‚ é£é™©ç®¡æ§æŠ€æœ¯é£æ§ä¸Šæœ‰å‡ ç‚¹ï¼š ç¬¬ä¸€ä¸ªæ˜¯è¯­è¨€é€‰å‹ã€‚å‰æœŸå›¢é˜Ÿè¯­è¨€é€‰æ‹©Pythonï¼Œæœ‰å‡ ä¸ªåŸå› ï¼Œï¼ˆ1ï¼‰Pythonç®€å•ï¼Œè€Œä¸”æˆ‘ä½œä¸ºæŠ€æœ¯è´Ÿè´£äººä¹Ÿæ˜¯æœ€æ“…é•¿ï¼›ï¼ˆ2ï¼‰ä¾¿äºå‰æœŸå¿«é€Ÿè¿­ä»£å¼€å‘ï¼Œæ‹›äººä¹Ÿç›¸å¯¹ç®€å•ï¼›ï¼ˆ3ï¼‰å¯ä»¥å¾ˆå¥½çš„å’Œæ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ç­‰è¿›è¡Œæ•´åˆï¼Œä½¿ç”¨ç»Ÿä¸€çš„æŠ€æœ¯æ ˆã€‚å‰æ®µé€‰ç”¨Vueï¼Œï¼ˆ1ï¼‰å°å›¢é˜Ÿå¼€å‘ä»¥è¯­è¨€æ˜“ç”¨ï¼Œæ˜“æ‹›è˜ä¸ºæ ¹æœ¬ï¼›ï¼ˆ2ï¼‰Vueä½œä¸ºå›½äººè´¡çŒ®çš„äº§å“ï¼Œä¸­æ–‡æ”¯æŒåŠ›åº¦å¥½ã€‚æˆ‘è§‰å¾—å‰æœŸçš„æŠ€æœ¯é€‰å‹ï¼Œç®€å•æ˜“ç”¨æ˜¯æŠ€æœ¯é£æ§æœ€å…³é”®çš„ã€‚ æœåŠ¡å™¨å®‰å…¨ç®¡ç†ã€‚è¦æ§åˆ¶å¥½é£é™©ï¼ŒæœåŠ¡å™¨çš„å®‰å…¨ç®¡æ§å’Œé¡¹ç›®ä¸Šçº¿æµç¨‹è¦æ¢³ç†å¥½ï¼Œï¼ˆ1ï¼‰å¯¹å„çº§å¼€å‘è€…çš„è´¦å·æƒé™çš„ç®¡ç†ï¼Œä¸¥æ ¼æ§åˆ¶sudoæƒé™;ï¼ˆ2ï¼‰é‡‡ç”¨ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œç¦æ­¢è¿œç¨‹å¯†ç ç™»é™†ï¼Œæ¢sshç«¯å£ï¼Œå¯¹æ‰€æœ‰å¯¹å¤–å¼€å¯çš„ç«¯å£è¿›è¡Œè®°å½•ï¼Œæ•°æ®åº“é™åˆ¶ä¸ºåªèƒ½å†…ç½‘è®¿é—®ï¼Œé‡‡ç”¨keewebè®°å½•å¯†ç å’Œç®¡ç†å¯†é’¥ã€‚ é—®é¢˜ç ”å‘äººå‘˜å°‘ï¼Œä¸»åŠ›å·¥ç¨‹å¸ˆç ”å‘ã€è¿ç»´ä¸€æŠŠæŠ“ åŠŸèƒ½å¢åŠ ï¼Œå¤æ‚æ€§é€æ¸å˜é«˜ é¢‘ç¹æ”¹åŠ¨ï¼Œç³»ç»Ÿè„ã€ä¹±ã€å·® å›¢é˜ŸåŸºç¡€è®¾æ–½æ­å»ºåœ¨åˆ›ä¸šåˆæœŸï¼Œå›¢é˜Ÿçš„åŸºç¡€å·¥å…·é›†æ­å»ºæ˜¯ååˆ†é‡è¦çš„ï¼Œæ˜¯æ•ˆç‡å’Œç”Ÿäº§åŠ›çš„ä¿è¯ã€‚åœ¨è¿™é‡Œæˆ‘ä¸»è¦æ­å»ºäº†ä»£ç ç®¡ç†å¹³å°gitlabã€æŒç»­é›†æˆå·¥å…·git-runnerã€éƒ¨ç½²é‡‡ç”¨äº†å®¹å™¨åŒ–æŠ€æœ¯ã€åœ¨åç»­çš„æ¶æ„å‡çº§ä¸­ä¹Ÿå¼•å…¥äº†å®¹å™¨ç¼–æ’å·¥å…·kubernetesï¼Œé¡¹ç›®ç®¡ç†ç”¨çš„è…¾è®¯çš„TAPDã€‚ åœ¨æ„æ€æŠ€æœ¯é€‰å‹ä¸­é‡è¦çš„æ˜¯æƒ³æ¸…æ¥šï¼š1ã€åœ¨ä»€ä¹ˆé˜¶æ®µï¼Œè§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜2ã€æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆé€‰æ‹©Aè€Œä¸é€‰æ‹©Bï¼Œå–èˆçš„å…³é”®æ˜¯ä»€ä¹ˆ3ã€çªç ´çš„åˆ›æ–°æ˜¯ä»€ä¹ˆï¼Œå¦‚æœä¸åšä¼šæ€ä¹ˆæ ·ï¼Œå¦‚ä½•å¹³è¡¡åˆ›æ–°å’Œä¸šåŠ¡çš„å…³ç³»4ã€å¦‚ä½•ä¿æŒæŒç»­çš„ç»´æŠ¤æ€§å’Œåˆ›æ–°æ€§]]></content>
      <categories>
        <category>éšç¬”æ—¥å¿—</category>
        <category>åˆ›ä¸š</category>
      </categories>
      <tags>
        <tag>é¡¹ç›®ç®¡ç†</tag>
        <tag>åˆ›ä¸š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HelmåŒ…ç®¡ç†-å…¥é—¨]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2FHelm%E5%8C%85%E7%AE%A1%E7%90%86-%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[ç»“æ„ç®€ä»‹Helm æ˜¯ä¸€ä¸ªç”¨äº kubernetes çš„åŒ…ç®¡ç†å™¨ï¼Œæ¯ä¸ªåŒ…ç§°ä¸ºä¸€ä¸ª Chartï¼Œä¸€ä¸ª Chart æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå¯¹äºåº”ç”¨å‘å¸ƒè€…è€Œè¨€ï¼Œå¯ä»¥é€šè¿‡Helmæ‰“åŒ…åº”ç”¨ï¼Œç®¡ç†åº”ç”¨ä¾èµ–å…³ç³»ï¼Œç®¡ç†åº”ç”¨ç‰ˆæœ¬å¹¶å‘å¸ƒåº”ç”¨åˆ°è½¯ä»¶ä»“åº“ã€‚ å¯¹äºä½¿ç”¨è€…è€Œè¨€ï¼Œä½¿ç”¨Helmåä¸ç”¨éœ€è¦äº†è§£ Kubernetes çš„ Yaml è¯­æ³•å¹¶ç¼–å†™åº”ç”¨éƒ¨ç½²æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡Helmä¸‹è½½å¹¶åœ¨kubernetesä¸Šå®‰è£…éœ€è¦çš„åº”ç”¨ã€‚ Helm Helm æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹çš„å®¢æˆ·ç«¯å·¥å…·ã€‚ä¸»è¦ç”¨äº Kubernetes åº”ç”¨ç¨‹åº Chart çš„åˆ›å»ºã€æ‰“åŒ…ã€å‘å¸ƒä»¥åŠåˆ›å»ºå’Œç®¡ç†æœ¬åœ°å’Œè¿œç¨‹çš„ Chart ä»“åº“ã€‚ Tiller Tiller æ˜¯ Helm çš„æœåŠ¡ç«¯ï¼Œéƒ¨ç½²åœ¨ Kubernetes é›†ç¾¤ä¸­ã€‚Tiller ç”¨äºæ¥æ”¶ Helm çš„è¯·æ±‚ï¼Œå¹¶æ ¹æ® Chart ç”Ÿæˆ Kubernetes çš„éƒ¨ç½²æ–‡ä»¶ï¼ˆ Helm ç§°ä¸º Release ï¼‰ï¼Œç„¶åæäº¤ç»™ Kubernetes åˆ›å»ºåº”ç”¨ã€‚Tiller è¿˜æä¾›äº† Release çš„å‡çº§ã€åˆ é™¤ã€å›æ»šç­‰ä¸€ç³»åˆ—åŠŸèƒ½ã€‚ Chart Helm çš„è½¯ä»¶åŒ…ï¼Œé‡‡ç”¨ TAR æ ¼å¼ã€‚ç±»ä¼¼äº APT çš„ DEB åŒ…æˆ–è€… YUM çš„ RPM åŒ…ï¼Œå…¶åŒ…å«äº†ä¸€ç»„å®šä¹‰ Kubernetes èµ„æºç›¸å…³çš„ YAML æ–‡ä»¶ã€‚ Repoistory Helm çš„è½¯ä»¶ä»“åº“ï¼ŒRepository æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨ä¿å­˜äº†ä¸€ç³»åˆ—çš„ Chart è½¯ä»¶åŒ…ä»¥ä¾›ç”¨æˆ·ä¸‹è½½ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªè¯¥ Repository çš„ Chart åŒ…çš„æ¸…å•æ–‡ä»¶ä»¥ä¾›æŸ¥è¯¢ã€‚Helm å¯ä»¥åŒæ—¶ç®¡ç†å¤šä¸ªä¸åŒçš„ Repositoryã€‚ å®‰è£…ä¸‹è½½äºŒè¿›åˆ¶åŒ…å®‰è£…ï¼š12345# ä»å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶å®‰è£…åŒ…åˆ°æœ¬åœ°ï¼šhttps://github.com/kubernetes/helm/releases# è§£å‹tar -zxvf helm-v2.12.0-linux-amd64.tar.gz# ç§»åŠ¨åˆ°binç›®å½•cp linux-amd64/helm /usr/local/bin/helm åˆå§‹åŒ– 1helm init --service-account=user-shikanon --stable-repo-url https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>è¿ç»´</tag>
        <tag>kubernetes</tag>
        <tag>Helm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kubernetes dashboard å®‰è£…åŠä»‹ç»]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fkubernetes-dashboard-%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[é€šè¿‡Dashboardï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹é›†ç¾¤ä¸­åº”ç”¨çš„è¿è¡Œæƒ…å†µï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤ŸåŸºäºDashboardåˆ›å»ºæˆ–ä¿®æ”¹éƒ¨ç½²ã€ä»»åŠ¡ã€æœåŠ¡ç­‰Kubernetesçš„èµ„æºï¼Œé€šè¿‡éƒ¨ç½²å‘å¯¼ï¼Œç”¨æˆ·èƒ½å¤Ÿå¯¹éƒ¨ç½²è¿›è¡Œæ‰©ç¼©å®¹ï¼Œè¿›è¡Œæ»šåŠ¨æ›´æ–°ã€é‡å¯Podå’Œéƒ¨ç½²æ–°åº”ç”¨ã€‚ å®‰è£… dashboard UI1kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š12345678910kubectl get svc,pod --all-namespacesNAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE...kube-system service/kubernetes-dashboard ClusterIP 10.110.187.255 &lt;none&gt; 443/TCP 86mNAMESPACE NAME READY STATUS RESTARTS AGE...kube-system pod/kubernetes-dashboard-57df4db6b-jjqhf 1/1 Running 8 86m æ³¨:å¦‚æœå‡ºç°image pullé”™è¯¯ï¼Œå¯ä»¥ç”¨ç§æœ‰ä»“åº“å…ˆæŸ¥çœ‹images:12cat kubernetes-dashboard.yaml | grep image image: k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1 ç„¶åå°†â€k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1â€ æ›¿æ¢ä¸º â€œmirrorgooglecontainers/kubernetes-dashboard-amd64:v1.10.1â€ï¼Œç”¨dockerä¸‹è½½ä¸‹æ¥ç„¶åä¸Šä¼ ç§æœ‰ä»“åº“ï¼Œå…·ä½“å¯å‚è€ƒï¼ˆhttps://mp.weixin.qq.com/s/cV74onbtzTubrrhOl_Qi8wï¼‰ã€‚ Argument name Default value Description insecure-port 9090 The port to listen to for incoming HTTP requests. port 8443 The secure port to listen to for incoming HTTPS requests. insecure-bind-address 127.0.0.1 The IP address on which to serve the â€“port (set to 0.0.0.0 for all interfaces). bind-address 0.0.0.0 The IP address on which to serve the â€“secure-port (set to 0.0.0.0 for all interfaces). default-cert-dir /certs Directory path containing â€˜â€“tls-cert-fileâ€™ and â€˜â€“tls-key-fileâ€™ files. Used also when auto-generating certificates flag is set. Relative to the container, not the host. tls-cert-file - File containing the default x509 Certificate for HTTPS. tls-key-file - File containing the default x509 private key matching â€“tls-cert-file. apiserver-host - The address of the Kubernetes Apiserver to connect to in the format of protocol://address:port, e.g., http://localhost:8080. If not specified, the assumption is that the binary runs inside a Kubernetes cluster and local discovery is attempted. api-log-level DEFAULT Set or disable API request logging.DEFAULT sanitizes potentially sensitive URLSDEBUG outputs all request output (even if sensitive)NONE disables all request logging heapster-host - The address of the Heapster to connect to in the format of protocol://address:port, e.g., http://localhost:8082. If not specified, the assumption is that the binary runs inside a Kubernetes cluster and service proxy will be used. kubeconfig - Path to kubeconfig file with authorization and master location information. token-ttl 15 minutes Expiration time (in seconds) of JWE tokens generated by dashboard. Default: 15 min. 0 - never expires. authentication-mode token Enables authentication options that will be reflected on login screen. Supported values: token, basic. Note that basic option should only be used if apiserver has â€˜â€“authorization-mode=ABACâ€™ and â€˜â€“basic-auth-fileâ€™ flags set. metric-client-check-period 30 seconds Time in seconds that defines how often configured metric client health check should be run. auto-generate-certificates false When set to true, Dashboard will automatically generate certificates used to serve HTTPS. enable-insecure-login false When enabled, Dashboard login view will also be shown when Dashboard is not served over HTTPS. Still, it requires frontend to be accessed over HTTPS (i.e. secure nginx proxy). system-banner - When non-empty displays message to Dashboard users. Accepts simple HTML tags. system-banner-severity INFO Severity of system banner. Should be one of â€˜INFO,WARNING,ERRORâ€™. disable-settings-authorizer false When enabled, Dashboard settings page will not require user to be logged in and authorized to access settings page. enable-skip-login false When enabled, the skip button on the login page will be shown. é€šè¿‡kube-proxyè®¿é—®kubectl proxy â€“ ä¸ºKubernetes API serverå¯åŠ¨ä»£ç†æœåŠ¡å™¨:1234567891011121314151617181920Options: --accept-hosts=&apos;^localhost$,^127\.0\.0\.1$,^\[::1\]$&apos;: Regular expression for hosts that the proxy should accept. --accept-paths=&apos;^.*&apos;: Regular expression for paths that the proxy should accept. --address=&apos;127.0.0.1&apos;: The IP address on which to serve on. --api-prefix=&apos;/&apos;: Prefix to serve the proxied API under. --disable-filter=false: If true, disable request filtering in the proxy. This is dangerous, and can leave youvulnerable to XSRF attacks, when used with an accessible port. --keepalive=0s: keepalive specifies the keep-alive period for an active network connection. Set to 0 to disablekeepalive. -p, --port=8001: The port on which to run the proxy. Set to 0 to pick a random port. --reject-methods=&apos;^$&apos;: Regular expression for HTTP methods that the proxy should reject (example--reject-methods=&apos;POST,PUT,PATCH&apos;). --reject-paths=&apos;^/api/.*/pods/.*/exec,^/api/.*/pods/.*/attach&apos;: Regular expression for paths that the proxy shouldreject. Paths specified here will be rejected even accepted by --accept-paths. -u, --unix-socket=&apos;&apos;: Unix socket on which to run the proxy. -w, --www=&apos;&apos;: Also serve static files from the given directory under the specified prefix. -P, --www-prefix=&apos;/static/&apos;: Prefix to serve static files under, if static file directory is specified.Usage: kubectl proxy [--port=PORT] [--www=static-dir] [--www-prefix=prefix] [--api-prefix=prefix] [options] å› ä¸ºä¸ºäº†åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šå¯ä»¥è®¿é—®åˆ°ï¼Œå› æ­¤è¦è®¾ç½®--accept-hostså’Œ--addressä¸¤ä¸ªå‚æ•°ã€‚ 1kubectl proxy --address=&apos;0.0.0.0&apos; --port=8001 --accept-hosts=&apos;^localhost$,^192\.168\.1\.122$&apos; æ„å»ºç™»é™†è®¿é—®æƒé™æ‰“å¼€åœ°å€http://192.168.1.122:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/: å¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®ï¼Œå®˜æ–¹æä¾›äº†ä¸¤ç§è®¤è¯æ–¹å¼ï¼Œä¸€ç§æ˜¯kubeconfigï¼Œä¸€ç§æ˜¯ä»¤ç‰Œtokenã€‚ tokenä»¤ç‰Œç™»é™†k8så„æœåŠ¡æœ‰è‡ªå·±çš„tokenï¼š123456789101112131415161718192021222324252627282930313233343536373839kubectl get secret -n kube-systemNAME TYPE DATA AGEattachdetach-controller-token-8kh8n kubernetes.io/service-account-token 3 21hbootstrap-signer-token-htm5l kubernetes.io/service-account-token 3 21hbootstrap-token-ngcxcv bootstrap.kubernetes.io/token 7 21hcalico-node-token-4wkts kubernetes.io/service-account-token 3 20hcertificate-controller-token-dzvlt kubernetes.io/service-account-token 3 21hclusterrole-aggregation-controller-token-qpvfv kubernetes.io/service-account-token 3 21hcoredns-token-hdk66 kubernetes.io/service-account-token 3 21hcronjob-controller-token-tmvgn kubernetes.io/service-account-token 3 21hdaemon-set-controller-token-wxfbl kubernetes.io/service-account-token 3 21hdefault-token-67lzs kubernetes.io/service-account-token 3 21hdeployment-controller-token-ps2sn kubernetes.io/service-account-token 3 21hdisruption-controller-token-qhncp kubernetes.io/service-account-token 3 21hendpoint-controller-token-mq29n kubernetes.io/service-account-token 3 21hexpand-controller-token-qv82t kubernetes.io/service-account-token 3 21hgeneric-garbage-collector-token-4bklk kubernetes.io/service-account-token 3 21hhorizontal-pod-autoscaler-token-4nn7k kubernetes.io/service-account-token 3 21hjob-controller-token-hmjcx kubernetes.io/service-account-token 3 21hkube-proxy-token-phvpr kubernetes.io/service-account-token 3 21hkubernetes-dashboard-certs Opaque 0 143mkubernetes-dashboard-csrf Opaque 1 143mkubernetes-dashboard-key-holder Opaque 2 76mkubernetes-dashboard-token-tpvvp kubernetes.io/service-account-token 3 143mnamespace-controller-token-9jm46 kubernetes.io/service-account-token 3 21hnode-controller-token-lvw87 kubernetes.io/service-account-token 3 21hpersistent-volume-binder-token-sn2zf kubernetes.io/service-account-token 3 21hpod-garbage-collector-token-gmwb6 kubernetes.io/service-account-token 3 21hpv-protection-controller-token-r566m kubernetes.io/service-account-token 3 21hpvc-protection-controller-token-sh8x9 kubernetes.io/service-account-token 3 21hreplicaset-controller-token-bd724 kubernetes.io/service-account-token 3 21hreplication-controller-token-h7bt6 kubernetes.io/service-account-token 3 21hresourcequota-controller-token-qrj5l kubernetes.io/service-account-token 3 21hservice-account-controller-token-5brbw kubernetes.io/service-account-token 3 21hservice-controller-token-ln82n kubernetes.io/service-account-token 3 21hstatefulset-controller-token-b9jlj kubernetes.io/service-account-token 3 21htoken-cleaner-token-9lzqb kubernetes.io/service-account-token 3 21httl-controller-token-58rdc kubernetes.io/service-account-token 3 21h æˆ‘ä»¬é€šè¿‡kubectl describe secretå¯ä»¥çœ‹åˆ°å…·ä½“æœåŠ¡çš„tokenï¼š1234567891011121314kubectl describe secret deployment-controller-token-ps2sn -n kube-systemName: deployment-controller-token-ps2snNamespace: kube-systemLabels: &lt;none&gt;Annotations: kubernetes.io/service-account.name: deployment-controller kubernetes.io/service-account.uid: e3dff2a1-2095-11e9-b54b-5254003008abType: kubernetes.io/service-account-tokenData====ca.crt: 1025 bytesnamespace: 11 bytestoken: eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZXBsb3ltZW50LWNvbnRyb2xsZXItdG9rZW4tcHMyc24iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVwbG95bWVudC1jb250cm9sbGVyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiZTNkZmYyYTEtMjA5NS0xMWU5LWI1NGItNTI1NDAwMzAwOGFiIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRlcGxveW1lbnQtY29udHJvbGxlciJ9.d_GQotLp38_5GOMCHy2sn9zvgTThnSo4cUN5PkRbKyLtT16zl1MtFadOogLc7iVllNgDGAzHHAbo73m35gi1j0H_o0A742wZq4gLS-06r4UPfhpU9IoGhYZusYOY-RvBkjm7PZbKhudxwStdP44HhwaqdoX2wMwZgT8mrVd74VEs988zPEaM-QAKYLhYgOEAlEFvXnFfzm2dRD9LtK7m1JrlmevmtONfucEPpJiVuAhYBYq31KZ6YOya0Py8tInd8S-9_pmBmNVCYE2MzyFLWJ5uJhmdefqNWwTgKaKHWOsczqDecnRaSuF97Qje7udwVeVjNTeCwUzOZAfPlHLe-Q ä½†æ¯ä¸ªæœåŠ¡çš„tokenéƒ½æƒé™éƒ½ä¸åŒï¼Œä¸ä¸€å®šç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å»ºç«‹è‡ªå·±çš„ClusterRoleï¼Œå¹¶èµ‹äºˆæƒé™ã€‚ åˆ›å»ºuser-shikanon.yamlæ–‡ä»¶ï¼š1234567891011121314151617181920apiVersion: v1kind: ServiceAccountmetadata: name: user-shikanon namespace: kube-system---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: user-shikanonroleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-adminsubjects:- kind: ServiceAccount name: user-shikanon namespace: kube-system å¯åŠ¨æœåŠ¡ï¼š 1234[root@master ~]# kubectl create -f user-shikanon.yamlserviceaccount/user-shikanon createdclusterrolebinding.rbac.authorization.k8s.io/user-shikanon created æŸ¥çœ‹user-shikanonæœåŠ¡çš„tokenï¼š1234567891011121314[root@master ~]# kubectl describe secret user-shikanon --namespace=kube-systemName: user-shikanon-token-6t5rdNamespace: kube-systemLabels: &lt;none&gt;Annotations: kubernetes.io/service-account.name: user-shikanon kubernetes.io/service-account.uid: f290b948-2149-11e9-a469-5254003008abType: kubernetes.io/service-account-tokenData====ca.crt: 1025 bytesnamespace: 11 bytestoken: eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJ1c2VyLXNoaWthbm9uLXRva2VuLTZ0NXJkIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6InVzZXItc2hpa2Fub24iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJmMjkwYjk0OC0yMTQ5LTExZTktYTQ2OS01MjU0MDAzMDA4YWIiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06dXNlci1zaGlrYW5vbiJ9.Ap6MY85X38mVGXqEe7T8UW-RHNXWWJZ06eKKXMKutRJUKDNcfKKV0Y1o_CsWLfSNjqNjRCoTYs4x73vHwo6LkrXrzKoyh7VZytcMxpwV7FiLAMU0OFia179WROAIEpvZ1AsK94X2NM3zBS4I3pVNK_OLM4wuOBLcX9bkFscBRufs3SvgtA64t8_vq4udgoQdERdnK3EiPBgpZEjnGQIK_o-kgGKviXhS892r2QD9y_YlrFyY6Gu4xPRew_k2jPpFpZNyjYp3pKWw6DnGKBN39M7T5igLnSXJEQGp1mXgYrgWBL-IQeWtRTVcpBIeRFa5AoPMfPcv5x4AsWHK_rF1_A kubeconfigç™»é™†åœ¨.kube/configæ‰¾åˆ°kubeconfigæ–‡ä»¶ï¼Œæˆ–è€…é‡æ–°åˆ›å»ºä¸€ä¸ªkubeconfigæ–‡ä»¶ï¼Œåœ¨configæ–‡ä»¶æœ«å°¾åŠ ä¸Šä¸€ä¸ªtokenå­—æ®µå³å¯ï¼š 1234567891011121314151617181920apiVersion: v1clusters:- cluster: certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNU1ERXlOVEV4TXpneU1Wb1hEVEk1TURFeU1qRXhNemd5TVZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTERlCnVEYkNXSTVnMUhjaithdFVDdmlEK3dlM054VnVkV28rVWMvbWJFV3lyemM3WFp1RGdJZHNqNXRpV3hmMWNDVGYKeW9qU21OcC9ldmtUa2YxSGIzSmJOYjhFNG5oSE1TdzMwQkpNd1JxbTZaMVdQRnArNkRUdlZzT25CVnlDY1FRNwo0MEJWTnpyOTdXMTlkRi9JYXp4ODBqblRVT3NJNFczMXE3QkEvZ2E0anZVRnZQbnY3TVU5dm1XeCt4NWRJVmoyCjRDY1NzV0hBNVpiNm1RU050WlNtTWIxYnFZa0NHVGdPbWkrWDhDQzVaZmRtU1BmWmRUdlhOMlJVdzdmVXRZdlMKYTJuL3JwZFFzZ0s0NEthQXRHSmhta1dFci9hbkpVa1FlTEpMdjRpYVZXVnpHWEV0SkRqZkY1T0x6YVlvd2JpbApwT3hjMUIyTzk2TWV4NzljOHVVQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFHcC92MURIUlV1ODBiSjVKQy81eHRJVEVCelYKeVZZd1d2NUpsNDRkMFhVdlJqV2FOUXF5TUYwRVJYYXBjMWdSVjV1WitROWxUN3JPcVgvWlozNHFoSS9tdmhNRgpyRUh6NW9yK09waS9HNFYwK20xYysxOE9ya3h2ZHJjcFVYa1ArVW5kM09lV0VrUjNHREhxcU5YVHlEcWZybWR2Cmh2NTNwQ0F2NkFOKzRJUWJxd3RsWU5GZWhHN09IdEl4ZDdGSFJHcGZKTTFlUXJ3M09sYzhreDVkSkltS0tPYXgKZm9uVzBkOXdOTmVhVlVDMmh4cFFWVFlJbjBXamUxcGtVTEdUaTVqcjZZL2tBZ0hhU1BKNTR5TFhzbzhMTHBvVApGMEN0TnRWOG8zczQ2Z0ZvMW1uQUQxYXh1WjlnTTNUZTcrSkNnRVlhTlgxak1SMVFwWFpraysydGYzRT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo= server: https://192.168.1.120:6443 name: kubernetescontexts:- context: cluster: kubernetes user: kubernetes-admin name: kubernetes-admin@kubernetescurrent-context: kubernetes-admin@kuberneteskind: Configpreferences: &#123;&#125;users:- name: kubernetes-admin user: client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM4akNDQWRxZ0F3SUJBZ0lJVHB1b3ZjbElYdVV3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB4T1RBeE1qVXhNVE00TWpGYUZ3MHlNREF4TWpVeE1UTTRNakphTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQTBPMlZMVDhENlIwVFMyRFoKb0tOZGlBcVJ3amVkWlo4Y29FdVBneTZpNlVReU9qQUt4OVZaeVJ6bWIyTWU1aFpHSXdLVGcyNW92YWw3ZWY4RApwc2FqYUhOa2NZSVd6S0Y0Yks0ZGtndlRudE5yUGxpazA5WFQxWTAwZUF0ZmpySjMrZWwzcEd1eGFPWENzZVQ3CjVLR0pINkdWWllpeGhMekF4bnpGd3lpdlFFcDVjVFl1RVhvZUZnOXBTekRhRFV5M2orUnBqRWhEdjdraVZpWGQKTE5yVGg0ZFB2ZWZhd21KTE8yYk9qUkI5MDB4dkpLMkF2NmtiV0M0U2wzQnF1SjhyVERoM21IeDQzOXVSNnpDZgpsNkYrbC9qRVBBRFJQQzVrTEJhUzVMT3JmcFlBM244MWNKYVRVeWROeGtIbDkzVTZiSnNQNXhPblBrOFpxUC9iClNhaWVrd0lEQVFBQm95Y3dKVEFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFJRVl0MjBQVDJnWm1UMmx3amYyYjIvdGc0OUJMNFJObTl4dgp1RkVmK3F1SklqcHJpMFV0TVJUZE5lV2ZiZTJvZWMrbm1SNk5CSGhUMnlhYVMrQjJ5SUZvOVVWckZENXdYVUsrCnVVN0NCRk55cHZRTzlHVXJYaGFYa1lKUkJNQ21XM2d6T1RqdXVFaGNMd0lHZGRWdlI4Wkh5M245Y084czAzU2sKUmtuMlZmL0hjQnRvbnRUWENGTXpidFA0UnZnYXlMN2c5NGpsN25OQ1hBVEU1K1h5OHZKcm5NSXhUbVQwTnVFNgpBVG43RG1Hb2V0Q2kySnJqZFpqcUR5N3FqbjhOZGQ1Qmh4OWkvWThyTXVWTC9GTWIrRVk4SzM3U2IxTmM1U21rCkNtUjNGakZZYjJUVDRZeHdtMWFPM0Rvd0lOWDVDdkd4aTNHS0F4QjJydGZQSUpLOEhydz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo= client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBME8yVkxUOEQ2UjBUUzJEWm9LTmRpQXFSd2plZFpaOGNvRXVQZ3k2aTZVUXlPakFLCng5Vlp5UnptYjJNZTVoWkdJd0tUZzI1b3ZhbDdlZjhEcHNhamFITmtjWUlXektGNGJLNGRrZ3ZUbnROclBsaWsKMDlYVDFZMDBlQXRmanJKMytlbDNwR3V4YU9YQ3NlVDc1S0dKSDZHVlpZaXhoTHpBeG56Rnd5aXZRRXA1Y1RZdQpFWG9lRmc5cFN6RGFEVXkzaitScGpFaER2N2tpVmlYZExOclRoNGRQdmVmYXdtSkxPMmJPalJCOTAweHZKSzJBCnY2a2JXQzRTbDNCcXVKOHJURGgzbUh4NDM5dVI2ekNmbDZGK2wvakVQQURSUEM1a0xCYVM1TE9yZnBZQTNuODEKY0phVFV5ZE54a0hsOTNVNmJKc1A1eE9uUGs4WnFQL2JTYWlla3dJREFRQUJBb0lCQURDdE9kVloyaXBreU1zRwpISTR0b2F3QmNtWkNtTnhGVHVFVjJiRGhtN2tuVjJCeE13SE45bVpCNG5wUEtMTEl1N3lLYkIzeUNsc3Q4b1BBCjQzUG0wY21USVBMRk1WU3B4aW5rQXlXMHRiQktaN0VWN0FraXg0RDRyaUhOM0l5ZGpoQmUwYTR3SFJ4b2M0MEkKNFpzcCs0MndFdU9lRG1YenFDSldqYWpqZ0xsRWRQUWtiM1RmQkx0amNOakdEclVKS1VLcmJLa3gzb2NlUmVNNgpRcG1oVUJSYk1LSGZzVWdLUEFkaDdtTTJYUDlGTG1rNmMyWlBWZWE2dld2eFpMd2kxSzJXZUpJblVicXYyYy9wCkFaQ0VUdmNKTEttSTFmMFRxeGY1WXlVK29FZXlJQUJta2RvMkhWMHcwUEF4OGw5V1U1T2dacVVQS1lPVHVlL2YKMWsva2ttRUNnWUVBNlJYYVE4Y1hjUTJIeDR1dE5abUJJbXlObDM5eVNGeG94bEJaNWgvY3VWdk1ncS9nbjFXRApWaVIwajJ0Uk41QzdPZzU0Mnh1dXNwR1RqWWxyRDhDM1YwN0ZpM0E3NTkxMUpOMzRsVnpPdHhLem94dk12RmFsCmV0bVNmUnBETUdIL08xN3NsTnowdi9DVDNUNENKbzA2Q3hpZHNKVW01UGc4NG5MSmI3eGl6M0VDZ1lFQTVYZkIKRGU0UVhJeTZEMXhQdWcvbjJGYklVaDErRElvdVNuWFRIRGtKejB5blViQ0UwdGZ1RC9qUmhmTHcwSUIyMjBmOAplRzA1a0RFS1I0TVoyVXFSdUpaZWUybUdLZis5eVFSaTRzbVNPT0x3ZDFkbjBBNlJKQUppR1ROUWhDQmF3UmpKCm9kckZVNUtmejR1QTZGcE8vS2w2M0h5N1RtelFOMUd0MTFoUGxFTUNnWUI4dmdjNzh0Y20xL2pzNEdIb3A2aW0KeGJYWmVJbXZGRlcybk5ZZ0JMbGFNamozVUMxRTJMMGJZeE5HbGthM0dDdzdXL2R1UEJoNDFOUkZFV0JNNC9TNwpNeHNpRHdUZ2lITGpNakNScjBPcVVzWDA2ekhkTWZvS0Qxc0l2UDlzYTJYdlhsUDdMMjJGTTduTzFCck9peEtmClVhTkRGKy9pNXIrZTZaUEl5dWVPNFFLQmdFVEFvTU0vdFA5RjJ1bUhTd3dBZ0FLOTNiOWN2c3ViQzB1Y0NlakcKM2oyU1JmK2YxK3drYmx1eXZYUlkyZlpleHoza1Q2ejFiTzNiQTYxeGhta29nb2kvNVFjdEV0bTZtbTZFTmV5bApZSDVTNEtHaE9xV0g5OHpHT2dZNjdjRG93TWhpV09kNTJPMjFYTlNlZzcwYWNkZ2FING00aFpaMTI5ejNTQkxoCmp0WnBBb0dBWEtRQjJBRk52cnRnWEg2MHFCRWJPaG9kZ2ZXRVA2QmtrNUpZSzY1U2o1ZFRaTmZlOG9JU3FKbFAKR0dlQnZMV1dVVUhScmMyUFpEcFpZTDJ4NGRvYndoWDJkYWJOWEFsQTFZczZJZmM2OG9oaWxpdm1PbktGRXBBMAo5RDJ6VXBqa0NzS3EybDFVSW9WczJSbTZ1dDJKcXB1WWs4SHJ3Z1BpYWtsclJtZ3FYbUU9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg== token: eyJhbGciOiJSUzI1NiIsIm RBACæƒé™æ§åˆ¶Role å’Œ ClusterRoleç±»å‹çš„æƒé™æ§åˆ¶Role åªèƒ½ç”¨äºæˆäºˆå¯¹å•ä¸ªå‘½åç©ºé—´ä¸­çš„èµ„æºè®¿é—®æƒé™ï¼Œåœ¨ RBAC API ä¸­ï¼ŒRole è¡¨ç¤ºä¸€ç»„è§„åˆ™æƒé™ï¼Œæƒé™åªä¼šå¢åŠ (ç´¯åŠ æƒé™)ï¼Œä¸å­˜åœ¨ä¸€ä¸ªèµ„æºä¸€å¼€å§‹å°±æœ‰å¾ˆå¤šæƒé™è€Œé€šè¿‡ RBAC å¯¹å…¶è¿›è¡Œå‡å°‘çš„æ“ä½œã€‚Role å¯ä»¥å®šä¹‰åœ¨ä¸€ä¸ª namespace ä¸­ï¼Œå¦‚æœæƒ³è¦è·¨ namespace åˆ™å¯ä»¥åˆ›å»º ClusterRoleï¼Œ ClusterRole æ˜¯é›†ç¾¤çº§åˆ«çš„ã€‚ Role:123456789kind: RoleapiVersion: rbac.authorization.k8s.io/v1metadata: namespace: default name: pod-readerrules:- apiGroups: [&quot;&quot;] # &quot;&quot; indicates the core API group resources: [&quot;pods&quot;] verbs: [&quot;get&quot;, &quot;watch&quot;, &quot;list&quot;] ClusterRole:123456789kind: ClusterRoleapiVersion: rbac.authorization.k8s.io/v1metadata: # &quot;namespace&quot; omitted since ClusterRoles are not namespaced name: secret-readerrules:- apiGroups: [&quot;&quot;] resources: [&quot;secrets&quot;] verbs: [&quot;get&quot;, &quot;watch&quot;, &quot;list&quot;] RoleBinding å’Œ ClusterRoleBinding ç±»å‹çš„æƒé™æ§åˆ¶RoloBinding å¯ä»¥å°†è§’è‰²ä¸­å®šä¹‰çš„æƒé™æˆäºˆç”¨æˆ·æˆ–ç”¨æˆ·ç»„ï¼ŒRoleBinding åŒ…å«ä¸€ç»„æƒé™åˆ—è¡¨(subjects)ï¼Œæƒé™åˆ—è¡¨ä¸­åŒ…å«æœ‰ä¸åŒå½¢å¼çš„å¾…æˆäºˆæƒé™èµ„æºç±»å‹(users, groups, or service accounts)ï¼›RoloBinding åŒæ ·åŒ…å«å¯¹è¢« Bind çš„ Role å¼•ç”¨ï¼›RoleBinding é€‚ç”¨äºæŸä¸ªå‘½åç©ºé—´å†…æˆæƒï¼Œè€Œ ClusterRoleBinding é€‚ç”¨äºé›†ç¾¤èŒƒå›´å†…çš„æˆæƒã€‚ RoleBinding:1234567891011121314# This role binding allows &quot;dave&quot; to read secrets in the &quot;development&quot; namespace.kind: RoleBindingapiVersion: rbac.authorization.k8s.io/v1metadata: name: read-secrets namespace: development # This only grants permissions within the &quot;development&quot; namespace.subjects:- kind: User name: dave apiGroup: rbac.authorization.k8s.ioroleRef: kind: ClusterRole name: secret-reader apiGroup: rbac.authorization.k8s.io ClusterRoleBinding: 12345678910111213# This cluster role binding allows anyone in the &quot;manager&quot; group to read secrets in any namespace.kind: ClusterRoleBindingapiVersion: rbac.authorization.k8s.io/v1metadata: name: read-secrets-globalsubjects:- kind: Group name: manager apiGroup: rbac.authorization.k8s.ioroleRef: kind: ClusterRole name: secret-reader apiGroup: rbac.authorization.k8s.io]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>kubernetes</tag>
        <tag>dashboard</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kuberneteséƒ¨ç½²:åŸºäºkubeadmçš„å›½å†…é•œåƒæºå®‰è£…]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fkubernetes%E9%83%A8%E7%BD%B2-%E5%9F%BA%E4%BA%8Ekubeadm%E7%9A%84%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[åŸºäºkubeadmå·¥å…·çš„kubernetes1.13.2éƒ¨ç½²ä¸­å›½åŒºé•œåƒéƒ¨ç½²å®‰è£…å®è·µã€‚ 1ã€kubernetesæ¶æ„Kubernetesä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š etcdä¿å­˜äº†æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼› apiserveræä¾›äº†èµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œå¹¶æä¾›è®¤è¯ã€æˆæƒã€è®¿é—®æ§åˆ¶ã€APIæ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶ï¼› controller managerè´Ÿè´£ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼› schedulerè´Ÿè´£èµ„æºçš„è°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°†Podè°ƒåº¦åˆ°ç›¸åº”çš„æœºå™¨ä¸Šï¼› kubeletè´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£Volumeï¼ˆCVIï¼‰å’Œç½‘ç»œï¼ˆCNIï¼‰çš„ç®¡ç†ï¼› Container runtimeè´Ÿè´£é•œåƒç®¡ç†ä»¥åŠPodå’Œå®¹å™¨çš„çœŸæ­£è¿è¡Œï¼ˆCRIï¼‰ï¼› kube-proxyè´Ÿè´£ä¸ºServiceæä¾›clusterå†…éƒ¨çš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼› é™¤äº†æ ¸å¿ƒç»„ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ¨èçš„Add-onsï¼š kube-dnsè´Ÿè´£ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›DNSæœåŠ¡ Ingress Controllerä¸ºæœåŠ¡æä¾›å¤–ç½‘å…¥å£ Heapsteræä¾›èµ„æºç›‘æ§ Dashboardæä¾›GUI Federationæä¾›è·¨å¯ç”¨åŒºçš„é›†ç¾¤ Fluentd-elasticsearchæä¾›é›†ç¾¤æ—¥å¿—é‡‡é›†ã€å­˜å‚¨ä¸æŸ¥è¯¢ ä¸‹é¢ä»‹ç»å¦‚ä½•å®‰è£…ã€‚ 2ã€å®‰è£…kubeadmé‡‡ç”¨å›½å†…é˜¿é‡Œäº‘é•œåƒæºï¼Œå®‰è£…kubeletã€kubeadmã€kubectl: 123456789101112131415161718cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/enabled=1gpgcheck=1repo_gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgexclude=kube*EOF# Set SELinux in permissive mode (effectively disabling it)setenforce 0sed -i &apos;s/^SELINUX=enforcing$/SELINUX=permissive/&apos; /etc/selinux/configyum install -y kubelet kubeadm kubectl --disableexcludes=kubernetessystemctl enable kubelet centos7ç”¨æˆ·è¿˜éœ€è¦è®¾ç½®è·¯ç”±ï¼š12345cat &lt;&lt;EOF &gt; /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOFsysctl --system Kubernetes 1.8å¼€å§‹è¦æ±‚å…³é—­ç³»ç»Ÿçš„Swapï¼Œå¦‚æœä¸å…³é—­ï¼Œé»˜è®¤é…ç½®ä¸‹kubeletå°†æ— æ³•å¯åŠ¨ï¼Œå…³é—­ç³»ç»Ÿçš„Swapæ–¹æ³•å¦‚ä¸‹:1swapoff -a ä¿®æ”¹ /etc/fstab æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰ SWAP çš„è‡ªåŠ¨æŒ‚è½½ï¼Œä½¿ç”¨free -mç¡®è®¤swapå·²ç»å…³é—­ã€‚swappinesså‚æ•°è°ƒæ•´ï¼Œä¿®æ”¹/etc/sysctl.d/k8s.confæ·»åŠ ä¸‹é¢ä¸€è¡Œï¼š1vm.swappiness=0 æ‰§è¡Œsysctl -p /etc/sysctl.d/k8s.confä½¿ä¿®æ”¹ç”Ÿæ•ˆã€‚ æ³¨ï¼š123456kubeadm init å¯åŠ¨ä¸€ä¸ª Kubernetes ä¸»èŠ‚ç‚¹kubeadm join å¯åŠ¨ä¸€ä¸ª Kubernetes å·¥ä½œèŠ‚ç‚¹å¹¶ä¸”å°†å…¶åŠ å…¥åˆ°é›†ç¾¤kubeadm upgrade æ›´æ–°ä¸€ä¸ª Kubernetes é›†ç¾¤åˆ°æ–°ç‰ˆæœ¬kubeadm config å¦‚æœä½¿ç”¨ v1.7.x æˆ–è€…æ›´ä½ç‰ˆæœ¬çš„ kubeadm åˆå§‹åŒ–é›†ç¾¤ï¼Œæ‚¨éœ€è¦å¯¹é›†ç¾¤åšä¸€äº›é…ç½®ä»¥ä¾¿ä½¿ç”¨ kubeadm upgrade å‘½ä»¤kubeadm token ç®¡ç† kubeadm join ä½¿ç”¨çš„ä»¤ç‰Œkubeadm reset è¿˜åŸ kubeadm init æˆ–è€… kubeadm join å¯¹ä¸»æœºæ‰€åšçš„ä»»ä½•æ›´æ”¹ 3ã€ç”¨kubeadmå®‰è£…masterkubeadm initè¿™ä¸ªå‘½ä»¤å¸®åŠ©ä½ å¯åŠ¨è·ŸMasterç›¸å…³çš„ç»„ä»¶APIServerã€Etcdã€Schedulerã€Controller-Managerç­‰ kubeadm initçš„å‚æ•°ï¼š123456789101112131415161718192021222324252627282930313233343536373839--apiserver-advertise-address stringAPI Serverå°†è¦å¹¿æ’­çš„ç›‘å¬åœ°å€ã€‚å¦‚æŒ‡å®šä¸º `0.0.0.0` å°†ä½¿ç”¨ç¼ºçœçš„ç½‘å¡åœ°å€ã€‚--apiserver-bind-port int32 ç¼ºçœå€¼: 6443API Serverç»‘å®šçš„ç«¯å£--apiserver-cert-extra-sans stringSliceå¯é€‰çš„é¢å¤–æä¾›çš„è¯ä¹¦ä¸»é¢˜åˆ«åï¼ˆSANsï¼‰ç”¨äºæŒ‡å®šAPI Serverçš„æœåŠ¡å™¨è¯ä¹¦ã€‚å¯ä»¥æ˜¯IPåœ°å€ä¹Ÿå¯ä»¥æ˜¯DNSåç§°ã€‚--cert-dir string ç¼ºçœå€¼: &quot;/etc/kubernetes/pki&quot;è¯ä¹¦çš„å­˜å‚¨è·¯å¾„ã€‚--config stringkubeadmé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚è­¦å‘Šï¼šé…ç½®æ–‡ä»¶çš„åŠŸèƒ½æ˜¯å®éªŒæ€§çš„ã€‚--cri-socket string ç¼ºçœå€¼: &quot;/var/run/dockershim.sock&quot;æŒ‡æ˜è¦è¿æ¥çš„CRI socketæ–‡ä»¶--dry-runä¸ä¼šåº”ç”¨ä»»ä½•æ”¹å˜ï¼›åªä¼šè¾“å‡ºå°†è¦æ‰§è¡Œçš„æ“ä½œã€‚--feature-gates stringé”®å€¼å¯¹çš„é›†åˆï¼Œç”¨æ¥æ§åˆ¶å„ç§åŠŸèƒ½çš„å¼€å…³ã€‚å¯é€‰é¡¹æœ‰:Auditing=true|false (å½“å‰ä¸ºALPHAçŠ¶æ€ - ç¼ºçœå€¼=false)CoreDNS=true|false (ç¼ºçœå€¼=true)DynamicKubeletConfig=true|false (å½“å‰ä¸ºBETAçŠ¶æ€ - ç¼ºçœå€¼=false)-h, --helpè·å–initå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯--ignore-preflight-errors stringSliceå¿½è§†æ£€æŸ¥é¡¹é”™è¯¯åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªæ£€æŸ¥é¡¹å¦‚å‘ç”Ÿé”™è¯¯å°†è¢«å±•ç¤ºè¾“å‡ºä¸ºè­¦å‘Šï¼Œè€Œéé”™è¯¯ã€‚ ä¾‹å¦‚: &apos;IsPrivilegedUser,Swap&apos;. å¦‚å¡«å†™ä¸º &apos;all&apos; åˆ™å°†å¿½è§†æ‰€æœ‰çš„æ£€æŸ¥é¡¹é”™è¯¯ã€‚--kubernetes-version string ç¼ºçœå€¼: &quot;stable-1&quot;ä¸ºcontrol planeé€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„Kubernetesç‰ˆæœ¬ã€‚--node-name stringæŒ‡å®šèŠ‚ç‚¹çš„åç§°ã€‚--pod-network-cidr stringæŒ‡æ˜podç½‘ç»œå¯ä»¥ä½¿ç”¨çš„IPåœ°å€æ®µã€‚ å¦‚æœè®¾ç½®äº†è¿™ä¸ªå‚æ•°ï¼Œcontrol planeå°†ä¼šä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹è‡ªåŠ¨åˆ†é…CIDRsã€‚--service-cidr string ç¼ºçœå€¼: &quot;10.96.0.0/12&quot;ä¸ºserviceçš„è™šæ‹ŸIPåœ°å€å¦å¤–æŒ‡å®šIPåœ°å€æ®µ--service-dns-domain string ç¼ºçœå€¼: &quot;cluster.local&quot;ä¸ºserviceså¦å¤–æŒ‡å®šåŸŸå, ä¾‹å¦‚ï¼š &quot;myorg.internal&quot;.--skip-token-printä¸æ‰“å°å‡ºç”± `kubeadm init` å‘½ä»¤ç”Ÿæˆçš„é»˜è®¤ä»¤ç‰Œã€‚--token stringè¿™ä¸ªä»¤ç‰Œç”¨äºå»ºç«‹ä¸»ä»èŠ‚ç‚¹é—´çš„åŒå‘å—ä¿¡é“¾æ¥ã€‚æ ¼å¼ä¸º [a-z0-9]&#123;6&#125;\.[a-z0-9]&#123;16&#125; - ç¤ºä¾‹ï¼š abcdef.0123456789abcdef--token-ttl duration ç¼ºçœå€¼: 24h0m0sä»¤ç‰Œè¢«è‡ªåŠ¨åˆ é™¤å‰çš„å¯ç”¨æ—¶é•¿ (ç¤ºä¾‹ï¼š 1s, 2m, 3h). å¦‚æœè®¾ç½®ä¸º &apos;0&apos;, ä»¤ç‰Œå°†æ°¸ä¸è¿‡æœŸã€‚ åœ¨è¿è¡Œ kubeadm init ä¹‹å‰å¯ä»¥å…ˆæ‰§è¡Œ kubeadm config images pull æ¥æµ‹è¯•ä¸ gcr.io çš„è¿æ¥ï¼Œkubeadm config images pullå°è¯•æ˜¯å¦å¯ä»¥æ‹‰å–é•œåƒï¼Œç”±äºå›½å†…è®¿é—®â€k8s.gcr.ioâ€, â€œgcr.ioâ€, â€œquay.ioâ€ æœ‰å›°éš¾ï¼Œè¿™é‡Œé‡‡ç”¨è‡ªå»ºdocker registerçš„æ–¹å¼ é€šè¿‡ç§æœ‰ä»“åº“æ‹‰å–k8s.gcr.ioç­‰é•œåƒæ„å»ºç§æœ‰é•œåƒï¼š12docker pull registrydocker run --restart=always -d -p 15000:5000 -v /mnt/date/registry:/var/lib/registry registry å¯ä»¥ä½¿ç”¨ä½¿ç”¨å‡†å¤‡å¥½çš„harborä»“åº“ ç™¾åº¦äº‘ç›˜-harborç§æœ‰ä»“åº“1234567891011121314151617k8s.gcr.io/coredns:1.2.6k8s.gcr.io/etcd:3.2.24k8s.gcr.io/kube-apiserver:v1.13.0k8s.gcr.io/kube-controller-manager:v1.13.0k8s.gcr.io/kube-proxy:v1.13.0k8s.gcr.io/kube-scheduler:v1.13.0k8s.gcr.io/pause:3.1k8s.gcr.io/addon-resizer:1.8.4k8s.gcr.io/metrics-server-amd64:v0.3.1k8s.gcr.io/traefik:1.7.5k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.0gcr.io/kubernetes-helm/tiller:v2.12.0quay.io/calico/cni:v3.3.2quay.io/calico/node:v3.3.2quay.io/calico/typha:v3.3.2 ä¸‹è½½ä¸‹æ¥åå¯¼å…¥å³å¯ï¼š12docker load -i /path/to/k8s-repo-1.13.0docker run --restart=always -d -p 80:5000 --name repo harbor.io:1180/system/k8s-repo:v1.13.0 æ„å»ºç§æœ‰ä»“åº“å¹¶ä¸Šä¼ é•œåƒçš„æ–¹æ³•ï¼ˆå®‰è£…ä¸éœ€è¦çœ‹è¿™éƒ¨ï¼‰ä»dockerä¸Šæ‹‰å–é•œåƒï¼š 1234567891011121314151617181920docker pull mirrorgooglecontainers/kube-apiserver:v1.13.2docker pull mirrorgooglecontainers/kube-proxy:v1.13.2docker pull mirrorgooglecontainers/kube-controller-manager:v1.13.2docker pull mirrorgooglecontainers/kube-scheduler:v1.13.2docker pull mirrorgooglecontainers/coredns:1.2.6docker pull mirrorgooglecontainers/etcd:3.2.24docker pull mirrorgooglecontainers/pause:3.1docker pull mirrorgooglecontainers/kubernetes-dashboard-amd64:v1.10.0docker pull shikanon096/traefik:1.7.5docker pull shikanon096/gcr.io.kubernetes-helm.tiller:v2.12.0docker pull mirrorgooglecontainers/addon-resizer:1.8.4docker pull mirrorgooglecontainers/metrics-server-amd64:v0.3.1docker pull quay.io/calico/cni:v3.3.2docker pull quay.io/calico/node:v3.3.2docker pull quay.io/calico/typha:v3.3.2... åˆ‡æ¢tag åˆ‡æ¢tag,æ–¹ä¾¿åé¢ç›´æ¥pushæœ¬åœ°ä»“åº“:123456789docker tag mirrorgooglecontainerso/kube-controller-manager:v1.13.2 192.168.1.118:80/kube-controller-manager:v1.13.2docker tag mirrorgooglecontainers/kube-proxy:v1.13.2 192.168.1.118:80/kube-proxy:v1.13.2docker tag mirrorgooglecontainers/kube-scheduler:v1.13.2 192.168.1.118:80/kube-scheduler:v1.13.2docker tag mirrorgooglecontainers/kube-apiserver:v1.13.2 192.168.1.118:80/kube-apiserver:v1.13.2... ç”±äºæ˜¯registryç”¨çš„æ˜¯httpï¼Œéœ€è¦è®¾ç½®dockerçš„daemon åœ¨/etc/docker/daemon.jsonä¸­åŠ å…¥ï¼š1234&#123; ... &quot;insecure-registries&quot;: [&quot;192.168.1.118:80&quot;]&#125; push åˆ°ä»“åº“push åˆ°ç§æœ‰ä»“åº“ï¼š 12345docker push 192.168.1.118:80/kube-scheduler:v1.13.2docker push 192.168.1.118:80/kube-apiserver:v1.13.2docker push 192.168.1.118:80/kube-proxy:v1.13.2docker push 192.168.1.118:80/kube-controller-manager:v1.13.2... é…ç½®ä»“åº“åœ°å€masteré…ç½®æ–°çš„ä»“åº“åœ°å€ï¼š1234567891011121314# å°†æºè®¾ç½®ä¸ºinsercuremkdir -p /etc/dockerecho -e &apos;&#123;\n&quot;insecure-registries&quot;:[&quot;k8s.gcr.io&quot;, &quot;gcr.io&quot;, &quot;quay.io&quot;]\n&#125;&apos; &gt; /etc/docker/daemon.jsonsystemctl restart docker # æ­¤å¤„ä¸ºregistryæ‰€åœ¨æœºå™¨çš„IPREGISTRY_HOST=&quot;192.168.1.118&quot;# è®¾ç½®Hostsï¼Œè®©æ‰€æœ‰ä¸Šé¢åŸŸåè½¬åˆ°æœ¬åœ°yes | cp /etc/hosts /etc/hosts_bakcat /etc/hosts_bak|grep -vE &apos;(gcr.io|harbor.io|quay.io)&apos; &gt; /etc/hostsecho &quot;&quot;&quot;$REGISTRY_HOST gcr.io harbor.io k8s.gcr.io quay.io &quot;&quot;&quot; &gt;&gt; /etc/hosts æµ‹è¯•ï¼š1234567891011kubeadm config images pullI0125 01:41:57.398374 5002 version.go:94] could not fetch a Kubernetes version from the internet: unable to get URL &quot;https://dl.k8s.io/release/stable-1.txt&quot;: Get https://storage.googleapis.com/kubernetes-release/release/stable-1.txt: net/http: request canceled (Client.Timeout exceeded while awaiting headers)I0125 01:41:57.398536 5002 version.go:95] falling back to the local client version: v1.13.2[config/images] Pulled k8s.gcr.io/kube-apiserver:v1.13.2[config/images] Pulled k8s.gcr.io/kube-controller-manager:v1.13.2[config/images] Pulled k8s.gcr.io/kube-scheduler:v1.13.2[config/images] Pulled k8s.gcr.io/kube-proxy:v1.13.2[config/images] Pulled k8s.gcr.io/pause:3.1[config/images] Pulled k8s.gcr.io/etcd:3.2.24[config/images] Pulled k8s.gcr.io/coredns:1.2.6 æˆåŠŸåå¯ä»¥ç›´æ¥ä½¿ç”¨kubeadm initï¼š123kubeadm init \ --kubernetes-version=v1.13.2 \ --pod-network-cidr=10.244.0.0/16 æ³¨ï¼šå¦‚æœä¸­é€”å‡ºé”™å¯ä»¥ç”¨kubeadm resetæ¥è¿›è¡Œå›é€€ åœ¨ä½¿ç”¨kubeadmçš„æ—¶å€™å‡ºç°kubelet node found bugï¼š123E1002 23:32:36.072441 49157 kubelet.go:2236] node &quot;master01&quot; not foundE1002 23:32:36.172630 49157 kubelet.go:2236] node &quot;master01&quot; not foundE1002 23:32:36.273892 49157 kubelet.go:2236] node &quot;master01&quot; not found è¿™ä¸»è¦ç”±äº--api-serverå¼•èµ·ï¼Œå¯ä»¥å»æ‰è¿™ä¸ªå‚æ•°è¯•è¯•ã€‚ kebeadm init æˆåŠŸåç»“æœ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768kubeadm init --kubernetes-version=v1.13.2 --pod-network-cidr=10.244.0.0/16[init] Using Kubernetes version: v1.13.2[preflight] Running pre-flight checks[preflight] Pulling images required for setting up a Kubernetes cluster[preflight] This might take a minute or two, depending on the speed of your internet connection[preflight] You can also perform this action in beforehand using &apos;kubeadm config images pull&apos;[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;[kubelet-start] Activating the kubelet service[certs] Using certificateDir folder &quot;/etc/kubernetes/pki&quot;[certs] Generating &quot;ca&quot; certificate and key[certs] Generating &quot;apiserver&quot; certificate and key[certs] apiserver serving cert is signed for DNS names [node10 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.1.120][certs] Generating &quot;apiserver-kubelet-client&quot; certificate and key[certs] Generating &quot;front-proxy-ca&quot; certificate and key[certs] Generating &quot;front-proxy-client&quot; certificate and key[certs] Generating &quot;etcd/ca&quot; certificate and key[certs] Generating &quot;etcd/server&quot; certificate and key[certs] etcd/server serving cert is signed for DNS names [node10 localhost] and IPs [192.168.1.120 127.0.0.1 ::1][certs] Generating &quot;etcd/healthcheck-client&quot; certificate and key[certs] Generating &quot;etcd/peer&quot; certificate and key[certs] etcd/peer serving cert is signed for DNS names [node10 localhost] and IPs [192.168.1.120 127.0.0.1 ::1][certs] Generating &quot;apiserver-etcd-client&quot; certificate and key[certs] Generating &quot;sa&quot; key and public key[kubeconfig] Using kubeconfig folder &quot;/etc/kubernetes&quot;[kubeconfig] Writing &quot;admin.conf&quot; kubeconfig file[kubeconfig] Writing &quot;kubelet.conf&quot; kubeconfig file[kubeconfig] Writing &quot;controller-manager.conf&quot; kubeconfig file[kubeconfig] Writing &quot;scheduler.conf&quot; kubeconfig file[control-plane] Using manifest folder &quot;/etc/kubernetes/manifests&quot;[control-plane] Creating static Pod manifest for &quot;kube-apiserver&quot;[control-plane] Creating static Pod manifest for &quot;kube-controller-manager&quot;[control-plane] Creating static Pod manifest for &quot;kube-scheduler&quot;[etcd] Creating static Pod manifest for local etcd in &quot;/etc/kubernetes/manifests&quot;[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &quot;/etc/kubernetes/manifests&quot;. This can take up to 4m0s[kubelet-check] Initial timeout of 40s passed.[apiclient] All control plane components are healthy after 59.004591 seconds[uploadconfig] storing the configuration used in ConfigMap &quot;kubeadm-config&quot; in the &quot;kube-system&quot; Namespace[kubelet] Creating a ConfigMap &quot;kubelet-config-1.13&quot; in namespace kube-system with the configuration for the kubelets in the cluster[patchnode] Uploading the CRI Socket information &quot;/var/run/dockershim.sock&quot; to the Node API object &quot;node10&quot; as an annotation[mark-control-plane] Marking the node node10 as control-plane by adding the label &quot;node-role.kubernetes.io/master=&apos;&apos;&quot;[mark-control-plane] Marking the node node10 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule][bootstrap-token] Using token: ngcxcv.5b60k99xhckulox4[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles[bootstraptoken] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials[bootstraptoken] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token[bootstraptoken] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster[bootstraptoken] creating the &quot;cluster-info&quot; ConfigMap in the &quot;kube-public&quot; namespace[addons] Applied essential addon: CoreDNS[addons] Applied essential addon: kube-proxyYour Kubernetes master has initialized successfully!To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/configYou should now deploy a pod network to the cluster.Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/You can now join any number of machines by running the following on each nodeas root: kubeadm join 192.168.1.120:6443 --token ngcxcv.5b60k99xhckulox4 --discovery-token-ca-cert-hash sha256:630385738470e6ad0fa065a92eb6519d9a05e593b3896fccadef4f39e025f273 è®¾ç½®æ™®é€šè´¦æˆ·æƒé™ï¼š123mkdir -p $HOME/.kubesudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/configsudo chown $(id -u):$(id -g) $HOME/.kube/config root ç”¨æˆ·ï¼Œåˆ™å¯ä»¥è¿è¡Œ:1export KUBECONFIG=/etc/kubernetes/admin.conf 4ã€ç”¨kubeadméƒ¨ç½²nodeï¼ŒæŠŠå…¶åŠ å…¥masterç”¨ä¸Šé¢kubeadm init å®‰è£…å®Œæˆåç»™çš„å‘½ä»¤å³å¯ï¼š 1kubeadm join 192.168.1.120:6443 --token xmjnn0.39xbep2zpyh0rjam --discovery-token-ca-cert-hash sha256:9c2dc63bab2a1392e797bca8104eac3ce115589af0486259a06d3277eb21b4cb ä¸ºäº†èƒ½ä½¿ç”¨kubectl,å¯ä»¥ä»masteræ‹·è´è¿‡æ¥ï¼š12scp root@&lt;master ip&gt;:/etc/kubernetes/admin.conf .kubectl --kubeconfig ./admin.conf get nodes æµ‹è¯•ï¼š1234kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster NotReady &lt;none&gt; 2m3s v1.13.2node10 NotReady master 6m7s v1.13.2 5ã€å®‰è£…ç½‘ç»œæ’ä»¶å®‰è£…ç½‘ç»œæ’ä»¶éœ€è¦æ³¨æ„ä¿è¯docker registerç§æœ‰ä»“åº“ä¸­å·²ç»æœ‰è¯¥é•œåƒï¼Œæˆ–è€…ç½‘ç»œå¯ä»¥è®¿é—®quay.ioç­‰å›½å¤–ç½‘ç«™ã€‚ Flannel1kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/bc79dd1505b0c8681ece4de4c0d86c5cd2643275/Documentation/kube-flannel.yml Calico12kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/rbac-kdd.yamlkubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml æ³¨ï¼šåº”ç”¨å±‚ç½‘ç»œï¼ˆè¦†ç›–ç½‘ç»œï¼‰æ˜¯æŒ‡å»ºç«‹åœ¨å¦ä¸€ä¸ªç½‘ç»œä¸Šçš„ç½‘ç»œã€‚è¯¥ç½‘ç»œä¸­çš„ç»“ç‚¹å¯ä»¥çœ‹ä½œé€šè¿‡è™šæ‹Ÿæˆ–é€»è¾‘é“¾è·¯è€Œè¿æ¥èµ·æ¥çš„ã€‚è™½ç„¶åœ¨åº•å±‚æœ‰å¾ˆå¤šæ¡ç‰©ç†é“¾è·¯ï¼Œä½†æ˜¯è¿™äº›è™šæ‹Ÿæˆ–é€»è¾‘é“¾è·¯éƒ½ä¸è·¯å¾„ä¸€ä¸€å¯¹åº”ã€‚Flannelå®è´¨ä¸Šæ˜¯ä¸€ç§â€œè¦†ç›–ç½‘ç»œ(overlay network)â€ï¼Œä¹Ÿå°±æ˜¯å°†TCPæ•°æ®åŒ…è£…åœ¨å¦ä¸€ç§ç½‘ç»œåŒ…é‡Œé¢è¿›è¡Œè·¯ç”±è½¬å‘å’Œé€šä¿¡ Minikubeç®€æ˜“å®‰è£…ä¹Ÿå¯ä»¥åŸºäºminikubeè¿›è¡Œç®€æ˜“å®‰è£…ï¼šä¸‹è½½minikube:12curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \ &amp;&amp; chmod +x minikube å®‰è£…ï¼š1minikube start --driver=&lt;driver_name&gt; driverå¯ä»¥æ˜¯kvmæˆ–è€…dockerï¼Œæ¯”å¦‚ï¼šåŸºäºkvmå¯åŠ¨ï¼š1minikube start --vm-driver=kvm åŸºäºdockerå¯åŠ¨ï¼š1minikube start --vm-driver=docker æŸ¥çœ‹minikubeæ˜¯å¦å¯åŠ¨ï¼š1minikube status åœæ‰é›†ç¾¤ï¼š1minikube stop]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>kubernetes</tag>
        <tag>kubeadm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kubernetes è®¾ç½®CAåŒå‘æ•°å­—è¯ä¹¦è®¤è¯]]></title>
    <url>%2F2019%2F%E8%BF%90%E7%BB%B4%2Fkubernetes-%E8%AE%BE%E7%BD%AECA%E5%8F%8C%E5%90%91%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81%2F</url>
    <content type="text"><![CDATA[Kubernetes è®¤è¯æ–¹å¼Kubernetes ç³»ç»Ÿæä¾›äº†ä¸‰ç§è®¤è¯æ–¹å¼ï¼šCA è®¤è¯ã€Token è®¤è¯ å’Œ Base è®¤è¯ã€‚ CA åŒå‘è®¤è¯æ–¹å¼æ˜¯æœ€ä¸ºä¸¥æ ¼å’Œå®‰å…¨çš„é›†ç¾¤å®‰å…¨é…ç½®æ–¹å¼ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„ä¸»è§’ã€‚ æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹ä»€ä¹ˆæ˜¯ CA è®¤è¯ï¼šCAè®¤è¯ï¼Œå³ç”µå­è®¤è¯æœåŠ¡ï¼Œè¯ä¹¦é¢å‘æœºæ„ï¼ˆCA, Certificate Authorityï¼‰å³é¢å‘æ•°å­—è¯ä¹¦çš„æœºæ„ã€‚æ˜¯è´Ÿè´£å‘æ”¾å’Œç®¡ç†æ•°å­—è¯ä¹¦çš„æƒå¨æœºæ„ï¼Œå¹¶ä½œä¸ºç”µå­å•†åŠ¡äº¤æ˜“ä¸­å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ï¼Œæ‰¿æ‹…å…¬é’¥ä½“ç³»ä¸­å…¬é’¥çš„åˆæ³•æ€§æ£€éªŒçš„è´£ä»»ã€‚CAä¸­å¿ƒä¸ºæ¯ä¸ªä½¿ç”¨å…¬å¼€å¯†é’¥çš„ç”¨æˆ·å‘æ”¾ä¸€ä¸ªæ•°å­—è¯ä¹¦ï¼Œæ•°å­—è¯ä¹¦çš„ä½œç”¨æ˜¯è¯æ˜è¯ä¹¦ä¸­åˆ—å‡ºçš„ç”¨æˆ·åˆæ³•æ‹¥æœ‰è¯ä¹¦ä¸­åˆ—å‡ºçš„å…¬å¼€å¯†é’¥ã€‚CAæœºæ„çš„æ•°å­—ç­¾åä½¿å¾—æ”»å‡»è€…ä¸èƒ½ä¼ªé€ å’Œç¯¡æ”¹è¯ä¹¦ã€‚åœ¨SETäº¤æ˜“ä¸­ï¼ŒCAä¸ä»…å¯¹æŒå¡äººã€å•†æˆ·å‘æ”¾è¯ä¹¦ï¼Œè¿˜è¦å¯¹è·æ¬¾çš„é“¶è¡Œã€ç½‘å…³å‘æ”¾è¯ä¹¦ã€‚ ä¸»è¦é…ç½®æµç¨‹å¦‚ä¸‹ï¼š ç”Ÿæˆæ ¹è¯ä¹¦ã€API Server æœåŠ¡ç«¯è¯ä¹¦ã€æœåŠ¡ç«¯ç§é’¥ã€å„ä¸ªç»„ä»¶æ‰€ç”¨çš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå®¢æˆ·ç«¯ç§é’¥ã€‚ ä¿®æ”¹ Kubernetes å„ä¸ªæœåŠ¡è¿›ç¨‹çš„å¯åŠ¨å‚æ•°ï¼Œå¯ç”¨åŒå‘è®¤è¯æ¨¡å¼ã€‚ opensshopesslä¸­RSAç®—æ³•æŒ‡ä»¤ä¸»è¦æœ‰ä¸‰ä¸ª: æŒ‡ä»¤ åŠŸèƒ½ genrsa ç”Ÿæˆå¹¶è¾“å…¥ä¸€ä¸ªRSAç§é’¥ rsa å¤„ç†RSAå¯†é’¥çš„æ ¼å¼è½¬æ¢ç­‰é—®é¢˜ rsautl ä½¿ç”¨RSAå¯†é’¥è¿›è¡ŒåŠ å¯†ã€è§£å¯†ã€ç­¾åå’ŒéªŒè¯ç­‰è¿ç®— 12345678910111213141516genrsa [args] [numbits] //å¯†é’¥ä½æ•°ï¼Œå»ºè®®1024åŠä»¥ä¸Š -des encrypt the generated key with DES in cbc mode //ç”Ÿæˆçš„å¯†é’¥ä½¿ç”¨desæ–¹å¼è¿›è¡ŒåŠ å¯† -des3 encrypt the generated key with DES in ede cbc mode (168 bit key) //ç”Ÿæˆçš„å¯†é’¥ä½¿ç”¨des3æ–¹å¼è¿›è¡ŒåŠ å¯† -seed encrypt PEM output with cbc seed //ç”Ÿæˆçš„å¯†é’¥è¿˜æ˜¯è¦seedæ–¹å¼è¿›è¡Œ -aes128, -aes192, -aes256 encrypt PEM output with cbc aes //ç”Ÿæˆçš„å¯†é’¥ä½¿ç”¨aesæ–¹å¼è¿›è¡ŒåŠ å¯† -camellia128, -camellia192, â€“camellia256 encrypt PEM output with cbc camellia //ç”Ÿæˆçš„å¯†é’¥ä½¿ç”¨camelliaæ–¹å¼è¿›è¡ŒåŠ å¯† -out file output the key to &apos;file //ç”Ÿæˆçš„å¯†é’¥æ–‡ä»¶ï¼Œå¯ä»ä¸­æå–å…¬é’¥ -passout arg output file pass phrase source //æŒ‡å®šå¯†é’¥æ–‡ä»¶çš„åŠ å¯†å£ä»¤ï¼Œå¯ä»æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€ç»ˆç«¯ç­‰è¾“å…¥ -f4 use F4 (0x10001) for the E value //é€‰æ‹©æŒ‡æ•°eçš„å€¼ï¼Œé»˜è®¤æŒ‡å®šè¯¥é¡¹ï¼Œeå€¼ä¸º65537 -3 use 3 for the E value //é€‰æ‹©æŒ‡æ•°eçš„å€¼ï¼Œé»˜è®¤å€¼ä¸º65537ï¼Œä½¿ç”¨è¯¥é€‰é¡¹åˆ™æŒ‡æ•°æŒ‡å®šä¸º3 -engine e use engine e, possibly a hardware device. //æŒ‡å®šä¸‰æ–¹åŠ å¯†åº“æˆ–è€…ç¡¬ä»¶ -rand file:file:... load the file (or the files in the directory) into //äº§ç”Ÿéšæœºæ•°çš„ç§å­æ–‡ä»¶ the random number generator req å‘½ä»¤ï¼šä½¿ç”¨å·²æœ‰ç§é’¥ç”Ÿæˆè¯ä¹¦è¯·æ±‚123456789101112openssl req [-inform PEM|DER] [-outform PEM|DER] [-in filename] [-passin arg] [-out filename] [-passout arg] [-text] [-pubkey] [-noout] [-verify] [-modulus] [-new] [-rand file(s)] [-newkey rsa:bits][-newkey alg:file] [-nodes] [-key filename] [-keyform PEM|DER] [-keyout filename] [-keygen_engine id] [-[digest]] [-config filename] [-subj arg] [-multivalue-rdn] [-x509] [-days n] [-set_serial n][-asn1-kludge] [-no-asn1-kludge] [-newhdr] [-extensions section] [-reqexts section] [-utf8] [-nameopt] [-reqopt] [-subject] [-subj arg] [-batch] [-verbose] [-engine id] -new :è¯´æ˜ç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ -x509 :è¯´æ˜ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ -key :æŒ‡å®šå·²æœ‰çš„ç§˜é’¥æ–‡ä»¶ç”Ÿæˆç§˜é’¥è¯·æ±‚ï¼Œåªä¸ç”Ÿæˆè¯ä¹¦è¯·æ±‚é€‰é¡¹-newé…åˆã€‚ -newkey :-newkeyæ˜¯ä¸-keyäº’æ–¥çš„ï¼Œ-newkeyæ˜¯æŒ‡åœ¨ç”Ÿæˆè¯ä¹¦è¯·æ±‚æˆ–è€…è‡ªç­¾åè¯ä¹¦çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆå¯†é’¥ï¼Œ ç„¶åç”Ÿæˆçš„å¯†é’¥åç§°ç”±-keyoutå‚æ•°æŒ‡å®šã€‚å½“æŒ‡å®šnewkeyé€‰é¡¹æ—¶ï¼Œåé¢æŒ‡å®šrsa:bitsè¯´æ˜äº§ç”Ÿ rsaå¯†é’¥ï¼Œä½æ•°ç”±bitsæŒ‡å®šã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šé€‰é¡¹-keyå’Œ-newkeyï¼Œé»˜è®¤è‡ªåŠ¨ç”Ÿæˆç§˜é’¥ã€‚ -out :-out æŒ‡å®šç”Ÿæˆçš„è¯ä¹¦è¯·æ±‚æˆ–è€…è‡ªç­¾åè¯ä¹¦åç§° -config :é»˜è®¤å‚æ•°åœ¨ubuntuä¸Šä¸º /etc/ssl/openssl.cnf, å¯ä»¥ä½¿ç”¨-configæŒ‡å®šç‰¹æ®Šè·¯å¾„çš„é…ç½®æ–‡ä»¶ -nodes :å¦‚æœæŒ‡å®š-newkeyè‡ªåŠ¨ç”Ÿæˆç§˜é’¥ï¼Œé‚£ä¹ˆ-nodesé€‰é¡¹è¯´æ˜ç”Ÿæˆçš„ç§˜é’¥ä¸éœ€è¦åŠ å¯†ï¼Œå³ä¸éœ€è¦è¾“å…¥passphase. -batch :æŒ‡å®šéäº¤äº’æ¨¡å¼ï¼Œç›´æ¥è¯»å–configæ–‡ä»¶é…ç½®å‚æ•°ï¼Œæˆ–è€…ä½¿ç”¨é»˜è®¤å‚æ•°å€¼ ä¸‹æ–‡ä¸­ç›¸å…³åè¯ç®€å†™CSR - Certificate Signing Request,å³è¯ä¹¦ç­¾åè¯·æ±‚,è¿™ä¸ªå¹¶ä¸æ˜¯è¯ä¹¦,è€Œæ˜¯å‘æƒå¨è¯ä¹¦é¢å‘æœºæ„è·å¾—ç­¾åè¯ä¹¦çš„ç”³è¯·,å…¶æ ¸å¿ƒå†…å®¹æ˜¯ä¸€ä¸ªå…¬é’¥(å½“ç„¶è¿˜é™„å¸¦äº†ä¸€äº›åˆ«çš„ä¿¡æ¯),åœ¨ç”Ÿæˆè¿™ä¸ªç”³è¯·çš„æ—¶å€™,åŒæ—¶ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªç§é’¥,ç§é’¥è¦è‡ªå·±ä¿ç®¡å¥½ CRT - CRTåº”è¯¥æ˜¯certificateçš„ä¸‰ä¸ªå­—æ¯,å…¶å®è¿˜æ˜¯è¯ä¹¦çš„æ„æ€ã€‚ åŒå‘ç­¾åæ•°å­—è¯ä¹¦è®¤è¯åˆ›å»ºCAè¯ä¹¦å’Œç§é’¥ç›¸å…³æ–‡ä»¶(1) ç”Ÿæˆå®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œå³å®¢æˆ·ç«¯çš„å…¬ç§é’¥å¯¹123456//ç”Ÿæˆç§é’¥æ–‡ä»¶# openssl genrsa -out ca.key 2048Generating RSA private key, 2048 bit long modulus.......................+++................................................+++e is 65537 (0x10001) (2) ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼šç”¨è‡ªå·±çš„ç§é’¥ä¸ºè¯ä¹¦è¯·æ±‚æ–‡ä»¶ç­¾åï¼Œç”Ÿæˆè¯ä¹¦æ–‡ä»¶1openssl req -x509 -new -nodes -key ca.key -subj &quot;/CN=master&quot; -days 7000 -out ca.crt (3) kube-apiserviceçš„ç§é’¥:1openssl genrsa -out server.key 2048 (4) é€šè¿‡é…ç½®æ–‡ä»¶ç”Ÿæˆç­¾åè¯·æ±‚è¯ä¹¦ï¼šåˆ›å»ºä¸€ä¸ªmaster-ssl.cnfé…ç½®æ–‡ä»¶ï¼Œç”¨æ¥ç”Ÿæˆä¹¦è¯ç­¾åè¯·æ±‚æ–‡ä»¶å’Œè¯ä¹¦æ–‡ä»¶ï¼š1234567891011121314151617181920[req]req_extensions = v3_reqdistinguished_name = req_distinguished_name[req_distinguished_name][v3_req]basicConstraints = CA:FALSEkeyUsage = nonRepudiation, digitalSignature, keyEnciphermentsubjectAltName = @alt_name[alt_name]DNS.1 = kubernetesDNS.2 = kubernetes.defaultDNS.3 = kubernetes.default.svcDNS.4 = kubernetes.default.svc.cluster.local# master hostnameDNS.5 = master# master IPIP.1 = 192.168.1.122# kubernetes.default&apos;s ClusterIPIP.2 = 10.254.0.1 æŸ¥çœ‹kubernetes.defaultçš„cluster IP:123456789101112131415161718192021222324# kubectl get svc kubernetes -o yamlapiVersion: v1kind: Servicemetadata: creationTimestamp: 2019-01-10T08:31:18Z labels: component: apiserver provider: kubernetes name: kubernetes namespace: default resourceVersion: &quot;18&quot; selfLink: /api/v1/namespaces/default/services/kubernetes uid: 1a258e01-14b2-11e9-86b7-525400bea75cspec: clusterIP: 10.254.0.1 ports: - name: https port: 443 protocol: TCP targetPort: 6443 sessionAffinity: ClientIP type: ClusterIPstatus: loadBalancer: &#123;&#125; åŸºäºmstaer_ssl.cnfåˆ›å»ºserver.csrå’Œserver.crtæ–‡ä»¶. åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ï¼š1openssl req -new -key server.key -subj &quot;/CN=master&quot; -config master_ssl.cnf -out server.csr åˆ›å»ºè¯ä¹¦æ–‡ä»¶ï¼š1openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -days 7000 -extensions v3_req -extfile master_ssl.cnf -out server.crt ä¸‹é¢ç”Ÿæˆserver.crt å’Œca.srl (5) è®¾ç½®kube-apiserverå¯åŠ¨å‚æ•°1KUBE_API_ARGS=&quot;--client-ca-file=/var/run/kubernetes/ca.crt --tls-private-key-file=/var/run/kubernetes/server.key --tls-cert-file=/var/run/kubernetes/server.crt --secure-port=6443&quot; --client-ca-fileè¡¨ç¤ºCAæ ¹è¯ä¹¦æ–‡ä»¶ã€--tls-private-key-fileæœåŠ¡ç«¯è¯ä¹¦æ–‡ä»¶ã€--tls-cert-fileæœåŠ¡ç«¯ç§é’¥æ–‡ä»¶; é‡å¯kube-apiserveræœåŠ¡ï¼š1systemctl restart kube-apiserver è®¾ç½® kube-controller-manager çš„å®¢æˆ·ç«¯(1) ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶å’Œè¯ä¹¦æ–‡ä»¶ç§é’¥æ–‡ä»¶ï¼š1openssl genrsa -out cs_client.key 2048 è¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆCertificate Signing Requestï¼‰æ–‡ä»¶ï¼š1openssl req -new -key cs_client.key -subj &quot;/CN=master&quot; -out cs_client.csr è¯ä¹¦æ–‡ä»¶ï¼š1openssl x509 -req -in cs_client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -days 7000 -out cs_client.crt (2) åˆ›å»ºkubeconfig1234567891011121314151617apiVersion: v1kind: Configusers:- name: controllermanager user: client-certificate: /var/run/kubernetes/cs_client.crt client-key: /var/run/kubernetes/cs_client.keyclusters:- name: local cluster: certificate-authority: /var/run/kubernetes/ca.crtcontexts:- context: cluster: local user: controllermanager name: my-contextcurrent-context: my-context (3) é…ç½®å‚æ•°ï¼Œé‡æ–°å¯åŠ¨kube-controller-manager/etc/kubernetes/controller-manager12# Add your own!KUBE_CONTROLLER_MANAGER_ARGS=&quot;--master=https://192.168.1.122:6443 --service-account-key-file=/var/run/kubernetes/server.key --root-ca-file=/var/run/kubernetes/ca.crt --kubeconfig=/etc/kubernetes/kubeconfig&quot; é‡å¯æœåŠ¡1systemctl restart kube-controller-manager kube-scheduleré…ç½®é‡å¯12# Add your own!KUBE_SCHEDULER_ARGS=&quot;--address=0.0.0.0 --master=https://192.168.1.122:6443 --kubeconfig=/etc/kubernetes/kubeconfig&quot; é‡å¯æœåŠ¡ï¼š1systemctl restart kube-scheduler NodeèŠ‚ç‚¹è®¾ç½®ä»masterå¤åˆ¶ca.crtå’Œca.keyåˆ°NodeèŠ‚ç‚¹ä¸Šï¼ŒæŒ‰ç…§å‰é¢çš„æ–¹å¼ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚å’Œè¯ä¹¦æ–‡ä»¶ã€‚ kubeletå®¢æˆ·ç«¯ç§é’¥ï¼š1openssl genrsa -out kubelet_client.key 2048 è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ï¼š1openssl req -new -key kubelet_client.key -subj &quot;/CN=node2&quot; -out kubelet_client.csr è¯ä¹¦æ–‡ä»¶ï¼š1openssl x509 -req -in kubelet_client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -days 7000 -out kubelet_client.crt è®¾ç½®kubeletå¯åŠ¨ï¼š1KUBELET_ARGS=&quot;--certificate-authority=/var/run/kubernetes/ssl_keys/ca.crt --client-certificate=/var/run/kubernetes/ssl_keys/cs_client.crt --client-key=/var/run/kubernetes/ssl_keys/cs_client.key&quot; 12# Add your own!KUBELET_ARGS=&quot;--kubeconfig=/etc/kubernetes/keubeconfig&quot; é‡å¯:1systemctl restart kubelet kube-proxy1KUBE_PROXY_ARGS=&quot;--bind-address=0.0.0.0 --master=https://192.168.1.122:6443 --kubeconfig=/etc/kubernetes/kubeconfig&quot; é‡å¯ï¼š1systemctl restart kube-proxy åœ¨è®¾ç½®å®Œæˆä¹‹åmasteræ³¨æ„å¼€å¯6443ç«¯å£ï¼š1234567#æ·»åŠ ç«¯å£firewall-cmd --zone=public --add-port=6443/tcp --permanent#é‡æ–°è½½å…¥firewall-cmd --reload æµ‹è¯•æ˜¯å¦æˆåŠŸï¼š1234# kubectl --server=https://192.168.1.122:6443 --certificate-authority=/var/run/kubernetes/ssl_keys/ca.crt --client-certificate=/var/run/kubernetes/ssl_keys/cs_client.crt --client-key=/var/run/kubernetes/ssl_keys/cs_client.key get nodesNAME STATUS AGEnode1 Ready 5dnode2 Ready 5d]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>kubernetes</tag>
        <tag>è¯ä¹¦è®¤è¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[go mod åœ¨ä½¿ç”¨ç§æœ‰gitlabåšnginxè½¬å‘æ—¶â€œgo-get=1â€é”™è¯¯è§£å†³]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2Fgo-mod-%E5%9C%A8%E4%BD%BF%E7%94%A8%E7%A7%81%E6%9C%89gitlab%E6%97%B6goget%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%2F</url>
    <content type="text"><![CDATA[nginxé…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼š123if ($condition = gogetpath) &#123; return 200 &quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta content=&apos;gitlab.data-spark.cn/$1/$2 git http://gitlab.data-spark.cn/$1/$2.git&apos; name=&apos;go-import&apos;&gt;&lt;/head&gt;&lt;/html&gt;&quot;;&#125; å…·ä½“ï¼š 123456789101112131415161718192021222324252627282930313233server&#123; listen 80; listen 443 ssl; server_name gitlab.data-spark.cn; if ($args ~* &quot;^go-get=1&quot;) &#123; set $condition goget; &#125; if ($uri ~ ^/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/.*$) &#123; set $condition &quot;$&#123;condition&#125;path&quot;; &#125; if ($condition = gogetpath) &#123; return 200 &quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta content=&apos;gitlab.data-spark.cn/$1/$2 git http://gitlab.data-spark.cn/$1/$2.git&apos; name=&apos;go-import&apos;&gt;&lt;/head&gt;&lt;/html&gt;&quot;; &#125; ssl on; ssl_certificate /etc/nginx/conf.d/ssl/gitlab.data-spark.cn_bundle.crt; ssl_certificate_key /etc/nginx/conf.d/ssl/gitlab.data-spark.cn.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; ssl_ciphers EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5; # avoid ssl stripping add_header Strict-Transport-Security &quot;max-age=31536000; includeSubdomains;&quot;; location / &#123; proxy_pass http://localhost:18080/; &#125; error_page 497 https://$host$uri?$args;&#125; åŠ å…¥äº†123456789if ($args ~* &quot;^go-get=1&quot;) &#123; set $condition goget;&#125;if ($uri ~ ^/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/.*$) &#123; set $condition &quot;$&#123;condition&#125;path&quot;; &#125;if ($condition = gogetpath) &#123; return 200 &quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta content=&apos;your.domain.com/$1/$2 git http://your.domain.com/$1/$2.git&apos; name=&apos;go-import&apos;&gt;&lt;/head&gt;&lt;/html&gt;&quot;;&#125; go mod å…¶ä»–é—®é¢˜é—®é¢˜ä¸€ï¼šä¾èµ–çš„åŒ…ä¸‹è½½åˆ°å“ªé‡Œäº†ï¼Ÿä½¿ç”¨Goçš„åŒ…ç®¡ç†æ–¹å¼ï¼Œä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…è¢«ä¸‹è½½åˆ°äº†$GOPATH/pkg/modè·¯å¾„ä¸‹ã€‚å¦‚æœä½ æˆåŠŸè¿è¡Œäº†æœ¬ä¾‹ï¼Œå¯ä»¥åœ¨æ‚¨çš„$GOPATH/pkg/mod ä¸‹æ‰¾åˆ°ä¸€ä¸ªè¿™æ ·çš„åŒ… github.com/astaxie/beego@v1.11.1 é—®é¢˜äºŒï¼š ä¾èµ–åŒ…çš„ç‰ˆæœ¬æ˜¯æ€ä¹ˆæ§åˆ¶çš„ï¼Ÿåœ¨ä¸Šä¸€ä¸ªé—®é¢˜é‡Œï¼Œå¯ä»¥çœ‹åˆ°æœ€ç»ˆä¸‹è½½åœ¨$GOPATH/pkg/mod ä¸‹çš„åŒ… github.com/astaxie/beego@v1.11.1 æœ€åä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬å· 1.11.1ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ$GOPATH/pkg/modé‡Œå¯ä»¥ä¿å­˜ç›¸åŒåŒ…çš„ä¸åŒç‰ˆæœ¬ã€‚ç‰ˆæœ¬æ˜¯åœ¨go.modä¸­æŒ‡å®šçš„ã€‚å¦‚æœï¼Œåœ¨go.modä¸­æ²¡æœ‰æŒ‡å®šï¼Œgoå‘½ä»¤ä¼šè‡ªåŠ¨ä¸‹è½½ä»£ç ä¸­çš„ä¾èµ–çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæœ¬ä¾‹å°±æ˜¯è‡ªåŠ¨ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬ã€‚å¦‚æœï¼Œåœ¨go.modç”¨requireè¯­å¥æŒ‡å®šåŒ…å’Œç‰ˆæœ¬ ï¼Œgoå‘½ä»¤ä¼šæ ¹æ®æŒ‡å®šçš„è·¯å¾„å’Œç‰ˆæœ¬ä¸‹è½½åŒ…ï¼ŒæŒ‡å®šç‰ˆæœ¬æ—¶å¯ä»¥ç”¨latestï¼Œè¿™æ ·å®ƒä¼šè‡ªåŠ¨ä¸‹è½½æŒ‡å®šåŒ…çš„æœ€æ–°ç‰ˆæœ¬ é—®é¢˜ä¸‰ï¼š å¯ä»¥æŠŠé¡¹ç›®æ”¾åœ¨$GOPATH/srcä¸‹å—ï¼Ÿå¯ä»¥ã€‚ä½†æ˜¯goä¼šæ ¹æ®GO111MODULEçš„å€¼è€Œé‡‡å–ä¸åŒçš„å¤„ç†æ–¹å¼é»˜è®¤æƒ…å†µä¸‹ï¼ŒGO111MODULE=auto è‡ªåŠ¨æ¨¡å¼auto è‡ªåŠ¨æ¨¡å¼ä¸‹ï¼Œé¡¹ç›®åœ¨$GOPATH/srcé‡Œä¼šä½¿ç”¨$GOPATH/srcçš„ä¾èµ–åŒ…ï¼Œåœ¨$GOPATH/srcå¤–ï¼Œå°±ä½¿ç”¨go.mod é‡Œ requireçš„åŒ…on å¼€å¯æ¨¡å¼ï¼Œ1.12åï¼Œæ— è®ºåœ¨$GOPATH/srcé‡Œè¿˜æ˜¯åœ¨å¤–é¢ï¼Œéƒ½ä¼šä½¿ç”¨go.mod é‡Œ requireçš„åŒ…off å…³é—­æ¨¡å¼ï¼Œå°±æ˜¯è€è§„çŸ©ã€‚ é—®é¢˜ä¸‰ï¼š ä¾èµ–åŒ…ä¸­çš„åœ°å€å¤±æ•ˆäº†æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ http://golang.org/x/â€¦ ä¸‹çš„åŒ…éƒ½æ— æ³•ä¸‹è½½æ€ä¹ˆåŠï¼Ÿåœ¨goå¿«é€Ÿå‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›ä¾èµ–åŒ…åœ°å€å˜æ›´äº†ã€‚ä»¥å‰çš„åšæ³•ä¿®æ”¹æºç ï¼Œç”¨æ–°è·¯å¾„æ›¿æ¢importçš„åœ°å€git clone æˆ– go get æ–°åŒ…åï¼Œcopyåˆ°$GOPATH/srcé‡Œæ—§çš„è·¯å¾„ä¸‹æ— è®ºä»€ä¹ˆæ–¹æ³•ï¼Œéƒ½ä¸ä¾¿äºç»´æŠ¤ï¼Œç‰¹åˆ«æ˜¯å¤šäººååŒå¼€å‘æ—¶ã€‚ä½¿ç”¨go.modå°±ç®€å•äº†ï¼Œåœ¨go.modæ–‡ä»¶é‡Œç”¨ replace æ›¿æ¢åŒ…ï¼Œä¾‹å¦‚replace golang.org/x/text =&gt; github.com/golang/text latestè¿™æ ·ï¼Œgoä¼šç”¨ http://github.com/golang/text æ›¿ä»£http://golang.org/x/textï¼ŒåŸç†å°±æ˜¯ä¸‹è½½http://github.com/golang/text çš„æœ€æ–°ç‰ˆæœ¬åˆ° $GOPATH/pkg/mod/golang.org/x/textä¸‹ã€‚ é—®é¢˜å››ï¼š initç”Ÿæˆçš„go.modçš„æ¨¡å—åç§°æœ‰ä»€ä¹ˆç”¨ï¼Ÿæœ¬ä¾‹é‡Œï¼Œç”¨ go mod init hello ç”Ÿæˆçš„go.modæ–‡ä»¶é‡Œçš„ç¬¬ä¸€è¡Œä¼šç”³æ˜module helloå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®å·²ç»ä¸åœ¨$GOPATH/srcé‡Œäº†ï¼Œé‚£ä¹ˆå¼•ç”¨è‡ªå·±æ€ä¹ˆåŠï¼Ÿå°±ç”¨æ¨¡å—å+è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œåœ¨é¡¹ç›®ä¸‹æ–°å»ºç›®å½• utilsï¼Œåˆ›å»ºä¸€ä¸ªtools.goæ–‡ä»¶:1234567package utilsimport â€œfmtâ€func PrintText(text string) &#123; fmt.Println(text)&#125; åœ¨æ ¹ç›®å½•ä¸‹çš„hello.goæ–‡ä»¶å°±å¯ä»¥ import â€œhello/utilsâ€ å¼•ç”¨utils1234567891011121314package mainimport (&quot;hello/utils&quot;&quot;github.com/astaxie/beego&quot;)func main() &#123; utils.PrintText(&quot;Hi&quot;) beego.Run()&#125; é—®é¢˜äº”ï¼šä»¥å‰è€é¡¹ç›®å¦‚ä½•ç”¨æ–°çš„åŒ…ç®¡ç†å¦‚æœç”¨autoæ¨¡å¼,æŠŠé¡¹ç›®ç§»åŠ¨åˆ°$GOPATH/srcå¤–è¿›å…¥ç›®å½•ï¼Œè¿è¡Œ go mod init + æ¨¡å—åç§°,go build æˆ–è€… go run ä¸€æ¬¡]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºGolangå¾’æ‰‹å†™ä¸ªè½¬å‘ä»£ç†æœåŠ¡]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E5%9F%BA%E4%BA%8Ego%E5%BE%92%E6%89%8B%E5%86%99%E4%B8%AA%E8%BD%AC%E5%8F%91%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[ç”±äºå…¬å¸ç»å¸¸éœ€è¦å¼‚åœ°åŠå…¬ï¼Œåœ¨è°ƒè¯•çš„æ—¶å€™éœ€è¦ç”¨åˆ°å†…ç½‘ç¯å¢ƒï¼Œå› æ­¤æ‰‹åŠ¨å†™äº†ä¸ªä»£ç†è½¬å‘æœåŠ¡å™¨çµ¦å…„å¼Ÿä»¬ç”¨ï¼Œé¡¹ç›®åœ°å€æ˜¯ï¼šsocks5proxyã€‚ é€‰å‹ä¸Šï¼Œè¯­è¨€ä¸Šå°±é€‰æ‹©äº†Goï¼Œç®€å•æ¸…æ™°ï¼Œè½¬å‘åè®®é€‰æ‹©äº†socks5ã€‚ SOCKS5åè®®ä»‹ç»SOCKSæ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKSæ˜¯â€SOCKetSâ€çš„ç¼©å†™ã€‚SOCKS5æ˜¯SOCKS4çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDPæ”¯æŒã€‚ SOCKS5åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š (1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ (2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯ (3) è¯·æ±‚ä¿¡æ¯ ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼åˆ›å»ºä¸SOCKS5æœåŠ¡å™¨çš„TCPè¿æ¥åå®¢æˆ·ç«¯éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ VER NMETHODS METHODS 1 1 1-255 VERæ˜¯SOCKSç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯0x05ï¼› NMETHODSæ˜¯METHODSéƒ¨åˆ†çš„é•¿åº¦ï¼› METHODSæ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å 1å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š 0x00 ä¸éœ€è¦è®¤è¯ 0x01 GSSAPI 0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯ 0x03 - 0x7Fç”±IANAåˆ†é…ï¼ˆä¿ç•™ï¼‰ 0x80 - 0xFEä¸ºç§äººæ–¹æ³•ä¿ç•™ 0xFF æ— å¯æ¥å—çš„æ–¹æ³• æœåŠ¡å™¨å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š VER METHOD 1 1 VERæ˜¯SOCKSç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯0x05ï¼› METHODæ˜¯æœåŠ¡ç«¯é€‰ä¸­çš„æ–¹æ³•ã€‚å¦‚æœè¿”å›0xFFè¡¨ç¤ºæ²¡æœ‰ä¸€ä¸ªè®¤è¯æ–¹æ³•è¢«é€‰ä¸­ï¼Œå®¢æˆ·ç«¯éœ€è¦å…³é—­è¿æ¥ã€‚ ä»£ç å®ç°ï¼š 1234567891011121314151617181920212223242526272829303132type ProtocolVersion struct &#123; VER uint8 NMETHODS uint8 METHODS []uint8&#125;func (s *ProtocolVersion) handshake(conn net.Conn) error &#123; b := make([]byte, 255) n, err := conn.Read(b) if err != nil &#123; log.Println(err) return err &#125; s.VER = b[0] //ReadByte reads and returns a single byteï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsocksçš„ç‰ˆæœ¬å· s.NMETHODS = b[1] //nmethodsæ˜¯è®°å½•methodsçš„é•¿åº¦çš„ã€‚nmethodsçš„é•¿åº¦æ˜¯1ä¸ªå­—èŠ‚ if n != int(2+s.NMETHODS) &#123; return errors.New(&quot;åè®®é”™è¯¯, sNMETHODSä¸å¯¹&quot;) &#125; s.METHODS = b[2:2+s.NMETHODS] //è¯»å–æŒ‡å®šé•¿åº¦ä¿¡æ¯ï¼Œè¯»å–æ­£å¥½len(buf)é•¿åº¦çš„å­—èŠ‚ã€‚å¦‚æœå­—èŠ‚æ•°ä¸æ˜¯æŒ‡å®šé•¿åº¦ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯å’Œæ­£ç¡®çš„å­—èŠ‚æ•° if s.VER != 5 &#123; return errors.New(&quot;è¯¥åè®®ä¸æ˜¯socks5åè®®&quot;) &#125; //æœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯æ¶ˆæ¯: //ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºç‰ˆæœ¬å·ä¸º5ï¼Œå³socks5åè®®ï¼Œ // ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœåŠ¡ç«¯é€‰ä¸­çš„è®¤è¯æ–¹æ³•ï¼Œ0å³æ— éœ€å¯†ç è®¿é—®, 2è¡¨ç¤ºéœ€è¦ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ã€‚ resp :=[]byte&#123;5, 0&#125; conn.Write(resp) return nil&#125; ï¼ˆ2ï¼‰æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯SOCKS5åè®®æä¾›5ç§è®¤è¯æ–¹å¼ï¼š 0x00 ä¸éœ€è¦è®¤è¯ 0x01 GSSAPI 0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯ 0x03 - 0x7Fç”±IANAåˆ†é…ï¼ˆä¿ç•™ï¼‰ 0x80 - 0xFEä¸ºç§äººæ–¹æ³•ä¿ç•™ è¿™é‡Œå°±ä¸»è¦ä»‹ç»ç”¨æˆ·åã€å¯†ç è®¤è¯ã€‚åœ¨å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åå•†ä½¿ç”¨ç”¨æˆ·åå¯†ç è®¤è¯åï¼Œå®¢æˆ·ç«¯å‘å‡ºç”¨æˆ·åå¯†ç ï¼š é‰´å®šåè®®ç‰ˆæœ¬ ç”¨æˆ·åé•¿åº¦ ç”¨æˆ·å å¯†ç é•¿åº¦ å¯†ç  1 1 åŠ¨æ€ 1 åŠ¨æ€ æœåŠ¡å™¨é‰´å®šåå‘å‡ºå¦‚ä¸‹å›åº”ï¼š é‰´å®šåè®®ç‰ˆæœ¬ é‰´å®šçŠ¶æ€ 1 1 å…¶ä¸­é‰´å®šçŠ¶æ€ 0x00 è¡¨ç¤ºæˆåŠŸï¼Œ0x01 è¡¨ç¤ºå¤±è´¥ã€‚ ä»£ç å®ç°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748type Socks5Auth struct &#123; VER uint8 ULEN uint8 UNAME string PLEN uint8 PASSWD string&#125;func (s *Socks5Auth) authenticate(conn net.Conn) error &#123; b := make([]byte, 128) n, err := conn.Read(b) if err != nil&#123; log.Println(err) return err &#125; s.VER = b[0] if s.VER != 5 &#123; return errors.New(&quot;è¯¥åè®®ä¸æ˜¯socks5åè®®&quot;) &#125; s.ULEN = b[1] s.UNAME = string(b[2:2+s.ULEN]) s.PLEN = b[2+s.ULEN+1] s.PASSWD = string(b[n-int(s.PLEN):n]) log.Println(s.UNAME, s.PASSWD) if username != s.UNAME || passwd != s.PASSWD &#123; return errors.New(&quot;è´¦å·å¯†ç é”™è¯¯&quot;) &#125; /** å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ The server verifies the supplied UNAME and PASSWD, and sends the following response: +----+--------+ |VER | STATUS | +----+--------+ | 1 | 1 | +----+--------+ A STATUS field of X&apos;00&apos; indicates success. If the server returns a `failure&apos; (STATUS value other than X&apos;00&apos;) status, it MUST close the connection. */ resp := []byte&#123;0x05, 0x00&#125; conn.Write(resp) return nil&#125; ä½†å…¶å®ï¼Œç°åœ¨å¤§å®¶éƒ½ä¹ æƒ¯è‡ªå·±é‡‡ç”¨åŠ å¯†æµçš„æ–¹å¼è¿›è¡ŒåŠ å¯†ï¼Œå¾ˆå°‘é‡‡ç”¨ç”¨æˆ·åå¯†ç çš„å½¢å¼è¿›è¡ŒåŠ å¯†ï¼Œåé¢ç« èŠ‚ä¼šä»‹ç»ä¸€ç§å¯¹SOCKSçš„æ··æ·†åŠ å¯†æ–¹å¼ã€‚ ï¼ˆ3ï¼‰è¯·æ±‚ä¿¡æ¯è®¤è¯ç»“æŸåå®¢æˆ·ç«¯å°±å¯ä»¥å‘é€è¯·æ±‚ä¿¡æ¯ã€‚å¦‚æœè®¤è¯æ–¹æ³•æœ‰ç‰¹æ®Šå°è£…è¦æ±‚ï¼Œè¯·æ±‚å¿…é¡»æŒ‰ç…§æ–¹æ³•æ‰€å®šä¹‰çš„æ–¹å¼è¿›è¡Œå°è£…è§£å¯†ï¼Œå…¶åŸå§‹æ ¼å¼å¦‚ä¸‹ï¼š VER CMD RSV ATYP DST.ADDR DST.PORT 1 1 0x00 1 åŠ¨æ€ 2 VERæ˜¯SOCKSç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯0x05ï¼› CMDæ˜¯SOCKçš„å‘½ä»¤ç  0x01è¡¨ç¤ºCONNECTè¯·æ±‚ 0x02è¡¨ç¤ºBINDè¯·æ±‚ 0x03è¡¨ç¤ºUDPè½¬å‘ RSV 0x00ï¼Œä¿ç•™ ATYP DST.ADDRç±»å‹ DST.ADDR ç›®çš„åœ°å€ 0x01 IPv4åœ°å€ï¼ŒDST.ADDRéƒ¨åˆ†4å­—èŠ‚é•¿åº¦ 0x03 åŸŸåï¼ŒDST.ADDRéƒ¨åˆ†ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºåŸŸåé•¿åº¦ï¼ŒDST.ADDRå‰©ä½™çš„å†…å®¹ä¸ºåŸŸåï¼Œæ²¡æœ‰\0ç»“å°¾ã€‚ 0x04 IPv6åœ°å€ï¼Œ16ä¸ªå­—èŠ‚é•¿åº¦ã€‚ DST.PORT ç½‘ç»œå­—èŠ‚åºè¡¨ç¤ºçš„ç›®çš„ç«¯å£ ä»£ç å®ç°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172type Socks5Resolution struct &#123; VER uint8 CMD uint8 RSV uint8 ATYP uint8 DSTADDR []byte DSTPORT uint16 DSTDOMAIN string RAWADDR *net.TCPAddr&#125;func (s *Socks5Resolution) lstRequest(conn net.Conn) error &#123; b := make([]byte, 128) n, err := conn.Read(b) if err != nil || n &lt; 7 &#123; log.Println(err) return errors.New(&quot;è¯·æ±‚åè®®é”™è¯¯&quot;) &#125; s.VER = b[0] if s.VER != 5 &#123; return errors.New(&quot;è¯¥åè®®ä¸æ˜¯socks5åè®®&quot;) &#125; s.CMD = b[1] if s.CMD != 1 &#123; return errors.New(&quot;å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹ä¸ä¸ºä»£ç†è¿æ¥, å…¶ä»–åŠŸèƒ½æš‚æ—¶ä¸æ”¯æŒ.&quot;) &#125; s.RSV = b[2] //RSVä¿ç•™å­—ç«¯ï¼Œå€¼é•¿åº¦ä¸º1ä¸ªå­—èŠ‚ s.ATYP = b[3] switch s.ATYP &#123; case 1: // IP V4 address: X&apos;01&apos; s.DSTADDR = b[4 : 4+net.IPv4len] case 3: // DOMAINNAME: X&apos;03&apos; s.DSTDOMAIN = string(b[5:n-2]) ipAddr, err := net.ResolveIPAddr(&quot;ip&quot;, s.DSTDOMAIN) if err != nil &#123; return err &#125; s.DSTADDR = ipAddr.IP case 4: // IP V6 address: X&apos;04&apos; s.DSTADDR = b[4 : 4+net.IPv6len] default: return errors.New(&quot;IPåœ°å€é”™è¯¯&quot;) &#125; s.DSTPORT = binary.BigEndian.Uint16(b[n-2:n]) // DSTADDRå…¨éƒ¨æ¢æˆIPåœ°å€ï¼Œå¯ä»¥é˜²æ­¢DNSæ±¡æŸ“å’Œå°æ€ s.RAWADDR = &amp;net.TCPAddr&#123; IP: s.DSTADDR, Port: int(s.DSTPORT), &#125; /** å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ +----+-----+-------+------+----------+----------+ |VER | REP | RSV | ATYP | BND.ADDR | BND.PORT | +----+-----+-------+------+----------+----------+ | 1 | 1 | X&apos;00&apos; | 1 | Variable | 2 | +----+-----+-------+------+----------+----------+ */ resp := []byte&#123;0x05, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00&#125; conn.Write(resp) return nil&#125; ï¼ˆ4ï¼‰æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯ä»£ç å®ç°:12345678910111213141516 wg := new(sync.WaitGroup) wg.Add(2) go func() &#123;defer wg.Done()defer dstServer.Close() io.Copy(dstServer, client) &#125;() go func() &#123;defer wg.Done() defer client.Close() io.Copy(client, dstServer) &#125;() wg.Wait()]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>GO</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹è¯­è¨€</tag>
        <tag>Golang</tag>
        <tag>ä»£ç†è½¬å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueå°é¡¹ç›®]]></title>
    <url>%2F2019%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2Fvue%E5%B0%8F%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºvueé¡¹ç›®é€šè¿‡uiåˆ›å»ºé¡¹ç›®ç”¨vue uiæ‰“å¼€æµè§ˆå™¨é¡µé¢è¿›è¡Œé¡¹ç›®åˆ›å»ºå’Œç®¡ç†ã€‚ é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºé¡¹ç›®ç”¨vue create åˆ›å»ºé¡¹ç›®vue create baidumapï¼Œ ç”Ÿæˆä»¥ä¸‹ç›®å½•ç»“æ„ï¼š tree /F12345678910111213141516171819â”‚ .gitignoreâ”‚ babel.config.jsâ”‚ package-lock.jsonâ”‚ package.jsonâ”‚ README.mdâ”‚â”œâ”€publicâ”‚ favicon.icoâ”‚ index.htmlâ”‚â””â”€src â”‚ App.vue â”‚ main.js â”‚ â”œâ”€assets â”‚ logo.png â”‚ â””â”€components HelloWorld.vue å®šä¹‰é¡µé¢]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IPVS: IPè™šæ‹ŸæœåŠ¡å™¨]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2FIPVS-IP%E8%99%9A%E6%8B%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[IPVSï¼Œä¹Ÿå«IPè™šæ‹ŸæœåŠ¡å™¨ï¼ˆIP Virtual Serverï¼Œç®€å†™ä¸ºIPVSï¼‰ï¼Œä¸»è¦æœ‰Direct Routingã€NATæ¨¡å¼ã€FULLNATæ¨¡å¼ã€TUNæ¨¡å¼å››ç§æ¨¡å¼ã€‚ ipvsç§°ä¹‹ä¸ºIPè™šæ‹ŸæœåŠ¡å™¨ï¼ˆIP Virtual Serverï¼Œç®€å†™ä¸ºIPVSï¼‰ï¼Œä¸»è¦æœ‰Direct Routingã€NATæ¨¡å¼ã€FULLNATæ¨¡å¼ã€TUNæ¨¡å¼å››ç§æ¨¡å¼ã€‚ DRæ¨¡å¼ï¼ˆDirect Routingï¼‰ DRæ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯çš„è¯·æ±‚åŒ…åˆ°è¾¾è´Ÿè½½å‡è¡¡å™¨çš„è™šæ‹ŸæœåŠ¡IPç«¯å£åï¼Œè´Ÿè½½å‡è¡¡å™¨ä¸ä¼šæ”¹å†™è¯·æ±‚åŒ…çš„IPå’Œç«¯å£ï¼Œä½†æ˜¯ä¼šæ”¹å†™è¯·æ±‚åŒ…çš„MACåœ°å€ä¸ºåç«¯RSçš„MACåœ°å€ï¼Œç„¶åå°†æ•°æ®åŒ…è½¬å‘ï¼›çœŸå®æœåŠ¡å™¨å¤„ç†è¯·æ±‚åï¼Œå“åº”åŒ…ç›´æ¥å›ç»™å®¢æˆ·ç«¯ï¼Œä¸å†ç»è¿‡è´Ÿè½½å‡è¡¡å™¨ã€‚æ‰€ä»¥DRæ¨¡å¼çš„è½¬å‘æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œç‰¹åˆ«é€‚åˆä¸‹è¡Œæµé‡è¾ƒå¤§çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚è¯·æ±‚è§†é¢‘ç­‰å¤§æ–‡ä»¶ã€‚ DRæ¨¡å¼çš„ç‰¹ç‚¹ï¼š æ•°æ®åŒ…åœ¨LBè½¬å‘è¿‡ç¨‹ä¸­ï¼Œæº/ç›®çš„IPç«¯å£éƒ½ä¸ä¼šå˜åŒ–ã€‚LBåªæ˜¯å°†æ•°æ®åŒ…çš„MACåœ°å€æ”¹å†™ä¸ºRSçš„MACåœ°å€ï¼Œç„¶åè½¬å‘ç»™ç›¸åº”çš„RSã€‚ æ¯å°RSä¸Šéƒ½å¿…é¡»åœ¨ç¯å›ç½‘å¡ä¸Šç»‘å®šLBçš„è™šæ‹ŸæœåŠ¡IPã€‚å› ä¸ºLBè½¬å‘æ—¶å¹¶ä¸ä¼šæ”¹å†™æ•°æ®åŒ…çš„ç›®çš„IPï¼Œæ‰€ä»¥RSæ”¶åˆ°çš„æ•°æ®åŒ…çš„ç›®çš„IPä»æ˜¯LBçš„è™šæ‹ŸæœåŠ¡IPã€‚ä¸ºäº†ä¿è¯RSèƒ½å¤Ÿæ­£ç¡®å¤„ç†è¯¥æ•°æ®åŒ…ï¼Œè€Œä¸æ˜¯ä¸¢å¼ƒï¼Œå¿…é¡»åœ¨RSçš„ç¯å›ç½‘å¡ä¸Šç»‘å®šLBçš„è™šæ‹ŸæœåŠ¡IPã€‚è¿™æ ·RSä¼šè®¤ä¸ºè¿™ä¸ªè™šæ‹ŸæœåŠ¡IPæ˜¯è‡ªå·±çš„IPï¼Œè‡ªå·±æ˜¯èƒ½å¤Ÿå¤„ç†è¿™ä¸ªæ•°æ®åŒ…çš„ã€‚å¦åˆ™RSä¼šç›´æ¥ä¸¢å¼ƒè¯¥æ•°æ®åŒ… RSä¸Šçš„ä¸šåŠ¡è¿›ç¨‹å¿…é¡»ç›‘å¬åœ¨ç¯å›ç½‘å¡çš„è™šæ‹ŸæœåŠ¡IPä¸Šï¼Œä¸”ç«¯å£å¿…é¡»å’ŒLBä¸Šçš„è™šæ‹ŸæœåŠ¡ç«¯å£ä¸€è‡´ã€‚å› ä¸ºLBä¸ä¼šæ”¹å†™æ•°æ®åŒ…çš„ç›®çš„ç«¯å£ï¼Œæ‰€ä»¥RSæœåŠ¡çš„ç›‘å¬ç«¯å£å¿…é¡»å’Œè™šæ‹ŸæœåŠ¡ç«¯å£ä¸€è‡´ï¼Œå¦åˆ™RSä¼šç›´æ¥æ‹’ç»è¯¥æ•°æ®åŒ…ã€‚ RSå¤„ç†å®Œè¯·æ±‚åï¼Œå“åº”ç›´æ¥å›ç»™å®¢æˆ·ç«¯ï¼Œä¸å†ç»è¿‡LBã€‚å› ä¸ºRSæ”¶åˆ°çš„è¯·æ±‚æ•°æ®åŒ…çš„æºIPæ˜¯å®¢æˆ·ç«¯çš„IPï¼Œæ‰€ä»¥ç†æ‰€å½“ç„¶RSçš„å“åº”ä¼šç›´æ¥å›ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸ä¼šå†ç»è¿‡LBã€‚è¿™æ—¶å€™è¦æ±‚RSå’Œå®¢æˆ·ç«¯ä¹‹é—´çš„ç½‘ç»œæ˜¯å¯è¾¾çš„ã€‚ LBå’ŒRSé¡»ä½äºåŒä¸€ä¸ªå­ç½‘ã€‚å› ä¸ºLBåœ¨è½¬å‘è¿‡ç¨‹ä¸­éœ€è¦æ”¹å†™æ•°æ®åŒ…çš„MACä¸ºRSçš„MACåœ°å€ï¼Œæ‰€ä»¥è¦èƒ½å¤ŸæŸ¥è¯¢åˆ°RSçš„MACã€‚è€Œè¦è·å–åˆ°RSçš„MACï¼Œåˆ™éœ€è¦ä¿è¯äºŒè€…ä½äºä¸€ä¸ªå­ç½‘ï¼Œå¦åˆ™LBåªèƒ½è·å–åˆ°RSç½‘å…³çš„MACåœ°å€ã€‚ æ³¨é‡Šï¼šå›ç¯ç½‘å¡ï¼ˆLoopback adaptorï¼‰ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œæ¥å£ï¼Œä¸ä¸ä»»ä½•å®é™…è®¾å¤‡è¿æ¥ï¼Œè€Œæ˜¯å®Œå…¨ç”±è½¯ä»¶å®ç°ã€‚ä¸å›ç¯åœ°å€ï¼ˆ127.0.0.0/8 æˆ– ::1/128ï¼‰ä¸åŒï¼Œå›ç¯ç½‘å¡å¯¹ç³»ç»Ÿâ€œæ˜¾ç¤ºâ€ä¸ºä¸€å—ç¡¬ä»¶ã€‚ä»»ä½•å‘é€åˆ°è¯¥ç½‘å¡ä¸Šçš„æ•°æ®éƒ½å°†ç«‹åˆ»è¢«åŒä¸€ç½‘å¡æ¥æ”¶åˆ°ã€‚ä¾‹å­æœ‰ Linux ä¸‹çš„ lo æ¥å£ NATæ¨¡å¼ï¼ˆNetwork Address Translationï¼‰ NATæ¨¡å¼ä¸‹ï¼Œè¯·æ±‚åŒ…å’Œå“åº”åŒ…éƒ½éœ€è¦ç»è¿‡LBå¤„ç†ã€‚å½“å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°è¾¾è™šæ‹ŸæœåŠ¡åï¼ŒLBä¼šå¯¹è¯·æ±‚åŒ…åšç›®çš„åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ï¼Œå°†è¯·æ±‚åŒ…çš„ç›®çš„IPæ”¹å†™ä¸ºRSçš„IPã€‚å½“æ”¶åˆ°RSçš„å“åº”åï¼ŒLBä¼šå¯¹å“åº”åŒ…åšæºåœ°å€è½¬æ¢ï¼ˆSNATï¼‰ï¼Œå°†å“åº”åŒ…çš„æºIPæ”¹å†™ä¸ºLBçš„IPã€‚ NATæ¨¡å¼çš„ç‰¹ç‚¹ï¼š LBä¼šä¿®æ”¹æ•°æ®åŒ…çš„åœ°å€ã€‚å¯¹äºè¯·æ±‚åŒ…ï¼Œä¼šè¿›è¡ŒDNATï¼›å¯¹äºå“åº”åŒ…ï¼Œä¼šè¿›è¡ŒSNATã€‚ LBä¼šé€ä¼ å®¢æˆ·ç«¯IPåˆ°RSï¼ˆDRæ¨¡å¼ä¹Ÿä¼šé€ä¼ ï¼‰ã€‚è™½ç„¶LBåœ¨è½¬å‘è¿‡ç¨‹ä¸­åšäº†NATè½¬æ¢ï¼Œä½†æ˜¯å› ä¸ºåªæ˜¯åšäº†éƒ¨åˆ†åœ°å€è½¬å‘ï¼Œæ‰€ä»¥RSæ”¶åˆ°çš„è¯·æ±‚åŒ…é‡Œæ˜¯èƒ½çœ‹åˆ°å®¢æˆ·ç«¯IPçš„ã€‚ éœ€è¦å°†RSçš„é»˜è®¤ç½‘å…³åœ°å€é…ç½®ä¸ºLBçš„æµ®åŠ¨IPåœ°å€ã€‚å› ä¸ºRSæ”¶åˆ°çš„è¯·æ±‚åŒ…æºIPæ˜¯å®¢æˆ·ç«¯çš„IPï¼Œä¸ºäº†ä¿è¯å“åº”åŒ…åœ¨è¿”å›æ—¶èƒ½èµ°åˆ°LBä¸Šé¢ï¼Œæ‰€ä»¥éœ€è¦å°†RSçš„é»˜è®¤ç½‘å…³åœ°å€é…ç½®ä¸ºLBçš„è™šæ‹ŸæœåŠ¡IPåœ°å€ã€‚å½“ç„¶ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„IPæ˜¯å›ºå®šçš„ï¼Œä¹Ÿå¯ä»¥åœ¨RSä¸Šæ·»åŠ æ˜ç»†è·¯ç”±æŒ‡å‘LBçš„è™šæ‹ŸæœåŠ¡IPï¼Œä¸ç”¨æ”¹é»˜è®¤ç½‘å…³ã€‚ LBå’ŒRSé¡»ä½äºåŒä¸€ä¸ªå­ç½‘ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¸èƒ½å’ŒLB/RSä½äºåŒä¸€å­ç½‘ã€‚å› ä¸ºéœ€è¦å°†RSçš„é»˜è®¤ç½‘å…³é…ç½®ä¸ºLBçš„è™šæ‹ŸæœåŠ¡IPåœ°å€ï¼Œæ‰€ä»¥éœ€è¦ä¿è¯LBå’ŒRSä½äºåŒä¸€å­ç½‘ã€‚åˆå› ä¸ºéœ€è¦ä¿è¯RSçš„å“åº”åŒ…èƒ½èµ°å›åˆ°LBä¸Šï¼Œåˆ™å®¢æˆ·ç«¯ä¸èƒ½å’ŒRSä½äºåŒä¸€å­ç½‘ã€‚å¦åˆ™RSç›´æ¥å°±èƒ½è·å–åˆ°å®¢æˆ·ç«¯çš„MACï¼Œå“åº”åŒ…å°±ç›´æ¥å›ç»™å®¢æˆ·ç«¯äº†ï¼Œä¸ä¼šèµ°ç½‘å…³ï¼Œä¹Ÿå°±èµ°ä¸åˆ°LBä¸Šé¢äº†ã€‚è¿™æ—¶å€™ç”±äºæ²¡æœ‰LBåšSNATï¼Œå®¢æˆ·ç«¯æ”¶åˆ°çš„å“åº”åŒ…æºIPæ˜¯RSçš„IPï¼Œè€Œå®¢æˆ·ç«¯çš„è¯·æ±‚åŒ…ç›®çš„IPæ˜¯LBçš„è™šæ‹ŸæœåŠ¡IPï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯æ— æ³•è¯†åˆ«å“åº”åŒ…ï¼Œä¼šç›´æ¥ä¸¢å¼ƒã€‚ FULLNATæ¨¡å¼ FULLNATæ¨¡å¼ä¸‹ï¼ŒLBä¼šå¯¹è¯·æ±‚åŒ…å’Œå“åº”åŒ…éƒ½åšSNAT+DNATã€‚ FULLNATæ¨¡å¼çš„ç‰¹ç‚¹ï¼š LBå®Œå…¨ä½œä¸ºä¸€ä¸ªä»£ç†æœåŠ¡å™¨.FULLNATä¸‹ï¼Œå®¢æˆ·ç«¯æ„ŸçŸ¥ä¸åˆ°RSï¼ŒRSä¹Ÿæ„ŸçŸ¥ä¸åˆ°å®¢æˆ·ç«¯ï¼Œå®ƒä»¬éƒ½åªèƒ½çœ‹åˆ°LBã€‚æ­¤ç§æ¨¡å¼å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡æœ‰ç‚¹ç›¸ä¼¼ï¼Œåªä¸è¿‡ä¸ä¼šå»è§£æåº”ç”¨å±‚åè®®ï¼Œè€Œæ˜¯åœ¨TCPå±‚å°†æ¶ˆæ¯è½¬å‘ LBå’ŒRSå¯¹äºç»„ç½‘ç»“æ„æ²¡æœ‰è¦æ±‚ã€‚ä¸åŒäºNATå’ŒDRè¦æ±‚LBå’ŒRSä½äºä¸€ä¸ªå­ç½‘ï¼ŒFULLNATå¯¹äºç»„ç½‘ç»“æ„æ²¡æœ‰è¦æ±‚ã€‚åªéœ€è¦ä¿è¯å®¢æˆ·ç«¯å’ŒLBã€LBå’ŒRSä¹‹é—´ç½‘ç»œäº’é€šå³å¯ã€‚ ä¸‰ç§è½¬å‘æ¨¡å¼æ€§èƒ½ä»é«˜åˆ°ä½ï¼šDR &gt; NAT &gt;FULLNATã€‚ è™½ç„¶FULLNATæ¨¡å¼çš„æ€§èƒ½æ¯”ä¸ä¸ŠDRå’ŒNATï¼Œä½†æ˜¯FULLNATæ¨¡å¼æ²¡æœ‰ç»„ç½‘è¦æ±‚ï¼Œå…è®¸LBå’ŒRSéƒ¨ç½²åœ¨ä¸åŒçš„å­ç½‘ä¸­ï¼Œè¿™ç»™è¿ç»´å¸¦æ¥äº†ä¾¿åˆ©ã€‚å¹¶ä¸” FULLNATæ¨¡å¼å…·æœ‰æ›´å¥½çš„å¯æ‹“å±•æ€§ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ›´å¤šçš„LBèŠ‚ç‚¹ï¼Œæå‡ç³»ç»Ÿæ•´ä½“çš„è´Ÿè½½å‡è¡¡èƒ½åŠ› TUNæ¨¡å¼ é‡‡ç”¨ä¸‰è§’æ¨¡å¼ï¼Œæ•°æ®ä»directorè¿›å…¥ï¼Œå“åº”ä»real serverç›´æ¥å›åˆ°clientï¼›real serverå’Œdirectoréƒ½è¦é…ç½®IP tunnelï¼Œreal serveréœ€è¦é…ç½®å¤–éƒ¨IPå¹¶ä¸”ç»‘å®šVIPï¼›real serverå¯ä»¥åˆ†å¸ƒåœ¨äº’è”ç½‘ç»œçš„ä»»ä½•ä½ç½®ï¼›è¯·æ±‚çš„æºIPå¯ä»¥è¢«real serverè·å–ï¼›ä¸å¯ä»¥è¿›è¡Œç«¯å£è½¬æ¢ï¼›directoråªéœ€è¦å¤„ç†è¯·æ±‚æ•°æ®åŒ…ã€ReqPSæ˜¯æœ€é‡è¦çš„æŒ‡æ ‡ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>IPVS</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Goé‡‡å‘è®°: Golang ç©ºæ¥å£çš„å°æŠ€å·§åº”ç”¨]]></title>
    <url>%2F2018%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2FGo%E9%87%87%E5%9D%91%E8%AE%B0-Golang-%E7%A9%BA%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨ç”¨golangå†™ä¸€ä¸ªæ¡†æ¶ï¼Œå¸Œæœ›å¯ä»¥æ¯”è¾ƒçµæ´»åœ°æ„å»ºä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„è¾“å…¥ï¼Œè¿™æ ·é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä½¿ç”¨ç©ºæ¥å£interface{},å› ä¸ºåœ¨golangé‡Œé¢æ²¡æœ‰æ³›å‹ã€‚ç©ºæ¥å£ä¾‹å­ä¸€ï¼š 1234567891011121314151617181920type download interface &#123; Download(interface&#123;&#125;)&#125;type dl struct &#123; t string&#125;func (d dl) Download(a interface&#123;&#125;) &#123; switch a.(type) &#123; case string: v := a.(string) log.Println(v) case int: v := a.(int) log.Println(v * v) default: &#125;&#125; ç©ºæ¥å£ä¾‹å­äºŒï¼š 1234567891011121314151617type pool struct &#123; function interface&#123;&#125; flag string&#125;func (p *pool) RUN() &#123; s := p.function.(download) s.Download(&quot;a&quot;) s.Download(1)&#125;func main() &#123; p := &amp;pool&#123; function: &amp;dl&#123;&#125;, &#125; p.RUN()&#125;]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>GO</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹è¯­è¨€</tag>
        <tag>Golang</tag>
        <tag>ç©ºæ¥å£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç³»ç»Ÿåˆ†åŒºï¼Œåˆ›å»ºLVMï¼ŒæŒ‚è½½ä½¿ç”¨]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2F%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%9B%E5%BB%BALVM%EF%BC%8C%E6%8C%82%E8%BD%BD%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æ–°ç¡¬ç›˜å›æ¥ï¼Œéœ€è¦åœ¨ç°æœ‰çš„ç³»ç»ŸæŒ‚è½½ä½¿ç”¨ã€‚ åˆ†åŒº/æ ¼å¼åŒ–fdisk /dev/sdbè¾“å…¥ï¼š1234567891011121314Command (m for help): n #### åˆ›å»ºæ–°çš„åˆ†åŒºCommand action e extended p primary partition (1-4)p #### åˆ›å»ºä¸»åˆ†åŒºPartition number (1-4):1 #### åˆ†åŒºIDFirst cylinder (1-65270, default 1): Using default value 1Last cylinder, +cylinders or +size&#123;K,M,G&#125; (1-65270, default 65270): Using default value 65270Command (m for help):t #### ä¿®æ”¹åˆ†åŒºç±»å‹Command (m for help):8e #### Linux lvmCommand (m for help):w #### ä¿å­˜ä¿®æ”¹ partedparted /dev/sdb å¯ä»¥ç”¨äºä¿®æ”¹ Disk label type, æ¯”å¦‚æŠŠdos æ”¹ä¸º gpt:mklabel gptæ–°å¢åˆ†åŒºï¼šmkpartæŸ¥çœ‹åˆ†åŒº ï¼šp 1234(parted) mklabel gpt # å°†MBRç£ç›˜æ ¼å¼åŒ–ä¸ºGPT(parted) mkpart primary ext4 0% 100% å°†æ‰€æœ‰å®¹é‡åˆ†ä¸ºä¸€ä¸ªä¸»åˆ†åŒº(parted) p #æ‰“å°å½“å‰åˆ†åŒº(parted) q #é€€å‡º åˆ›å»ºç‰©ç†å·ç‰©ç†å·å°±æ˜¯æŒ‡ç¡¬ç›˜åˆ†åŒºæˆ–ä»é€»è¾‘ä¸Šä¸ç£ç›˜åˆ†åŒºå…·æœ‰åŒæ ·åŠŸèƒ½çš„è®¾å¤‡(å¦‚RAID)ï¼Œæ˜¯LVMçš„åŸºæœ¬å­˜å‚¨é€»è¾‘å—ï¼Œä½†å’ŒåŸºæœ¬çš„ç‰©ç†å­˜å‚¨ä»‹è´¨ï¼ˆå¦‚åˆ†åŒºã€ç£ç›˜ç­‰ï¼‰æ¯”è¾ƒï¼Œå´åŒ…å«æœ‰ä¸LVMç›¸å…³çš„ç®¡ç†å‚æ•° 1pvcreate /dev/sdb1 åˆ›å»ºé€»è¾‘ç»„ç”±ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·ç»„æˆä¸€ä¸ªæ•´ä½“ï¼Œå³ç§°ä¸ºå·ç»„ï¼Œåœ¨å·ç»„ä¸­å¯ä»¥åŠ¨æ€çš„æ·»åŠ æˆ–ç§»é™¤ç‰©ç†å·ï¼Œè®¸å¤šä¸ªç‰©ç†å·å¯ä»¥åˆ†åˆ«ç»„æˆä¸åŒçš„å·ç»„ï¼Œå·ç»„åç§°ç”±ç”¨æˆ·è‡ªè¡Œå®šä¹‰ã€‚ 1vgcreate fastDevice /dev/sdb1 åˆ›å»ºé€»è¾‘å·é€»è¾‘å·æ˜¯å»ºç«‹åœ¨å·ç»„ä¹‹ä¸Šçš„ï¼Œä¸ç‰©ç†å·æ— ç›´æ¥å…³ç³»ï¼Œå¯¹äºé€»è¾‘å·æ¥è¯´ï¼Œæ¯ä¸€ä¸ªå·ç»„å°±æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä»è¿™ä¸ªæ•´ä½“ä¸­åˆ‡å‡ºä¸€å°å—ç©ºé—´ï¼Œä½œä¸ºç”¨æˆ·åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿçš„åŸºç¡€ï¼Œè¿™ä¸€å°å—ç©ºé—´å°±ç§°ä¸ºé€»è¾‘å·ï¼Œä½¿ç”¨mkfsç­‰å·¥å…·åœ¨é€»è¾‘å·ä¹‹ä¸Šå»ºç«‹æ–‡ä»¶ç³»ç»Ÿä»¥åï¼Œå³å¯æŒ‚è½½åˆ°Linuxç³»ç»Ÿä¸­çš„ç›®å½•ä¸‹ä½¿ç”¨ã€‚ ä½¿ç”¨600Gç©ºé—´ä»fastDeviceåˆ›å»ºä¸€ä¸ªåå«data1lvcreate -L 600G -n data fastDevice ä½¿ç”¨å‰©ä½™ç©ºé—²ç©ºé—´çš„100%1lvcreate -l 100%Free -n runtime fastDevice åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨mkfs.ext4å‘½ä»¤åœ¨é€»è¾‘å·dataä¸Šåˆ›å»ºext4æ–‡ä»¶ç³»ç»Ÿ1mkfs.ext4 /dev/fastDevice/data è®¾ç½®æŒ‚è½½å’Œå¼€æœºè‡ªåŠ¨æŒ‚è½½æŒ‚åœ¨åˆ†åŒºåˆ°æœ¬åœ°ç›®å½•1mount /dev/fastDevice/data /home/data è®¾ç½®å¼€æœºæŒ‚è½½123456789vi /etc/fstab #### ä¿®æ”¹fstab å¼€æœºè‡ªåŠ¨æŒ‚è½½-----------UUID=94e4e384-0ace-437f-bc96-057dd64f42ee / ext4 defaults,barrier=0 1 1tmpfs /dev/shm tmpfs defaults 0 0devpts /dev/pts devpts gid=5,mode=620 0 0sysfs /sys sysfs defaults 0 0proc /proc proc defaults 0 0/dev/VolGroup01/lvmServer /server ext4 defaults 0 0 æ–°ç¡¬ç›˜æ‰©å®¹å°†æ–°çš„ç‰©ç†å·åŠ å…¥å·ç»„: 1vgextend data /dev/vdc å¸è½½è¦æ‰©å……é€»è¾‘å·ï¼š1umount /home/data æ‰©å……é€»è¾‘å·:1lvextend -L +100G /dev/data/data æ£€æŸ¥é€»è¾‘å·åŠé‡æ–°è®¾ç½®å¤§å°:12e2fsck -f /dev/data/dataresize2fs /dev/data/data æŒ‚è½½ï¼š1mount /dev/data/data /home/data æ•°æ®è¿ç§»å¦‚æœåšæ•°æ®è¿ç§»å¯ä»¥å…ˆå°†é€»è¾‘å·æŒ‚åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼š1mount /dev/data/data /home/tmp ç„¶åå°†æ•°æ®æ‹·è´åˆ°ä¸´æ—¶ç›®å½•ï¼š1rsync -avx /home/data/ /home/tmp åˆ°/home/tmpä¸‹æŸ¥çœ‹ï¼Œæ²¡é—®é¢˜åå°†æºç›®å½•é‡å‘½åï¼Œå°†ç¡¬ç›˜æŒ‚è½½è¿‡æ¥ï¼š123mv /home/data /home/data.bakumount /dev/data/datamount /dev/data/data /home/data]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>LVM</tag>
        <tag>ç³»ç»Ÿåˆ†åŒº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker container åŠ¨æ€ä¿®æ”¹å†…å­˜é™åˆ¶]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2Fdocker-container-%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E5%86%85%E5%AD%98%E9%99%90%E5%88%B6%2F</url>
    <content type="text"><![CDATA[dockeråŠ¨æ€ä¿®æ”¹é…ç½®ç”¨docker update,ç”¨æ³•ï¼š12345678910111213141516171819202122docker update -hFlag shorthand -h has been deprecated, please use --helpUsage: docker update [OPTIONS] CONTAINER [CONTAINER...]Update configuration of one or more containersOptions: --blkio-weight uint16 Block IO (relative weight), between 10 and 1000, or 0 to disable (default 0) --cpu-period int Limit CPU CFS (Completely Fair Scheduler) period --cpu-quota int Limit CPU CFS (Completely Fair Scheduler) quota --cpu-rt-period int Limit the CPU real-time period in microseconds --cpu-rt-runtime int Limit the CPU real-time runtime in microseconds -c, --cpu-shares int CPU shares (relative weight) --cpuset-cpus string CPUs in which to allow execution (0-3, 0,1) --cpuset-mems string MEMs in which to allow execution (0-3, 0,1) --help Print usage --kernel-memory string Kernel memory limit -m, --memory string Memory limit --memory-reservation string Memory soft limit --memory-swap string Swap limit equal to memory plus swap: &apos;-1&apos; to enable unlimited swap --restart string Restart policy to apply when a container exits å½“å‰è¦åšçš„æ˜¯æŠŠä¸€ä¸ªè¿è¡Œç€gitlab çš„å®¹å™¨å†…å­˜é™åˆ¶åœ¨2048Mä»¥å†…ï¼Œå°è¯•ç”¨:docker update -m 2048m gitlab æŠ¥é”™ï¼š1Memory limit should be smaller than already set memoryswap limit, update the memoryswap at the same time å‘ç°é—®é¢˜ï¼Œdocker é»˜è®¤æ²¡æœ‰å¯ç”¨memory-swapäº¤æ¢å†…å­˜ï¼Œç›´æ¥è®¾ç½®äº†å†…å­˜é—®é¢˜ä¼šå‡ºé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´å®¿ä¸» swap æ”¯æŒä½¿ç”¨å¤šå°‘åˆ™å®¹å™¨å³å¯ä½¿ç”¨å¤šå°‘ï¼Œå¦‚æœ â€“memory-swap è®¾ç½®å°äº â€“memoryåˆ™è®¾ç½®ä¸ç”Ÿæ•ˆã€‚ å°†memory-swap è®¾ç½®å€¼ä¸º -1ï¼Œè¡¨ç¤ºå®¹å™¨ç¨‹åºä½¿ç”¨å†…å­˜å—é™ï¼Œè€Œ swap ç©ºé—´ä½¿ç”¨ä¸å—é™åˆ¶ã€‚1docker update --memory 2048m --memory-swap -1 gitlab é—®é¢˜è§£å†³ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å®¹å™¨æŠ€æœ¯</category>
        <category>Dokcer</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>Docker</tag>
        <tag>å®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Goé‡‡å‘è®°: sync.WaitGroup æŒ‡é’ˆå¼•ç”¨é—®é¢˜]]></title>
    <url>%2F2018%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2FGo%E9%87%87%E5%9D%91%E8%AE%B0-sync-WaitGroup-%E6%8C%87%E9%92%88%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[WaitGroupï¼šä¸»è¦åŒ…æ‹¬Add,Done,Waitä¸‰ä¸ªæ–¹æ³•ï¼ŒAddè¡¨ç¤ºæ·»åŠ ä¸€ä¸ªgoroutineï¼ŒDoneç­‰äºAdd(-1)ï¼Œè¡¨ç¤ºä¸€ä¸ªgoroutineç»“æŸï¼Œwaitè¡¨ç¤ºä¸»çº¿ç¨‹ä¸€ç›´ç­‰åˆ°æ‰€æœ‰çš„goroutineæ‰§è¡Œå®Œæˆï¼Œå¹¶ä¸”é˜»å¡ä¸»çº¿ç¨‹çš„æ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„goroutineæ‰§è¡Œå®Œæˆã€‚ ä½†åœ¨ä½¿ç”¨çš„æ—¶å€™å‘ç°è¿›ç¨‹ä¸€ç›´é˜»å¡ï¼Œä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930func Exec(url string, wg sync.WaitGroup) error&#123; statusCode, body, err := fasthttp.Get(nil, url) if err != nil&#123; log.Fatalf(&quot;err,%s&quot;, err) return err &#125; if statusCode != fasthttp.StatusOK &#123; log.Fatalf(&quot;Unexpected status code: %d&quot;) return err &#125; ParseBody(body) wg.Done() return nil&#125;func main()&#123; var URL string URL = &quot;http://192.168.2.112:61208/&quot; num := 100 var wg sync.WaitGroup wg.Add(num) startTime := time.Now() for i:=0; i&lt;num; i++&#123; go Exec(URL, wg) &#125; wg.Wait() endTime := time.Now() spendTime := endTime.Sub(startTime) log.Println(spendTime)&#125; å°†sync.WaitGroupæ”¾åœ¨mainä¸­åšdoneå°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼š12345678910111213141516171819202122232425func main()&#123; var URL string URL = &quot;http://192.168.2.112:61208/&quot; num := 100 var wg sync.WaitGroup wg.Add(num) startTime := time.Now() for i:=0; i&lt;num; i++&#123; go func()&#123; statusCode, body, err := fasthttp.Get(nil, url) if err != nil&#123; log.Fatalf(&quot;err,%s&quot;, err) &#125; if statusCode != fasthttp.StatusOK &#123; log.Fatalf(&quot;Unexpected status code: %d&quot;) &#125; ParseBody(body) wg.Done() &#125; &#125; wg.Wait() endTime := time.Now() spendTime := endTime.Sub(startTime) log.Println(spendTime)&#125; ä¸€ç›´é˜»å¡åº”è¯¥æ˜¯æ­»é”äº†ï¼Œä¹Ÿå°±æ˜¯wg.Done()æ²¡èµ·ä½œç”¨ï¼ŒåŸæ¥æ˜¯wg ç»™æ‹·è´ä¼ é€’åˆ°äº† goroutine ä¸­ï¼Œå¯¼è‡´åªæœ‰ Add æ“ä½œï¼Œå…¶å® Doneæ“ä½œæ˜¯åœ¨ wg çš„å‰¯æœ¬æ‰§è¡Œå¯¼è‡´çš„~~å°†wg çš„ä¼ å…¥ç±»å‹æ”¹ä¸º *sync.WaitGrou,è¿™æ ·å°±èƒ½å¼•ç”¨åˆ°æ­£ç¡®çš„WaitGroupäº† 123456789101112131415161718192021222324252627282930func Exec(url string, wg *sync.WaitGroup) error&#123; statusCode, body, err := fasthttp.Get(nil, url) if err != nil&#123; log.Fatalf(&quot;err,%s&quot;, err) return err &#125; if statusCode != fasthttp.StatusOK &#123; log.Fatalf(&quot;Unexpected status code: %d&quot;) return err &#125; ParseBody(body) wg.Done() return nil&#125;func main()&#123; var URL string URL = &quot;http://192.168.2.112:61208/&quot; num := 100 var wg sync.WaitGroup wg.Add(num) startTime := time.Now() for i:=0; i&lt;num; i++&#123; go Exec(URL, &amp;wg) &#125; wg.Wait() endTime := time.Now() spendTime := endTime.Sub(startTime) log.Println(spendTime)&#125;]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>GO</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹è¯­è¨€</tag>
        <tag>Golang</tag>
        <tag>æŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[tmuxå‘½ä»¤å¿«æ·é”®]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2Ftmux%E5%91%BD%E4%BB%A4%E5%BF%AB%E6%8D%B7%E9%94%AE%2F</url>
    <content type="text"><![CDATA[Tmux å¿«æ·é”® &amp; é€ŸæŸ¥è¡¨å¯åŠ¨æ–°ä¼šè¯ï¼š1tmux [new -s ä¼šè¯å -n çª—å£å] æ¢å¤ä¼šè¯ï¼š1tmux at [-t ä¼šè¯å] åˆ—å‡ºæ‰€æœ‰ä¼šè¯ï¼š1tmux ls å…³é—­ä¼šè¯ï¼š1tmux kill-session -t ä¼šè¯å å…³é—­æ‰€æœ‰ä¼šè¯ï¼š12tmux ls | grep : | cut -d. -f1 | awk &apos;&#123;print substr($1, 0, length($1)-1)&#125;&apos; | xargs kill åœ¨ Tmux ä¸­ï¼ŒæŒ‰ä¸‹ Tmux å‰ç¼€ ctrl+bï¼Œç„¶åï¼š ä¼šè¯123:new&lt;å›è½¦&gt; å¯åŠ¨æ–°ä¼šè¯s åˆ—å‡ºæ‰€æœ‰ä¼šè¯$ é‡å‘½åå½“å‰ä¼šè¯ çª—å£ (æ ‡ç­¾é¡µ)1234567c åˆ›å»ºæ–°çª—å£w åˆ—å‡ºæ‰€æœ‰çª—å£n åä¸€ä¸ªçª—å£p å‰ä¸€ä¸ªçª—å£f æŸ¥æ‰¾çª—å£, é‡å‘½åå½“å‰çª—å£&amp; å…³é—­å½“å‰çª—å£ è°ƒæ•´çª—å£æ’åº123swap-window -s 3 -t 1 äº¤æ¢ 3 å·å’Œ 1 å·çª—å£swap-window -t 1 äº¤æ¢å½“å‰å’Œ 1 å·çª—å£move-window -t 1 ç§»åŠ¨å½“å‰çª—å£åˆ° 1 å· çª—æ ¼ï¼ˆåˆ†å‰²çª—å£ï¼‰123456789% å‚ç›´åˆ†å‰²&quot; æ°´å¹³åˆ†å‰²o äº¤æ¢çª—æ ¼x å…³é—­çª—æ ¼â½ ç©ºæ ¼é”® - åˆ‡æ¢å¸ƒ å±€q æ˜¾ç¤ºæ¯ä¸ªçª—æ ¼æ˜¯ç¬¬å‡ ä¸ªï¼Œå½“æ•°å­—å‡ºç°çš„æ—¶å€™æŒ‰æ•°å­—å‡ å°±é€‰ä¸­ç¬¬å‡ ä¸ªçª—æ ¼&#123; ä¸ä¸Šä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®&#125; ä¸ä¸‹ä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®z åˆ‡æ¢çª—æ ¼æœ€å¤§åŒ–/æœ€å°åŒ– åŒæ­¥çª—æ ¼è¿™ä¹ˆåšå¯ä»¥åˆ‡æ¢åˆ°æƒ³è¦çš„çª—å£ï¼Œè¾“å…¥ Tmux å‰ç¼€å’Œä¸€ä¸ªå†’å·å‘¼å‡ºå‘½ä»¤æç¤ºè¡Œï¼Œç„¶åè¾“å…¥ï¼š1:setw synchronize-panes ä½ å¯ä»¥æŒ‡å®šå¼€æˆ–å…³ï¼Œå¦åˆ™é‡å¤æ‰§è¡Œå‘½ä»¤ä¼šåœ¨ä¸¤è€…é—´åˆ‡æ¢ã€‚è¿™ä¸ªé€‰é¡¹å€¼é’ˆå¯¹æŸä¸ªçª—å£æœ‰æ•ˆï¼Œä¸ä¼šå½±å“åˆ«çš„ä¼šè¯å’Œçª—å£ã€‚å®Œäº‹å„¿ä¹‹åå†æ¬¡æ‰§è¡Œå‘½ä»¤æ¥å…³é—­ã€‚å¸®åŠ© è°ƒæ•´çª—æ ¼å°ºå¯¸å¦‚æœä½ ä¸å–œæ¬¢é»˜è®¤å¸ƒå±€ï¼Œå¯ä»¥é‡è°ƒçª—æ ¼çš„å°ºå¯¸ã€‚è™½ç„¶è¿™å¾ˆå®¹æ˜“å®ç°ï¼Œä½†ä¸€èˆ¬ä¸éœ€è¦è¿™ä¹ˆå¹²ã€‚è¿™å‡ ä¸ªå‘½ä»¤ç”¨æ¥è°ƒæ•´çª—æ ¼ï¼š123456PREFIX : resize-pane -D å½“å‰çª—æ ¼å‘ä¸‹æ‰©å¤§ 1 æ ¼PREFIX : resize-pane -U å½“å‰çª—æ ¼å‘ä¸Šæ‰©å¤§ 1 æ ¼PREFIX : resize-pane -L å½“å‰çª—æ ¼å‘å·¦æ‰©å¤§ 1 æ ¼PREFIX : resize-pane -R å½“å‰çª—æ ¼å‘å³æ‰©å¤§ 1 æ ¼PREFIX : resize-pane -D 20 å½“å‰çª—æ ¼å‘ä¸‹æ‰©å¤§ 20 æ ¼PREFIX : resize-pane -t 2 -L 20 ç¼–å·ä¸º 2 çš„çª—æ ¼å‘å·¦æ‰©å¤§ 20 æ ¼ æ–‡æœ¬å¤åˆ¶æ¨¡å¼ï¼šæŒ‰ä¸‹å‰ç¼€ [è¿›å…¥æ–‡æœ¬å¤åˆ¶æ¨¡å¼ã€‚å¯ä»¥ä½¿ç”¨æ–¹å‘é”®åœ¨å±å¹•ä¸­ç§»åŠ¨å…‰æ ‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–¹å‘é”®æ˜¯å¯ç”¨çš„ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ Vim é”®ç›˜å¸ƒå±€æ¥åˆ‡æ¢çª—å£ã€è°ƒæ•´çª—æ ¼å¤§å°ã€‚Tmux ä¹Ÿæ”¯æŒ Vi æ¨¡å¼ã€‚è¦æ˜¯æƒ³å¯ç”¨ Vi æ¨¡å¼ï¼Œåªéœ€è¦æŠŠä¸‹é¢è¿™ä¸€è¡Œæ·»åŠ åˆ° .tmux.conf ä¸­ï¼š1setw -g mode-keys vi å¯ç”¨è¿™æ¡é…ç½®åï¼Œå°±å¯ä»¥ä½¿ç”¨ hã€jã€kã€l æ¥ç§»åŠ¨å…‰æ ‡äº†ã€‚ æƒ³è¦é€€å‡ºæ–‡æœ¬å¤åˆ¶æ¨¡å¼çš„è¯ï¼ŒæŒ‰ä¸‹å›è½¦é”®å°±å¯ä»¥äº†ã€‚ä¸€æ¬¡ç§»åŠ¨ä¸€æ ¼æ•ˆç‡ä½ä¸‹ï¼Œåœ¨ Vi æ¨¡å¼å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¾…åŠ©ä¸€äº›åˆ«çš„å¿«æ·é”®é«˜æ•ˆå·¥ä½œã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ w é”®é€è¯ç§»åŠ¨ï¼Œä½¿ç”¨ b é”®é€è¯å›é€€ã€‚ä½¿ç”¨ f é”®åŠ ä¸Šä»»æ„å­—ç¬¦è·³è½¬åˆ°å½“å‰è¡Œç¬¬ä¸€æ¬¡å‡ºç°è¯¥å­—ç¬¦çš„ä½ç½®ï¼Œä½¿ç”¨ F é”®è¾¾åˆ°ç›¸åçš„æ•ˆæœã€‚12345678910111213141516171819202122232425262728293031vi emacs åŠŸèƒ½^ M-m åç¼©è¿›Escape C-g æ¸…é™¤é€‰å®šå†…å®¹Enter M-w å¤åˆ¶é€‰å®šå†…å®¹j Down å…‰æ ‡ä¸‹ç§»h Left å…‰æ ‡å·¦ç§»l Right å…‰æ ‡å³ç§»L å…‰æ ‡ç§»åˆ°å°¾è¡ŒM M-r å…‰æ ‡ç§»åˆ°ä¸­é—´è¡ŒH M-R å…‰æ ‡ç§»åˆ°é¦–è¡Œk Up å…‰æ ‡ä¸Šç§»d C-u åˆ é™¤æ•´è¡ŒD C-k åˆ é™¤åˆ°è¡Œæœ«$ C-e ç§»åˆ°è¡Œå°¾: g å‰å¾€æŒ‡å®šè¡ŒC-d M-Down å‘ä¸‹æ»šåŠ¨åŠå±C-u M-Up å‘ä¸Šæ»šåŠ¨åŠå±C-f Page down ä¸‹ä¸€é¡µw M-f ä¸‹ä¸€ä¸ªè¯p C-y ç²˜è´´C-b Page up ä¸Šä¸€é¡µb M-b ä¸Šä¸€ä¸ªè¯q Escape é€€å‡ºC-Down or J C-Down å‘ä¸‹ç¿»C-Up or K C-Up å‘ä¸‹ç¿»n n ç»§ç»­æœç´¢? C-r å‘å‰æœç´¢/ C-s å‘åæœç´¢0 C-a ç§»åˆ°è¡Œé¦–Space C-Space å¼€å§‹é€‰ä¸­ C-t å­—ç¬¦è°ƒåº æ‚é¡¹ï¼š1234d é€€å‡º tmuxï¼ˆtmux ä»åœ¨åå°è¿è¡Œï¼‰t çª—å£ä¸­å¤®æ˜¾ç¤ºä¸€ä¸ªæ•°å­—æ—¶é’Ÿ? åˆ—å‡ºæ‰€æœ‰å¿«æ·é”®: å‘½ä»¤æç¤ºç¬¦ é…ç½®é€‰é¡¹ï¼š é¼ æ ‡æ”¯æŒ - è®¾ç½®ä¸º on æ¥å¯ç”¨é¼ æ ‡ setw -g mode-mouse off set -g mouse-select-pane off set -g mouse-resize-pane off set -g mouse-select-window off è®¾ç½®é»˜è®¤ç»ˆç«¯æ¨¡å¼ä¸º 256colorset -g default-terminal â€œscreen-256colorâ€ å¯ç”¨æ´»åŠ¨è­¦å‘Šsetw -g monitor-activity onset -g visual-activity on å±…ä¸­çª—å£åˆ—è¡¨set -g status-justify centre æœ€å¤§åŒ–/æ¢å¤çª—æ ¼123unbind Up bind Up new-window -d -n tmp \; swap-pane -s tmp.1 \; select-window -t tmpunbind Downbind Down last-window \; swap-pane -s tmp.1 \; kill-window -t tmp]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>Linux</tag>
        <tag>å¿«æ·é”®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Andoridé€†å‘å·¥ç¨‹:jebåˆæ¢(ä¸Š)]]></title>
    <url>%2F2018%2F%E5%AE%89%E5%85%A8%2FAndorid%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B-jeb%E5%88%9D%E6%8E%A2-%E4%B8%8A%2F</url>
    <content type="text"><![CDATA[JEBæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ä¸ºå®‰å…¨ä¸“ä¸šäººå£«è®¾è®¡çš„Androidåº”ç”¨ç¨‹åºçš„åç¼–è¯‘å·¥å…·ã€‚ç”¨äºé€†å‘å·¥ç¨‹æˆ–å®¡è®¡APKæ–‡ä»¶ï¼Œå¯ä»¥æé«˜æ•ˆç‡å‡å°‘è®¸å¤šå·¥ç¨‹å¸ˆçš„åˆ†ææ—¶é—´, jebçš„å¸¸ç”¨åŠŸèƒ½: 1.åç¼–è¯‘apk,dex 2.åŒ…åæ ‘çŠ¶å›¾ 3.æŸ¥çœ‹æŒ‡å®šç±»çš„smaliä»£ç  4.è½¬æ¢æˆjavaè¯­è¨€ 5.javaä»£ç ä¸­åŒå‡»å‡½æ•° è¿›å…¥å‡½æ•°æ–¹æ³•çš„å®šä¹‰ ï¼ŒæŸ¥çœ‹æ–¹æ³•çš„è°ƒç”¨ 6.æŸ¥çœ‹AndroidManifest.xml è¿›å…¥æ­£é¢˜~~~~ç”¨jebé€†å‘å¯»æ‰¾åŠ å¯†ç½‘ç»œè¯·æ±‚å‚æ•°åŠ å¯†æ–¹æ³• 1ã€é€šè¿‡ã€é»‘çŒ«é…±ã€‘ä»‹ç»ï¼Œåœ¨52pojieä¸‹è½½äº†ä¸ªjebï¼Œå®‰è£…å¥½æ­£å¼å¼€å¹²ã€‚ æˆ–è€…ä»ç™¾åº¦ç½‘ç›˜ç›´æ¥ä¸‹è½½,æå–ç ï¼š6ft3ã€‚ 2ã€é¦–å…ˆï¼Œåœ¨Bytecode node é‡Œé¢æ‰¾åˆ°ç½‘ç»œè¯·æ±‚æ¨¡å—http 3ã€æŒ‰Qåç¼–è¯‘å¾—åˆ°HttpMethod 4ã€æŒ‰xæ£€ç´¢è°ƒç”¨å®ƒçš„æ¨¡å—ï¼Œæ‰¾åˆ°requestæ–¹æ³• 5ã€ä¸€ç›´å‘ä¸Šæ£€ç´¢ï¼Œç›´åˆ°æ‰¾åˆ°neteaseæ¨¡å—ï¼Œneteaseæˆ‘ä»¬éƒ½çŸ¥é“æ˜¯ç½‘æ˜“çš„è‹±æ–‡åï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢å°±æ˜¯ä¸»æ¨¡å—äº† 6ã€æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œå¥½å¤šå­—ç¬¦ä¸²éƒ½æ˜¯ä¹±ç åƒåŠ å¯†ä¸€æ ·~ï¼Œæ²¡é”™äº†ï¼Œå°±æ˜¯åŠ å¯†æ»´ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºï¼Œå› ä¸ºæˆ‘å¬ã€é»‘çŒ«é…±ã€‘è¯´çš„(ï¿£â–½ï¿£)â€ 7ã€åŒå‡»è¿›å»æ–¹æ³•ï¼Œæ‰¾åˆ°è§£å¯†å‡½æ•°ï¼Œè·å¾—è§£å¯†æµç¨‹ï¼Œå…ˆç”¨base64è§£ç å­—ç¬¦ä¸²ï¼Œç„¶åéå†å­—ç¬¦ä¸²ä¸å…³é”®å­—è¿›è¡Œå¼‚æˆ–ï¼š å¾…ç»­â€¦.]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ä¿¡æ¯å®‰å…¨</category>
      </categories>
      <tags>
        <tag>Andorid</tag>
        <tag>é€†å‘å·¥ç¨‹</tag>
        <tag>jeb</tag>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RTBkit ç²¾å‡†è¥é”€ç³»ç»Ÿéƒ¨ç½²]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2FRTBkit-%E7%B2%BE%E5%87%86%E8%90%A5%E9%94%80%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯é¡¹ç›®åœ°å€ï¼š https://github.com/rtbkit/rtbkit/wiki/What-is-RTBkit%3F RTBkitæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶åŒ…ï¼Œé€šè¿‡å°†é—®é¢˜åˆ†è§£ä¸ºæ˜ç¡®å®šä¹‰çš„ç»„ä»¶ï¼Œå¯ä»¥å®Œæˆåˆ›å»ºå®æ—¶å¹¿å‘ŠæŠ•æ”¾çš„å¤§éƒ¨åˆ†å›°éš¾çš„å·¥ç¨‹å·¥ä½œã€‚å…¶å¼€æ”¾çš„ã€é¢å‘æœåŠ¡çš„æ¶æ„å¯ç”¨äºæ»¡è¶³ç®€å•æˆ–è€…å¤æ‚çš„æŠ•æ”¾éœ€æ±‚ã€‚RTBkitå¯ä»¥é€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æˆ–è€…å¼€å‘æ¥å£çš„å½¢å¼è¿›è¡Œç­–ç•¥åˆ¶å®šå’Œæ‰©å±•ã€‚ RTBkitæ¶æ„ éƒ¨ç½²å‡†å¤‡æ“ä½œç³»ç»Ÿï¼šubuntu:14.04.1 å®‰è£…RTBkit: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748apt-get -y updateapt-get install -y linux-tools-generic libbz2-dev python-dev scons unzip\ libtool liblzma-dev libblas-dev make automake \ ccache ant openjdk-7-jdk libcppunit-dev doxygen \ libcrypto++-dev libACE-dev gfortran liblapack-dev \ libevent-dev libssh2-1-dev libicu-dev libv8-dev \ g++ google-perftools libgoogle-perftools-dev \ zlib1g-dev git pkg-config valgrind autoconf \ libcurl4-openssl-dev cmake libsigc++-2.0-devmkdir -p $HOME/local/binPATH=&quot;$HOME/local/bin:$PATH&quot; mkdir -p $HOME/local/libexport LD_LIBRARY_PATH=&quot;$HOME/local/lib:$LD_LIBRARY_PATH&quot; export PKG_CONFIG_PATH=&quot;$HOME/local/lib/pkgconfig/:$HOME/local/lib/pkg-config/&quot;source ~/.profileenv | grep PATHgit clone https://github.com/rtbkit/rtbkit-deps.gitcd rtbkit-depssed -i &apos;s/git@github.com:/https:\/\/github.com\//g&apos; .gitmodulesgit submodule update --initmake all NODEJS_ENABLED=0export PATH=/root/local/bin:$PATHcd /git clone https://github.com/rtbkit/rtbkit.gitcd rtbkitcp jml-build/sample.local.mk local.mkmake compile NODEJS_ENABLED=0export LD_LIBRARY_PATH=&apos;/root/local/share;/root/local/lib&apos; æ„å»ºåŸºäºdockerçš„æœåŠ¡zookeeperé›†ç¾¤æœåŠ¡ ä½¿ç”¨ docker-compose æ¥å¯åŠ¨ ZK é›†ç¾¤ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º docker-compose.yml çš„æ–‡ä»¶ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465version: &apos;3&apos;services: zook1: image: zookeeper restart: always container_name: zk1 networks: - rtbkit-network ports: - &quot;2181:2181&quot; environment: ZOO_MY_ID: 1 ZOO_SERVERS: server.1=zk1:2888:3888 server.2=zk2:2888:3888 server.3=zk3:2888:3888 zook2: image: zookeeper restart: always container_name: zk2 networks: - rtbkit-network ports: - &quot;2182:2181&quot; environment: ZOO_MY_ID: 2 ZOO_SERVERS: server.1=zk1:2888:3888 server.2=zk2:2888:3888 server.3=zk3:2888:3888 zook3: image: zookeeper restart: always container_name: zk3 networks: - rtbkit-network ports: - &quot;2183:2181&quot; environment: ZOO_MY_ID: 3 ZOO_SERVERS: server.1=zk1:2888:3888 server.2=zk2:2888:3888 server.3=zk3:2888:3888 redis: image: daocloud.io/library/redis:3.2.9 restart: always container_name: redis02 networks: - rtbkit-network ports: - &quot;16379:6379&quot; volumes: - &quot;/home/dataspark/rtbcode/rtbkit/rtbkit/sample.redis.conf:/usr/local/etc/redis/redis.conf&quot; Graphite: image: graphiteapp/graphite-statsd restart: always container_name: graphite_test networks: - rtbkit-network ports: - &quot;6080:80&quot; - &quot;8003-8004:2003-2004&quot; - &quot;8023-8024:2023-2024&quot; - &quot;14125:8125/udp&quot; - &quot;14126:8126&quot; networks: rtbkit-network: driver: bridge ZOO_MY_ID å’Œ ZOO_SERVERS æ˜¯æ­å»º ZK é›†ç¾¤éœ€è¦è®¾ç½®çš„ä¸¤ä¸ªç¯å¢ƒå˜é‡, å…¶ä¸­ ZOO_MY_ID è¡¨ç¤º ZK æœåŠ¡çš„ id, å®ƒæ˜¯1-255 ä¹‹é—´çš„æ•´æ•°, å¿…é¡»åœ¨é›†ç¾¤ä¸­å”¯ä¸€. ZOO_SERVERS æ˜¯ZK é›†ç¾¤çš„ä¸»æœºåˆ—è¡¨.server.A=Bï¼šCï¼šDï¼šå…¶ä¸­ A æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¿™ä¸ªæ˜¯ç¬¬å‡ å·æœåŠ¡å™¨ï¼›B æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ ip åœ°å€ï¼›C è¡¨ç¤ºçš„æ˜¯è¿™ä¸ªæœåŠ¡å™¨ä¸é›†ç¾¤ä¸­çš„ Leader æœåŠ¡å™¨äº¤æ¢ä¿¡æ¯çš„ç«¯å£ï¼›D è¡¨ç¤ºçš„æ˜¯ä¸‡ä¸€é›†ç¾¤ä¸­çš„ Leader æœåŠ¡å™¨æŒ‚äº†ï¼Œéœ€è¦ä¸€ä¸ªç«¯å£æ¥é‡æ–°è¿›è¡Œé€‰ä¸¾ï¼Œé€‰å‡ºä¸€ä¸ªæ–°çš„ Leaderï¼Œè€Œè¿™ä¸ªç«¯å£å°±æ˜¯ç”¨æ¥æ‰§è¡Œé€‰ä¸¾æ—¶æœåŠ¡å™¨ç›¸äº’é€šä¿¡çš„ç«¯å£ã€‚å¦‚æœæ˜¯ä¼ªé›†ç¾¤çš„é…ç½®æ–¹å¼ï¼Œç”±äº B éƒ½æ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥ä¸åŒçš„ Zookeeper å®ä¾‹é€šä¿¡ç«¯å£å·ä¸èƒ½ä¸€æ ·ï¼Œæ‰€ä»¥è¦ç»™å®ƒä»¬åˆ†é…ä¸åŒçš„ç«¯å£å·ã€‚ è¿è¡Œdocker compose: COMPOSE_PROJECT_NAME=rtbkit_cluster docker-compose -f rtbkit-compose.yml up -d docker compose ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘æ¡¥rtbkit_cluster_default ä¿®æ”¹sample.bootstrap.jsonæ–‡ä»¶ä¸­çš„zookeeperç«¯å£é…ç½®123&quot;zookeeper-user&quot;:&quot;localhost:2181&quot;æ”¹ä¸º&quot;zookeeper-user&quot;:&quot;zk1:2181,zk2:2181,zk3:2181&quot;, Graphite docker run -d \ â€“name graphite \ â€“restart=always \ -p 5080:80 \ -p 7003-7004:2003-2004 \ -p 7023-7024:2023-2024 \ -p 13125:8125/udp \ -p 13126:8126 \graphiteapp/graphite-statsd ä¿®æ”¹sample.bootstrap.jsonæ–‡ä»¶ä¸­çš„carbonç«¯å£é…ç½®123&quot;carbon-uri&quot;: [&quot;carbon1.kittens.org:2003&quot;, &quot;carbonA.kittens.org:2003&quot;]æ”¹ä¸º&quot;carbon-uri&quot;: [&quot;graphite:2003&quot;] redisæœåŠ¡ docker run -p 6379:6379 -v /home/dataspark/rtbcode/rtbkit/rtbkit/sample.redis.conf:/usr/local/etc/redis/redis.conf â€“name redis01 -d daocloud.io/library/redis:3.2.9 redis-server /usr/local/etc/redis/redis.conf ä¿®æ”¹rtbkit/sample.launch.jsoné‡Œé¢çš„â€™bankerâ€™å°†å…¶å‚æ•°â€-Bâ€, â€œrtbkit/sample.bootstrap.jsonâ€, â€œ-râ€, â€œlocalhost:6379â€æ”¹ä¸º â€œredis02:6379â€ å¯åŠ¨ä¸»æœåŠ¡rtbkit docker run -it â€“name rtbkit01 â€“link graphite:graphite â€“link redis01:redis -p 5212:22 rtbkit bash ./build/x86_64/bin/launcher â€“node localhost â€“script ./launch.sh â€“bin ./build/x86_64/bin â€“launch rtbkit/sample.launch.json Bankeræ¨¡å—çš„JSON APIè¯´æ˜GET / ç±»ä¼¼äºhelpå‘½ä»¤ï¼Œç”¨æ³•ï¼šcurl http://localhost:9985/ GET /ping æ£€æŸ¥BankeræœåŠ¡æ˜¯å¦å¯¹HTTPæœ‰æ•ˆï¼Œæœ‰æ•ˆè¿”å›â€œpongâ€ GET /v1/accounts è·å–ç”¨æˆ·è´¦å·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°é»˜è®¤è¿”å›å…¨éƒ¨ï¼Œåé¢å‚æ•°å¯ä»¥è·ŸmaxDepthå’ŒaccountPrefixã€‚ maxDepth: an integer describing the maximum length at which keys will be sought (default: unlimited) accountPrefix: a string that specifies the prefix against which the returned account names will be matched POST /v1/accounts POSTä¸ºåˆ›å»ºç”¨æˆ·ã€‚åé¢å‚æ•°è·ŸaccountTypeå’ŒaccountNameã€‚ GET /v1/accounts/ è¿”å›æŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ POST,PUT /v1/accounts//balance ä»çˆ¶è´¦å·è½¬æ¢é¢„ç®—ç»™å­è´¦å·ä»¥å¹³è¡¡è¯·æ±‚æ•°é‡å‚æ•°ä¸ºaccountTypeï¼ŒPOSTå†…å®¹ä¸ºâ€{ â€œUSD/1Mâ€: é‡‘é¢ }â€ body: The body for that command must contain an amount encoded in a JSON Object. For example:: â€œ{ â€œUSD/1Mâ€: 123456 }â€ (123456 micro USD) parameters: accountType: If the account does not exist, this parameter defines the type of account to be created (â€œspendâ€ or â€œbudgetâ€) POST,PUT /v1/accounts//budget é€šè¿‡è¯·æ±‚ä¸ºç”¨æˆ·è®¾ç½®é¢„ç®—é‡‘é¢ï¼Œåªå…è®¸ä¸ºé¡¶çº§è´¦æˆ·è®¾ç½®ã€‚POSTå†…å®¹ä¸º â€œ{ â€œUSD/1Mâ€: é‡‘é¢ }â€ ï¼Œè¡¨ç¤ºåŠ å…¥XXç¾å…ƒã€‚ç”¨æ³•ï¼šcurl http://localhost:9985/v1/accounts/hello/budget -d â€˜{ â€œUSD/1Mâ€: 123456789 }â€™ GET /v1/accounts//children è¿”å›æŒ‡å®šè´¦æˆ·çš„å­è´¦å·åˆ—è¡¨ã€‚å‚æ•°ä¸ºdepthè¡¨ç¤ºè¿”å›æ·±åº¦ï¼Œé»˜è®¤ä¸ºä¸é™ã€‚ï¼ˆæ•ˆæœæœªçŸ¥ï¼‰ POST,PUT /v1/accounts//shadow æ›´æ–°å“åº”çš„æ”¯ä»˜è´¦å·çš„spendå’Œcommitment body: The body for that command must contain a representation of the shadow account in JSON. GET /v1/accounts//subtree è¿”å›æŒ‡å®šè´¦å·å’Œå…¶å­è´¦å·çš„å±æ€§è¡¨ç¤ºã€‚å‚æ•°ä¸ºdepthè¡¨ç¤ºè¿”å›æ·±åº¦ï¼Œé»˜è®¤ä¸ºä¸é™ã€‚ GET /v1/accounts//close å…³é—­ä¸€ä¸ªè´¦å·å’Œå…¶æ‰€æœ‰å­è´¦å·ã€‚ GET /v1/accounts//summary è´¦å·çš„æ±‡æ€»ä¿¡æ¯ GET /v1/summary æ‰€æœ‰è´¦å·çš„æ±‡æ€»ä¿¡æ¯]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>è¿ç»´</tag>
        <tag>RTB</tag>
        <tag>DSP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€§èƒ½æµ‹è¯•: Python3 åˆ©ç”¨asynicoåç¨‹ç³»ç»Ÿæ„å»ºç”Ÿäº§æ¶ˆè´¹æ¨¡å‹]]></title>
    <url>%2F2018%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2F%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95-Python3-%E5%88%A9%E7%94%A8asynico%E5%8D%8F%E7%A8%8B%E7%B3%BB%E7%BB%9F%E6%9E%84%E5%BB%BA%E7%94%9F%E4%BA%A7%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©ç ”ç©¶äº†ä¸‹python3çš„æ–°ç‰¹æ€§ asynico ï¼Œè¯•äº†è¯• aiohttp åç¨‹æ•ˆæœï¼Œå•æ ¸QPSåœ¨500~600ä¹‹é—´ï¼Œæ€§èƒ½è¿˜å¯ä»¥ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465import aiohttpimport asyncioimport hashlibimport timefrom asyncio import Queueclass Fetch: def __init__(self): self.work_queue = Queue() self.max_loop = 10000 self.host = &quot;http://14.29.5.29/XXXX&quot; self.payload = &#123;&quot;planId&quot;: 10000007, &quot;activityId&quot;: 1002, &quot;label&quot;: 1, &quot;key&quot;: &quot;98214ecfe6b9ae8855e3ac6509ad940f&quot;, &quot;keyType&quot;: &quot;imei&quot;, &quot;batchId&quot;: 1, &quot;token&quot;: &quot;395La7f9x9x&quot;&#125; async def get_url(self, host, payload): async with aiohttp.ClientSession() as session: async with session.post(host, data=payload) as resp: text = await resp.text() if &quot;1&quot; in text: print(text, payload[&quot;key&quot;]) async def consumer(self): while True: param = await self.work_queue.get() if param: await self.get_url(self.host, param) self.work_queue.task_done() else: break async def producer(self): i = 0 string = &apos;866260035710238&apos; while 1: if i: md5_str = hashlib.md5(string.encode(&apos;utf-8&apos;)) self.payload[&quot;key&quot;] = md5_str.hexdigest() string = str(int(string) + 1) await self.work_queue.put(self.payload.copy()) #å¿…é¡»è¦ i += 1 if i &gt; self.max_loop: break async def run(self): await self.producer() print(&apos;start consumer...&apos;) tasks = [ loop.create_task(self.consumer()) for i in range(10) ] await self.work_queue.join() print(&apos;end join&apos;) for task in tasks: task.cancel()t1 = time.time()loop = asyncio.get_event_loop()test = Fetch()loop.run_until_complete(test.run())loop.close()print(time.time() - t1)]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>å¹¶å‘</tag>
        <tag>asynico</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DSP åŠ RTB åŸºæœ¬æ¦‚å¿µã€åŸç†ã€ç†è®ºåŠåº”ç”¨ä»‹ç»]]></title>
    <url>%2F2018%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2FDSP-%E5%8F%8A-RTB-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%8F%8A%E7%90%86%E8%AE%BA%E5%BA%94%E7%94%A8%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯ä¸€ä»½å…³äºç²¾å‡†å¹¿å‘ŠæŠ•æ”¾æŠ€æœ¯çš„æ¼”ç¤ºç¨¿ï¼Œä»åŸºæœ¬æ¦‚å¿µã€åˆ°åŸç†å®ç°åˆ°å…·ä½“çš„å¸‚é¢ä¸Šçš„å¤§å‚æ¡†æ¶è¿›è¡Œäº†è¯¦ç»†çš„å‰–æã€‚ æ­£æ–‡ IR researchers, for example, are facing the challenge of deï¬ning the relevancy of underlying audiences given a campaign goal, and consequently, developing techniques to ï¬nd and ï¬lter them out in the real time bid request data. For data miners, a fundamental task is identifying repeated patterns over the large-scale streaming data of bid requests, winning bids and ad. For machine learners, an emerging problem is telling a machine to react to a data stream, i.e., learning to bid cleverly on behalf of advertisers and brands to maximise conversions while keeping costs to a minimum Behavioral targetingï¼ˆè¡Œä¸ºå®šä½å¹¿å‘Šï¼‰ comprises a range of technologies and techniques used by online website brands, publishers and advertisers aimed at increasing the effectiveness of marketing and advertising using user web-browsing behavior information. RTBçš„å®šä¹‰RTBé€šè¿‡é€æ˜å…¬å¹³çš„æ‹å–æœºåˆ¶ï¼ŒæŠŠå¯¹çš„å¹¿å‘Šå±•ç¤ºç»™å¯¹çš„ç”¨æˆ·ï¼Œæ•´ä¸ªç«ä»·è¿‡ç¨‹å‘ç”Ÿåœ¨å¹¿å‘Šå±•ç¤ºå‰çš„ä¸€ç¬é—´ã€‚åœ¨RTBç¯å¢ƒä¸­ï¼Œä¸è®ºæ˜¯å¯¹å¹¿å‘Šä¸»è¿˜æ˜¯å¯¹å¼€å‘è€…è€Œè¨€ï¼Œæ‹å–éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ç§å…¬å¹³è€Œé€æ˜çš„æ–¹å¼ã€‚å®ƒèƒ½è‡ªåŠ¨åœ¨æ­£ç¡®çš„æ—¶é—´ï¼Œå°†åˆé€‚çš„å¹¿å‘Šä»¥æ‹å–åŒæ–¹è¾¾æˆä¸€è‡´çš„åˆç†ä»·æ ¼æ¨é€ç»™æ­£ç¡®çš„å—ä¼—ã€‚ æ‹å–çš„å®šä¹‰æ‹å–æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œå³ï¼šæ½œåœ¨çš„ç«ä»·è€…å¯¹æŸä¸€å•†å“æäº¤è‡ªå·±çš„å‡ºä»·ï¼Œç„¶åç”±æ‹å–æ–¹ä»æ‰€æœ‰å‡ºä»·ä¸­é€‰å‡ºæœ€é«˜ä»·ï¼Œè¯¥å‡ºä»·è€…å°†æˆä¸ºè·å¾—å•†å“çš„ä¸­æ ‡è€…ã€‚å¹¿å‘Šäº¤æ˜“å¹³å°å’Œä¾›åº”æ–¹å¹³å°ï¼ˆSSPï¼‰ä¸å¤šä¸ªéœ€æ±‚æ–¹å¹³å°ï¼ˆDSPï¼‰å¯¹æ¥ï¼Œåˆ©ç”¨æ‹å–ï¼Œå°¤å…¶æ˜¯æ¬¡é«˜ä»·æŠ•æ ‡æ‹å–ï¼ˆSecond-price auctionï¼‰æœºåˆ¶ï¼Œå®æ—¶æŠ›å”®å¹¿å‘Šå±•ç¤ºæœºä¼šï¼Œå®ç°å¸‚åœºçš„ä¾›éœ€å¹³è¡¡ã€‚ ç¬¬ä¸€ç§ï¼Œä¹Ÿæ˜¯æœ€åŸºç¡€çš„ä¸€ç§äº¤æ˜“æ–¹å¼è¢«ç§°ä¸ºPDBï¼Œå³Private Direct Buyï¼ˆç§æœ‰ç›´æ¥è´­ä¹°ï¼‰ï¼Œè¿™ç§æ–¹å¼ç®€å•è®²ï¼Œæ˜¯ä¸€å¯¹ä¸€ï¼ˆ1v1ï¼‰çš„è´­ä¹°æ–¹å¼ã€‚è¿™ç§è´­ä¹°æ–¹å¼ï¼Œä¸æˆ‘ä»¬ä¼ ç»Ÿçš„å¹¿å‘Šé‡‡ä¹°æ–¹å¼åŸºæœ¬ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œå³å¹¿å‘Šä¸»æ‰¾åª’ä½“ç¡®å®šå¥½å¹¿å‘Šä½ç½®å’Œä»·æ ¼ï¼Œç„¶åæŒ‰ç…§æ’æœŸè§„å®šçš„æ—¶é—´è¿›è¡Œå¹¿å‘ŠæŠ•æ”¾ã€‚åœ¨ä¼ ç»Ÿæ–¹å¼ä¸­ï¼Œå¹¿å‘Šæ’æœŸï¼ˆspot planï¼‰æ˜¯è¿™ä¸ªäº¤æ˜“è¿‡ç¨‹çš„å…³é”®ï¼Œè€Œåœ¨PDBä¸­ï¼Œä¹Ÿå®Œå…¨å¦‚æ­¤ã€‚ PDBè¿™ç§æ–¹å¼ï¼Œæ˜¯å¹¿å‘Šä¸»æœ€å®¹æ˜“æ¥å—çš„æ–¹å¼ã€‚é¦–å…ˆï¼Œä¸ä¼ ç»Ÿé‡‡ä¹°æ–¹å¼ä¸€è‡´æ„å‘³ç€å¹¿å‘Šä½èµ„æºæ˜¯é¢„å…ˆä¿è¯çš„ï¼Œä¸€æ—¦æ’æœŸç¡®å®šï¼ŒPOï¼ˆpurchase orderï¼‰ä¸‹è¾¾ï¼Œå¹¿å‘Šä½èµ„æºå°±è‚¯å®šä¸å¯èƒ½æ˜“ä¸»ã€‚å†è€…ï¼Œä¸æ”¹å˜ä¼ ç»Ÿçš„å¹¿å‘Šé‡‡ä¹°è¿‡ç¨‹æ„å‘³ç€å†…éƒ¨çš„ç»„ç»‡å’Œå·¥ä½œæµç¨‹éƒ½ä¸éœ€è¦å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Œå› æ­¤ä¹Ÿå°±æ²¡æœ‰â€œæ”¿æ²»â€é—®é¢˜ï¼ˆä½ æ‡‚çš„ï¼‰ã€‚æ›´ä½•å†µï¼Œåœ¨æ­¤ä¹‹ä¸Šè¿˜èƒ½å®ç°ç¨‹åºåŒ–çš„å¥½å¤„ï¼Œæœ‰ç™¾åˆ©è€Œæ— ä¸€å®³ï¼Œä½•ä¹ä¸ä¸ºã€‚ PDBæ–¹å¼æ”¯æŒä¼ ç»Ÿçš„CPDï¼ˆCost Per Dayï¼‰çš„å¹¿å‘Šé‡‡ä¹°æ–¹å¼ï¼Œä¹Ÿæ”¯æŒCPMï¼ˆCost Per Milliï¼Œå³å¹¿å‘Šè¢«åƒæ¬¡æ›å…‰æ‰€éœ€çš„æˆæœ¬ï¼‰å’ŒCPCï¼ˆCost Per Clickï¼‰çš„æ–¹å¼ã€‚ Data exchanges(DX),also called Data Management Platforms(DMP), serve DSP, SSP and ADX by providing user historical data (usually in real-time) for better matching. Supply side platforms (SSP) serve publishers by registering their inventories (impressions) from multiple ad networks and accepting bids and placing ads automatically; Demand side platforms (DSP) serve advertisers or ad agencies by bidding for their campaigns in multiple ad networks automatically; When a user visits a webpage, an impression is created on publisherâ€™s website. While the page loads, 1. An ad request is sent to an ad exchange through an ad network or a SSP; 2. The ad exchange queries DSPs for advertisersâ€™ bids; 3. The DSP can contact data exchanges for the 3rd party user data; 4. If the advertiser decides to bid, the bid is generated and submitted (for example, the user is interested in travel, a travel related advertiser, e.g. booking.com, could expect the user to convert to their campaign and may be willing to bid higher); 5. The winner is selected at ad exchanges (largely based on the second price auction), then selected at SSP if the SSP sends the bid request to multiple ad exchanges; 6. The winning notice is sent to the advertiser; 7. Following the reversed path, the winnerâ€™s ad (creative, i.e., the text, picture,or video that the advertiser wants to show to users)is displayed on the webpage for the speciï¬c user; 8. The tracker collects the userâ€™s feedback, determining whether the user clicked the ad and whether the ad led to any conversion. Different visitors behave differently on your website. The traffic you get on your website is composed of visitors with different intentions: some are on your website for purchasing your products, some are there for joining your organization (finding careers page), some are there for simply researching, and others are probably there by mistake and have not even tiny interest in what you are selling. Most websites and landing pages on the Internet are same for all these different kinds of visitors. That is why we see websites crammed with multiple call-to-actions (buy now, sign up for newsletter, free trial, like us on Facebook, and what not). These websites try appealing to all sorts of visitors, but finally, end up appealing nobody. è¿½è¸ªç”¨æˆ·è¡Œä¸ºï¼šDSPå…¬å¸é€šå¸¸ä¼šåœ¨å¹¿å‘Šä¸»çš„ç½‘ç«™ä¸ŠåŸ‹ç‚¹ï¼ˆå³æ”¾ä¸Šä¸€ä¸ª1Ã—1çš„ä¸å¯è§åƒç´ ï¼‰ï¼Œè¿™æ ·å½“äº’è”ç½‘ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®å¹¿å‘Šä¸»çš„ç½‘ç«™æ—¶ï¼Œå°±ä¼šå¾—åˆ°DSPå…¬å¸çš„ä¸€ä¸ªcookieï¼Œè¿™æ ·DSPå…¬å¸å°±å¯ä»¥è¿½è¸ªåˆ°è¿™ä¸ªç½‘æ°‘çš„åœ¨å¹¿å‘Šä¸»ç½‘ç«™ä¸Šçš„è¡Œä¸ºäº†(è¿™äº›æ•°æ®ä¹Ÿå«action data)ã€‚DSPå…¬å¸è¿˜ä¼šå’Œç¬¬ä¸‰æ–¹çš„ç½‘ç«™åˆä½œï¼ˆä¾‹å¦‚ï¼šæ–°æµªï¼Œè…¾è®¯ï¼‰ï¼Œåœ¨ä»–ä»¬çš„ç½‘ç«™ä¸Šä¹ŸåŸ‹ç‚¹ï¼Œæˆ–è€…å‘DMPè´­ä¹°ç½‘æ°‘è¡Œä¸ºæ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥è¿½è¸ªåˆ°ç½‘æ°‘åœ¨è¿™äº›ç½‘ç«™ä¸Šçš„è¡Œä¸ºäº†(è¿™äº›æ•°æ®ä¹Ÿå«mapping data)ã€‚è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒDSPå…¬å¸å¯¹æŸä¸€ä¸ªç”¨æˆ·è®°å½•çš„cookieå’Œç¬¬ä¸‰æ–¹ç½‘ç«™æˆ–DMPæˆ–exchangeè®°å½•çš„cookieæ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™é‡Œéœ€è¦ä¸€ä¸ªå«Cookie Mappingçš„è¿‡ç¨‹ï¼Œè¿™ä¸æ˜¯æœ¬æ–‡é‡ç‚¹ï¼Œä»¥ä¸‹å‡è®¾DSPå·²ç»åšå¥½äº†Cookie Mappingï¼Œæ¯ä¸ªç”¨æˆ·æœ‰ä¸€ä¸ªå”¯ä¸€çš„idæ ‡è¯†ã€‚ å—ä¼—é€‰æ‹©ï¼ˆaudience selectionï¼‰: m6då¯¹æ¯ä¸€ä¸ªcampaign(å³æ¯ä¸€ä¸ªå¹¿å‘Šä¸»çš„æ¯ä¸ªæ¨å¹¿æ´»åŠ¨), è®­ç»ƒä¸€ä¸ªaudience selection model, è¯¥æ¨¡å‹ä»¥åœ¨å¹¿å‘Šä¸»çš„ç½‘ç«™ä¸Šå‘ç”Ÿè½¬åŒ–è¡Œä¸ºï¼ˆè½¬åŒ–è¡Œä¸ºå¯ä»¥æ˜¯æ³¨å†Œæˆä¸ºç”¨æˆ·ï¼Œç‚¹å‡»æŸä¸ªç‰¹å®šé¡µé¢ï¼Œè´­ä¹°äº§å“ã€‚æ¯ä¸ªå¹¿å‘Šä¸»å¯¹è½¬åŒ–çš„å®šä¹‰ä¸ä¸€æ ·ï¼‰çš„ç”¨æˆ·ä¸ºæ­£ä¾‹ï¼Œæ²¡æœ‰å‘ç”Ÿè½¬åŒ–è¡Œä¸ºçš„ç”¨æˆ·ä¸ºè´Ÿä¾‹ï¼ˆæ˜¯çš„ï¼Œæ­£è´Ÿä¾‹å¾ˆä¸å‡åŒ€ï¼Œé€šå¸¸è¦åšé‡‡æ ·å’Œç»“æœä¿®æ­£ï¼‰ã€‚å¾—åˆ°æ¨¡å‹åï¼Œå¯¹æ‰€æœ‰çš„ç”¨æˆ·é¢„ä¼°å¯¹è¿™ä¸ªcampaignçš„è½¬åŒ–æ¦‚ç‡p(c | u),å³è¯¥ç”¨æˆ·uæœ‰å¤šå¤§çš„æ¦‚ç‡ä¼šåœ¨å¹¿å‘Šä¸»çš„ç½‘ç«™ä¸Šå‘ç”Ÿè½¬åŒ–è¡Œä¸ºï¼ˆcè¡¨ç¤ºconversionï¼‰ï¼Œå»æ‰å¤§å¤šæ•°è½¬åŒ–æ¦‚ç‡éå¸¸å°çš„ç”¨æˆ·ï¼Œå°†ç›®æ ‡ç”¨æˆ·æ ¹æ®è½¬åŒ–æ¦‚ç‡é«˜ä½åˆ†åˆ°ä¸åŒçš„segmentsä¸­ã€‚è¿™æ ·æˆ‘ä»¬å¯¹æ¯ä¸ªcampaignå°±æ‰¾åˆ°äº†å¾ˆå¤šçš„ç›®æ ‡ç”¨æˆ·ï¼Œè€Œä¸”è¿™äº›ç”¨æˆ·æ ¹æ®ä»–ä»¬çš„è´¨é‡é«˜ä½ï¼Œè¢«åˆ†åˆ«æ”¾åœ¨ä¸åŒçš„segmentsä¸­ã€‚ é€šçŸ¥exchange: DSPå°†è¿™äº›ç›®æ ‡ç”¨æˆ·çš„cookieå‘Šè¯‰exchangeï¼Œè¿™æ ·å½“æœ‰è¿™äº›cookieçš„è¯·æ±‚æ¥çš„æ—¶å€™ï¼Œexchangeæ‰ä¼šæ¥å‘DSPçš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚ Segmentç®¡ç†ï¼š é€šå¸¸DSPå…¬å¸ä¼šæœ‰è´¦æˆ·ç®¡ç†å‘˜ï¼ˆè¿è¥äººå‘˜ï¼‰ï¼Œä»–ä»¬äººå·¥æ¥å¯¹æ¯ä¸ªcampaignçš„åšä¸€äº›è®¾å®šã€‚ä»–ä»¬æ ¹æ®æ¯ä¸ªcampaignæ‰€å±çš„è¡Œä¸šç‰¹ç‚¹ï¼Œç»æµçŠ¶å†µï¼Œå†³å®šå¼€å¯å“ªäº›segmentsï¼Œå…³æ‰å“ªäº›segmentsã€‚ä¾‹å¦‚ï¼šå¯¹æ²¡é’±çš„å°å…¬å¸çš„campaign, é‚£äº›ç”¨æˆ·è½¬åŒ–æ¦‚ç‡å°ä¸€äº›çš„segmentå°±ä¸è¦æŠ•å¹¿å‘Šäº†ã€‚ä»–ä»¬è¿˜éœ€è¦å¯¹æ¯ä¸ªsegmentè®¾å®šä¸€ä¸ªåŸºç¡€å‡ºä»·ï¼ˆbase priceï¼‰ã€‚è´¦æˆ·ç®¡ç†å‘˜å¯ä»¥æ‹¿åˆ°æ¯ä¸ªsegmentçš„å¹³å‡é¢„ä¼°è½¬åŒ–æ¦‚ç‡ï¼Œæ¥è¾…åŠ©ä»–ä»¬è®¾å®šåŸºç¡€å‡ºä»·ã€‚è¿™ä¸€æ­¥ä¹Ÿæ˜¯äººå·¥å½±å“æŠ•æ”¾ç­–ç•¥æœ€ä¸»è¦çš„åœ°æ–¹ã€‚ è¿›è¡Œå®æ—¶ç«ä»·ï¼šå½“exchangeæŠŠè¯·æ±‚å‘è¿‡æ¥çš„æ—¶å€™ï¼ŒDSPä¼šæ‹¿åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼šå½“å‰å¹¿å‘Šä½çš„ä¿¡æ¯ï¼Œå½“å‰ç”¨æˆ·çš„cookieå’ŒåŸºæœ¬ä¿¡æ¯ã€‚DSPéœ€è¦åœ¨100mså†…ï¼Œæ ¹æ®å¯¹å½“å‰ç”¨æˆ·çš„ç†è§£ï¼Œå¹¶ä¸”è€ƒè™‘å½“å‰å¹¿å‘Šä½ï¼Œæ ¹æ®è‡ªå·±çš„biddingç®—æ³•ï¼Œæ¥è¦å†³å®šæ˜¯å¦è¦ä¹°è¿™æ¬¡å±•ç°ï¼ŒæŠ•æ”¾å“ªä¸ªcampaignçš„å¹¿å‘Šï¼Œå‡ºä»·æ˜¯å¤šå°‘ï¼ˆbiddingï¼‰ï¼Œå¹¶å‘exchangeè¿”å›å‡ºä»·ä¿¡æ¯ï¼Ÿå¦‚æœè¶…è¿‡æ—¶é—´DSPæ²¡æœ‰å“åº”ï¼Œåˆ™exchangeé»˜è®¤DSPæ”¾å¼ƒè¿™æ¬¡ç«ä»·ã€‚ å±•ç°å¹¿å‘Šï¼šå¦‚æœèµ¢å¾—äº†å±•ç°æœºä¼šï¼Œåˆ™DSPè¿”å›åˆ›æ„ï¼Œç”¨æˆ·å°±ä¼šåœ¨è¯¥å¹¿å‘Šä½çœ‹åˆ°è¯¥åˆ›æ„ã€‚ è¿½è¸ªè½¬åŒ–ï¼šå› ä¸ºDSPåœ¨å¹¿å‘Šä¸»çš„ç½‘ç«™ä¸ŠåŸ‹äº†ç‚¹ï¼Œå°±èƒ½çŸ¥é“ç”¨æˆ·æ˜¯å¦åœ¨è¿™æ¬¡å±•ç°ä¹‹åè¿›è¡Œäº†è½¬åŒ–è¡Œä¸ºã€‚æ ¹æ®è¿™äº›æ•°æ®ç»Ÿè®¡è½¬åŒ–ç‡ï¼Œæ¯ä¸ªè½¬åŒ–å¹³å‡æˆæœ¬ç­‰æŒ‡æ ‡ï¼Œæ±‡æ€»æˆæŠ¥å‘Šç»™å¹¿å‘Šä¸»ã€‚ A user is typically identiï¬ed by an HTTP cookie.A cookie, in the form of a small piece of data, is sent from a website and stored in the userâ€™s Web browser the ï¬rst time the user browses a website.In the context of display advertising, each service provider would act as a single domain tobuilduptheirownuserIDsystemsacrossanumberoftheirclientwebsites SSPå¼ºåˆ¶å‘é€ä¸€ä¸ªé‡å®šå‘è¯·æ±‚ï¼Œè¯¥é‡å®šå‘è¯·æ±‚å¸¦ä¸Šæ–°ç½‘ç«™çš„cookie IDcookie-syncå‘ç”Ÿåœ¨ç«ä»·ä¹‹åè€Œä¸æ˜¯ä¹‹å‰çš„åŸå› ä¸»è¦æ˜¯è€ƒè™‘åˆ°æ—¶å»¶å’Œç”¨æˆ·ä½“éªŒã€‚å¦‚æœç”¨æˆ·user123 éœ€è¦è®¿é—®10ä¸ªDSPï¼Œ ç­‰å¾…æ‰€æœ‰çš„DSPä¸ºè‡ªå·±åˆ›å»ºcookieå¹¶å°†SSP cookie ID å’Œ DSP cookie IDçš„æ˜ å°„ä¿å­˜åˆ°DSPè‡ªå·±çš„æ•°æ®åº“ä¸­ï¼Œç„¶ååœ¨å¼€å§‹å¹¿å‘Šç«ä»·ï¼Œè¿™å°†æ˜¾è‘—åœ°å»¶ç¼“æ•´ä¸ªç«ä»·è¿‡ç¨‹ã€‚ in step (1), the browser makes a request from the pixel tag to ad.bidder.com and includes in this request any tracking cookies set by ad.bidder.com. If the user is new to ad.bidder.com, it sets its ad.bidder.com cookie. In step (2), the tracker from ad.bidder. com retrieves its tracking ID from the cookie and, instead of returning the required 1x1 pixel, redirects the browser to ad.exchange.com using http 302 redirect and encoding the tracking ID into the URL as a parameter. (3) The browser then makes a request to ad.exchange.com, which includes thefullURLad.bidder.comredirectedtoaswellas ad.exchange.comâ€™sown trackingcookie(ifoneexists). (4)ad.exchange.comreturnstherequired1x1 pixel and can now link its own ID associated with the user to ad.bidder. comâ€™s ID and create a record in its match table. å¹¿ä¹‰äºŒé˜¶å®šä»·æ¬¡ä»·å¯†å°æŠ•æ ‡æ‹å–ï¼šå‡ºæœ€é«˜ä»·è€…æ‰€å¾—ï¼Œä½†æ”¯ä»˜ä»·æ ¼æ˜¯ç¬¬äºŒä¸ªå¼€ä»·äººåšå¼€çš„ä»·æ ¼ã€‚ä¼˜ç‚¹ï¼šä¼ ç»Ÿçš„ç«ä»·çš„æœ€ä¼˜å‡ºä»·éƒ½å–å†³äºä»–å¯¹å…¶ä»–äººå‡ºä»·çš„é¢„æœŸï¼Œæ‰€ä»¥å¸¸å¸¸ä¸ä¼šå±•ç¤ºè‡ªå·±å¯¹æ‹å–ç‰©çš„çœŸå®è¯„ä»·ã€‚ å ä¼˜ç­–ç•¥çš„å®šä¹‰ï¼šåœ¨ä¸è€ƒè™‘å…¶ä»–ç«æ ‡è€…å¦‚ä½•ç«ä»·çš„æƒ…å†µä¸‹ï¼Œå ä¼˜ç­–ç•¥æ˜¯å¯¹ç«ä»·è€…æ›´æœ‰åˆ©çš„ç­–ç•¥ã€‚ é™ä½å‡ºä»·çš„å®šä¹‰ï¼šæŒ‡ç«ä»·è€…å¯¹å•†å“çš„å‡ºä»·ä½äºä»–ä»¬è®¤ä¸ºçœŸæ­£åˆç†çš„ä¼°å€¼ã€‚åœ¨ç¨‹åºåŒ–äº¤æ˜“ä¸­ï¼Œè¿™ä¸ªå•†å“å°±æ˜¯æŒ‡å¹¿å‘Šå±•ç¤ºæœºä¼šã€‚ å“ˆä½›å¤§å­¦å·¥å•†ç®¡ç†ä¸“ä¸šå‰¯æ•™æˆBenjamin Edelmanåœ¨é¢˜ä¸ºã€ŠInternet Advertising and the Generalized Second Price Auction: Selling Billions of Dollars Worth of Keywordsã€‹ä¸­çš„ç ”ç©¶æŠ¥å‘Šä¸­æŒ‡å‡ºï¼Œâ€œè®²çœŸè¯â€æ¥æºäºä¼ ç»Ÿçš„æ¬¡é«˜ä»·æŠ•æ ‡æ‹å–ä»¥åŠåœ¨æœç´¢å¹¿å‘Šä¸­è¢«å¹¿æ³›ä½¿ç”¨çš„VGCæ‹å–ã€‚ å“¥ä¼¦æ¯”äºšå¤§å­¦å•†ç§‘åŠ©ç†æ•™æˆSantiago Balseiroåœ¨ã€ŠCompetition and Yield Optimization in Ad Exchangeã€‹ä¸­è¡¨ç¤ºï¼Œåœ¨æ¬¡é«˜ä»·æŠ•æ ‡æ‹å–ä¸­ï¼Œâ€œè®²çœŸè¯â€å¯¹äºå¹¿å‘Šä¸»è€Œè¨€å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªå ä¼˜ç­–ç•¥ã€‚ ç«ä»·æ„¿æ™¯é¢„æµ‹(bid landscape forecasting)æ˜¯æŒ‡å¯¹äºç»™å®šçš„ä¸€ä¸ªå¹¿å‘Šè®¡åˆ’,é¢„æµ‹å‡ºä¸åŒä»·æ ¼èƒ½å¤Ÿç«ä»·åˆ°çš„æµé‡çš„åˆ†å¸ƒã€‚å¹¿å‘Šå®šå‘ç‰¹å¾é€šå¸¸æœ‰url, åª’ä½“, å¹¿å‘Šä½ç½®ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œåœ°ç†ä½ç½®ä¿¡æ¯ç­‰ ç™¾åº¦DSPå¼€å‘æ‰‹å†Œï¼šhttps://cloud.baidu.com/doc/DSP/Pricing.html#.E8.AE.A1.E8.B4.B9.E8.A7.84.E5.88.99-1 æ–‡çŒ®Books/Monographs Display Advertising with Real-Time Bidding (RTB) and Behavioural Targeting by Jun Wang, Weinan Zhang and Shuai Yuan. ArXiv 2016. Tutorials Learning, Prediction and Optimisation in RTB Display Advertising by Weinan Zhang and Jian Xu. CIKM 2016. Real-Time Bidding based Display Advertising: Mechanisms and Algorithms by Jun Wang, Shuai Yuan and Weinan Zhang. ECIR 2016. Real-Time Bidding: A New Frontier of Computational Advertising Research by Shuai Yuan and Jun Wang. WSDM 2015. Research Frontier of Real-Time Bidding based Display Advertising by Weinan Zhang. Beijing 2015. Review Papers A Survey on Real Time Bidding Advertising by Yong Yuan. Service Operations and Logistics 2014. Real-time Bidding for Online Advertising: Measurement and Analysis by Shuai Yuan, Jun Wang, Xiaoxue Zhao. ADKDD 2013. Ad Exchanges: Research Issues by S. Muthukrishnan. Internet and network economics 2009. Demand-Side Platform (DSP) TechniquesCTR/CVR Estimation A Nonparametric Delayed Feedback Model for Conversion Rate Prediction by Yuya Yoshikawa and Yusaku Imai. ArXiv 2018. Robust Factorization Machines for User Response Prediction by Surabhi Punjabi and Priyanka Bhatt. WWW 2018. Field-weighted Factorization Machines for Click-Through Rate Prediction in Display Advertising by Junwei Pan et al. WWW 2018. Deep &amp; Cross Network for Ad Click Predictions by Ruoxi Wang et al. ADKDD &amp; TargetAd 2017. Ranking and Calibrating Click-Attributed Purchases in Performance Display Advertising by Sougata Chaudhuri et al. ADKDD 2017. A Practical Framework of Conversion Rate Prediction for Online Display Advertising by Quan Lu et al. ADKDD 2017. An Ensemble-Based Approach to Click-Through Rate Prediction for Promoted Listings at Etsy by Kamelia Aryafar et al. ADKDD 2017. Deep Interest Network for Click-Through Rate Prediction by Guorui Zhou et al. ArXiv 2017. DeepFM: A Factorization-Machine based Neural Network for CTR Prediction by Huifeng Guo et al. IJCAI 2017 Learning Piece-wise Linear Models from Large Scale Data for Ad Click Prediction by Kun Gai, Xiaoqiang Zhu, Han Li, et al. Arxiv 2017. SEM: A Softmax-based Ensemble Model for CTR Estimation in Real-Time Bidding Advertising by Wen-Yuan Zhu et al. BigComp 2017. Neural Feature Embedding for User Response Prediction in Real-Time Bidding (RTB) by Enno Shioji, Masayuki Arai. ArXiv 2017. Field-aware Factorization Machines in a Real-world Online Advertising System by Yuchin Juan, Damien Lefortier, Olivier Chapelle. ArXiv 2017. Product-based Neural Networks for User Response Prediction by Yanru Qu et al. ICDM 2016. Sparse Factorization Machines for Click-through Rate Prediction by Zhen Pan et al. ICDM 2016. Deep CTR Prediction in Display Advertising by Junxuan Chen et al. MM 2016. Bid-aware Gradient Descent for Unbiased Learning with Censored Data in Display Advertising by Weinan Zhang, Tianxiong Zhou, Jun Wang, Jian Xu. KDD 2016. Large Scale CVR Prediction through Dynamic Transfer Learning of Global and Local Features by Hongxia Yang et al. BIGMINE 2016. Predicting ad click-through rates via feature-based fully coupled interaction tensor factorization by Lili Shan, Lei Lin, Chengjie Sun, Xiaolong Wang. Electronic Commerce Research and Applications 2016. Simple and Scalable Response Prediction for Display Advertising by Olivier Chapelle Criteo, Eren Manavoglu, Romer Rosales. ACM TIST 2014. Cost-sensitive Learning for Utility Optimization in Online Advertising Auctions by Flavian Vasile, Damien Lefortier, Olivier Chapelle. Extension under-review of the paper presented at the Workshop on E-Commerce, NIPS 2015. User Response Learning for Directly Optimizing Campaign Performance in Display Advertising by Kan Ren, Weinan Zhang, Yifei Rong, Haifeng Zhang, Yong Yu, Jun Wang. CIKM 2016. A Convolutional Click Prediction Model by Qiang Liu, Feng Yu, Shu Wu, Liang Wang. CIKM 2015. Factorization Machines with Follow-The-Regularized-Leader for CTR prediction in Display Advertising by Anh-Phuong Ta. BigData 2015. Deep Learning over Multi-field Categorical Data: A Case Study on User Response Prediction by Weinan Zhang, Tianming Du, Jun Wang. ECIR 2016. Offline Evaluation of Response Prediction in Online Advertising Auctions by Olivier Chapelle. WWW 2015. Predicting Response in Mobile Advertising with Hierarchical Importance-Aware Factorization Machine by Richard J. Oentaryo et al. WSDM 2014. Scalable Hierarchical Multitask Learning Algorithms for Conversion Optimization in Display Advertising by Amr Ahmed et al. WSDM 2014. Estimating Conversion Rate in Display Advertising from Past Performance Data by Kuang-chih Lee et al. KDD 2012. Scalable Hands-Free Transfer Learning for Online Advertising by Brian Dalessandro et al. KDD 2014. Evaluating and Optimizing Online Advertising: Forget the click, but there are good proxies by Brian Dalessandro et al. SSRN 2012. Modeling Delayed Feedback in Display Advertising by Olivier Chapelle. KDD 2014. Ad Click Prediction: a View from the Trenches by H. Brendan McMahan. KDD 2013. Practical Lessons from Predicting Clicks on Ads at Facebook by Xinran He et al. ADKDD 2014. Bid Landscape Predicting Winning Price in Real Time Bidding with Censored Data by Wush Chi-Hsuan Wu, Mi-Yen Yeh, Ming-Syan Chen. KDD 2015. Handling Forecast Errors While Bidding for Display Advertising by Kevin J. Lang, Benjamin Moseley, Sergei Vassilvitskii. WWW 2012. Bid Landscape Forecasting in Online Ad Exchange Marketplace by Ying Cui et al. KDD 2011. Functional Bid Landscape Forecasting for Display Advertising by Yuchen Wang et al. ECML-PKDD 2016. Bidding Strategies Optimal Bidding Strategy for Brand Advertising by Takanori Maehara et al. IJCAI 2018. Bidding Machine: Learning to Bid for Directly Optimizing Profits in Display Advertising by Kan Ren et al. TKDE 2018. Budget Constrained Bidding by Model-free Reinforcement Learning in Display Advertising by Di Wu et al. ArXiv 2018. Real-Time Bidding with Multi-Agent Reinforcement Learning in Display Advertising by Junqi Jin et al. ArXiv 2018. Deep Reinforcement Learning for Sponsored Search Real-time Bidding by Jun Zhao et al. ArXiv 2018. LADDER: A Human-Level Bidding Agent for Large-Scale Real-Time Online Auctions by Yu Wang et al. ArXiv 2017. Improving Real-Time Bidding Using a Constrained Markov Decision Process by Manxing Du et al. ADMA 2017. Attribution Modeling Increases Efficiency of Bidding in Display Advertising by Eustache Diemert et al. ADKDD 2017. Profit Maximization for Online Advertising Demand-Side Platforms by Paul Grigas et al. ArXiv 2017. Real-Time Bidding by Reinforcement Learning in Display Advertising by Han Cai et al. WSDM 2017. Managing Risk of Bidding in Display Advertising by Haifeng Zhang et al. WSDM 2017. Optimized Cost per Click in Taobao Display Advertising by Han Zhu et al. ArXiv 2017. Combining Powers of Two Predictors in Optimizing Real-Time Bidding Strategy under Constrained Budget by Chi-Chun Lin et al. CIKM 2016. Joint Optimization of Multiple Performance Metrics in Online Video Advertising by Sahin Cem Geyik et al. KDD 2016. Optimal Real-Time Bidding for Display Advertising by Weinan Zhang. PhD Thesis 2016. Bid-aware Gradient Descent for Unbiased Learning with Censored Data in Display Advertising by Weinan Zhang, Tianxiong Zhou, Jun Wang, Jian Xu. KDD 2016. Lift-Based Bidding in Ad Selection by Jian Xu et al. AAAI 2016. Feedback Control of Real-Time Display Advertising by Weinan Zhang et al. WSDM 2016. Optimal Real-Time Bidding Strategies by Joaquin Fernandez-Tapia, Olivier GuÃ©ant, Jean-Michel Lasry. ArXiv 2015. Programmatic Buying Bidding Strategies with Win Rate and Winning Price Estimation in Real Time Mobile Advertising by Xiang Li and Devin Guan. PAKDD 2014. Statistical modeling of Vickrey auctions and applications to automated bidding strategies by Joaquin Fernandez-Tapia. Working paper. Statistical Arbitrage Mining for Display Advertising by Weinan Zhang, Jun Wang. KDD 2015. Real-Time Bidding rules of thumb: analytically optimizing the programmatic buying of ad-inventory by Joaquin Fernandez-Tapia. SSRN 2015. Optimal Real-Time Bidding for Display Advertising by Weinan Zhang, Shuai Yuan, Jun Wang. KDD 2014. Bid Optimizing and Inventory Scoring in Targeted Online Advertising by Claudia Perlich et al. KDD 2012. Real-Time Bidding Algorithms for Performance-Based Display Ad Allocation by Ye Chen et al. KDD 2011. Budget Pacing &amp; Frequency/Recency Capping Exploring Optimal Frequency Caps in Real Time Bidding Advertising by Rui Qin et al. SocialCom 2016. Research on the Frequency Capping Issue in RTB Advertisingï¼šA Computational Experiment Approach by Rui Qin et al. CAC 2015. From 0.5 Million to 2.5 Million: Efficiently Scaling up Real-Time Bidding by Jianqian Shen et al. ICDM 2015. Smart Pacing for Effective Online Ad Campaign Optimization by Jian Xu et al. KDD 2015. An analytical solution to the budget-pacing problem in programmatic advertising by Joaquin Fernandez-Tapia. Working paper. Adaptive Targeting for Online Advertisement by Andrey Pepelyshev, Yuri Staroselskiy, Anatoly Zhigljavsky. Machine Learning, Optimization, and Big Data 2015. Real Time Bid Optimization with Smooth Budget Delivery in Online Advertising by Kuang-Chih Lee, Ali Jalali, Ali Dasdan. ADKDD 2013. Budget Pacing for Targeted Online Advertisements at LinkedIn by Deepak Agarwal et al. KDD 2014. Frequency Capping in Online Advertising by Niv Buchbinder et al. WADS 2011. Adaptive bidding for display advertising by Ghosh, A., Rubinstein, B. I, Vassilvitskii, S., and Zinkevich, M. 2009 Fraud Detection Independent Auditing of Online Display Advertising Campaigns by Patricia Callejo et al. HotNets 2016. Using Co-Visitation Networks For Classifying Non-Intentional Traffic by Ori Stitelman et al. Dstillery 2013. Impression Fraud in On-line Advertising via Pay-Per-View Networks by Kevin Springborn, Paul Barford. USENIX Security Symposium 2013. Understanding Fraudulent Activities in Online Ad Exchanges by Brett Stone-Grosset et al. IMC 2011. Market Segmentation Optimizing the Segmentation Granularity for RTB Advertising Markets with a Two-stage Resale Model By Rui Qin et al. SMC 2016. Optimizing Market Segmentation Granularity in RTB Advertising: A Computational Experimental Study by Rui Qin et al. SocialCom 2016. Analyzing the Segmentation Granularity of RTB Advertising Marketsï¼šA Computational Experiment Approach by Rui Qin et al. SMP 2015. Supply-Side Platform (SSP) Techniques Learning Algorithms for Second-Price Auctions with Reserve by Mehryar Mohri and Andres Munoz Medina. JMLR 2016. Optimal Reserve Prices in Upstream Auctions: Empirical Application on Online Video Advertising by Miguel Angel Alcobendas, Sheide Chammas and Kuang-chih Lee. KDD 2016. Optimal Allocation of Ad Inventory in Real-Time Bidding Advertising Markets by Juanjuan Li et al. SMC 2016. A Dynamic Pricing Model for Unifying Programmatic Guarantee and Real-Time Bidding in Display Advertising by Bowei Chen, Shuai Yuan and Jun Wang. ADKDD 2014. An Empirical Study of Reserve Price Optimisation in Real-Time Bidding by Shuai Yuan et al. KDD 2014. Information Disclosure in Real-Time Bidding Advertising Markets by Juanjuan Li, Yong Yuan, Rui Qin. SOLI 2014. Data Management Platform (DMP) Techniques A Sub-linear, Massive-scale Look-alike Audience Extension Systemby Qiang Ma, Musen Wen, Zhen Xia, Datong Chen. KDD 2016 / PMLR 2016 Audience Expansion for Online Social Network Advertising by Haishan Liu et al. KDD 2016. Implicit Look-alike Modelling in Display Ads: Transfer Collaborative Filtering to CTR by Weinan Zhang, Lingxi Chen, Jun Wang. ECIR 2016. Pleasing the advertising oracle: Probabilistic prediction from sampled, aggregated ground truth by Melinda Han Williams et al. ADKDD 2014. Focused matrix factorization for audience selection in display advertising by Kanagal B et al. ICDE 2013. Conversion Attribution Learning Multi-touch Conversion Attribution with Dual-attention Mechanisms for Online Advertising by Kan Ren, Yuchen Fang, Weinan Zhang, et al. CIKM 2018. Additional Multi-Touch Attribution for Online Advertising by Wendi Ji, et al. AAAI 2017. Multi-Touch Attribution in Online Advertising with Survival Theory by Ya Zhang, Yi Wei, and Jianbiao Ren. ICDM 2014. Multi-Touch Attribution Based Budget Allocation in Online Advertising by Sahin Cem Geyik, Abhishek Saxena, Ali Dasdan. ADKDD 2014. Causally Motivated Attribution for Online Advertising. by Brian Dalessandro et al. ADKDD 2012. Data-driven Multi-touch Attribution Models. by Xuhui Shao, Lexin Li. KDD 2011. Ad Exchanges, Mechanisms and Game Theory Truthfulness with Value-Maximizing Bidders: On the Limits of Approximation in Combinatorial Markets by Salman Fadaei and Martin Bichler. EJOR 2016. Repeated Auctions with Budgets in Ad Exchanges: Approximations and Design by Santiago R. Balseiro, Omar Besbesy, Gabriel Y. Weintraub. Management Science 2015. Ad Exchange: Intention Driven Auction Mechanisms for Mediating Between Publishers and Advertisers by Rina Azoulay, Esther David. WI/IAT 2015. Pricing Externalities in Real-Time Bidding Markets by Joseph Reisinger, Michael Driscoll. Machine Learning in Online Advertising. Competition between Demand-Side Intermediaries in Ad Exchanges by Lampros C. Stavrogiannis. PhD Thesis 2014. Auction Mechanisms for Demand-Side Intermediaries in Online Advertising Exchanges by Lampros C. Stavrogiannis, Enrico H. Gerding, Maria Polukarov. AMMAS 2014. Optimal Revenue-Sharing Double Auctions with Applications to Ad Exchanges by Renato Gomes, Vahab Mirrokni. WWW 2014. Competition and Yield Optimization in Ad Exchanges by Santiago R. Balseiro. PhD Thesis 2013. Selective Call Out and Real Time Bidding by Tanmoy Chakraborty. WINE 2010. Privacy Selling Off Privacy at Auction by Lukasz Olejnik, Tran Minh-Dung, Claude Castelluccia. NDSS 2014. Network Analysis of Third Party Tracking: User Exposure to Tracking Cookies through Search by Richard Gomer et al. WI 2013. Systems Finding Needle in a Million Metrics: Anomaly Detection in a Large-scale Computational Advertising Platform by Bowen Zhou, Shahriar Shariat. TargetAd 2016. Datasets and Benchmarking YOYI RTB datasets (with bidding information) by Kan Ren and Yifei Rong et al. CIKM 2016. iPinYou Global RTB Bidding Algorithm Competition Dataset by Hairen Liao et al. ADKDD 2014. Real-Time Bidding Benchmarking with iPinYou Dataset by Weinan Zhang et al. ArXiv 2014. Criteo Dataset for Product Recommendation / Counterfactual Learning by Damien Lefortier et al. What If workshop NIPS 2016. Criteo Conversion Logs Dataset by Criteo Labs. Criteo Terabyte Click Logs by Criteo Labs. Avazu Click Prediction by Avazu.]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>ç®—æ³•</tag>
        <tag>æŠ€æœ¯åˆ†äº«</tag>
        <tag>RTB</tag>
        <tag>DSP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FastDFSå®‰è£…]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2FFastDFS%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[å®‰è£…å®‰è£… libfastcommonlibfastcommonæ˜¯ FastDFS ä¸­çš„å…¬å…± C å‡½æ•°åº“ï¼ŒåŸºç¡€ç¯å¢ƒã€‚ä¸‹è½½ç¼–è¯‘å®‰è£…123git clone https://github.com/happyfish100/libfastcommon.gitcd libfastcommon./make.sh install åˆ›å»ºè½¯é“¾æ¥ï¼ˆå¥½åƒä¸»è¦æ˜¯å› ä¸ºFastDFSä¸»ç¨‹åºè®¾ç½®çš„libç›®å½•è€Œélib64ç›®å½•å¯¼è‡´ï¼Œä¸è¿‡æ²¡å°è¯•ä¸æ¸…æ¥šï¼‰123ln -s /usr/lib64/libfastcommon.so /usr/local/lib/libfastcommon.soln -s /usr/lib64/libfdfsclient.so /usr/local/lib/libfdfsclient.soln -s /usr/lib64/libfdfsclient.so /usr/lib/libfdfsclient.so å®‰è£… FastDFSä¸‹è½½ç¼–è¯‘å®‰è£… FastDFS:123git clone https://github.com/happyfish100/fastdfs.gitcd fastdfs./make.sh install é…ç½® FastDFS]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>åˆ†å¸ƒå¼å­˜å‚¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨crontabè¿è¡Œå®šæ—¶ä»»åŠ¡]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2F%E7%94%A8crontab%E8%BF%90%E8%A1%8C%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[ä»¥ä¸€ä¸ªPythoné¡¹ç›®çš„å®šæ—¶ä»»åŠ¡ä¸ºä¾‹ï¼š å…ˆå†™å¥½ä¸€ä¸ªrun.shè„šæœ¬:1234#!/bin/bash/bin/echo &quot;the script start `date`&quot; &gt;&gt; /home/shikanon/log/log.txtsource venv/bin/activatepython getMinuteData.py ç„¶åç¼–å†™crontabæ–‡ä»¶ï¼Œcrontabæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š12345678# Example of job definition:# .---------------- minute (0 - 59)# | .------------- hour (0 - 23)# | | .---------- day of month (1 - 31)# | | | .------- month (1 - 12) OR jan,feb,mar,apr ...# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat# | | | | |# * * * * * user-name command to be executed åˆ›å»ºcrontabæ–‡ä»¶:12&gt; vim getData.cron&gt; 0 16 * * * /home/shikanon/download/getData/run.sh è¡¨ç¤ºæ¯å¤©16ç‚¹è¿è¡Œä¸€æ¬¡/home/shikanon/download/getData/run.shå‘½ä»¤ åˆ›å»ºä»»åŠ¡crontab getData.cronæŸ¥çœ‹ç”¨æˆ·æ‰€æœ‰ä»»åŠ¡crontab -låˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰ä»»åŠ¡crontab -rç¼–è¾‘å½“å‰ç”¨æˆ·ä¸‹çš„ä»»åŠ¡crontab -eï¼Œå½“ç»“æŸç¼–è¾‘ç¦»å¼€æ—¶ï¼Œç¼–è¾‘åçš„æ–‡ä»¶å°†è‡ªåŠ¨å®‰è£…ã€‚ æ›´å¤šä¾‹å­ï¼š (æ³¨æ„å•çº¯echoï¼Œä»å±å¹•ä¸Šçœ‹ä¸åˆ°ä»»ä½•è¾“å‡ºï¼Œå› ä¸ºcronæŠŠä»»ä½•è¾“å‡ºéƒ½emailåˆ°rootçš„ä¿¡ç®±äº†ã€‚) æ¯å¤©æ—©ä¸Š6ç‚¹æ‰§è¡Œä¸€æ¬¡1&gt; 0 6 * * * echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt æ¯ä¸¤ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡1&gt; 0 */2 * * * echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt 23ç‚¹åˆ°8ç‚¹ä¹‹é—´æ¯ä¸¤ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡1&gt; 0 23-7/2 * * * echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt 23ç‚¹åˆ°8ç‚¹ä¹‹é—´æ¯ä¸¤ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ŒåŒæ—¶8ç‚¹æ‰§è¡Œä¸€æ¬¡1&gt; 0 23-7/2ï¼Œ8 * * * echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt æ¯ä¸ªæœˆçš„4å·11ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼ŒåŒæ—¶æ¯ä¸ªå‘¨çš„å‘¨ä¸€åˆ°ä¸‰11ç‚¹æ‰§è¡Œä¸€æ¬¡1&gt; 0 11 4 * 1-3 echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt æ¯å¤©çš„ä¸‹åˆ4ç‚¹ã€5ç‚¹ã€6ç‚¹çš„5 minã€15 minã€25 minã€35 minã€45 minã€55 minæ—¶æ‰§è¡Œä¸€æ¬¡1&gt; 5ï¼Œ15ï¼Œ25ï¼Œ35ï¼Œ45ï¼Œ55 16ï¼Œ17ï¼Œ18 * * * echo &quot;hello world&quot; &gt;&gt; /tmp/test.txt]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pandas é«˜æ€§èƒ½ä¼˜åŒ–å°æŠ€å·§]]></title>
    <url>%2F2018%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2FPandas-%E9%AB%98%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯Pandas å¯¹äºPythonerçš„ææ•°æ®åˆ†æçš„æ¥è¯´æ˜¯å¸¸ç”¨çš„æ•°æ®æ“ä½œåº“ï¼Œå¯¹äºå¾ˆå¤šåˆšæ¥è§¦Pandasçš„äººæ¥è¯´ä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿è€Œä¸”å¥½ç”¨çš„åº“ï¼Œå®ƒæä¾›äº†å„ç§æ•°æ®å˜åŒ–ã€æŸ¥è¯¢å’Œæ“ä½œï¼Œå®ƒçš„dataframeæ•°æ®ç»“æ„å’ŒRè¯­è¨€ã€Sparkçš„dataframeçš„APIåŸºæœ¬ä¸€æ ·ï¼Œå› æ­¤ä¸Šæ‰‹èµ·æ¥ä¹Ÿéå¸¸ç®€å•ã€‚ä½†æ˜¯å¾ˆå¤šæ–°æ‰‹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šå‘ç°pandasçš„dataframeçš„æ€§èƒ½å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œè€Œä¸”æœ‰æ—¶å€™å ç”¨å¤§é‡å†…å­˜ï¼Œå¹¶ä¸”æ€»å–œæ¬¢å°†ç½ªåå½’äºPythonèº«ä¸Š(lllï¿¢Ï‰ï¿¢)ï¼Œä»Šå¤©æˆ‘è¿™é‡Œç»™å¤§å®¶æ€»ç»“äº†åœ¨ä½¿ç”¨Pandasçš„ä¸€äº›æŠ€å·§å’Œä»£ç ä¼˜åŒ–æ–¹æ³•ã€‚ 1.ä½¿ç”¨Pandas on Ray Pandas on Ray ä¸»è¦é’ˆå¯¹çš„æ˜¯å¸Œæœ›åœ¨ä¸åˆ‡æ¢ API çš„æƒ…å†µä¸‹æé«˜æ€§èƒ½å’Œè¿è¡Œé€Ÿåº¦çš„ Pandas ç”¨æˆ·ã€‚Pandas on Ray å®ç°äº†Pandas çš„å¤§éƒ¨åˆ†API åŠŸèƒ½ï¼Œå¯å·²ä½œä¸ºPandasçš„ä¸€ä¸ªå­é›†ï¼Œå…¶ä¸»è¦æ˜¯åˆ©ç”¨å¹¶è¡ŒåŒ–è¿›è¡ŒåŠ é€Ÿã€‚ Pandas on Ray æ—¢å¯ä»¥ä»¥å¤šçº¿ç¨‹æ¨¡å¼è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä»¥å¤šè¿›ç¨‹æ¨¡å¼è¿è¡Œã€‚Ray çš„é»˜è®¤æ¨¡å¼æ˜¯å¤šè¿›ç¨‹ï¼Œå®ƒå¯ä»¥ä»ä¸€å°æœ¬åœ°æœºå™¨çš„å¤šä¸ªæ ¸å¿ƒæ‰©å±•åˆ°ä¸€ä¸ªæœºå™¨é›†ç¾¤ä¸Šã€‚åœ¨é€šä¿¡æ–¹é¢ï¼ŒRay ä½¿ç”¨å…±äº«å†…å­˜ï¼Œå¹¶ä¸”é€šè¿‡ Apache Arrow å®ç°é›¶æ‹·è´ä¸²è¡ŒåŒ–ï¼Œæ˜¾è‘—é™ä½äº†è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä»£ä»·ã€‚ Ray å°†æ ¹æ®å¯ç”¨å†…æ ¸çš„æ•°é‡è¿›è¡Œè‡ªåŠ¨åˆå§‹åŒ–,ä»¥ä¸€ä¸ª1.8GBçš„å…¨çƒå¥åº·æ•°æ®ä¸ºä¾‹ 123456789import ray.dataframe as pdimport pandas as old_pdprint(&quot;Pandas on Ray:&quot;)%time pandas_on_ray = pd.read_csv&quot;midyear_population_age_country_code.csv&quot;)# Pandasprint(&quot;\nPandas:&quot;)%time pandas_native = old_pd.read_csv(&quot;midyear_population_age_country_code.csv&quot;) è¾“å‡ºç»“æœ:1234567Pandas on Ray:CPU times: user 48.5 ms, sys: 19.1 ms, total: 67.6 msWall time: 68 msPandas:CPU times: user 49.3 s, sys: 4.09 s, total: 53.4 sWall time: 54.3 s Pandas on Rayä¸»è¦æ˜¯é€šè¿‡å¹¶çº¿åŒ–æ¥åŠ é€Ÿï¼Œå°±å’ŒSparkä¸€æ ·ï¼Œ 1.1ä½¿ç”¨iterrowsæˆ–è€…applyä»£æ›¿ç›´æ¥å¯¹dataframeéå† ç”¨è¿‡Pandasçš„éƒ½çŸ¥é“ç›´æ¥å¯¹dataframeè¿›è¡Œéå†æ˜¯ååˆ†ä½æ•ˆçš„ï¼Œå½“éœ€è¦å¯¹dataframeè¿›è¡Œéå†çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨iterrowä»£æ›¿ã€‚ 123456789101112131415161718192021import pandas as pdimport timedf = pd.read_csv(&apos;è¾“å‡ºç»“æœ_æ€»é‡_è¿å‡º.csv&apos;,encoding=&apos;gbk&apos;,engine=&apos;python&apos;)def loop_test(df): result = list() for i in range(len(df)): result.append(df.iloc[i][&apos;è¿å‡ºé‡&apos;]) return resultdef loop_iterrows_test(df): result = list() for index, row in df.iterrows(): result.append(row[&apos;è¿å‡ºé‡&apos;]) return resultprint(&apos;loop directly...&apos;)%time result = loop_test(df)print(&apos;loop with iterrows...&apos;)%time result = loop_iterrows_test(df) è¾“å‡ºç»“æœ1234loop directly...Wall time: 29.2 sloop with iterrows...Wall time: 10.6 s å®éªŒè¯æ˜iterrowçš„æ•ˆæœåœ¨ä¸‰å€ä»¥ä¸Šã€‚ 1.2applyæ–¹æ³•dataframeæ˜¯ä¸€ç§åˆ—æ•°æ®ï¼Œapplyå¯¹ç‰¹å®šçš„è½´è®¡ç®—åšäº†ä¼˜åŒ–,åœ¨é’ˆå¯¹ç‰¹å®šè½´ï¼ˆè¡Œ/åˆ—ï¼‰è¿›è¡Œè¿ç®—æ“ä½œçš„æ—¶å€™ï¼Œapplyçš„æ•ˆç‡ç”šè‡³æ¯”iterrowæ›´é«˜. 12345678910111213def loop_iterrows_test(df): result = list() for index, row in df.iterrows(): result.append(row[&apos;æ±½è½¦ç™¾åˆ†æ¯”&apos;]+row[&apos;ç«è½¦ç™¾åˆ†æ¯”&apos;]) return resultdef loop_apply_test(row): return row[&apos;æ±½è½¦ç™¾åˆ†æ¯”&apos;]+row[&apos;ç«è½¦ç™¾åˆ†æ¯”&apos;]print(&apos;func iterrows test...&apos;)%time df[&apos;iterrow&apos;] = loop_iterrows_test(df)print(&apos;func apply test...&apos;)%time df[&apos;apply&apos;] = df.apply(loop_apply_test,axis=1) ç»“æœè¾“å‡º1234func iterrows test...Wall time: 12.3 sfunc apply test...Wall time: 3.8 s applyå‡½æ•°æ¯”iterrowæé«˜äº†4å€ 1.3ç›´æ¥ä½¿ç”¨å†…ç½®å‡½æ•°è¿›è¡Œè®¡ç®—Dataframeã€Serieså…·æœ‰å¤§é‡çš„çŸ¢é‡å‡½æ•°ï¼Œæ¯”å¦‚sum,meanç­‰ï¼ŒåŸºäºå†…ç½®å‡½æ•°çš„è®¡ç®—å¯ä»¥è®©æ€§èƒ½æ›´å¥½ï¼Œæ¯”å¦‚:1%time df[&apos;add&apos;] = df[&apos;æ±½è½¦ç™¾åˆ†æ¯”&apos;]+df[&apos;ç«è½¦ç™¾åˆ†æ¯”&apos;] è¾“å‡ºç»“æœ1Wall time: 546 ms æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ€§èƒ½åˆå¾€ä¸Šæé«˜äº†è¿‘6å€ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨pandasè¿›è¡Œè®¡ç®—çš„æ—¶å€™ï¼Œå¦‚æœå¯ä»¥ä½¿ç”¨å†…ç½®çš„çŸ¢é‡æ–¹æ³•è®¡ç®—æœ€å¥½é€‰ç”¨å†…ç½®æ–¹æ³•ï¼Œå…¶æ¬¡å¯ä»¥è€ƒè™‘applyæ–¹æ³•ï¼Œå¦‚æœå¯¹äºéè½´å‘çš„å¾ªç¯å¯ä»¥è€ƒè™‘iterrowæ–¹æ³•ã€‚ 2.æ•°æ®ç±»å‹ä¼˜åŒ– Pandasçš„å†…å­˜ä½¿ç”¨ç‡ä¸€ç›´è¢«å¤§å®¶æŠ±æ€¨ï¼Œç‰¹åˆ«å¯¹äºåˆå­¦è€…ï¼Œå½“æœºå™¨èµ„æºä¸è¶³çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç°ç›¸æ¯”å…¶ä»–çš„æ•°æ®ç»“æ„ï¼ŒPandaså­˜å‚¨çš„æ•°æ®å¾ˆå®¹æ˜“å°±ä¼šçˆ†æ‰ã€‚ åœ¨åº•å±‚çš„è®¾è®¡ä¸­ï¼ŒpandasæŒ‰ç…§æ•°æ®ç±»å‹å°†åˆ—åˆ†ç»„å½¢æˆæ•°æ®å—ï¼ˆblocksï¼‰ã€‚pandasä½¿ç”¨ObjectBlockç±»æ¥è¡¨ç¤ºåŒ…å«å­—ç¬¦ä¸²åˆ—çš„æ•°æ®å—ï¼Œç”¨FloatBlockç±»æ¥è¡¨ç¤ºåŒ…å«æµ®ç‚¹å‹åˆ—çš„æ•°æ®å—ã€‚å¯¹äºåŒ…å«æ•°å€¼å‹æ•°æ®ï¼ˆæ¯”å¦‚æ•´å‹å’Œæµ®ç‚¹å‹ï¼‰çš„æ•°æ®å—ï¼Œpandasä¼šåˆå¹¶è¿™äº›åˆ—ï¼Œå¹¶æŠŠå®ƒä»¬å­˜å‚¨ä¸ºä¸€ä¸ªNumpyæ•°ç»„ï¼ˆndarrayï¼‰ã€‚Numpyæ•°ç»„æ˜¯åœ¨Cæ•°ç»„çš„åŸºç¡€ä¸Šåˆ›å»ºçš„ï¼Œå…¶å€¼åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ã€‚åŸºäºè¿™ç§å­˜å‚¨æœºåˆ¶ï¼Œå¯¹å…¶åˆ‡ç‰‡çš„è®¿é—®æ˜¯ç›¸å½“å¿«çš„ã€‚ 1234567891011121314151617181920212223df.info(memory_usage=&apos;deep&apos;)&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;RangeIndex: 307870 entries, 0 to 307869Data columns (total 16 columns):èµ·ç‚¹åŸå¸‚ 307870 non-null objectèµ·ç‚¹åŸå¸‚ä»£ç  307870 non-null int64èµ·ç‚¹åŸå¸‚lng 291690 non-null float64èµ·ç‚¹åŸå¸‚lat 291690 non-null float64ç»ˆç‚¹åŸå¸‚ 307870 non-null objectç»ˆç‚¹åŸå¸‚ä»£ç  307870 non-null objectç»ˆç‚¹åŸå¸‚lng 304000 non-null objectç»ˆç‚¹åŸå¸‚lat 304000 non-null objectæ—¥æœŸ 307870 non-null objectè¿å‡ºé‡ 307870 non-null int64æ±½è½¦ç™¾åˆ†æ¯” 307870 non-null float64ç«è½¦ç™¾åˆ†æ¯” 307870 non-null float64é£æœºç™¾åˆ†æ¯” 307870 non-null float64iterrow 307870 non-null float64apply 307870 non-null float64add 307870 non-null float64dtypes: float64(8), int64(2), object(6)memory usage: 151.5 MB 2.1 å­ç±»å‹ä¼˜åŒ–æ•°å€¼å‹åˆ—pandasä¸­çš„è®¸å¤šæ•°æ®ç±»å‹å…·æœ‰å¤šä¸ªå­ç±»å‹ï¼Œæ¯”å¦‚ï¼Œfloatå‹å°±æœ‰float16ã€float32å’Œfloat64å­ç±»å‹,åˆ†åˆ«ä½¿ç”¨äº†2ã€4ã€8ä¸ªå­—èŠ‚ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°pd.to_numeric()æ¥å¯¹æ•°å€¼å‹è¿›è¡Œå‘ä¸‹ç±»å‹è½¬æ¢ã€‚ç”¨DataFrame.select_dtypesæ¥åªé€‰æ‹©ç‰¹å®šç±»å‹åˆ—ï¼Œç„¶åæˆ‘ä»¬ä¼˜åŒ–è¿™ç§ç±»å‹ï¼Œå¹¶æ¯”è¾ƒå†…å­˜ä½¿ç”¨é‡ã€‚ 12345df_int = df.select_dtypes(include=[&apos;float&apos;])converted_int = df_int.apply(pd.to_numeric, downcast=&apos;float&apos;)print(df_int.dtypes.iloc[0],df_int.memory_usage(deep=True).sum())print(converted_int.iloc[0].dtypes,converted_int.memory_usage(deep=True).sum()) è¾“å‡ºç»“æœ12float64 19703760float32 9851920 å®éªŒè¡¨æ˜,float32æ¯”float64æ•´å¥½ä¼˜åŒ–äº†ä¸€åŠå†…å­˜ 2.2 ç”¨categoryç±»å‹ä»£æ›¿objectç±»å‹objectç±»å‹ç”¨æ¥è¡¨ç¤ºç”¨åˆ°äº†Pythonå­—ç¬¦ä¸²å¯¹è±¡çš„å€¼ï¼Œæœ‰ä¸€éƒ¨åˆ†åŸå› æ˜¯Numpyç¼ºå°‘å¯¹ç¼ºå¤±å­—ç¬¦ä¸²å€¼çš„æ”¯æŒã€‚å› ä¸ºPythonæ˜¯ä¸€ç§é«˜å±‚ã€è§£æå‹è¯­è¨€ï¼Œå®ƒæ²¡æœ‰æä¾›å¾ˆå¥½çš„å¯¹å†…å­˜ä¸­æ•°æ®å¦‚ä½•å­˜å‚¨çš„ç»†ç²’åº¦æ§åˆ¶ã€‚ è¿™ä¸€é™åˆ¶å¯¼è‡´äº†å­—ç¬¦ä¸²ä»¥ä¸€ç§ç¢ç‰‡åŒ–æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ï¼Œå¹¶ä¸”è®¿é—®é€Ÿåº¦ä½ä¸‹ã€‚åœ¨objectåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å®é™…ä¸Šéƒ½æ˜¯å­˜æ”¾å†…å­˜ä¸­çœŸå®æ•°æ®ä½ç½®çš„æŒ‡é’ˆã€‚ categoryç±»å‹åœ¨åº•å±‚ä½¿ç”¨æ•´å‹æ•°å€¼æ¥è¡¨ç¤ºè¯¥åˆ—çš„å€¼ï¼Œè€Œä¸æ˜¯ç”¨åŸå€¼ã€‚Pandasç”¨ä¸€ä¸ªå­—å…¸æ¥æ„å»ºè¿™äº›æ•´å‹æ•°æ®åˆ°åŸæ•°æ®çš„æ˜ å°„å…³ç³»ã€‚å½“ä¸€åˆ—åªåŒ…å«æœ‰é™ç§å€¼æ—¶ï¼Œè¿™ç§è®¾è®¡æ˜¯å¾ˆä¸é”™çš„ã€‚å½“æˆ‘ä»¬æŠŠä¸€åˆ—è½¬æ¢æˆcategoryç±»å‹æ—¶ï¼Œpandasä¼šç”¨ä¸€ç§æœ€çœç©ºé—´çš„intå­ç±»å‹å»è¡¨ç¤ºè¿™ä¸€åˆ—ä¸­æ‰€æœ‰çš„å”¯ä¸€å€¼ã€‚ objectæ•°æ®ç±»å‹ categoryæ•°æ®ç±»å‹ å®éªŒè¾“å…¥ï¼š12df_object = df.select_dtypes(include=[&apos;object&apos;])print(df_object.columns) è¾“å‡ºç»“æœ1Index([&apos;èµ·ç‚¹åŸå¸‚&apos;, &apos;ç»ˆç‚¹åŸå¸‚&apos;, &apos;ç»ˆç‚¹åŸå¸‚ä»£ç &apos;, &apos;ç»ˆç‚¹åŸå¸‚lng&apos;, &apos;ç»ˆç‚¹åŸå¸‚lat&apos;, &apos;æ—¥æœŸ&apos;], dtype=&apos;object&apos;) è¾“å…¥12345down_cast_cols = df_object[&apos;èµ·ç‚¹åŸå¸‚&apos;].astype(&apos;category&apos;)print(&apos;before...&apos;)print(df_object[&apos;èµ·ç‚¹åŸå¸‚&apos;].memory_usage(deep=True))print(&apos;after...&apos;)print(down_cast_cols.memory_usage(deep=True)) è¾“å‡º1234before...28885690after...659649 å¯ä»¥çœ‹å‡ºæ•ˆæœæ˜¯éå¸¸æ˜æ˜¾çš„ï¼Œå‹ç¼©äº†è¿‘30å€çš„å†…å­˜ç©ºé—´~ è¿™ç§åŸºäºç±»å‹çš„ä¼˜åŒ–æˆ‘ä»¬ä¸€èˆ¬åœ¨æ•°æ®è½½å…¥çš„æ—¶å€™å°±å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰äº†ï¼Œè¿™æ ·å³å¯ä»¥å¤§å¤§çš„èŠ‚çœå†…å­˜çš„ç©ºé—´ã€‚ 1234567891011df_origin = pd.read_csv(&apos;è¾“å‡ºç»“æœ_æ€»é‡_è¿å‡º.csv&apos;,encoding=&apos;gbk&apos;,engine=&apos;python&apos;)converted_df = pd.read_csv(&apos;è¾“å‡ºç»“æœ_æ€»é‡_è¿å‡º.csv&apos;,encoding=&apos;gbk&apos;,engine=&apos;python&apos;, dtype=&#123;&apos;èµ·ç‚¹åŸå¸‚&apos;: &apos;category&apos;, &apos;ç»ˆç‚¹åŸå¸‚&apos;: &apos;category&apos;, &apos;ç»ˆç‚¹åŸå¸‚ä»£ç &apos;:&apos;category&apos;, &apos;ç»ˆç‚¹åŸå¸‚ä»£ç &apos;: &apos;category&apos;, &apos;æ±½è½¦ç™¾åˆ†æ¯”&apos;: &apos;float32&apos;, &apos;ç«è½¦ç™¾åˆ†æ¯”&apos;:&apos;float32&apos;, &apos;é£æœºç™¾åˆ†æ¯”&apos;: &apos;float32&apos;, &#125;, parse_dates=[&apos;æ—¥æœŸ&apos;])print(&apos;No optimization... &apos;)print(int(df_origin.memory_usage(deep=True).sum() / 1024))print(&apos;After optimization ....&apos;)print(int(converted_df.memory_usage(deep=True).sum() / 1024)) è¾“å‡ºç»“æœ1234No optimization... 147934After optimization ....35437 åŸå§‹ç»“æœå†…å­˜147Mï¼Œä¼˜åŒ–å35Mï¼Œå†…å­˜ä¼˜åŒ–äº†è¿‘å››å€ 3. æ€»ç»“å¯¹äºPandsçš„ä¼˜åŒ–è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸‰ç§æœ€å¸¸ç”¨çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¸€ç§æ˜¯å¯¹äºæ•°æ®é‡æå¤§çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨Pandas on Ray æˆ–è€… Dask ä¼˜åŒ–ï¼Œç¬¬äºŒç§æ˜¯å¯¹äºåœ¨è¿ç®—çš„æ—¶å€™é‡‡ç”¨è‡ªå®šä¹‰çš„çŸ¢é‡è¿­ä»£å‡½æ•°ä»£æ›¿forå¾ªç¯å¯ä»¥å–å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œç¬¬ä¸‰ç§æ–¹æ³•æ˜¯é€šè¿‡å¯¹å­˜å‚¨ç±»å‹çš„è®¾ç½®æˆ–è½¬æ¢æ¥ä¼˜åŒ–pandaså†…å­˜ä½¿ç”¨ã€‚ githubåœ°å€]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>ç®—æ³•</tag>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
        <tag>Pandas</tag>
        <tag>æ•°æ®å¤„ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡jpgå›¾ç‰‡éšè—æ–‡ä»¶]]></title>
    <url>%2F2018%2F%E5%AE%89%E5%85%A8%2F%E9%80%9A%E8%BF%87jpg%E5%9B%BE%E7%89%87%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªè§†é¢‘Video.mkvï¼Œæˆ‘ä»¬æƒ³éšè—å®ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ‰¾ä¸€å¼ èƒŒæ™¯å›¾ç‰‡è°£è¨€.jpgï¼ŒæŠŠä»–ä»¬æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ï¼š å°†Video.mkvæ‰“åŒ…æˆå‹ç¼©åŒ…Video.rarï¼Œä¸ºä»€ä¹ˆè¦æ‰“åŒ…å‘¢ï¼Ÿå› ä¸ºè¿™æ˜¯ä¸ºåé¢è§£å‹æœåŠ¡å¾—~ åœ¨è¯¥ç›®å½•ä¸‹ç¼–å†™batæ–‡ä»¶ï¼š1copy /b è°£è¨€.jpg+Video.rar è°£è¨€2.jpg åŒå‡»è¿è¡Œå‹ç¼©.batï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€å¼ è°£è¨€2.jpgçš„å›¾ç‰‡ï¼Œçœ‹çœ‹å¤§å°ï¼Œæ•´åˆç­‰äºå‹ç¼©åŒ…æ–‡ä»¶å’Œå›¾ç‰‡æ–‡ä»¶æ€»å’Œ~ æœ€åï¼Œé‚£å¦‚ä½•è¿˜åŸåŸæ–‡ä»¶å‘¢ï¼Ÿï¼Ÿå¾ˆç®€å•ï¼Œç›´æ¥å°†æ–‡ä»¶åç¼€æ”¹ä¸ºrarå‹ç¼©åŒ…æ–‡ä»¶è¿›è¡Œè§£å‹å°±å¯ä»¥äº†ï¼Œå› ä¸ºrarè§£å‹æœ‰ä¸ªä¸“å±çš„å¼€å§‹ä½ç½®ï¼Œè§£å‹ç¨‹åºä¼šè¯»åˆ°å¼€å§‹ä½ç½®çš„æ ‡è¯†ç¬¦æ‰æ‰§è¡Œè§£å‹ç¨‹åºï¼Œåº”è¯¥å‰é¢çš„jpgäºŒè¿›åˆ¶ä¼šè¢«å¿½ç•¥ã€‚ å½“ç„¶å¦‚æœä½ å¸Œæœ›è·å¾—æ›´å¼ºå¤§çš„åŠ å¯†å¯ä»¥è‡ªå·±ç¼–å†™åŠ å¯†è§£å¯†ç­–ç•¥ã€‚ é™„ä¸ŠPythonä»£ç ï¼šgithubåœ°å€åŠ å¯†12345678910111213141516171819202122232425262728293031323334353637#coding:utf-8import clickimport random@click.command()@click.option(&apos;--background&apos;, prompt=True, help=&apos;è¾“å…¥ç”¨äºéšè—çš„èƒŒæ™¯å›¾ç‰‡æ–‡ä»¶.&apos;)@click.option(&apos;--encryptfile&apos;, prompt=True, help=&apos;è¾“å…¥éœ€è¦åŠ å¯†çš„æ–‡ä»¶.&apos;)def encryptfile(background, encryptfile): seed = random.randint(1024, 2048) seeds = [] for i in range(seed): seeds.append(random.randint(1, 128)) confusion = bytes(seeds) with open(background, &apos;rb&apos;) as fr_bg: bg_body = fr_bg.read() with open(encryptfile, &apos;rb&apos;) as fr_enc: enc_body = fr_enc.read() confusion_bytes_index = random.randint(1, len(enc_body)//2) objectfile = &quot;encry_%d_%d_%d_&quot;%(len(bg_body), len(confusion), confusion_bytes_index) + background data = bg_body + confusion + enc_body[confusion_bytes_index:] + confusion + enc_body[:confusion_bytes_index] print(len(bg_body)+len(confusion)) print(len(enc_body[confusion_bytes_index:])) print(len(enc_body[:confusion_bytes_index])) print(len(bg_body)+2*len(confusion)+len(enc_body[confusion_bytes_index:])) print(len(data)) with open(objectfile, &quot;wb&quot;) as fw_obf: fw_obf.write(data)if __name__ == &quot;__main__&quot;: encryptfile() è§£å¯†ï¼š123456789101112131415161718192021222324252627#coding:utf-8import click@click.command()@click.option(&apos;--inputfile&apos;, prompt=True, help=&apos;è¾“å…¥æ–‡ä»¶ååŠè·¯å¾„.&apos;)@click.option(&apos;--outputfile&apos;, prompt=True, help=&apos;è¾“å‡ºæ–‡ä»¶ååŠè·¯å¾„.&apos;)def decryptFile(inputfile, outputfile): decryptfile = outputfile encryptfile = inputfile encrypt = encryptfile.split(&quot;_&quot;) bg_length, confuse_length, confusion_bytes_index = int(encrypt[1]), int(encrypt[2]), int(encrypt[3]) headerindex = bg_length + confuse_length with open(decryptfile, &quot;wb&quot;) as fw: with open(encryptfile, &quot;rb&quot;) as fr: data = fr.read() frist_data_num = len(data)-(headerindex + confusion_bytes_index + confuse_length) frist_data = data[-confusion_bytes_index:] second_data = data[headerindex:headerindex+frist_data_num] print(headerindex + confusion_bytes_index + confuse_length) print(len(frist_data),len(second_data)) fw.write(frist_data+second_data)if __name__ == &quot;__main__&quot;: decryptFile()]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ä¿¡æ¯å®‰å…¨</category>
      </categories>
      <tags>
        <tag>ä¿¡æ¯å®‰å…¨</tag>
        <tag>åŠ å¯†&amp;è§£å¯†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitlab CI/CD (ä¸Š)]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2Fgitlab-CI-CD%2F</url>
    <content type="text"><![CDATA[githookæœ¬åœ°Hookæœ¬åœ° Hook åªå½±å“å®ƒä»¬æ‰€åœ¨çš„ä»“åº“ã€‚ä»¥ä¸‹æ˜¯æœ€å¸¸ç”¨çš„ 6 ä¸ªæœ¬åœ° Hookï¼š pre-commit prepare-commit-msg commit-msg post-commit post-checkout pre-rebaseå‰å››ä¸ª Hook ä»‹å…¥åˆ°ç‰ˆæœ¬æäº¤çš„ç”Ÿå‘½å‘¨æœŸï¼Œåä¸¤ä¸ªå…è®¸æ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œåˆ†åˆ«ä¸º git checkout å’Œ git rebase çš„å®‰å…¨æ£€æŸ¥ã€‚æ‰€æœ‰ä¸å¸¦ pre- çš„ Hook ä»£è¡¨å³å°†å‘ç”Ÿçš„æŸä¸ªé˜¶æ®µï¼Œå¸¦ post- åªç”¨äºé€šçŸ¥ã€‚ pre-commitpre-commit è„šæœ¬åœ¨æ¯æ¬¡ä½ è¿è¡Œ git commit å‘½ä»¤æ—¶ï¼ŒGit å‘ä½ è¯¢é—®æäº¤ä¿¡æ¯æˆ–è€…ç”Ÿäº§æäº¤å¯¹è±¡æ—¶è¢«æ‰§è¡Œã€‚ä½ å¯ä»¥ç”¨è¿™ä¸ª Hook æ¥ä»·å·®å³å°†è¢«æäº¤çš„ä»£ç å¿«ç…§ã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥è¿è¡Œä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¿è¯è¿™ä¸ªæäº¤ä¸ä¼šç ´åç°æœ‰çš„åŠŸèƒ½ã€‚ prepare-commit-msgprepare-commit-msgè¿™ä¸ª Hook åœ¨ pre-commit Hook åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ç”Ÿæ•ˆæäº¤ä¿¡æ¯ä¹‹åè¢«è°ƒç”¨ã€‚prepare-commit-msg çš„å‚æ•°å¯ä»¥æ˜¯ä¸‹åˆ—ä¸‰ä¸ªï¼š åŒ…å«æäº¤ä¿¡æ¯çš„æ–‡ä»¶åã€‚ä½ å¯ä»¥åœ¨åŸåœ°æ›´æ”¹æäº¤ä¿¡æ¯ã€‚æäº¤ç±»å‹ã€‚å¯ä»¥æ˜¯ä¿¡æ¯ï¼ˆ-m æˆ– -F é€‰é¡¹ï¼‰ï¼Œæ¨¡æ¿ï¼ˆ-té€‰é¡¹ï¼‰ï¼Œmergeï¼ˆå¦‚æœæ˜¯ä¸ªåˆå¹¶æäº¤ï¼‰æˆ–squashï¼ˆå¦‚æœè¿™ä¸ªæäº¤æ’å…¥äº†å…¶ä»–æäº¤ï¼‰ã€‚ç›¸å…³æäº¤çš„SHA1å“ˆå¸Œå­—ä¸²ã€‚åªæœ‰å½“-cï¼Œ-Cï¼Œæˆ–â€“amendé€‰é¡¹å‡ºç°æ—¶æ‰éœ€è¦ã€‚ post-commitpost-commit Hook åœ¨ commit-msg Hook ä¹‹åç«‹å³è¢«è¿è¡Œã€‚å®ƒæ— æ³•æ”¹å˜ git commitçš„ç»“æœï¼Œä¸»è¦ç”¨äºé€šçŸ¥ã€‚è¿™é‡Œæˆ‘ä»¬è¯¦ç»†æ¥è®²è¿°ä¸€ä¸‹è¿™ä¸ª Hook ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹åè¦ç”¨åˆ°å®ƒã€‚ è¿™ä¸ªè„šæœ¬æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œè€Œä¸”é€€å‡ºçŠ¶æ€ä¸ä¼šå½±å“æäº¤ã€‚å¯¹äºå¤§å¤šæ•°çš„ post-commit è„šæœ¬æ¥è¯´ï¼Œä½ åªæ˜¯æƒ³è®¿é—®ä½ åˆšåˆšåˆ›å»ºçš„æäº¤ã€‚ä½ å¯ä»¥ç”¨ git rev-parse HEADæ¥è·å¾—æœ€è¿‘ä¸€æ¬¡æäº¤çš„ SHA1 å“ˆå¸Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä½ å¯ä»¥ç”¨ git log -l HEAD æ¥è·å¾—å®Œæ•´çš„ä¿¡æ¯ã€‚ post-checkoutpost-checkout Hook å’Œ post-commit Hook å¾ˆåƒï¼Œä½†å®ƒåœ¨ä½ ç”¨ git checkoutæŸ¥çœ‹å¼•ç”¨çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ gitlab runner docker è¿è¡Œ1234docker run -d --name gitlab-runner \ -v /srv/gitlab-runner/config:/home/gitlab-runner \ -v /var/run/docker.sock:/var/run/docker.sock \ gitlab/gitlab-runner gitlab-runneræ³¨å†Œè¾“å…¥:1gitlab-ci-multi-runner register è¿™é‡Œä¸»è¦æ˜¯éœ€è¦ä¸¤ä¸ªä¿¡æ¯è¿›è¡Œæ³¨å†Œï¼Œä¸€ä¸ªæ˜¯gitlabçš„urlï¼Œå’Œrunner tokenã€‚å¯ä»¥åœ¨gitlab CI/CD çš„Runners settingsä¸­Specific Runnersæ‰¾åˆ°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )https://172.17.0.2 (å› ä¸ºæˆ‘è¿™é‡Œgitlabæ˜¯æ”¾åœ¨dockderä¸‹é¢å› æ­¤éœ€è¦æ”¹æˆdockerå†…ç½‘åœ°å€)Please enter the gitlab-ci token for this runnerkpSL7ViitQLYbSs3zS1xPlease enter the gitlab-ci description for this runnermy-runnerINFO[0034] fcf5c619 Registering runner... succeededPlease enter the executor: shell, docker, docker-ssh, ssh?shell gitlab-runner è¿è¡Œæ£€æŸ¥runnerçš„çŠ¶æ€ï¼šgitlab-ci-multi-runner verify é‡å¯æ‰€æœ‰runnerï¼šgitlab-ci-multi-runner run é‡å¯å•ä¸ªrunnerï¼šgitlab-ci-multi-runner run-single --url https://172.17.0.2 --token runnerToken --executor shell gitlab-runnerè¿è¡ŒæˆåŠŸç•Œé¢ éœ€è¦åœ¨gitlab-runnerç¯å¢ƒä¸‹æŒ‰ç…§è¿è¡Œæ‰€éœ€è¦ git ä¿®æ”¹æ³¨é‡Šå¹¶å¼ºåˆ¶æäº¤æ–°è®°å½•ä»…ä¿®æ”¹æ³¨é‡Š1git commit --amend git å¼ºåˆ¶æäº¤è¿œç¨‹åˆ†æ”¯1git push --force &lt;è¿œç¨‹åœ°å€&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>gitlab</tag>
        <tag>æŒç»­é›†æˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…¬å¸å†…éƒ¨åŒºå—é“¾æŠ€æœ¯å…¥é—¨åŸ¹è®­]]></title>
    <url>%2F2018%2F%E6%9E%B6%E6%9E%84%2F%E5%85%AC%E5%8F%B8%E5%86%85%E9%83%A8%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8%E5%9F%B9%E8%AE%AD%2F</url>
    <content type="text"><![CDATA[æ¼”ç¤ºç¨¿ï¼ˆå›¾æ–‡ç‰ˆï¼‰ åŒºå—é“¾å…¥é—¨ç®€ä»‹ï¼ˆæ–‡å­—ç‰ˆï¼‰åŒºå—é“¾èƒŒæ™¯ä¼ ç»Ÿçš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿé—®é¢˜ï¼š ï¼ˆ1ï¼‰ç”±å•ä¸€æœºæ„ç®¡ç†å’Œç»´æŠ¤,åœ¨å¤šæ–¹å‚ä¸è€…åä½œçš„åœºæ™¯ä¸­,å› æ— æ³•å®Œå…¨ä¿¡ä»»æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ ï¼ˆ2ï¼‰ æ¯æ–¹éƒ½éœ€è¦å•ç‹¬æ„å»ºä¸€å¥—æ‰¿è½½è‡ªå·±ä¸šåŠ¡æ•°æ®çš„æ•°æ®åº“,å¤šæ–¹æ•°æ®åº“é—´çš„æ•°æ®å·®å¼‚ä¼šå¯¼è‡´ç¹ççš„äººå·¥å¯¹è´¦å’Œäº‰è®®ã€‚ åŒºå—é“¾æ˜¯ä¸€ç§åˆ©ç”¨åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ã€ç‚¹å¯¹ç‚¹ä¼ è¾“ã€å…±è¯†æœºåˆ¶ã€åŠ å¯†ç®—æ³•ç­‰è®¡ç®—æœºæŠ€æœ¯æ„å»ºçš„ä¸€ç§å»ä¸­å¿ƒåŒ–ã€ ä¸å¯ç¯¡æ”¹ã€ å¯è¿½æº¯ã€ å¤šæ–¹å…±åŒç»´æŠ¤çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆåŒºå—é“¾æœ¬è´¨ä¸Šçœ‹æˆä¸€ç§æ•°æ®åº“ï¼Œä»»ä½•éœ€è¦ä¿å­˜çš„ä¿¡æ¯ï¼Œéƒ½å¯ä»¥å†™å…¥åŒºå—é“¾ï¼Œä¹Ÿå¯ä»¥ä»é‡Œé¢è¯»å–ï¼‰ åŒºå—é“¾æœ€æ—©èµ·æºäºæ¯”ç‰¹å¸çš„è®¾è®¡ï¼Œæ˜¯æ¯”ç‰¹å¸çš„åº•å±‚æŠ€æœ¯å’ŒåŸºç¡€æ¶æ„ã€‚ 1ã€å»ä¸­å¿ƒåŒ–ï¼šç”±å¤§é‡èŠ‚ç‚¹å…±åŒç»„æˆçš„ä¸€ä¸ªç‚¹å¯¹ç‚¹ç½‘ç»œï¼Œä¸å­˜åœ¨ä¸­å¿ƒåŒ–çš„ç¡¬ä»¶æˆ–ç®¡ç†æœºæ„ã€‚åœ¨ç½‘ç»œä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¹‰åŠ¡å’Œæƒåˆ©éƒ½æ˜¯å‡ç­‰çš„ã€‚ç³»ç»Ÿä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½å‚ä¸æ•°æ®çš„è®°å½•å’ŒéªŒè¯ï¼Œå°†è®¡ç®—ç»“æœé€šè¿‡åˆ†å¸ƒå¼ä¼ æ’­å‘é€ç»™å„ä¸ªèŠ‚ç‚¹ã€‚åœ¨éƒ¨åˆ†èŠ‚ç‚¹é­å—æŸåçš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªç³»ç»Ÿçš„è¿ä½œå¹¶ä¸ä¼šæ”¶åˆ°å½±å“ï¼Œç›¸å½“äºæ¯ä¸ªå‚ä¸çš„èŠ‚ç‚¹éƒ½æ˜¯â€œè‡ªä¸­å¿ƒâ€ã€‚ 2ã€åŸºäºå…±è¯†å»ºç«‹ä¿¡ä»»ã€‚åŒºå—é“¾ç†è®ºæœ€å¤§çš„é¢ è¦†æ€§åœ¨äºæ–°çš„ä¿¡ç”¨å½¢æˆæœºåˆ¶ã€‚åœ¨ä¼ ç»Ÿçš„äº’è”ç½‘æ¨¡å¼ä¸­ï¼Œé™Œç”Ÿäººä¹‹é—´æ˜¯é€šè¿‡å¯ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹æœºæ„ï¼ˆå¦‚é“¶è¡Œï¼Œå›½å®¶ï¼‰æ¥å»ºç«‹ä¿¡ç”¨å’Œè¿›è¡Œäº¤æ˜“ã€‚ è€ŒåŒºå—é“¾æŠ€æœ¯ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†ä¸­å¿ƒåŒ–çš„ä¿¡ç”¨åˆ›å»ºæ–¹å¼ï¼Œå®ƒè¿ç”¨äº†ä¸€å¥—åŸºäºå…±è¯†çš„æ•°å­¦ç®—æ³•ï¼Œåœ¨æœºå™¨ä¹‹é—´å»ºç«‹â€œä¿¡ä»»â€ç½‘ç»œï¼Œä»è€Œé€šè¿‡æŠ€æœ¯èƒŒä¹¦è€Œéä¸­å¿ƒåŒ–ä¿¡ç”¨ã€‚é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œå‚ä¸æ–¹ä¸å¿…çŸ¥é“äº¤æ˜“çš„å¯¹è±¡æ˜¯è°ï¼Œæ›´ä¸éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹æœºæ„æ¥è¿›è¡Œäº¤æ˜“èƒŒä¹¦æˆ–è€…æ‹…ä¿éªŒè¯ï¼Œè€Œåªéœ€è¦ä¿¡ä»»å…±åŒçš„ç®—æ³•å°±å¯ä»¥å»ºç«‹äº’ä¿¡ï¼Œé€šè¿‡ç®—æ³•ä¸ºå‚ä¸è€…åˆ›é€ ä¿¡ç”¨ã€äº§ç”Ÿä¿¡ä»»å’Œè¾¾æˆå…±è¯†ã€‚ 3ã€ä¿¡æ¯ä¸å¯ç¯¡æ”¹ã€‚åŒºå—é“¾æ˜¯åŸºäºæ—¶é—´æˆ³å½¢æˆçš„ä¸å¯ç¯¡æ”¹ã€ä¸å¯ä¼ªé€ çš„æ•°æ®åº“ã€‚åŒºå—ï¼ˆå®Œæ•´å†å²ï¼‰ ä¸é“¾ï¼ˆå®Œæ•´éªŒè¯ï¼‰ç›¸åŠ ä¾¿å½¢æˆäº†æ—¶é—´æˆ³ã€‚æ—¶é—´æˆ³å­˜å‚¨åœ¨ç½‘ç»œä¸­æ‰€æ‰§è¡Œçš„æ‰€æœ‰äº¤æ˜“å†å²ï¼Œå¯ä¸ºæ¯ä¸€ç¬”æ•°æ®æä¾›æ£€ç´¢å’ŒæŸ¥æ‰¾åŠŸèƒ½ï¼Œå¹¶å¯å€ŸåŠ©åŒºå—é“¾ç»“æ„è¿½æœ¬æº¯æºï¼Œé€ç¬”éªŒè¯ã€‚æ¯ä¸ªå‚ä¸è€…åœ¨è®°è´¦å¹¶ç”ŸæˆåŒºå—æ—¶éƒ½åŠ ä¸Šæ—¶é—´æˆ³ï¼Œå¹¶å¹¿æ’­åˆ°å…¨ç½‘èŠ‚ç‚¹ï¼Œè®©æ¯ä¸ªå‚ä¸èŠ‚ç‚¹éƒ½èƒ½è·å¾—ä¸€ä»½å®Œæ•´æ•°æ®åº“çš„æ‹·è´ï¼Œä¸€æ—¦ä¿¡æ¯ç»è¿‡éªŒè¯æ·»åŠ åˆ°åŒºå—é“¾ä¸Šï¼Œå°±ä¼šæ°¸ä¹…çš„å­˜å‚¨èµ·æ¥ã€‚æ ¹æ®â€œå°‘æ•°æœä»å¤šæ•°â€åŸåˆ™ï¼Œä»æ¦‚ç‡ä¸Šè®²ï¼Œè¦ç¯¡æ”¹å†å²ä¿¡æ¯ï¼Œå¿…é¡»åŒæ—¶æ§åˆ¶æ•´ä¸ªç³»ç»Ÿä¸­è¶…è¿‡50%çš„èŠ‚ç‚¹ã€‚å› æ­¤åŒºå—é“¾æŠ€æœ¯è®¤ä¸ºå…¶ç³»ç»Ÿçš„æ•°æ®å¯é æ€§å¾ˆé«˜ï¼Œä¸”å‚ä¸ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹è¶Šå¤šå’Œè®¡ç®—èƒ½åŠ›è¶Šå¼ºï¼Œè¯¥ç³»ç»Ÿä¸­çš„æ•°æ®å®‰å…¨æ€§è¶Šé«˜ã€‚ åŸºæœ¬æ¦‚å¿µåŒºå—é“¾ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ç”±åŒºå—(Block)å’Œé“¾(Chain)ç»„æˆçš„ã€‚ åŒºå—ï¼ˆBlockï¼‰ï¼šåŒºå—å¾ˆåƒæ•°æ®åº“çš„è®°å½•ï¼Œæ¯æ¬¡å†™å…¥æ•°æ®ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªåŒºå—ã€‚ é“¾ï¼ˆChainï¼‰ï¼šæ¯ä¸ªåŒºå—éƒ½è¿ç€ä¸Šä¸€ä¸ªåŒºå—ï¼Œå½¢æˆé“¾æ¡å¼çš„æ•°æ®ç»“æ„è®°å½•æ‰€æœ‰çš„ä¿¡æ¯ã€‚ åŒºå—é“¾æŠ€æœ¯æ˜¯ä¸€ç§è§£å†³ä¿¡ä»»é—®é¢˜ã€é™ä½ä¿¡ä»»æˆæœ¬çš„ä¿¡æ¯æŠ€æœ¯æ–¹æ¡ˆã€‚é€šè¿‡åŒºå—é“¾æŠ€æœ¯ï¼Œäº’è”ç½‘ä¸Šçš„å„ä¸ªç”¨æˆ·æˆä¸ºä¸€ä¸ªèŠ‚ç‚¹å¹¶ç›¸äº’è¿æ¥èµ·æ¥ï¼Œæ‰€æœ‰åœ¨æ­¤åŒºå—é“¾æ¶æ„ä¸Šå‘å¸ƒçš„å†…å®¹éƒ½ä¼šåœ¨åŠ å¯†åè¢«æ¯ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶å¹¶å¤‡ä»½ï¼Œæ¢è€Œè¨€ä¹‹æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æŸ¥çœ‹å†å²ä¸Šäº§ç”Ÿçš„ä»»ä½•æ•°æ®ã€‚å„èŠ‚ç‚¹å°†åŠ å¯†æ•°æ®ä¸æ–­æ‰“åŒ…åˆ°åŒºå—ä¸­ï¼Œå†å°†åŒºå—å‘å¸ƒåˆ°ç½‘ç»œä¸­ï¼Œå¹¶æŒ‰ç…§æ—¶é—´é¡ºåºè¿›è¡Œè¿æ¥ï¼Œç”Ÿæˆæ°¸ä¹…ã€ä¸å¯é€†å‘çš„æ•°æ®é“¾ï¼Œè¿™ä¾¿å½¢æˆäº†ä¸€ä¸ªå…¬å¼€é€æ˜çš„å—å…¨éƒ¨ç”¨æˆ·çš„ç›‘ç£çš„åŒºå—é“¾ã€‚ åŒºå—é“¾çš„è¿ä½œæµç¨‹è¿è¡ŒåŒºå—é“¾çš„åŸºæœ¬æµç¨‹ï¼š æ–°çš„äº¤æ˜“æ“ä½œï¼ˆtransactionï¼‰å‘å…¨ç½‘è¿›è¡Œå¹¿æ’­ï¼› é€šè¿‡å…±è¯†ç®—æ³•ï¼ˆConsensus Algorithmï¼‰é€‰æ‹©leaderå°†äº¤æ˜“æ“ä½œå†™å…¥ä¸€ä¸ªåŒºå—(block)ï¼› å†™å…¥åŒºå—è¢«å…¶ä»–èŠ‚ç‚¹è®¤å¯å’Œæ¥å—ã€‚ åŒºå—é“¾ç‰¹ç‚¹åŒºå—é“¾ç‰¹ç‚¹ï¼šï¼ˆ1ï¼‰å»ä¸­å¿ƒåŒ–ã€‚ï¼ˆ2ï¼‰é«˜å¯ä¿¡ã€‚ï¼ˆ3ï¼‰ä¸å¯ç¯¡æ”¹ã€‚ï¼ˆ4ï¼‰å¯è¿½æº¯ã€‚ï¼ˆ5ï¼‰é«˜å¯ç”¨ã€‚ å…±è¯†ç®—æ³•Paxosç®—æ³•é˜¶æ®µä¸€ï¼šå¯»å€¼é˜¶æ®µ ï¼ˆaï¼‰Proposeré€‰æ‹©ä¸€ä¸ªææ¡ˆç¼–å·Nï¼Œç„¶åå‘åŠæ•°ä»¥ä¸Šçš„Acceptorå‘é€ç¼–å·ä¸ºNçš„Prepareè¯·æ±‚ã€‚ (b) å¦‚æœä¸€ä¸ªAcceptoræ”¶åˆ°ä¸€ä¸ªç¼–å·ä¸ºNçš„Prepareè¯·æ±‚ï¼Œä¸”Nå¤§äºè¯¥Acceptorå·²ç»å“åº”è¿‡çš„æ‰€æœ‰Prepareè¯·æ±‚çš„ç¼–å·ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå°†å®ƒå·²ç»æ¥å—è¿‡çš„ç¼–å·æœ€å¤§çš„ææ¡ˆï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä½œä¸ºå“åº”åé¦ˆç»™Proposerï¼ŒåŒæ—¶è¯¥Acceptoræ‰¿è¯ºä¸å†æ¥å—ä»»ä½•ç¼–å·å°äºNçš„ææ¡ˆã€‚ é˜¶æ®µäºŒï¼šææ¡ˆé˜¶æ®µ (a) å¦‚æœProposeræ”¶åˆ°åŠæ•°ä»¥ä¸ŠAcceptorå¯¹å…¶å‘å‡ºçš„ç¼–å·ä¸ºNçš„Prepareè¯·æ±‚çš„å“åº”ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå‘é€ä¸€ä¸ªé’ˆå¯¹[N,V]ææ¡ˆçš„Acceptè¯·æ±‚ç»™åŠæ•°ä»¥ä¸Šçš„Acceptorã€‚æ³¨æ„ï¼šVå°±æ˜¯æ”¶åˆ°çš„å“åº”ä¸­ç¼–å·æœ€å¤§çš„ææ¡ˆçš„valueï¼Œå¦‚æœå“åº”ä¸­ä¸åŒ…å«ä»»ä½•ææ¡ˆï¼Œé‚£ä¹ˆVå°±ç”±Proposerè‡ªå·±å†³å®šã€‚ (b) å¦‚æœAcceptoræ”¶åˆ°ä¸€ä¸ªé’ˆå¯¹ç¼–å·ä¸ºNçš„ææ¡ˆçš„Acceptè¯·æ±‚ï¼Œåªè¦è¯¥Acceptoræ²¡æœ‰å¯¹ç¼–å·å¤§äºNçš„Prepareè¯·æ±‚åšå‡ºè¿‡å“åº”ï¼Œå®ƒå°±æ¥å—è¯¥ææ¡ˆã€‚ Raftç®—æ³•Raftç®—æ³•æ˜¯ä¸€ç§å’ŒPaxosç®—æ³•ä¸€æ ·çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ã€‚ï¼ˆRaftçš„ä¼˜åŠ¿å°±æ˜¯å®¹æ˜“ç†è§£å’Œå®ç°ï¼Œå¯ä»¥å°‘å‡ºé”™è¯¯~~ï¼‰ Raftçš„å·¥ä½œæ¨¡å¼æ˜¯ä¸€ä¸ªLeaderå’Œå¤šä¸ªFolloweræ¨¡å¼ï¼Œå…¶å®‰æ’äº†ä¸‰ç§è§’è‰²ï¼š (1)Leader: å¤„ç†æ‰€æœ‰å®¢æˆ·ç«¯äº¤äº’ï¼Œæ—¥å¿—å¤åˆ¶ç­‰ï¼Œä¸€èˆ¬ä¸€æ¬¡åªæœ‰ä¸€ä¸ªLeader. (2)Follower: ç±»ä¼¼é€‰æ°‘ï¼Œå®Œå…¨è¢«åŠ¨ (3)Candidateï¼šå€™é€‰äººã€‚ Raftç®—æ³•åˆ†ä¸ºä¸¤å„é˜¶æ®µï¼š ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯é€‰ä¸¾é¢†å¯¼äººï¼› ç¬¬äºŒé˜¶æ®µæ˜¯ç”±é¢†å¯¼äººå¯¹å…¶ä»–èŠ‚ç‚¹å¯¹ä¸€è‡´æ€§çš„æ“ä½œã€‚ é€‰ä¸¾é˜¶æ®µï¼š ï¼ˆ1ï¼‰åˆå§‹çŠ¶æ€æ—¶æ‰€æœ‰serveréƒ½å¤„äºFollowerçŠ¶æ€ï¼Œå¹¶ä¸”éšæœºç¡çœ ä¸€æ®µæ—¶é—´ï¼Œæœ€å…ˆé†’æ¥çš„server Aè¿›å…¥CandidateçŠ¶æ€ ï¼ˆ2ï¼‰CandidateçŠ¶æ€çš„server Aæœ‰æƒåˆ©å‘èµ·æŠ•ç¥¨ï¼Œå‘å…¶å®ƒæ‰€æœ‰serverå‘å‡ºè¯·æ±‚ï¼Œè¯·æ±‚å…¶å®ƒserverç»™å®ƒæŠ•ç¥¨æˆä¸ºLeaderã€‚ ï¼ˆ3ï¼‰å½“å…¶å®ƒserveræ”¶åˆ°è¯·æ±‚åï¼Œå°†è‡ªå·±ä»…æœ‰çš„ä¸€ç¥¨æŠ•ç»™server Aï¼ŒåŒæ—¶ç»§ç»­ä¿æŒFollowerçŠ¶æ€å¹¶é‡ç½®é€‰ä¸¾è®¡æ—¶å™¨ã€‚ ï¼ˆ4ï¼‰å½“server Aæ”¶åˆ°å¤§å¤šæ•°ï¼ˆè¶…è¿‡ä¸€åŠä»¥ä¸Šï¼‰serverçš„æŠ•ç¥¨åï¼Œå°±è¿›å…¥LeaderçŠ¶æ€ï¼Œæˆä¸ºç³»ç»Ÿä¸­ä»…æœ‰çš„Leaderã€‚ ä¼ ç»Ÿå…±è¯†ç®—æ³•ç¼ºé™·ä¼ ç»Ÿåˆ†å¸ƒå¼æ•°æ®åº“ä¸»è¦ä½¿ç”¨ Paxos å’Œ Raft ç®—æ³•è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜,è™½ç„¶å®ƒå¯ä»¥è§£å†³æŠ¥æ–‡å¯èƒ½å‘ç”Ÿä¸¢å¤±å’Œå»¶æ—¶ç­‰é—®é¢˜ï¼Œä½†é¢å¯¹æ‹œå åº­é—®é¢˜çš„æ—¶å€™ï¼Œå†³ç­–å°±å¯èƒ½æ··ä¹±ï¼Œå³å…¶å‡å®šç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¿ è¯šã€ä¸ä½œæ¶çš„ã€‚ ä½†è¿™å¯¹äºå¤„äºå…¬æœ‰é“¾ä¸Šçš„ï¼Œæœ‰ç€å¤§é‡ä¸å¯ä¿¡ä»»èŠ‚ç‚¹çš„åˆ†å¸ƒå¼æ•°æ®åº“æ¥è¯´æ˜¯ä¸€ç§ç¾éš¾ï¼Œä¼šé‡åˆ°å„ç±»é—®é¢˜ï¼Œæ¯”å¦‚æ‹œå åº­é—®é¢˜ã€å¥³å·«æ”»å‡»é—®é¢˜ç­‰ã€‚ åŒºå—é“¾å…±è¯†ç®—æ³•å…¬æœ‰é“¾çš„åŒºå—é“¾å…±è¯†ç®—æ³•ä¸»è¦åŒ…æ‹¬ï¼šå·¥ä½œé‡è¯æ˜æœºåˆ¶(Proof of Work, POW)æƒç›Šè¯æ˜æœºåˆ¶(Proof of Stake, POS)ã€‚è‚¡ä»½æˆæƒè¯æ˜æœºåˆ¶(Delegated Proof of Stake, DPOS) PoWå·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼ˆPoWï¼‰ï¼Œå…¶æœºåˆ¶æ˜¯é€šè¿‡å·¥ä½œé‡çš„å¤§å°æ¥å†³å®šLeaderï¼Œå³å·¥ä½œé‡è¯æ˜ï¼Œè¢«leaderæ‰“åŒ…çš„åŒºå—å¯ä»¥è·å¾—æ•´ä¸ªç½‘ç»œçš„è®¤å¯ã€‚å·¥ä½œé‡ä¸»è¦æŒ‡ç®—åŠ›ï¼Œå³è®¡ç®—è®¾å¤‡æ¯ç§’èƒ½è¿›è¡Œå“ˆå¸Œè¿ç®—çš„æ¬¡æ•°ã€‚ä¸€å°è®¾å¤‡çš„ç®—åŠ›åœ¨å…¨ç½‘ç®—åŠ›ä¸­æ‰€å çš„æ¯”é‡å³ç”±è¿™å°è®¾å¤‡åˆ›å»ºæ–°åŒºå—(æŒ–çŸ¿)çš„æ¦‚ç‡ã€‚PoW æœºåˆ¶å¯æœ‰æ•ˆåº”å¯¹å¥³å·«æ”»å‡»,å…¶ä¾é åˆ†å¸ƒå¼èŠ‚ç‚¹é—´çš„ç®—åŠ›ç«äº‰æ¥ä¿è¯å…¨ç½‘åŒºå—é“¾æ•°æ®çš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ã€‚ PoW æœºåˆ¶å°†ç»æµæ¿€åŠ±ä¸å…±è¯†è¿‡ç¨‹ç›¸èåˆ,ä¿ƒä½¿æ›´å¤šèŠ‚ç‚¹å‚ä¸æŒ–çŸ¿å¹¶ä¿æŒè¯šä¿¡,ä»è€Œä¸»åŠ¨å¢å¼ºäº†ç½‘ç»œçš„å¯é æ€§ä¸å®‰å…¨æ€§ã€‚ æµç¨‹ï¼š 1ã€æ¯ç¬”æ–°äº¤æ˜“è¢«å¹¿æ’­åˆ°åŒºå—é“¾ç½‘ç»œçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ 2ã€ä¸ºäº†æ„å»ºæ–°çš„åŒºå—,æ¯ä¸ªèŠ‚ç‚¹æ”¶é›†è‡ªå‰ä¸€åŒºå—ç”Ÿæˆä»¥æ¥æ¥æ”¶åˆ°çš„æ‰€æœ‰äº¤æ˜“,å¹¶æ ¹æ®è¿™äº›äº¤æ˜“è®¡ç®—å‡ºåŒºå—å¤´éƒ¨çš„ Merkle æ ¹ã€‚å°†åŒºå—å¤´éƒ¨çš„éšæœºæ•° Nonce ä» 0 å¼€å§‹é€’å¢åŠ  1,ç›´è‡³åŒºå—å¤´çš„ä¸¤æ¬¡SHA256 å“ˆå¸Œå€¼å°äºæˆ–ç­‰äºéš¾åº¦ç›®æ ‡çš„è®¾å®šå€¼ä¸ºæ­¢ã€‚ 3ã€å…¨ç½‘èŠ‚ç‚¹åŒæ—¶å‚ä¸è®¡ç®—,è‹¥æŸèŠ‚ç‚¹å…ˆæ‰¾åˆ°äº†æ­£ç¡®çš„éšæœºæ•°,åˆ™è¯¥èŠ‚ç‚¹å°†è·å¾—æ–°åŒºå—çš„è®°è´¦æƒåŠå¥–åŠ±,å¹¶å°†è¯¥åŒºå—å‘å…¨ç½‘å¹¿æ’­ã€‚ 4ã€å…¶å®ƒèŠ‚ç‚¹æ¥æ”¶åˆ°æ–°åŒºå—å,éªŒè¯åŒºå—ä¸­çš„äº¤æ˜“å’Œéšæœºæ•° Nonce çš„æœ‰æ•ˆæ€§,å¦‚æœæ­£ç¡®,å°±å°†è¯¥åŒºå—åŠ å…¥æœ¬åœ°çš„åŒºå—é“¾,å¹¶åŸºäºè¯¥å—å¼€å§‹æ„å»ºä¸‹ä¸€åŒºå—ã€‚ åˆ†å‰é—®é¢˜åˆ†å‰é—®é¢˜ï¼šè‹¥å¤šä¸ªåŒºå—åŒæ—¶è¢«åˆ›å»ºå°±ä¼šå¼•èµ·åˆ†å‰é—®é¢˜ã€‚ è§£å†³æ–¹æ¡ˆï¼š ï¼ˆ1ï¼‰æ¯”ç‰¹å¸é‡‡ç”¨ç¡®å®šä¸»é“¾ï¼Œå¿½è§†åˆ†æ”¯çš„æ–¹æ³•ã€‚å½“å‘ç”Ÿåˆ†å‰æ—¶,æœ€é•¿çš„é“¾å³èŠ±è´¹äº†æœ€å¤šç®—åŠ›çš„é“¾è¢«è®¤ä¸ºæ˜¯ä¸»é“¾,å…¶å®ƒåˆ™è¢«è®¤ä¸ºæ˜¯åˆ†æ”¯,åˆ†æ”¯ä¸­çš„æ‰€æœ‰äº¤æ˜“ä¼šè¢«å¿½ç•¥ã€‚æ¯”ç‰¹å¸å°†åˆ†æ”¯ç»“ç‚¹ä¸Šçš„åŒºå—ç§°ä¸ºå­¤å—,å¹¶ä¼šå°†å…¶ä½œä¸ºåºŸå—è€Œä¸¢å¼ƒã€‚ä¸€èˆ¬åœ°ï¼Œæ¯”ç‰¹å¸å‡å®šåœ¨6ä¸ªåŒºå—ç”Ÿæˆä»¥åå¯ä»¥ç¡®å®šäº¤æ˜“ã€‚ ï¼ˆ2ï¼‰ä»¥å¤ªåŠé‡‡ç”¨GHOSTåè®®å¤„ç†ã€‚GHOST åè®®è®¤ä¸ºåˆ†æ”¯ä¸Šçš„æœ‰æ•ˆåŒºå—å¯¹ç¡®è®¤ä¸»é“¾ä¸Šçš„äº¤æ˜“ä¹Ÿæœ‰è´¡çŒ®,å› è€Œæ²¡æœ‰ä¸¢å¼ƒè¯¥åŒºå—,è€Œæ˜¯å°†è¯¥åŒºå—ä½œä¸ºå”å—å¹¶ç»™äºˆç›¸å½“ä¸»å— 87.5%çš„å¥–åŠ±,ç»™äºˆå”å—çš„ç›´æ¥å­å—ç›¸å½“ä¸»å— 12.5%çš„å¥–åŠ±,çŸ¿å·¥æ¯å¼•ç”¨ä¸€ä¸ªå”å—ç»™äºˆç›¸å½“ä¸»å— 3%çš„å¥–åŠ±ã€‚ ä¸ºäº†é€‚åº”ç¡¬ä»¶æŠ€æœ¯çš„å¿«é€Ÿå‘å±•åŠè®¡ç®—èƒ½åŠ›çš„ä¸æ–­æå‡,æ¯”ç‰¹å¸æ¯ 2016 å—å°±ä¼šè°ƒæ•´ä¸€æ¬¡éš¾åº¦ç›®æ ‡,ä»¥æ§åˆ¶åŒºå—çš„å¹³å‡ç”Ÿæˆæ—¶é—´ï¼ˆ10 åˆ†é’Ÿï¼‰ å§‹ç»ˆä¿æŒä¸å˜ã€‚ PoSè‚¡æƒè¯æ˜å’Œå·¥ä½œé‡è¯æ˜ä¸€æ ·ï¼Œæ˜¯ä¸€ç§ç”¨äºå…¬æœ‰é“¾çš„å…±è¯†ç®—æ³•ï¼Œå…¶æ ¹æ®çŸ¿å·¥åœ¨åŒºå—é“¾ä¸­æ‹¥æœ‰çš„è‚¡æƒï¼ˆæ•°å­—è´§å¸é‡ï¼‰ æ¥å†³å®šå…¶æŒ–çŸ¿çš„éš¾åº¦ã€‚ Casperå…±è¯†ç®—æ³•Casperå…±è¯†æ˜¯ä»¥å¤ªåŠåŸºäº PoS æœºåˆ¶æå‡ºã€‚Casper ä»¥æ™ºèƒ½åˆçº¦çš„æ–¹å¼å®ç°ï¼Œæ ¹æ®æŠµæŠ¼çš„ä»¥å¤ªå¸æ•°é‡å’Œæ—¶é—´,æˆæ¯”ä¾‹çš„åˆ†é…åŒºå—çš„è®°è´¦æƒå’Œå¥–åŠ±ã€‚ä¸ PoS æœºåˆ¶ä¸åŒ,Casper è¿˜å¼•å…¥äº†æƒ©ç½šæªæ–½,ä¸€æ—¦å‘ç°æŸä¸ªçŸ¿å·¥ä½œå¼Š,å…¶æŠµæŠ¼çš„æ‰€æœ‰ä»¥å¤ªå¸å°†å…¨è¢«ç½šæ²¡,å‚ä¸å…±è¯†å’Œå‡ºå—çš„æƒåˆ©ä¹Ÿä¼šè¢«å–æ¶ˆã€‚ åŸºäºCasper å…±è¯†çš„ä»¥å¤ªåŠä¸€ä¸ªåŒºå—çš„æŒ–çŸ¿æ—¶é—´ä¸º4ç§’ï¼Œè€Œæ¯”ç‰¹å¸åˆ™éœ€è¦10åˆ†é’Ÿã€‚ DPoSè‚¡ä»½æˆæƒè¯æ˜æœºåˆ¶ï¼ˆDPOSï¼‰é‡‡ç”¨â€œè‚¡ä»½æŠ•ç¥¨â€çš„æ–¹å¼å†³å®šè°æ¥ç”ŸæˆåŒºå—ã€‚å®ƒçš„åŸç†æ˜¯è®©æ¯ä¸€ä¸ªæŒæœ‰â€œè‚¡ä»½â€çš„äººè¿›è¡ŒæŠ•ç¥¨ï¼Œç”±æ­¤äº§ç”ŸNä¸ªè¶…çº§èŠ‚ç‚¹æˆ–è€…çŸ¿æ± ï¼Œè€Œè¿™Nä¸ªè¶…çº§èŠ‚ç‚¹å½¼æ­¤çš„æƒåˆ©æ˜¯å®Œå…¨ç›¸ç­‰çš„ã€‚ä»æŸç§è§’åº¦æ¥çœ‹ï¼ŒDPOSæœ‰ç‚¹åƒæ˜¯è®®ä¼šåˆ¶åº¦æˆ–äººæ°‘ä»£è¡¨å¤§ä¼šåˆ¶åº¦ã€‚å¦‚æœä»£è¡¨ä¸èƒ½å±¥è¡Œä»–ä»¬çš„èŒè´£ï¼ˆå½“è½®åˆ°ä»–ä»¬æ—¶ï¼Œæ²¡èƒ½ç”ŸæˆåŒºå—ï¼‰ï¼Œä»–ä»¬ä¼šè¢«é™¤åï¼Œç½‘ç»œä¼šé€‰å‡ºæ–°çš„è¶…çº§èŠ‚ç‚¹æ¥å–ä»£ä»–ä»¬ã€‚ EOSä½¿ç”¨DPOSå…±è¯†æœºåˆ¶ PBFTå®ç”¨æ‹œå åº­å®¹é”™æœºåˆ¶ï¼ˆPBFTï¼‰æ˜¯ä¸€ç§çŠ¶æ€æœºå‰¯æœ¬å¤åˆ¶ç®—æ³•ï¼ŒçŠ¶æ€æœºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸åŒèŠ‚ç‚¹è¿›è¡Œå‰¯æœ¬å¤åˆ¶ã€‚æ¯ä¸ªçŠ¶æ€æœºçš„å‰¯æœ¬éƒ½ä¿å­˜äº†æœåŠ¡çš„çŠ¶æ€ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†æœåŠ¡çš„æ“ä½œã€‚åœ¨ä¿è¯æ´»æ€§å’Œå®‰å…¨æ€§çš„å‰æä¸‹æä¾›äº†(n-1)/3çš„å®¹é”™æ€§ã€‚ PBFTç®—æ³•æµç¨‹ï¼š 1.å®¢æˆ·ç«¯å‘ä¸»èŠ‚ç‚¹å‘é€è¯·æ±‚è°ƒç”¨æœåŠ¡æ“ä½œ 2.ä¸»èŠ‚ç‚¹é€šè¿‡å¹¿æ’­å°†è¯·æ±‚å‘é€ç»™å…¶ä»–å‰¯æœ¬ 3.æ‰€æœ‰å‰¯æœ¬éƒ½æ‰§è¡Œè¯·æ±‚å¹¶å°†ç»“æœå‘å›å®¢æˆ·ç«¯ 4.å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…f+1ä¸ªä¸åŒå‰¯æœ¬èŠ‚ç‚¹å‘å›ç›¸åŒçš„ç»“æœï¼Œä½œä¸ºæ•´ä¸ªæ“ä½œçš„æœ€ç»ˆç»“æœã€‚ å…±è¯†ç®—æ³•å°ç»“ï¼ˆ1ï¼‰å…¬æœ‰é“¾çš„å…±è¯†ç®—æ³•ï¼Œå‡éœ€è¦â€œä»£ä»·â€ä½œä¸ºæ”¯æ’‘ï¼Œæ¯”å¦‚å·¥ä½œé‡ã€è‚¡æƒã€‚ ï¼ˆ2ï¼‰å¯¹äºç§æœ‰é“¾æ¥è¯´ï¼Œå…¶å’Œä¼ ç»Ÿçš„åˆ†å¸ƒå¼æ•°æ®ä¸€æ ·ï¼Œé‡‡ç”¨paxosç®—æ³•å’ŒRaft ç®—æ³•å³å¯ã€‚ ï¼ˆ3ï¼‰â€œå› åœ°åˆ¶å®œâ€æœ€é‡è¦ï¼Œæ ¹æ®ä¸åŒçš„åœºæ™¯é‡‡ç”¨ä¸åŒçš„å…±è¯†ç®—æ³•è§£å†³é—®é¢˜ã€‚ æ™ºèƒ½åˆçº¦æ™ºèƒ½åˆçº¦æ˜¯ç”¨ç¨‹åºè¯­è¨€ç¼–å†™çš„å•†ä¸šåˆçº¦,åœ¨é¢„å®šæ¡ä»¶æ»¡è¶³æ—¶,èƒ½å¤Ÿè‡ªåŠ¨å¼ºåˆ¶çš„æ‰§è¡ŒåˆåŒæ¡æ¬¾,å®ç°â€œä»£ç å³æ³•å¾‹â€ çš„ç›®æ ‡ã€‚ ï¼ˆ1ï¼‰ä¾ç…§å•†ä¸šé€»è¾‘ç¼–å†™å®Œæ™ºèƒ½åˆçº¦ä»£ç å,éœ€è¦å°†å…¶å‘å¸ƒåˆ°åŒºå—é“¾ç½‘ç»œèŠ‚ç‚¹ä¸Šã€‚ï¼ˆ2ï¼‰è°ƒç”¨æ¶‰åŠåˆ°ä¿®æ”¹æ“ä½œ,éœ€è¦å…ˆåœ¨å…¨ç½‘è¾¾æˆå…±è¯†,ä¹‹åä¿®æ”¹æ“ä½œä¼šè¢«è®°å½•åœ¨åŒºå—é“¾ï¼Œä¿®æ”¹ç»“æœä¼šè¢«å­˜åœ¨çŠ¶æ€æ•°æ®åº“ã€‚è°ƒç”¨æŸ¥è¯¢æ“ä½œï¼Œåˆ™æ— éœ€å…±è¯†,ä¹Ÿä¸éœ€è¢«è®°å½•åœ¨åŒºå—é“¾ä¸Šã€‚ï¼ˆ3ï¼‰æ™ºèƒ½åˆçº¦æ”¯æŒåˆçº¦å†…éƒ¨äº‹ä»¶çš„æ³¨å†Œä¸é€šçŸ¥æœºåˆ¶ï¼Œå¤–éƒ¨åº”ç”¨ä¸æ™ºèƒ½åˆçº¦é—´çš„å…³ç³»éå¸¸ç±»ä¼¼äºä¼ ç»Ÿæ•°æ®åº“åº”ç”¨ä¸å­˜å‚¨è¿‡ç¨‹é—´çš„å…³ç³»,å­˜å‚¨è¿‡ç¨‹è¿è¡Œäºæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹ä¸­,è®¿é—®å…³ç³»æ•°æ®åº“æ•°æ®,è€Œæ™ºèƒ½åˆçº¦è¿è¡ŒäºåŒºå—é“¾ç³»ç»Ÿä¹‹ä¸­,è®¿é—®åŒºå—å’ŒçŠ¶æ€æ•°æ®ã€‚ æ™ºèƒ½åˆçº¦æ˜¯è¿è¡Œåœ¨åŒºå—é“¾ä¸Šçš„ä¸€æ®µè®¡ç®—æœºç¨‹åº,å…¶æ‰©å±•äº†åŒºå—é“¾çš„åŠŸèƒ½,ä¸°å¯Œäº†åŒºå—é“¾çš„ä¸Šå±‚åº”ç”¨ã€‚ä¾ç…§å•†ä¸šé€»è¾‘ç¼–å†™å®Œæ™ºèƒ½åˆçº¦ä»£ç å,éœ€è¦å°†å…¶å‘å¸ƒåˆ°åŒºå—é“¾ç½‘ç»œèŠ‚ç‚¹ä¸Šã€‚åœ¨ä»¥å¤ªåŠä¸­,éƒ¨ç½²åçš„åˆçº¦å­˜æ”¾åœ¨åŒºå—é“¾ä¸Š,æ¯æ¬¡è¢«è°ƒç”¨æ—¶æ‰è¢«ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰åŠ è½½è¿è¡Œï¼›åœ¨ Hyperledger Fabric ä¸­,éƒ¨ç½²åçš„åˆçº¦è¢«æ‰“åŒ…æˆ Docker é•œåƒ,æ¯ä¸ªèŠ‚ç‚¹åŸºäºè¯¥é•œåƒå¯åŠ¨ä¸€ä¸ªæ–°çš„ Docker å®¹å™¨å¹¶æ‰§è¡Œåˆçº¦ä¸­çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œç„¶åç­‰å¾…è¢«è°ƒç”¨ã€‚å¤–éƒ¨åº”ç”¨é€šè¿‡è°ƒç”¨æ™ºèƒ½åˆçº¦æ¥å®ç°å„ç§äº¤æ˜“,å¦‚æœè°ƒç”¨æ¶‰åŠåˆ°ä¿®æ”¹æ“ä½œ,éœ€è¦å…ˆåœ¨å…¨ç½‘è¾¾æˆå…±è¯†,ä¹‹åä¿®æ”¹æ“ä½œä¼šè¢«è®°å½•åœ¨åŒºå—é“¾ï¼Œä¿®æ”¹ç»“æœä¼šè¢«å­˜åœ¨çŠ¶æ€æ•°æ®åº“ï¼ˆä¾‹å¦‚,è½¬è´¦äº¤æ˜“çš„è½¬è´¦é‡‘é¢ä¼šè¢«è®°å½•åˆ°åŒºå—é“¾,è´¦æˆ·ä½™é¢çš„å¢å‡ä¼šè¢«åº”ç”¨åˆ°çŠ¶æ€æ•°æ®åº“ï¼‰ã€‚å¦‚æœè°ƒç”¨ä»…åŒ…å«æŸ¥è¯¢æ“ä½œï¼Œåˆ™æ— éœ€å…±è¯†,ä¹Ÿä¸éœ€è¢«è®°å½•åœ¨åŒºå—é“¾ä¸Šã€‚æ™ºèƒ½åˆçº¦è¿˜æ”¯æŒåˆçº¦å†…éƒ¨äº‹ä»¶çš„æ³¨å†Œä¸é€šçŸ¥æœºåˆ¶,ä»è€Œå¯ä¸»åŠ¨å‘å¤–éƒ¨åº”ç”¨é€šçŸ¥åˆçº¦å†…éƒ¨å‘ç”Ÿçš„å…³é”®äº‹ä»¶ã€‚æ™ºèƒ½åˆçº¦ç›®å‰åªèƒ½è®¿é—®é“¾å†…æ•°æ®,æ— æ³•ä¸»åŠ¨ç›‘å¬å¹¶å“åº” å¯æ‰©å±•æ€§åŒºå—é“¾æƒ³è¦çœŸæ­£åšåˆ°æ›´æ·±åº¦åŒ–çš„åº”ç”¨å’Œæ™®åŠï¼Œå…³é”®å°±æ˜¯è¦è§£å†³äº¤æ˜“çš„ååé‡å’Œäº¤æ˜“çš„é€Ÿåº¦é—®é¢˜ã€‚åŒºå—é“¾ï¼ˆå…¬æœ‰é“¾ï¼‰çš„ååé‡å’Œäº¤æ˜“é€Ÿåº¦ä¸€ç›´æ˜¯åŒºå—é“¾å‘å±•å’Œåº”ç”¨çš„å…³é”®æŠ€æœ¯ç“¶é¢ˆã€‚äº¤æ˜“æ•°é‡å¢åŠ å¯¼è‡´æ¯”ç‰¹å¸åŒºå—å·²ç»æ¥è¿‘1MBå®¹é‡çš„92%ï¼Œå¦‚æœä½ ç»å¸¸æµè§ˆåŒºå—é“¾ç›¸å…³çš„ä¿¡æ¯ï¼Œä½ ä¸€å®šçŸ¥é“æ¯”ç‰¹å¸äº¤æ˜“å¼€å§‹å˜å¾—æ‹¥å µï¼Œåœ¨ç¤¾åŒºä¸­å¯¹äºæ˜¯æ‰©å®¹è¿˜æ˜¯ä¾§é“¾çš„è®¨è®ºå–‹å–‹ä¸ä¼‘ã€‚ä½ è‚¯å®šä¹ŸçŸ¥é“å°±è¿ä»¥å¤ªåŠä¹Ÿå› ã€ŠCryptoKittiesã€‹è¿™æ¬¾å…»çŒ«æ¸¸æˆæ²¡èƒ½é€ƒæ‰ç½‘ç»œæ‹¥å µçš„å‘½è¿ã€‚ ç°æœ‰çš„ä¸»æµçš„å¯æ‰©å±•æ€§è§£å†³æ–¹æ¡ˆå¯åˆ†ä¸ºä¸‰ç§ä¾§é“¾æŠ€æœ¯(SideChains)ã€åˆ†ç‰‡æŠ€æœ¯(Sharing)å’Œæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ã€‚ è§£å†³æ–¹æ¡ˆä¾§é“¾ï¼ˆSide Chainsï¼‰æ˜¯é€šè¿‡åœ¨å¤–éƒ¨æ­å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“é€šé“å«æ¥åˆ°ä¸»é“¾ï¼Œä»è€Œè§£å†³æ‰©å®¹é—®é¢˜ã€‚ä¾§é“¾çš„ä¸€ä¸ªå…¸å‹å°±æ˜¯æ¯”ç‰¹å¸çš„é—ªç”µç½‘ç»œï¼ˆLighting Networkï¼‰ï¼šAå’ŒBä¸¤äººå¯ä»¥æŠŠæ¯”ç‰¹å¸æ”¾åˆ°ä¸€ä¸ªå¤šé‡ç­¾åé’±åŒ…ä¸­é”å®šï¼ˆé“¾ä¸‹ï¼‰ï¼Œç„¶åè¿›è¡Œäº¤æ˜“ç­¾åæ›´æ”¹åŒæ–¹å„è‡ªèƒ½å–å›çš„æ¯”ç‰¹å¸æ•°é‡ã€‚äº¤æ˜“å‚ä¸æ–¹å¯ä»¥éšæ—¶å…³é—­äº¤æ˜“é€šé“ï¼Œæœ€åä¸€ç¬”ç»è¿‡ç­¾åä¸”åŒ…å«æœ€æ–°ä½™é¢åŠ¨æ€çš„äº¤æ˜“æœ€ç»ˆå°†ä¼šè¢«å¹¿æ’­å¹¶å†™å…¥æ¯”ç‰¹å¸åŒºå—é“¾ã€‚ åˆ†ç‰‡å…¶å®æ˜¯ä¸€ç§ä¼ ç»Ÿæ•°æ®åº“çš„æŠ€æœ¯ï¼Œå®ƒå°†å¤§å‹æ•°æ®åº“åˆ†æˆæ›´å°ã€æ›´å¿«ã€æ›´å®¹æ˜“ç®¡ç†çš„éƒ¨åˆ†ã€‚åˆ†ç‰‡æŠ€æœ¯å¯ä»¥ç†è§£ä¸ºåœ¨å°†ä¸»é“¾åœ¨å†…éƒ¨è¿›è¡Œåˆ‡åˆ†ã€‚ç°åœ¨ç”¨äº†åˆ†ç‰‡æŠ€æœ¯çš„ä¸»è¦æœ‰ä»¥å¤ªåŠçš„sharingå’ŒEOSçš„Regionã€‚ ä»¥å¤ªåŠåˆ†ç‰‡æœºåˆ¶ä»‹ç»ä»¥å¤ªåŠä¾æ®è´¦æˆ·åœ°å€å°†å…¨ç½‘åˆ’åˆ†ä¸ºå¤šä¸ªç›¸å¯¹ç‹¬ç«‹çš„åˆ†ç‰‡ï¼Œ æ¯ä¸ªåˆ†ç‰‡å†…ç»´æŠ¤ä¸€æ¡ç‹¬ç«‹å­é“¾ï¼Œ ç”¨æˆ·å¯è‡ªè¡Œé€‰æ‹©åœ¨å“ªä¸ªåˆ†ç‰‡æ‰§è¡Œè‡ªå·±çš„äº¤æ˜“ï¼Œ æ¯ä¸ªèŠ‚ç‚¹æ ¹æ®è‡ªèº«çš„è®¡ç®—å’Œå­˜å‚¨èƒ½åŠ›é€‰æ‹©åŠ å…¥ä¸€åˆ°å¤šä¸ªåˆ†ç‰‡ï¼Œ å¹¶å¤„ç†å’Œå­˜å‚¨è¿™äº›åˆ†ç‰‡ä¸Šçš„äº¤æ˜“ã€‚ å…¨ç½‘èŠ‚ç‚¹åˆ†å·¥é…åˆä»¥è¦†ç›–åˆ°æ‰€æœ‰åˆ†ç‰‡ï¼Œ å¦‚æœéœ€è¦è®¿é—®æœ¬èŠ‚ç‚¹æ²¡æœ‰çš„äº¤æ˜“æ•°æ®ï¼Œ åˆ™åˆ©ç”¨è½»å®¢æˆ·ç«¯æŠ€æœ¯ä»å…¶å®ƒåˆ†ç‰‡èŠ‚ç‚¹è¯»å–ã€‚ å…¨ç½‘èŠ‚ç‚¹å¯å¹¶è¡Œçš„å¤„ç†å’Œå­˜å‚¨ä¸åŒçš„äº¤æ˜“æ•°æ®ï¼Œ ä½¿å¾—å…¨ç½‘äº¤æ˜“å¤„ç†èƒ½åŠ›ä¸å†å—é™äºå•ä¸€èŠ‚ç‚¹ï¼Œ å•ä¸€èŠ‚ç‚¹ä¹Ÿä¸éœ€å¤„ç†ã€ å­˜å‚¨å…¨éƒ¨æ•°æ®ã€‚ DAGæœ‰å‘æ— ç¯å›¾ï¼ˆDirected Acyclic Graphï¼ŒDAGï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸åŒäºä¼ ç»ŸåŒºå—é“¾çš„åº•å±‚æ•°æ®ç»“æ„Blockchainè®¾è®¡ï¼Œå…¶é€šè¿‡æ•°æ®å•å…ƒä¹‹é—´çš„å¼•ç”¨æ¥å®Œæˆäº¤æ˜“çš„ç¡®è®¤ã€‚ æµç¨‹ï¼š ï¼ˆ1ï¼‰å®¢æˆ·ç«¯è‡ªä¸»å¼‚æ­¥åœ°æäº¤ä¸€ä¸ªæ•°æ®å•å…ƒï¼Œå®¢æˆ·ç«¯é‡‡ç”¨ç‚¹å¯¹ç‚¹äº’ç›¸æ ¡éªŒ ï¼ˆ2ï¼‰é€šè¿‡æ•°æ®å•å…ƒä¹‹é—´çš„å¼•ç”¨æ¥å®Œæˆäº¤æ˜“çš„ç¡®è®¤ï¼Œåé¢å‘ç”Ÿçš„å•å…ƒå»å¼•ç”¨å‰é¢çš„å•å…ƒã€‚ ï¼ˆ3ï¼‰æ•°æ®å•å…ƒé—´é€šè¿‡å¼•ç”¨å…³ç³»é“¾æ¥èµ·æ¥ï¼Œä»è€Œå½¢æˆå…·æœ‰åŠåºå…³ç³»çš„DAG ï¼ˆ4ï¼‰é€šè¿‡ç‰¹å®šçš„æ–¹æ³•é€‰æ‹©â€œä¸»é“¾â€ ï¼Œ â€œä¸»é“¾â€ç¡®ç«‹äº†ï¼Œæ‰æŠŠâ€œåŒèŠ±â€æ£€æµ‹å‡ºæ¥å‰”é™¤ï¼Œåœ¨ç¡®å®šâ€œä¸»é“¾â€ä»¥å‰å®ƒæ˜¯ä¸€ä¸ªå¹¶è¡ŒéªŒè¯çš„æ“ä½œï¼Œè€Œä¸”æ˜¯å¹¶è¡Œå¾€æ•°æ®ç»“æ„ä¸Šæ”¾ã€‚ï¼ˆâ€œä¸»é“¾â€çš„é€‰æ‹©é‡‡ç”¨å…±è¯†ç®—æ³•è¿›è¡Œç¡®å®šï¼‰ ç›®å‰é‡‡ç”¨DAGä½œä¸ºå­˜å‚¨ç»“æ„çš„ä»£è¡¨é¡¹ç›®æœ‰dagcoinã€Byteballã€Iotaã€‚ å±•æœ›åŒºå—é“¾è™½æœ‰å»ä¸­å¿ƒåŒ–çš„ç‰¹æ€§ï¼Œä½†å¾ˆå¤šçº¿ä¸Šä¸šåŠ¡çš„çº çº·æ— æ³•ç¦»å¼€ä¸­å¿ƒæ¥è§£å†³ã€‚å› æ­¤åŒºå—é“¾çš„çœŸæ­£ä»·å€¼åœ¨äºä¿ƒè¿›å„è¡Œå„ä¸šçš„ä¸­å¿ƒåŒ–æœºæ„ä¹‹é—´è¾¾æˆå…±è¯†ï¼Œæ„å»ºè”ç›Ÿï¼Œå½¢æˆå¤šä¸ªä¸­å¿ƒç»„æˆçš„å•†ä¸šç”Ÿæ€åœˆï¼Œè¿™æ ·çš„ç”Ÿæ€ç³»ç»Ÿçªå‡ºäº†ä¸­å¿ƒçš„èŒèƒ½ï¼Œå¤§å¤§ç®€åŒ–äº†ä¸­å¿ƒåŒ–æœºæ„è¿è¥æˆæœ¬ã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>åŒºå—é“¾</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>åŒºå—é“¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”Ÿæ´»å°æŠ€èƒ½ï¼šç§‘å­¦åœ°è‚¡ç¥¨é€‰è‚¡ç­–ç•¥]]></title>
    <url>%2F2018%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E7%94%9F%E6%B4%BB%E5%B0%8F%E6%8A%80%E8%83%BD%EF%BC%9A%E8%82%A1%E7%A5%A8%E9%80%89%E8%82%A1%E7%AD%96%E7%95%A5%2F</url>
    <content type="text"><![CDATA[å¤šç§é€‰è‚¡ç­–ç•¥ä»‹ç»1.1 å½¼å¾—æ—å¥‡PEGä»·å€¼é€‰è‚¡ç­–ç•¥ç­–ç•¥æ€è·¯: 1.é€‰æ‹©PEG &lt; 0.5, å³ç¨³å®šæˆé•¿ä¸”ä»·å€¼è¢«ä½ä¼°çš„è‚¡ç¥¨ å…¶ä¸­PEG = PE / growth_rate2.ä½¿ç”¨ESé£é™©å¹³ä»·é…æƒ3.æ ¹æ®ç»„åˆçš„æ—¥å†…æ³¢åŠ¨å°äº3%çš„æ¡ä»¶, ä¸è´§å¸åŸºé‡‘ç»„åˆé…èµ„4.æœ€å¤§æŒä»“5åªè‚¡ç¥¨å’Œ1åªè´§å¸åŸºé‡‘, ä¼˜å…ˆä¹°å…¥å¸‚å€¼å°çš„, 15å¤©è°ƒä»“ä¸€æ¬¡5.å‰”é™¤äº†å‘¨æœŸæ€§å’Œé¡¹ç›®ç±»è¡Œä¸š(è¯¥éƒ¨åˆ†å¯¹æ”¹å–„å›æ’¤æœ‰æ˜æ˜¾çš„æ•ˆæœ) 1.2 è©¹å§†æ–¯.å¥¥è‚–å†…è¥¿ä»·å€¼æŠ•èµ„æ³•ç­–ç•¥é€‰è‚¡ A. è‚¡ç¥¨çš„å¸‚å€¼å¤§äºå¸‚åœºçš„ä¸­ä½æ•°B. è‚¡ç¥¨çš„è‚¡æœ¬å¤§äºå¸‚åœºçš„ä¸­ä½æ•°C. è‚¡ç¥¨çš„å¸‚ç°ç‡å¤§äº0ï¼Œä»å°åˆ°å¤§æ’åˆ—ï¼Œå–å‰400åªè‚¡ç¥¨D. è‚¡ç¥¨çš„å¸‚é”€ç‡å¤§äº0ï¼Œä»å°åˆ°å¤§æ’åˆ—ï¼Œå–å‰400åªè‚¡ç¥¨E. è‚¡ç¥¨çš„è‚¡æ¯ç‡ä»å¤§åˆ°å°æ’åˆ—ï¼Œå–å‰400åªè‚¡ç¥¨F. å–ä¸Šè¿°5ä¸ªæ¡ä»¶æ»¡è¶³ä¸‹çš„å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.3 é˜¿æ¢…ç‰¹Â·æ¬§å¡è«æ–¯é›†ä¸­æŠ•èµ„æ³•åˆ™A ä¸‰å¹´å¹³å‡è¥ä¸šæ”¶å…¥æˆé•¿ç‡å¤§äºå¸‚åœºå¹³å‡å€¼çš„60%B.ä¸‰å¹´å¹³å‡ç¨ååˆ©æ¶¦æˆé•¿ç‡å¤§äºå¸‚åœºå¹³å‡å€¼çš„60%C ä¸‰å¹´å¹³å‡è‡ªç”±ç°é‡‘æµé‡æˆé•¿ç‡å¤§äºå¸‚åœºå¹³å‡å€¼çš„60%D ROE å¤§äºå¸‚åœºå¹³å‡å€¼çš„60%E ç®¡ç†å±‚æŒè‚¡æ¯”ä¾‹å¢åŠ æˆ–è€…é«˜äºå¸‚åœºå¹³å‡å€¼çš„60%ï¼ˆç¼ºå°‘æ•°æ®ï¼‰F å¸‚å‡€ç‡å°äº4.0 å€G å¸‚ç›ˆç‡å°äº30 å€H æ»¡è¶³ä¸Šè¿°æ¡ä»¶ä¸‹è‚¡ç¥¨æ± ä¸­å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼:A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.4 æœ¬æ°æ˜æ ¼é›·å„å§†ä¼ä¸šä¸»æŠ•èµ„æ³•ç­–ç•¥é€‰è‚¡: Aï¼è‚¡ç¥¨çš„å¸‚ç›ˆç‡å¤§äº0ï¼Œä¸”é€‰å–å¸‚ç›ˆç‡æœ€ä½çš„400åªè‚¡ç¥¨Bï¼è‚¡ç¥¨çš„å¸‚å‡€ç‡å¤§äº0ä¸”å°äº2.5ï¼Œä¸”é€‰å–å¸‚å‡€ç‡æœ€ä½çš„400åªè‚¡ç¥¨Cï¼ä¼ä¸šçš„æµåŠ¨èµ„äº§è‡³å°‘æ˜¯æµåŠ¨è´Ÿå€ºçš„1.2 å€Dï¼ä¼ä¸šçš„æ€»å€Ÿæ¬¾ä¸è¶…è¿‡å‡€æµåŠ¨èµ„äº§çš„1.5 å€Eï¼ä¼ä¸šå‡€åˆ©æ¶¦å¤§äº0Fï¼æœ€è¿‘ä¸€æœŸç°é‡‘è‚¡åˆ©å¤§äº0Gï¼å‡€åˆ©æ¶¦å¢é•¿ç‡ä»å¤§åˆ°å°æ’åºï¼Œé€‰å–å‰400åªè‚¡ç¥¨H. æ»¡è¶³äºä¸Šè¿°7ä¸ªæ¡ä»¶ä¸‹çš„å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼:A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.5 å²è’‚å¤«Â·è·¯ä½›ä»·å€¼é€‰è‚¡æ³•åˆ™ç­–ç•¥é€‰è‚¡: A å¸‚å‡€ç‡å¤§äº0ä¸”ä½äºå…¨å¸‚åœºå¹³å‡å€¼ï¼Œè‚¡ç¥¨æŒ‰å¸‚å‡€ç‡ä»å°åˆ°å¤§æ’åˆ—B.å¸‚ç›ˆç‡å¤§äº0ä¸”ä½äºå…¨å¸‚åœºå¹³å‡å€¼ï¼Œè‚¡ç¥¨æŒ‰å¸‚ç›ˆç‡ä»å°åˆ°å¤§æ’åˆ—C æµåŠ¨èµ„äº§è‡³å°‘æ˜¯æ€»å¸‚å€¼çš„30%D è‚¡ä»·ç°é‡‘æµé‡æ¯”å¤§äº0ä¸”ä½äºå…¨å¸‚åœºå¹³å‡å€¼ï¼Œè‚¡ç¥¨æŒ‰è‚¡ä»·ç°é‡‘æµé‡ä»å°åˆ°å¤§æ’åˆ—E é•¿æœŸå€Ÿæ¬¾å æ€»èµ„æœ¬æ¯”ç‡ä½äº50%F æµåŠ¨æ¯”ç‡é«˜äºå…¨å¸‚åœºå¹³å‡å€¼,è‚¡ç¥¨æŒ‰æµåŠ¨æ¯”ç‡ä»å¤§åˆ°å°æ’åˆ—G æ»¡è¶³ä¸Šè¿°æ¡ä»¶ä¸‹è‚¡ç¥¨æ± ä¸­å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼:A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.6æˆ´ç»´â€¢æ³¢ä¼¦ä»·å€¼å‹ç³»ç»Ÿè¯„ä»·æŠ•èµ„æ³•ç­–ç•¥é€‰è‚¡: 1) æ€»å¸‚å€¼ ï¼ å¸‚åœºå¹³å‡å€¼ï¼›2) äº§æƒæ¯”ç‡ï¼ˆè´Ÿå€º/è‚¡ä¸œæƒç›Šï¼‰ ï¼œ å¸‚åœºå¹³å‡å€¼ï¼›3) æ¯è‚¡ä¼ä¸šè‡ªç”±ç°é‡‘æµé‡ ï¼ å¸‚åœºå¹³å‡å€¼ï¼›4) è‚¡ä»·/æ¯è‚¡è‡ªç”±ç°é‡‘æµé‡ ï¼œ å¸‚åœºå¹³å‡å€¼ï¼›5)ï¼ˆROEï¼‰å‡å¤§äºå¸‚åœºå¹³å‡å€¼ï¼›6) å‡€åˆ©æ¶¦åŒæ¯”å¢é•¿ç‡å‡å¤§äºå¸‚åœºå¹³å‡å€¼ï¼›7) æŠ•å…¥èµ„æœ¬å›æŠ¥ç‡ ï¼ å¸‚åœºå¹³å‡å€¼ï¼›8) æŠ•å…¥èµ„æœ¬å›æŠ¥ç‡ ï¼ å¸‚åœºåŸºå‡†åˆ©ç‡ã€‚(3.5%)9) é€‰å–ç¬¦åˆä»¥ä¸Šæ¡ä»¶çš„å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼:A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.7 ä¸‰ä¸€æŠ•èµ„ç®¡ç†å…¬å¸ä»·å€¼é€‰è‚¡ç­–ç•¥å…·ä½“ç­–ç•¥ ä¸€ã€æ¯æœˆä½œä¸ºè°ƒä»“å‘¨æœŸï¼Œé€‰å–ç¬¦åˆä»¥ä¸‹æ¡ä»¶çš„è‚¡ç¥¨è¿›å…¥æŠ•èµ„ç»„åˆï¼šé€‰å–æœ¬ç›Šæ¯”æœ€ä½çš„å‰400å…¬å¸è‚¡ä»·è´¦é¢ä»·å€¼æ¯”æœ€ä½çš„å‰400å…¬å¸è‚¡åˆ©æ”¶ç›Šç‡æœ€é«˜çš„å‰400å…¬å¸ ä¸ºäº†æ§åˆ¶æ¯æœŸé€‰å‡ºçš„è‚¡ç¥¨æ•°ï¼Œæˆ‘ä»¬å¢åŠ å¦‚ä¸‹æ¡ä»¶ï¼šè‹¥é€‰å‡ºè‚¡ç¥¨è¶…è¿‡30 ä¸ªï¼Œé€‰å–å‰30ä¸ªè¿›å…¥ç»„åˆã€‚ äºŒã€æ­¢æŸæ–¹å¼å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„8%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.8 æŸ¥å°”æ–¯.å¸ƒå…°å¾·ä»·å€¼æŠ•èµ„ç­–ç•¥ç­–ç•¥é€‰è‚¡ A. è‚¡ç¥¨è´Ÿå€ºå‡€å€¼æ¯”å°äº80%B. è‚¡ç¥¨çš„å¸‚ç›ˆç‡ä¸é«˜äºå¸‚åœºå¹³å‡å€¼1.5 å€C. è‚¡ç¥¨çš„è‚¡ä»·/è¿‘å››å­£ç°é‡‘æµé‡ï¼ˆå¸‚ç°ç‡ï¼‰ä¸é«˜äºå¸‚åœºå¹³å‡å€¼çš„1.5 å€D. è‚¡ç¥¨çš„å¸‚å‡€ç‡ä¸é«˜äºå¸‚åœºå¹³å‡å€¼çš„1.5 å€E. è‚¡ç¥¨çš„å¸‚å‡€ç‡å°äº2.0 å€F. æ»¡è¶³äºä¸Šè¿°æ¡ä»¶ä¸‹çš„å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ 1.9 è¿ˆå…‹å°”â€¢æ™®è±æ–¯ä½ä¼°ä»·å€¼é€‰è‚¡ç­–ç•¥ç­–ç•¥é€‰è‚¡: A è‚¡ä»·ä¸æ¯è‚¡å‡€å€¼æ¯”å°äº2ï¼Œä¸”é€‰å–å¸‚å‡€ç‡æœ€ä½çš„400åªè‚¡ç¥¨B è‘£ç›‘äº‹æŒè‚¡æ¯”ä¾‹å¤§äºå¸‚åœºå¹³å‡å€¼(ç¼ºå¤±è¯¥æ•°æ®)C è´Ÿå€ºæ¯”ä¾‹ä½äºå¸‚åœºå¹³å‡å€¼D. æ»¡è¶³äºä¸Šè¿°æ¡ä»¶ä¸‹çš„å‰30åªè‚¡ç¥¨ äº¤æ˜“æ–¹å¼ï¼šæŒ‰æœˆè°ƒä»“ æ­¢æŸæ–¹å¼:A. å½“ä¸ªè‚¡ä»·æ ¼ä½äºæˆæœ¬ä»·çš„7%æ—¶ï¼Œå–å‡ºè¯¥è‚¡ç¥¨B. å½“5æ—¥å†…å¤§ç›˜ä¸‹è·Œ13%æ—¶ï¼Œå–å‡ºæ‰€æœ‰è‚¡ç¥¨ çˆ¬è™«çˆ¬è™«æ•°æ®ï¼š ï¼ˆ1ï¼‰é‡‡é›†æ²ªè‚¡é€šåŠæ·±è‚¡é€šæŒè‚¡çºªå½•ï¼Œå­˜å…¥æ•°æ®åº“ä¸­ï¼Œæ¯å¤©æ›´æ–°http://sc.hkexnews.hk/TuniS/www.hkexnews.hk/sdw/search/mutualmarket_c.aspx?t=sh ï¼ˆ2ï¼‰åŒèŠ±é¡ºé‡Œé¢çš„é¾™è™æ¦œåå•http://data.10jqka.com.cn/market/longhu/#refCountId=data_55f13c7e_426 ï¼ˆ3ï¼‰åŒèŠ±é¡ºé‡Œé¢çš„å…¬å¸è´¢æŠ¥ä¿¡æ¯ã€‚http://stockpage.10jqka.com.cn/000807/finance/#finance?qq-pf-to=pcqq.c2c ï¼ˆ4ï¼‰é‡‡é›†å…¬å¸çš„èèµ„èåˆ¸åŠå…¶å†å²ä¿¡æ¯http://stockpage.10jqka.com.cn/000807/#lhb?qq-pf-to=pcqq.c2c 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071#coding:utf-8import scrapy, json,iofrom scrapy.selector import Selectorfrom scrapy.http import Request, FormRequestfrom StockRecord.items import StockrecordItemimport datetime, re, requestsimport collectionsfrom urllib.parse import urlencode, quote_plusclass Scrapy(scrapy.Spider): name = &apos;stockrecord&apos; allow_domain = [&apos;http://sc.hkexnews.hk/&apos;] start_urls =[&apos;http://sc.hkexnews.hk/TuniS/www.hkexnews.hk/sdw/search/mutualmarket_c.aspx?t=sh&apos;] def parse(self,response): with open(&apos;index.html&apos;,&apos;wb&apos;)as f: f.write(response.body) url = &apos;http://sc.hkexnews.hk/TuniS/www.hkexnews.hk/sdw/search/mutualmarket_c.aspx?t=sh&apos; EVENTVALIDATION = response.xpath(&quot;//*[@id=&apos;__EVENTVALIDATION&apos;]/@value&quot;).extract() VIEWSTATE = response.xpath(&quot;//*[@id=&apos;__VIEWSTATE&apos;]/@value&quot;).extract() VIEWSTATEGENERATOR = response.xpath(&quot;//*[@id=&apos;__VIEWSTATEGENERATOR&apos;]/@value&quot;).extract() today = response.xpath(&quot;//*[@id=&apos;today&apos;]/@value&quot;).extract() sortBy = response.xpath(&quot;//*[@id=&apos;sortBy&apos;]/@value&quot;).extract() alertMsg = response.xpath(&quot;//*[@id=&apos;alertMsg&apos;]/@value&quot;).extract() formdata =&#123;&#125; for i in range(1): # formdata[&apos;__VIEWSTATE&apos;] =re.findall(r&apos;&lt;input type=&quot;hidden&quot; name=&quot;__VIEWSTATE&quot; id=&quot;__VIEWSTATE&quot; value=&quot;(.*?)&quot; /&gt;&apos;,sourepage.text)[0] # formdata[&apos;__EVENTVALIDATION&apos;] = re.findall(r&apos;&lt;input type=&quot;hidden&quot; name=&quot;__EVENTVALIDATION&quot; id=&quot;__EVENTVALIDATION&quot; value=&quot;(.*?)&quot; /&gt;&apos;,sourepage.text)[0] # formdata[&apos;__VIEWSTATEGENERATOR&apos;] = &apos;EC4ACD6F&apos; formdata[&apos;__VIEWSTATE&apos;] =VIEWSTATE[0] formdata[&apos;__EVENTVALIDATION&apos;] = EVENTVALIDATION[0] formdata[&apos;__VIEWSTATEGENERATOR&apos;] = VIEWSTATEGENERATOR[0] formdata[&apos;today&apos;] = today[0] formdata[&apos;sortBy&apos;]= &apos;&apos; formdata[&apos;alertMsg&apos;]= &apos;&apos; start_time = datetime.date(2017, 3, 17) + datetime.timedelta(i) formdata[&apos;ddlShareholdingDay&apos;] = str(start_time.day) formdata[&apos;ddlShareholdingMonth&apos;] = str(start_time.month) formdata[&apos;ddlShareholdingYear&apos;] = str(start_time.year) formdata[&apos;btnSearch.x&apos;] = &apos;32&apos; formdata[&apos;btnSearch.y&apos;] = &apos;11&apos; # print (formdata) data = urlencode(formdata,quote_via=quote_plus) print (data) # formdata = &#123;&apos;ddlShareholdingDay&apos;:&apos;17&apos;,&apos;ddlShareholdingMonth&apos;:&apos;03&apos;,&apos;ddlShareholdingYear&apos;:&apos;2017&apos;&#125; return Request(url,self.parse_result, method=&quot;POST&quot;,headers=&#123;&apos;User-Agent&apos;:&apos;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36&apos;&#125;,body=json.dumps(data)) # yield FormRequest.from_response(response,method=&apos;POST&apos;,formdata=formdata, callback=self.parse_result) # print (&apos;result&apos;,result) # return result def parse_result(self, response): items = [] # print(&apos;é¡µé¢&apos;,response.text) with open(&apos;test.html&apos;,&apos;wb&apos;)as f: f.write(response.body) sel = Selector(response=response).css(&apos;#pnlResult &gt; table&apos;) table_date = Selector(response=response).css(&apos;#pnlResult &gt; div:nth-child(1)::text&apos;).extract()[0].strip().split(&apos;:&apos;)[-1] table = sel.css(&apos;td::text&apos;).extract() all_data = list(map(lambda x: x.strip(), table)) every_line_data = [all_data[i:i + 4] for i in range(0, len(all_data), 4)] items=[] for every_line in every_line_data: item = StockrecordItem() item[&apos;date&apos;]= table_date item[&apos;code&apos;] = every_line[0] item[&apos;name&apos;] = every_line[1] item[&apos;shareholding&apos;] = every_line[2] item[&apos;percentage&apos;] = every_line[3] items.append(item) # print(&apos;ç»“æœ:&#123;&#125;&apos;.format(items)) print (items) # return items abupyç­–ç•¥ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485# coding: utf-8# In[1]:import abupyfrom abupy import EMarketDataFetchModefrom abupy import AbuMetricsBasefrom abupy import EDataCacheTypefrom abupy import EMarketTargetTypefrom abupy import AbuDoubleMaBuy, AbuDoubleMaSellfrom abupy import AbuPositionBasefrom abupy import abu# In[2]:# **AbuFactorBuyBreak**(Næ—¥è¶‹åŠ¿çªç ´ç­–ç•¥)è¶‹åŠ¿çªç ´å®šä¹‰ä¸ºå½“å¤©æ”¶ç›˜ä»·æ ¼è¶…è¿‡Nå¤©å†…çš„æœ€é«˜ä»·æˆ–æœ€ä½ä»·ï¼Œè¶…è¿‡æœ€é«˜ä»·æ ¼ä½œä¸ºä¹°å…¥ä¿¡å·ä¹°å…¥è‚¡ç¥¨æŒæœ‰ï¼Œè¶…è¿‡æœ€ä½ä»·æ ¼ä½œä¸ºå–å‡ºä¿¡å·ã€‚# # **AbuFactorAtrNStop**(æ­¢ç›ˆæ­¢æŸç­–ç•¥)çœŸå®æ³¢å¹…aträ½œä¸ºæœ€å¤§æ­¢ç›ˆå’Œæœ€å¤§æ­¢æŸçš„å¸¸æ•°å€¼,å½“stop_loss_n ä¹˜ä»¥ å½“æ—¥atr &gt; ä¹°å…¥ä»·æ ¼ ï¼ å½“æ—¥æ”¶ç›˜ä»·æ ¼ï¼šæ­¢æŸå–å‡º;å½“stop_win_n ä¹˜ä»¥ å½“æ—¥atr &lt; å½“æ—¥æ”¶ç›˜ä»·æ ¼ ï¼ä¹°å…¥ä»·æ ¼ï¼šæ­¢ç›ˆå–å‡º# # **AbuFactorPreAtrNStop**(é£é™©æ§åˆ¶æ­¢æŸç­–ç•¥)ä½¿ç”¨çœŸå®æ³¢å¹…aträ½œä¸ºå¸¸æ•°å€¼: å½“ä»Šæ—¥ä»·æ ¼ä¸‹è·Œå¹…åº¦ &gt; å½“æ—¥atr ä¹˜ä»¥ pre_atr_nï¼ˆä¸‹è·Œæ­¢æŸå€æ•°ï¼‰å–å‡ºè‚¡ç¥¨# # **AbuFactorCloseAtrNStop**(åˆ©æ¶¦ä¿æŠ¤æ­¢ç›ˆç­–ç•¥) atrç§»åŠ¨æ­¢ç›ˆç­–ç•¥ï¼Œå½“ä¹°å…¥è‚¡ç¥¨æœ‰ä¸€å®šæ”¶ç›Šåï¼Œå¦‚æœè‚¡ä»·ä¸‹è·Œå¹…åº¦è¶…è¿‡close_atr_nä¹˜ä»¥å½“æ—¥atrï¼šåˆ™ä¿æŠ¤æ­¢ç›ˆå–å‡º# In[2]:from abupy import AbuFactorBuyBreak, AbuFactorAtrNStop, AbuFactorPreAtrNStop, AbuFactorCloseAtrNStop# In[3]:# åˆå§‹åŒ–èµ„é‡‘20ä¸‡read_cash = 200000# ä¹°å…¥å› å­ä½¿ç”¨60æ—¥å‘ä¸Šå’Œ42æ—¥çªç ´å› å­buy_factors = [&#123;&apos;xd&apos;: 60, &apos;class&apos;: AbuFactorBuyBreak&#125;, &#123;&apos;xd&apos;: 42, &apos;class&apos;: AbuFactorBuyBreak&#125;]# è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥æ­¢ç›ˆè¦å¤§äºæ­¢æŸè®¾ç½®å€¼ï¼Œè¿™é‡Œ1.0ï¼Œ3.0# å–å‡ºå› å­å¹¶è¡Œç”Ÿæ•ˆsell_factors = [ &#123;&apos;stop_loss_n&apos;: 1.0, &apos;stop_win_n&apos;: 3.0, &apos;class&apos;: AbuFactorAtrNStop&#125;, &#123;&apos;class&apos;: AbuFactorPreAtrNStop, &apos;pre_atr_n&apos;: 1.5&#125;, &#123;&apos;class&apos;: AbuFactorCloseAtrNStop, &apos;close_atr_n&apos;: 1.5&#125;]# In[4]:# å›æµ‹ç”Ÿæˆä¹°å…¥æ—¶åˆ»ç‰¹å¾abupy.env.g_enable_ml_feature = True# å›æµ‹å¼€å§‹æ—¶å°†symbolsåˆ‡å‰²åˆ†ä¸ºè®­ç»ƒé›†æ•°æ®å’Œæµ‹è¯•é›†ä¸¤ä»½ï¼Œä½¿ç”¨è®­ç»ƒé›†è¿›è¡Œå›æµ‹#abupy.env.g_enable_train_test_split = True# In[5]:# å¾ˆå¤šäº¤æ˜“ç»†èŠ‚è¿˜æ˜¯ä½¿ç”¨çš„é»˜è®¤è®¾ç½®ä¸­çš„ç¾è‚¡äº¤æ˜“æ¨¡å¼ï¼Œå› æ­¤éœ€è¦å°†ç¯å¢ƒè®¾ç½®ä¸ºAè‚¡abupy.env.g_market_target = EMarketTargetType.E_MARKET_TARGET_CN# In[6]:# æ‹©æ—¶è‚¡ç¥¨æ± choice_symbols = [&apos;002230&apos;, &apos;000725&apos;, &apos;300059&apos;, &apos;601766&apos;, &apos;600085&apos;, &apos;600036&apos;, &apos;600809&apos;, &apos;000002&apos;, &apos;002594&apos;, &apos;002739&apos;, &apos;601388&apos;, &apos;601919&apos;, &apos;600307&apos;, &apos;000725&apos;, &apos;601880&apos;, &apos;000100&apos;,&apos;601168&apos;]# **é’ˆå¯¹Aè‚¡æ¶¨åœå’Œè·Œåœçš„ç‰¹æ®Šè®¾ç½®æ‰“å¼€**# In[7]:from abupy import slippage# å¼€å¯é’ˆå¯¹éé›†åˆç«ä»·é˜¶æ®µçš„æ¶¨åœï¼Œæ»‘ç‚¹ä¹°å…¥ä»·æ ¼ä»¥é«˜æ¦‚ç‡åœ¨æ¥è¿‘æ¶¨åœçš„ä»·æ ¼ä¹°å…¥slippage.sbb.g_enable_limit_up = True# å°†é›†åˆç«ä»·é˜¶æ®µçš„æ¶¨åœä¹°å…¥æˆåŠŸæ¦‚ç‡è®¾ç½®ä¸º0ï¼Œå¦‚æœè®¾ç½®ä¸º0.2å³20%æ¦‚ç‡æˆåŠŸä¹°å…¥slippage.sbb.g_pre_limit_up_rate = 0# å¼€å¯é’ˆå¯¹éé›†åˆç«ä»·é˜¶æ®µçš„è·Œåœï¼Œæ»‘ç‚¹å–å‡ºä»·æ ¼ä»¥é«˜æ¦‚ç‡åœ¨æ¥è¿‘è·Œåœçš„ä»·æ ¼å–å‡ºslippage.ssb.g_enable_limit_down = True# å°†é›†åˆç«ä»·é˜¶æ®µçš„è·Œåœå–å‡ºæˆåŠŸæ¦‚ç‡è®¾ç½®ä¸º0, å¦‚æœè®¾ç½®ä¸º0.2å³20%æ¦‚ç‡æˆåŠŸå–å‡ºslippage.ssb.g_pre_limit_down_rate = 0# **è‡ªå®šä¹‰æ‰‹ç»­è´¹**# In[8]:def buy_commission_ch(trade_cnt, price): &quot;&quot;&quot; è®¡ç®—äº¤æ˜“è´¹ç”¨ï¼šæ¯è‚¡0.001å—ï¼Œï¼Œæœ€ä½æ¶ˆè´¹1å—ï¼›äº¤æ˜“ä½£é‡‘ï¼šæœ€é«˜æ”¶è´¹ä¸º3â€°ï¼Œæœ€ä½æ”¶è´¹5å…ƒï¼›å°èŠ±ç¨ï¼š1â€° :param trade_cnt: äº¤æ˜“çš„è‚¡æ•° :param price: æ¯è‚¡çš„ä»·æ ¼ :return: è®¡ç®—ç»“æœæ‰‹ç»­è´¹ &quot;&quot;&quot; # æ¯è‚¡æ‰‹ç»­è´¹0.01 transfer_fees = trade_cnt * 0.001 commission = price*trade_cnt*0.0003 if transfer_fees &lt; 1: transfer_fees = 1 if commission &lt; 5: # æœ€ä½æ¶ˆè´¹2.99 commission = 5 return transfer_fees+commissiondef sell_commission_ch(trade_cnt, price): &quot;&quot;&quot; è®¡ç®—äº¤æ˜“è´¹ç”¨ï¼šæ¯è‚¡0.001å—ï¼Œï¼Œæœ€ä½æ¶ˆè´¹1å—ï¼›äº¤æ˜“ä½£é‡‘ï¼šæœ€é«˜æ”¶è´¹ä¸º3â€°ï¼Œæœ€ä½æ”¶è´¹5å…ƒï¼›å°èŠ±ç¨ï¼š1â€° :param trade_cnt: äº¤æ˜“çš„è‚¡æ•° :param price: æ¯è‚¡çš„ä»·æ ¼ :return: è®¡ç®—ç»“æœæ‰‹ç»­è´¹ &quot;&quot;&quot; # æ¯è‚¡æ‰‹ç»­è´¹0.01 transfer_fees = trade_cnt * 0.001 commission = price*trade_cnt*0.0003 stamp_duty = price*trade_cnt*0.001#ç®—ä¸€åŠï¼Œå› ä¸ºåªæœ‰å–å‡ºæ‰æ”¶ if transfer_fees &lt; 1: transfer_fees = 1 if commission &lt; 5: commission = 5 return transfer_fees+commission+stamp_duty# In[9]:# å–å‡ºå­—å…¸key=&apos;sell_commission_func&apos;, æŒ‡å‘åŒä¸€ä¸ªæ‰‹ç»­è´¹æ–¹æ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å®šä¹‰ä¸åŒçš„æ–¹æ³•commission_dict = &#123;&apos;buy_commission_func&apos;: buy_commission_ch, &apos;sell_commission_func&apos;: sell_commission_ch&#125;# In[13]:# ä½¿ç”¨run_loop_backè¿è¡Œç­–ç•¥abu_result_tuple, kl_pd_manger = abu.run_loop_back(read_cash, buy_factors, sell_factors, n_folds=8, commission_dict=commission_dict, choice_symbols=choice_symbols)# In[14]:AbuMetricsBase.show_general(*abu_result_tuple, only_show_returns=True)# **ä»“ä½ç®¡ç†**# # åº”ç”¨kellyå…¬å¼æ¥åšä»“ä½æ§åˆ¶# In[15]:metrics = AbuMetricsBase(*abu_result_tuple)# In[16]:metrics.fit_metrics()# In[17]:metrics.win_rate# In[10]:class AbuKellyPosition(AbuPositionBase): &quot;&quot;&quot;ç¤ºä¾‹kellyä»“ä½ç®¡ç†ç±»&quot;&quot;&quot; def fit_position(self, factor_object): &quot;&quot;&quot; fit_positionè®¡ç®—çš„ç»“æœæ˜¯ä¹°å…¥å¤šå°‘ä¸ªå•ä½ï¼ˆè‚¡ï¼Œæ‰‹ï¼Œé¡¿ï¼Œåˆçº¦ï¼‰ éœ€è¦factor_objectç­–ç•¥å› å­å¯¹è±¡é€šè¿‡å†å²å›æµ‹ç»Ÿè®¡èƒœç‡ï¼ŒæœŸæœ›æ”¶ç›Šï¼ŒæœŸæœ›äºæŸï¼Œ å¹¶è®¾ç½®æ„é€ å½“å‰factor_objectå¯¹è±¡ï¼Œé€šè¿‡kellyå…¬å¸è®¡ç®—ä»“ä½ :param factor_object: ABuFactorBuyBaseså­ç±»å®ä¾‹å¯¹è±¡ :return:ä¹°å…¥å¤šå°‘ä¸ªå•ä½ï¼ˆè‚¡ï¼Œæ‰‹ï¼Œé¡¿ï¼Œåˆçº¦ï¼‰ &quot;&quot;&quot; # è´¥ç‡ loss_rate = 1 - self.win_rate # kellyè®¡ç®—å‡ºä»“ä½æ¯”ä¾‹ kelly_pos = self.win_rate - loss_rate / (self.gains_mean / self.losses_mean) # æœ€å¤§ä»“ä½é™åˆ¶ï¼Œä¾ç„¶å—ä¸Šå±‚æœ€å¤§ä»“ä½æ§åˆ¶é™åˆ¶ï¼Œegï¼šå¦‚æœkellyè®¡ç®—å‡ºå…¨ä»“ï¼Œä¾ç„¶ä¼šå‡å°‘åˆ°75%ï¼Œå¦‚ä¿®æ”¹éœ€è¦ä¿®æ”¹æœ€å¤§ä»“ä½å€¼ kelly_pos = self.pos_max if kelly_pos &gt; self.pos_max else kelly_pos # ç»“æœæ˜¯ä¹°å…¥å¤šå°‘ä¸ªå•ä½ï¼ˆè‚¡ï¼Œæ‰‹ï¼Œé¡¿ï¼Œåˆçº¦ï¼‰ return self.read_cash * kelly_pos / self.bp * self.deposit_rate def _init_self(self, **kwargs): &quot;&quot;&quot;kellyä»“ä½æ§åˆ¶ç®¡ç†ç±»åˆå§‹åŒ–è®¾ç½®&quot;&quot;&quot; # é»˜è®¤kellyä»“ä½èƒœç‡0.445 self.win_rate = kwargs.pop(&apos;win_rate&apos;, 0.445) # é»˜è®¤å¹³å‡è·åˆ©æœŸæœ›0.1338 self.gains_mean = kwargs.pop(&apos;gains_mean&apos;, 0.1338) # é»˜è®¤å¹³å‡äºæŸæœŸæœ›0.06959 self.losses_mean = kwargs.pop(&apos;losses_mean&apos;, 0.06959)# In[20]:# ä¹°å…¥å› å­ä½¿ç”¨60æ—¥å‘ä¸Šå’Œ42æ—¥çªç ´å› å­buy_factors_sec = [&#123;&apos;xd&apos;: 60, &apos;class&apos;: AbuFactorBuyBreak&#125;, &#123;&apos;xd&apos;: 42, &apos;class&apos;: AbuFactorBuyBreak, &apos;position&apos;: &#123;&apos;class&apos;: AbuKellyPosition, &apos;win_rate&apos;: metrics.win_rate, &apos;gains_mean&apos;: metrics.gains_mean, &apos;losses_mean&apos;: -metrics.losses_mean&#125;,&#125;]# In[21]:# ä½¿ç”¨run_loop_backè¿è¡Œç­–ç•¥abu_result_tuple, kl_pd_manger = abu.run_loop_back(read_cash, buy_factors_sec, sell_factors, n_folds=8, commission_dict=commission_dict, choice_symbols=choice_symbols)# In[22]:AbuMetricsBase.show_general(*abu_result_tuple, only_show_returns=True)# In[23]:metrics = AbuMetricsBase(*abu_result_tuple)metrics.plot_max_draw_down()# ## å½“å¤©è¡Œä¸ºåŠ¨ä½œ# In[24]:action_result_pd = abu_result_tuple.action_pdaction_result_pd[action_result_pd[&apos;Date&apos;]==20180124]# In[25]:result_orders_pd = abu_result_tuple.orders_pdresult_orders_pd[result_orders_pd[&apos;buy_date&apos;]==20180124]# **ä¹°å…¥åŠ¨ä½œé‡å†™**# # æ„å»ºä¸€ä¸ªä¿å®ˆä¹°å…¥ç®—æ³•ï¼Œä»¥å¼€ç›˜ä»·å’Œæœ€é«˜ä»·çš„å¹³å‡å€¼ä½œä¸ºä¹°å…¥,è€Œä¸æ˜¯ä¸¤è€…å‡å€¼# In[26]:from abupy import AbuSlippageBuyBase, slippageimport numpy as npclass AbuSlippageBuyMean2(AbuSlippageBuyBase): &quot;&quot;&quot;ç¤ºä¾‹æ—¥å†…æ»‘ç‚¹å‡ä»·ä¹°å…¥ç±»&quot;&quot;&quot; @slippage.sbb.slippage_limit_up def fit_price(self): &quot;&quot;&quot; å–å½“å¤©äº¤æ˜“æ—¥çš„æœ€é«˜æœ€ä½å‡ä»·åšä¸ºå†³ç­–ä»·æ ¼ :return: æœ€ç»ˆå†³ç­–çš„å½“å‰äº¤æ˜“ä¹°å…¥ä»·æ ¼ &quot;&quot;&quot; g_open_down_rate = 0.02 # TODO åŸºç±»æå–ä½œä¸ºè£…é¥°å™¨å‡½æ•°ï¼Œå­ç±»æ ¹æ®éœ€è¦é€‰æ‹©æ˜¯å¦è£…é¥°ï¼Œå¹¶ä¸”æ·»åŠ ä¸Šæ ¹æ®orderçš„callï¼Œputæ˜ç¡®ç»†èŠ‚é€»è¾‘ if self.kl_pd_buy.pre_close == 0 or (self.kl_pd_buy.open / self.kl_pd_buy.pre_close) &lt; (1 - g_open_down_rate): # å¼€ç›˜å°±ä¸‹è·Œä¸€å®šæ¯”ä¾‹é˜€å€¼ï¼Œæ”¾å¼ƒå•å­ return np.inf # ä¹°å…¥ä»·æ ¼ä¸ºå½“å¤©å‡ä»·ï¼Œå³æœ€é«˜ï¼Œæœ€ä½çš„å¹³å‡ï¼Œä¹Ÿå¯ä½¿ç”¨é«˜å¼€ä½æ”¶å¹³å‡ç­‰æ–¹å¼è®¡ç®— self.buy_price = np.mean([self.kl_pd_buy[&apos;open&apos;], self.kl_pd_buy[&apos;high&apos;]]) # è¿”å›æœ€ç»ˆçš„å†³ç­–ä»·æ ¼ return self.buy_price# In[27]:# ä¹°å…¥å› å­ä½¿ç”¨60æ—¥å‘ä¸Šå’Œ42æ—¥çªç ´å› å­buy_factors_sec = [&#123;&apos;xd&apos;: 60, &apos;class&apos;: AbuFactorBuyBreak,&apos;slippage&apos;: AbuSlippageBuyMean2&#125;, &#123;&apos;xd&apos;: 42, &apos;class&apos;: AbuFactorBuyBreak, &apos;slippage&apos;: AbuSlippageBuyMean2, &apos;position&apos;: &#123;&apos;class&apos;: AbuKellyPosition, &apos;win_rate&apos;: metrics.win_rate, &apos;gains_mean&apos;: metrics.gains_mean, &apos;losses_mean&apos;: -metrics.losses_mean&#125;,&#125;]# In[43]:# ä½¿ç”¨run_loop_backè¿è¡Œç­–ç•¥abu_result_tuple, kl_pd_manger = abu.run_loop_back(read_cash, buy_factors_sec, sell_factors, n_folds=8, commission_dict=commission_dict, choice_symbols=choice_symbols)# In[44]:AbuMetricsBase.show_general(*abu_result_tuple, only_show_returns=True)# In[41]:action_result_pd = abu_result_tuple.action_pdaction_result_pd[action_result_pd[&apos;Date&apos;]==20180124]# **åŒå‡çº¿ç­–ç•¥**# In[45]:# ä¹°å…¥åŒå‡çº¿ç­–ç•¥AbuDoubleMaBuyå¯»æ‰¾é‡‘å‰ä¹°å…¥ä¿¡å·ï¼šmaå¿«çº¿ï¼5ï¼Œmaæ…¢çº¿ï¼20buy_factors = [&#123;&apos;fast&apos;: 5, &apos;slow&apos;: 20, &apos;class&apos;: AbuDoubleMaBuy&#125;]# å–å‡ºåŒå‡çº¿ç­–ç•¥AbuDoubleMaSellå¯»æ‰¾æ­»å‰å–å‡ºä¿¡å·ï¼šmaå¿«çº¿ï¼5ï¼Œmaæ…¢çº¿ï¼20ï¼Œå¹¶è¡Œç»§ç»­ä½¿ç”¨æ­¢ç›ˆæ­¢æŸåŸºç¡€ç­–ç•¥sell_factors = [&#123;&apos;fast&apos;: 5, &apos;slow&apos;: 20, &apos;class&apos;: AbuDoubleMaSell&#125;, &#123;&apos;stop_loss_n&apos;: 1.0, &apos;stop_win_n&apos;: 3.0, &apos;class&apos;: AbuFactorAtrNStop&#125;, &#123;&apos;class&apos;: AbuFactorPreAtrNStop, &apos;pre_atr_n&apos;: 1.5&#125;, &#123;&apos;class&apos;: AbuFactorCloseAtrNStop, &apos;close_atr_n&apos;: 1.5&#125;]# In[46]:abu_result_tuple, kl_pd_manger = abu.run_loop_back(read_cash, buy_factors, sell_factors, n_folds=8, commission_dict=commission_dict, choice_symbols=choice_symbols)# In[47]:AbuMetricsBase.show_general(*abu_result_tuple, only_show_returns=True)# In[23]:action_result_pd = abu_result_tuple.action_pdaction_result_pd[action_result_pd[&apos;Date&apos;]==20180124]# In[49]:metrics = AbuMetricsBase(*abu_result_tuple)metrics.plot_max_draw_down()# In[12]:buy_factors = [&#123;&apos;fast&apos;: 5, &apos;slow&apos;: 20, &apos;class&apos;: AbuDoubleMaBuy&#125;,&#123;&apos;xd&apos;: 60, &apos;class&apos;: AbuFactorBuyBreak&#125;, &#123;&apos;xd&apos;: 42, &apos;class&apos;: AbuFactorBuyBreak, &apos;position&apos;: &#123;&apos;class&apos;: AbuKellyPosition&#125;,&#125;]sell_factors = [&#123;&apos;stop_loss_n&apos;: 1.0, &apos;stop_win_n&apos;: 3.0,&apos;class&apos;: AbuFactorAtrNStop&#125;, &#123;&apos;class&apos;: AbuFactorPreAtrNStop, &apos;pre_atr_n&apos;: 1.5&#125;, &#123;&apos;class&apos;: AbuFactorCloseAtrNStop, &apos;close_atr_n&apos;: 1.5&#125;]# In[13]:abu_result_tuple, kl_pd_manger = abu.run_loop_back(read_cash, buy_factors, sell_factors, n_folds=8, commission_dict=commission_dict, choice_symbols=choice_symbols)# In[14]:AbuMetricsBase.show_general(*abu_result_tuple, only_show_returns=True)# In[15]:metrics = AbuMetricsBase(*abu_result_tuple)metrics.plot_max_draw_down()# In[16]:buy_factors = [&#123;&apos;fast&apos;: 5, &apos;slow&apos;: 20, &apos;class&apos;: AbuDoubleMaBuy&#125;,&#123;&apos;xd&apos;: 60, &apos;class&apos;: AbuFactorBuyBreak&#125;, &#123;&apos;xd&apos;: 42, &apos;class&apos;: AbuFactorBuyBreak, &apos;position&apos;: &#123;&apos;class&apos;: AbuKellyPosition&#125;,&#125;]sell_factors = [&#123;&apos;class&apos;: AbuDoubleMaSell&#125;, &#123;&apos;stop_loss_n&apos;: 1.0, &apos;stop_win_n&apos;: 3.0,&apos;class&apos;: AbuFactorAtrNStop&#125;, &#123;&apos;class&apos;: AbuFactorPreAtrNStop, &apos;pre_atr_n&apos;: 1.5&#125;, &#123;&apos;class&apos;: AbuFactorCloseAtrNStop, &apos;close_atr_n&apos;: 1.5&#125;]# In[17]:abu_result_tuple, kl_pd_manger = abu.run_loop_back(read_cash, buy_factors, sell_factors, n_folds=8, commission_dict=commission_dict, choice_symbols=choice_symbols)# In[18]:AbuMetricsBase.show_general(*abu_result_tuple, only_show_returns=True)# In[19]:metrics = AbuMetricsBase(*abu_result_tuple)metrics.plot_max_draw_down()# In[20]:action_result_pd = abu_result_tuple.action_pdaction_result_pd[action_result_pd[&apos;Date&apos;]==20180124]# In[28]:result_orders_pd = abu_result_tuple.orders_pd# In[44]:result_orders_pd[result_orders_pd[&apos;symbol&apos;]==&apos;600797&apos;]# In[43]:result_orders_pd[&apos;symbol&apos;].unique()# In[11]:from abupy import AbuBenchmark, AbuCapital, AbuKLManager# In[ ]:benchmark = AbuBenchmark()capital = AbuCapital(1000000, benchmark)kl_pd_manger = AbuKLManager(benchmark, capital)]]></content>
      <categories>
        <category>ç”Ÿæ´»æŠ€èƒ½</category>
        <category>è‚¡ç¥¨</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>é€‰è‚¡ç­–ç•¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[[ä¸“åˆ©]ä¸€ç§åŸºäºæ·±åº¦å­ªç”Ÿç½‘ç»œçš„äººæµæ£€æµ‹æ–¹æ³•]]></title>
    <url>%2F2018%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E4%B8%93%E5%88%A9-%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8E%E6%B7%B1%E5%BA%A6%E5%AD%AA%E7%94%9F%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BA%BA%E6%B5%81%E6%A3%80%E6%B5%8B%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å…¨æ–‡]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>ä¸“åˆ©</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7 ä¸‹çš„é˜²ç«å¢™ firewall å‘½ä»¤æ±‡æ€»(æ–¹ä¾¿æŸ¥è¯¢)]]></title>
    <url>%2F2018%2F%E8%BF%90%E7%BB%B4%2Fcentos7-%E4%B8%8B%E7%9A%84%E9%98%B2%E7%81%AB%E5%A2%99-firewall-%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB-%E6%96%B9%E4%BE%BF%E6%9F%A5%E8%AF%A2%2F</url>
    <content type="text"><![CDATA[1ã€firewalldçš„åŸºæœ¬ä½¿ç”¨å¯åŠ¨ï¼š1systemctl start firewalld å…³é—­ï¼š1systemctl stop firewalld æŸ¥çœ‹çŠ¶æ€ï¼š1systemctl status firewalld å¼€æœºç¦ç”¨ ï¼š1systemctl disable firewalld å¼€æœºå¯ç”¨ ï¼š1systemctl enable firewalld 2.systemctlæ˜¯CentOS7çš„æœåŠ¡ç®¡ç†å·¥å…·ä¸­ä¸»è¦çš„å·¥å…·ï¼Œå®ƒèåˆä¹‹å‰serviceå’Œchkconfigçš„åŠŸèƒ½äºä¸€ä½“ã€‚å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼š1systemctl start firewalld.service å…³é—­ä¸€ä¸ªæœåŠ¡ï¼š1systemctl stop firewalld.service é‡å¯ä¸€ä¸ªæœåŠ¡ï¼š1systemctl restart firewalld.service æ˜¾ç¤ºä¸€ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼š1systemctl status firewalld.service åœ¨å¼€æœºæ—¶å¯ç”¨ä¸€ä¸ªæœåŠ¡ï¼š1systemctl enable firewalld.service åœ¨å¼€æœºæ—¶ç¦ç”¨ä¸€ä¸ªæœåŠ¡ï¼š1systemctl disable firewalld.service æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨ï¼š1systemctl is-enabled firewalld.service æŸ¥çœ‹å·²å¯åŠ¨çš„æœåŠ¡åˆ—è¡¨ï¼š1systemctl list-unit-files|grep enabled æŸ¥çœ‹å¯åŠ¨å¤±è´¥çš„æœåŠ¡åˆ—è¡¨ï¼š1systemctl --failed 3.é…ç½®firewalld-cmdæŸ¥çœ‹ç‰ˆæœ¬ï¼š1firewall-cmd --version æŸ¥çœ‹å¸®åŠ©ï¼š1firewall-cmd --help æ˜¾ç¤ºçŠ¶æ€ï¼š1firewall-cmd --state æŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç«¯å£ï¼š1firewall-cmd --zone=public --list-ports æ›´æ–°é˜²ç«å¢™è§„åˆ™ï¼š1firewall-cmd --reload æŸ¥çœ‹åŒºåŸŸä¿¡æ¯:1firewall-cmd --get-active-zones æŸ¥çœ‹æŒ‡å®šæ¥å£æ‰€å±åŒºåŸŸï¼š1firewall-cmd --get-zone-of-interface=eth0 æ‹’ç»æ‰€æœ‰åŒ…ï¼š1firewall-cmd --panic-on å–æ¶ˆæ‹’ç»çŠ¶æ€ï¼š1firewall-cmd --panic-off æŸ¥çœ‹æ˜¯å¦æ‹’ç»ï¼š1firewall-cmd --query-panic å¸¸ç”¨å‘½ä»¤æ·»åŠ ç«¯å£1firewall-cmd --zone=public --add-port=80/tcp --permanent ï¼ˆâ€“permanentæ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆï¼‰ é‡æ–°è½½å…¥1firewall-cmd --reload æŸ¥çœ‹ç«¯å£1firewall-cmd --zone=public --query-port=80/tcp åˆ é™¤ç«¯å£1firewall-cmd --zone=public --remove-port=80/tcp --permanent æŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç«¯å£1firewall-cmd --zone=public --list-ports]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>Linux</tag>
        <tag>å¿«æ·é”®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[httpsåŠ å¯†åè®®æµé‡åŠ«æŒå°è¯•]]></title>
    <url>%2F2017%2F%E5%AE%89%E5%85%A8%2Fhttps%E5%8A%A0%E5%AF%86%E5%8D%8F%E8%AE%AE%E6%B5%81%E9%87%8F%E5%8A%AB%E6%8C%81%2F</url>
    <content type="text"><![CDATA[ç”±è¶Šæ¥è¶Šå¤šçš„ç½‘é¡µä¿¡æ¯æ”¹ä¸ºHTTPS åŠ å¯†åè®®ï¼Œä¼ ç»Ÿçš„è¿è¥å•†åŸºäºDPIçš„æ•°æ®è·å–å’Œå¹¿å‘Šè¥é”€æ–¹å¼å·²ç»ä¸å¯è¡Œï¼Œéœ€è¦ä¸€ç§æ–°çš„æ–¹å¼é‡‡é›†å¯ç”¨æ•°æ®ã€‚ è¿™é‡Œä»¥æ±½è½¦ä¹‹å®¶ä¸ºä¾‹â€¦ ï¼ˆ1ï¼‰é€šè¿‡æ‰‹æœºç‰ˆçš„æ•°æ®è·å–éƒ¨åˆ†DPIä¿¡æ¯ã€‚ ç›¸å¯¹ç½‘é¡µç‰ˆï¼Œæ‰‹æœºç‰ˆçš„åŠ å¯†ä¿¡æ¯ç›¸å¯¹å°‘äº›ï¼Œå› æ­¤å¯ä»¥ä»¥æ‰‹æœºç‰ˆæœ¬ä½œä¸ºåˆ‡å…¥ï¼Œè·å–ç”¨æˆ·éƒ¨åˆ†ä¿¡æ¯ã€‚ å®éªŒç»“æœï¼š æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ‰‹æœºç‰ˆå…·æœ‰éƒ¨åˆ†æ•°æ®ä¾ç„¶æ˜¯HTTPæ ¼å¼ï¼Œæ¯”å¦‚ç”¨æˆ·ä¸­å¿ƒè¿˜æœ‰ä¸€äº›æ±½è½¦apiç­‰ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†çš„é¡µé¢å·²ç»æ”¹ä¸ºHTTPSæ ¼å¼äº†ã€‚ (2)è®©æµè§ˆå™¨åŠ å…¥ç‰¹å®šçš„æ ¹è¯ä¹¦å®ç°ç½‘ç»œåŠ«æŒã€‚ å¯¼å…¥å—ä¿¡äººæ ¹è¯ä¹¦åˆ°æµè§ˆå™¨ä¸­ï¼ŒåŠ«æŒå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€çš„è¯·æ±‚ï¼Œåˆ©ç”¨å—ä¿¡ä»»è¯ä¹¦è¿›è¡Œè§£å¯†ã€‚ å®éªŒç»“æœï¼š ç»“è®ºï¼šæˆ‘ä»¬åˆ©ç”¨SSLSplitå¯¼å…¥è¯ä¹¦åï¼Œå¯ä»¥çœ‹å‡ºæ±½è½¦ä¹‹å®¶çš„è¿æ¥å·²ç»å…¨éƒ¨å˜æˆæ˜æ–‡å¯è§£å¯†çš„è¿æ¥ã€‚ å®ç°æ–¹æ³•ï¼šå¯ä»¥ç±»ä¼¼12306çš„ç½‘ç«™ï¼Œè¦æ±‚ç”¨æˆ·ä¸‹è½½å®‰è£…æ ¹è¯ä¹¦ï¼Œé£é™©æ˜¯ä¼šæç¤ºç½‘ç«™è¯ä¹¦å‡ºé”™ã€‚ ï¼ˆ3ï¼‰åˆ©ç”¨sslstripè¿›è¡ŒHTTPS å‘ä¸‹é™çº§æ”»å‡»ã€‚ å°†SSL stripå°†HTTPSè¯·æ±‚æ”¹ä¸ºHTTPè¯·æ±‚ï¼Œä»è€Œè¿›è¡Œä¸­é—´äººæ”»å‡»ã€‚ å®ç°æ–¹æ³•ï¼šè¿™ç±»æ–¹æ³•çš„å®ç°éš¾åº¦è¾ƒå¤§ï¼Œéœ€è¦ä½œä¸ºä¸­é—´äººè¿›è¡Œè½¬å‘ï¼Œæœªè¿›è¡Œç›¸å…³å®éªŒã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ä¿¡æ¯å®‰å…¨</category>
      </categories>
      <tags>
        <tag>sslè§£å¯†</tag>
        <tag>æµé‡åŠ«æŒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœºå™¨å­¦ä¹ æ€ç»´å¯¼å›¾]]></title>
    <url>%2F2017%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%2F</url>
    <content type="text"><![CDATA[ç¿»è¯‘è‡³dformoso]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>ç®—æ³•</tag>
        <tag>æ€ç»´å¯¼å›¾</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºçŸ¥è¯†å›¾è°±å’Œäººå·¥æ™ºèƒ½é©±åŠ¨çš„ä¼ä¸šæ·±åº¦æ™ºèƒ½è¿è¥å’Œè¿ç»´å¹³å°]]></title>
    <url>%2F2017%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E5%9F%BA%E4%BA%8E%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%92%8C%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E9%A9%B1%E5%8A%A8%E7%9A%84%E4%BC%81%E4%B8%9A%E6%B7%B1%E5%BA%A6%E6%99%BA%E8%83%BD%E8%BF%90%E8%90%A5%E5%92%8C%E8%BF%90%E7%BB%B4%E5%B9%B3%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®æ¦‚è¿°æœ¬é¡¹ç›®åˆ©ç”¨çŸ¥è¯†å›¾è°±ã€æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œä¸ºä¼ä¸šåŠä¸ªäººæ„å»ºä¼ä¸šçŸ¥è¯†åº“ï¼Œä»è€Œå®ç°é›†çŸ¥è¯†ç®¡ç†ã€çŸ¥è¯†å‘ç°ã€çŸ¥è¯†æœåŠ¡ç­‰åŠŸèƒ½äºä¸€èº«çš„ä¼ä¸šæ·±åº¦æ™ºèƒ½è¿è¥å’Œè¿ç»´å¹³å°ï¼Œä¸ºä¼ä¸šæä¾›çŸ¥è¯†åŒ–ã€æ•°å­—åŒ–å’Œæ™ºèƒ½åŒ–çš„ç®¡ç†æœåŠ¡ï¼Œè‡´åŠ›äºå¸®åŠ©ä¼ ç»Ÿä¸­å°ä¼ä¸šè§£å†³æ„å»ºè‡ªèº«ä¸“ä¸šçŸ¥è¯†åº“çš„æ„å»ºå’Œç®¡ç†é—®é¢˜ï¼Œé€šè¿‡å¼€ç®±å³ç”¨ã€äººæœºæ™ºèƒ½äº¤äº’çš„æ–¹å¼æé«˜ä¼ä¸šçš„è¿è¥ã€è¿ç»´çš„æ•ˆç‡ã€‚ä¿ƒè¿›æˆ‘å›½å¯¹äººå·¥æ™ºèƒ½ï¼ŒçŸ¥è¯†åº“é¢†åŸŸçš„æ ¸å¿ƒæŠ€æœ¯èƒ½åŠ›ï¼Œæå¤§æ¨è¿›äº†äººå·¥æ™ºèƒ½â€œä¸‰æ­¥èµ°â€æˆ˜ç•¥ã€‚ é¡¹ç›®å¿…è¦æ€§ã€å¯è¡Œæ€§æ¦‚è¿°çŸ¥è¯†ç¤¾ä¼šçš„å‘å±•ä»¥åŠå­¦ä¹ ã€ç”Ÿæ´»ä¿¡æ¯è·å–ç¯å¢ƒå˜åŒ–ï¼Œå·²é€æ¸æ”¹å˜äº†äººä»¬çš„ä¿¡æ¯è·å–é€”å¾„ã€æ–¹å¼ã€è¦æ±‚ä»¥åŠçŸ¥è¯†çš„ç®¡ç†ä¸åº”ç”¨ï¼Œå¦‚ä»ä¼ä¸šå¯¹ä¿¡æ¯çŸ¥è¯†çš„éœ€æ±‚å˜åŒ–æ¥çœ‹ï¼Œå·²å‘ˆç°å‡ºå‘ä¸ªæ€§åŒ–ã€å­¦ç§‘åŒ–ã€å¤šå…ƒåŒ–ã€æ™ºèƒ½åŒ–ç­‰æ–¹å‘å‘å±•çš„è¶‹åŠ¿ï¼Œå¹¶éšç€ä»¥æ•°æ®å¯†é›†å‹ä¸ºç§‘å­¦ç ”ç©¶ç‰¹å¾çš„ç¬¬å››ç ”ç©¶èŒƒå¼æ—¶ä»£çš„åˆ°æ¥ï¼Œä½¿å¾—ä¿¡æ¯çŸ¥è¯†çš„éœ€æ±‚å‘æ•°æ®åŒ–ã€æ™ºèƒ½åŒ–æ–¹å‘çš„å‘å±•ç‰¹å¾é€æ¸æ˜æ˜¾ã€‚å¯¹ä»¥é¢å‘ä¼ä¸šæä¾›çŸ¥è¯†å­˜å‚¨ã€ç»„ç»‡ä¸æœåŠ¡çš„å¹³å°æ¥è¯´å¦‚ä½•é€‚åº”ç¤¾ä¼šçš„å‘å±•ä¸ä¼ä¸šçš„çŸ¥è¯†éœ€æ±‚ï¼Œå¯¹å…¶æ•°æ®çš„ä¿¡æ¯çŸ¥è¯†è¿›è¡Œç§‘å­¦çš„ç®¡ç†ï¼Œæœ€ç»ˆå®ç°å‘ä¼ä¸šç”¨æˆ·æä¾›ä¸“ä¸šçš„ä¸ªæ€§åŒ–ã€æ™ºèƒ½åŒ–çŸ¥è¯†ï¼Œå·²å¼•èµ·äº†ä¸šç•Œçš„å¹¿æ³›è®¨è®ºã€‚ è®¡ç®—æœºæŠ€æœ¯ä¸æ·±åº¦å­¦ä¹ ç­‰æŠ€æœ¯çš„å‘å±•ï¼Œæ¨åŠ¨ç€ç¤¾ä¼šå‘è‡ªåŠ¨åŒ–ã€ç½‘ç»œåŒ–ã€æ•°å­—åŒ–ã€æ™ºèƒ½åŒ–æ–¹å‘å‘å±•ã€‚æ•°æ®çš„å…³è”æ•´åˆã€å®æ–½è·¨åº“æ£€ç´¢å’Œå…ƒæ•°æ®é›†ä¸­ç´¢å¼•æ£€ç´¢ç­‰å¤šç§æ›´æ·±å±‚æ¬¡çš„èµ„æºæ•´åˆæŠ€æœ¯çš„å‡ºç°ï¼Œä¹Ÿè®©åŒ…æ‹¬ä¼ä¸šæ•°æ®åœ¨å†…çš„èµ„æºæ•´åˆã€èµ„æºæ£€ç´¢ä¸çŸ¥è¯†å‘ç°èµ°å‘äº†æ·±å…¥ï¼Œå‘ç€è¯­ä¹‰åŒ–ã€æ™ºèƒ½åŒ–ç­‰æ–¹å‘å‘å±•ã€‚ Googleç­‰ä¸€ç«™å¼çŸ¥è¯†æ£€ç´¢ã€å‘ç°ã€æœåŠ¡ç³»ç»Ÿçš„å‡ºç°ä¹Ÿä¸ºä¼ä¸šçŸ¥è¯†ç®¡ç†æ•°æ®åŒ–ã€æ™ºèƒ½åŒ–æå‡ºäº†æŒ‘æˆ˜ï¼Œå¦‚ä½•åº”ç”¨äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œå€Ÿé‰´Googleç­‰æœåŠ¡å•†ï¼Œä¸ºä¼ä¸šæä¾›é›†æˆäº†çŸ¥è¯†æ•´åˆã€å‘ç°ä¸æœåŠ¡çš„ä¸€ç«™å¼æœåŠ¡æˆä¸ºäº†è¿‘å¹´æ¥çš„ç ”ç©¶ä¸å®è·µçƒ­ç‚¹ã€‚ è‡ª2009å¹´Serials Solutionå…¬å¸çš„SummonçŸ¥è¯†å‘ç°ç³»ç»Ÿé—®ä¸–ä»¥æ¥ï¼Œå‡ å¹´é—´ï¼ŒåŒ…æ‹¬Primoï¼ŒWorldcat Localä¸Encoreç­‰åœ¨å†…çš„è¶Šæ¥è¶Šå¤šçš„çŸ¥è¯†å‘ç°ç³»ç»Ÿè¢«å¼€å‘ï¼Œå¹¶å¹¿æ³›çš„åº”ç”¨åˆ°äº†å›¾ä¹¦é¦†çš„èµ„æºæ£€ç´¢ã€ä¿¡æ¯ç»„ç»‡ä¸çŸ¥è¯†æœåŠ¡ä¸­ã€‚ çŸ¥è¯†å›¾è°±(Knowledge Graph)æ˜¯è¿‘å¹´æ¥æ–‡æœ¬åˆ†æå’ŒçŸ¥è¯†ç»„ç»‡é¢†åŸŸçš„ç ”ç©¶çƒ­ç‚¹ï¼Œæ˜¯ä¸€ç§ä»¥â€œè¯­ä¹‰ç½‘ç»œâ€ä¸ºåŸºç¡€çš„æ–°å‹æµ·é‡çŸ¥è¯†ç®¡ç†å’ŒæœåŠ¡æ¨¡å¼ï¼Œå¯æ”¯æŒç»¼åˆæ€§çš„çŸ¥è¯†æ£€ç´¢ã€çŸ¥è¯†é—®ç­”ã€å†³ç­–æ”¯æŒç­‰æ™ºèƒ½åº”ç”¨ã€‚çŸ¥è¯†å‘ç°æœåŠ¡æ˜¯è¿‘å¹´æ¥çŸ¥è¯†æœåŠ¡çš„ä¸€ä¸ªå‘å±•è¶‹åŠ¿ï¼ŒPrimoç­‰çŸ¥è¯†å‘ç°ç³»ç»Ÿçš„å¼€å‘ä¸åº”ç”¨è®©çŸ¥è¯†å‘ç°æœåŠ¡èµ°è¿›äº†å›¾ä¹¦é¦†ï¼Œä½†ç›®å‰çŸ¥è¯†å‘ç°æœåŠ¡ç³»ç»Ÿä¸»è¦æ˜¯å€Ÿé‰´è°·æ­Œç­‰çŸ¥è¯†æœåŠ¡äº’è”ç½‘ä¼ä¸šï¼Œæä¾›ä¸€ç«™å¼èµ„æºæ£€ç´¢å’Œè·å–æœåŠ¡ï¼Œå¯¹ä¸ªæ€§åŒ–çŸ¥è¯†æœåŠ¡çš„å¼€å‘ä¸å»ºè®¾è¿˜ä¸å®Œå–„ã€‚åŸºäºä»¥ä¸Šä¸¤ç‚¹ï¼Œæœ¬é¡¹ç›®ä»¥çŸ¥è¯†ç®¡ç†ï¼ŒçŸ¥è¯†å‘ç°ä¸ºè§†è§’ï¼Œå¯¹ä¼ä¸šç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çŸ¥è¯†æœåŠ¡çš„å¼€å‘å¹³å°è¿›è¡Œäº†è®¾è®¡ä¸ç ”ç©¶ã€‚ é¡¹ç›®å®æ–½çš„å‰æœŸå‡†å¤‡æœ¬é¡¹ç›®çš„å®æ–½ä¸»è¦åŒ…æ‹¬äº†å››ä¸ªéƒ¨åˆ†å†…å®¹ï¼š ç¬¬ä¸€éƒ¨åˆ†ä¸ºæ­å»ºæ™ºèƒ½æ•°æ®é‡‡é›†ç³»ç»Ÿï¼Œå®ç°å¤šæºæ•°æ®çš„é‡‡é›†å·¥ä½œã€‚æ™ºèƒ½æ•°æ®é‡‡é›†ç³»ç»Ÿä¸»è¦å°†äº’è”ç½‘æ•°æ®é€šè¿‡ç‰¹ç‚¹è§„åˆ™é‡‡é›†ä¸‹æ¥ï¼Œæ•°æ®é‡‡é›†ç³»ç»Ÿå®ç°å¿«é€Ÿä½æˆæœ¬å¼€å‘ç‰¹å®šä¸»é¢˜ç½‘ç»œçˆ¬è™«ï¼Œä½¿å¾—çˆ¬è™«å¼€å‘æŠ€æœ¯å˜æˆwebçª—å£åŒ–ç•Œé¢æ“ä½œï¼Œå®ç°åŠè‡ªåŠ¨åŒ–æ“ä½œã€‚ç°é˜¶æ®µå·²ç»åŸºæœ¬å®Œæˆäº†æ™ºèƒ½æ•°æ®é‡‡é›†ç³»ç»Ÿçš„æ­å»ºå·¥ä½œï¼Œæ™ºèƒ½æ•°æ®é‡‡é›†ç³»ç»Ÿå·²ç»ä¸Šçº¿æä¾›è¯•è¿è¥ï¼Œå¹¶å–å¾—äº†è‰¯å¥½çš„åé¦ˆæ•ˆæœã€‚ ç¬¬äºŒéƒ¨åˆ†æ„å»ºåŸºäºå¤šæºæ•°æ®çš„ä¼ä¸šçŸ¥è¯†åº“ã€‚çŸ¥è¯†å›¾è°±è‡ªåŠ¨æ„å»ºç³»ç»Ÿä¸»è¦å¯¹ç‰¹å®šçš„æ–‡æœ¬æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯ä»è€Œå®ç°å‘½åå®ä½“å’Œå…³ç³»çš„æŠ½å–ï¼Œå¹¶å°†å®ä½“å’Œå…³ç³»å­˜å…¥å›¾æ•°æ®åº“ä¸­ã€‚ ç¬¬ä¸‰éƒ¨åˆ†åŸºäºçŸ¥è¯†åº“æ„å»ºçŸ¥è¯†é—®ç­”ç³»ç»Ÿã€‚ åˆ©ç”¨æ·±åº¦å­¦ä¹ ç»“åˆçŸ¥è¯†åº“æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼š(1)åˆ©ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯å°†è‡ªç„¶è¯­è¨€è½¬åŒ–ä¸ºSQLæŸ¥è¯¢è¯­å¥ï¼›(2)åˆ©ç”¨æ·±åº¦å­¦ä¹ è®­ç»ƒæ¨¡å‹ï¼Œå¯¹æŸ¥è¯¢çš„å¼‚è´¨å›¾æ•°æ®æ ¹æ®ç›¸ä¼¼åº¦è¿›è¡Œæ’åºã€‚ ç¬¬å››é˜¶éƒ¨åˆ†æ„å»ºæ™ºèƒ½è¿è¥ç³»ç»Ÿä¸è¿ç»´ç®¡ç†ç³»ç»Ÿã€‚(1)æ™ºèƒ½è¿ç»´ç®¡ç†ç³»ç»Ÿä¸»è¦é’ˆå¯¹å¹³å°è¿è¡Œæ—¥å¿—æ£€æµ‹ï¼Œé”™è¯¯æ’æŸ¥ï¼Œé¢„æµ‹ç»´æŠ¤ç­‰åŠŸèƒ½ã€‚å¯é€‚ç”¨åº”ç”¨é¢†åŸŸåŒ…æ‹¬äº¤é€šï¼Œç”µä¿¡ç­‰ã€‚(2)æ™ºèƒ½è¿è¥ä¸»è¦é’ˆå¯¹äº§å“å†…å®¹è®¾è®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€ç”¨æˆ·ç²˜åº¦æ§åˆ¶ã€ç”¨æˆ·é”€å”®ç­‰ã€‚å¯é€‚ç”¨åº”ç”¨é¢†åŸŸåŒ…æ‹¬åª’ä½“ï¼Œé‡‘èï¼ŒåŒ»ç–—ç­‰ã€‚ ç»è¿‡å¤šå¹´è¡Œä¸šç§¯ç´¯å’Œæ²‰æ·€ï¼Œç”³æŠ¥å•ä½åœ¨äººæ‰ã€èµ„æºã€æˆæœåŸºç¡€ã€èµ„é‡‘æŠ•å…¥ç­‰å¤šæ–¹é¢åšäº†å¤§é‡çš„å‰æœŸå‡†å¤‡ã€‚ç”³æŠ¥å•ä½è˜è¯·äº†åœ¨äººå·¥æ™ºèƒ½ä¸çŸ¥è¯†å›¾è°±æ–¹é¢å…·æœ‰ç›¸å½“ä¸°å¯Œçš„è¡Œä¸šç»éªŒå’Œè¾ƒé«˜çš„è¡Œä¸šå£°æœ›çš„é¢†å†›äººç‰©â€”æ–°åŠ å¡é«˜çº§æ•°å­—ç§‘å­¦ä¸­å¿ƒ(ADSC)çš„ç ”ç©¶å‘˜ä½œä¸ºé¡¹ç›®æŠ€æœ¯è´Ÿè´£äººï¼Œå¸¦é¢†åœ¨äººå·¥æ™ºèƒ½ç›¸å…³ä¸“ä¸šé¢†åŸŸå…·æœ‰ä¸€å®šæˆå°±çš„ä¸“ä¸šæŠ€æœ¯äººå‘˜å…±åŒå®Œæˆã€‚ç°é˜¶æ®µå·²ç»åŸºæœ¬å®Œæˆäº†æ™ºèƒ½çˆ¬è™«å¹³å°å’Œå¤§æ•°æ®åˆ†æå¹³å°çš„æ­å»ºå·¥ä½œï¼Œå¹¶ä¸”å®ŒæˆåŸºç¡€çŸ¥è¯†åº“çš„æ„å»ºï¼ŒåŒæ—¶å›¢é˜Ÿå…·æœ‰å¤§é‡ç›¸å…³ç»éªŒäººæ‰ï¼Œåœ¨å›½é™…é¡¶çº§æœŸåˆŠå’Œä¼šè®®å‘è¡¨è¿‡50å¤šç¯‡çŸ¥è¯†å›¾è°±åŠæ·±åº¦å­¦ä¹ é¢†åŸŸç›¸å…³è®ºæ–‡ï¼Œåœ¨é¡¹ç›®å®æ–½å’Œæ¨è¿›æ–¹é¢å…·æœ‰å¼ºå¤§çš„æ‰§è¡ŒåŠ›ã€‚ é¡¹ç›®ç«‹é¡¹ä¾æ®ç ”ç©¶æ„ä¹‰ï¼Œå›½å†…å¤–å‘å±•ç°çŠ¶å’Œè¶‹åŠ¿éšç€çŸ¥è¯†ç»æµçš„åˆ°æ¥ï¼Œä½œä¸ºå…¶æ ¸å¿ƒä»·å€¼çš„çŸ¥è¯†å‡¸æ˜¾å‡ºäº†é‡è¦çš„æˆ˜ç•¥åœ°ä½ã€‚å¦‚ä½•æœ‰æ•ˆç®¡ç†çŸ¥è¯†ï¼Œä½¿å…¶å‘æŒ¥æœ€å¤§ä½œç”¨ï¼Œä»¥æé«˜ç»„ç»‡çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œæˆä¸ºç»„ç»‡é‡ç‚¹ç ”ç©¶çš„é—®é¢˜ã€‚ ä»æœ‰æ•ˆå‚ä¸å›½å†…å¤–æ¿€çƒˆå¸‚åœºç«äº‰çš„è¦æ±‚æ¥çœ‹ï¼Œæˆ‘å›½å¹¿å¤§ä¸­å°åˆ¶é€ ä¼ä¸šçš„æŠ€æœ¯æ°´å¹³å’Œåˆ›æ–°èƒ½åŠ›ä¸å‘è¾¾å›½å®¶çš„è·¨å›½å…¬å¸è¿˜æ˜¯æœ‰ç›¸å½“å¤§çš„è·ç¦»ã€‚ä¾‹å¦‚äº§ä¸šå±‚æ¬¡æ¯”è¾ƒä½ï¼Œå¹¶ä¸”ä¼ä¸šæ•´ä½“æŠ€æœ¯åˆ›æ–°èƒ½åŠ›è¾ƒå¼±ã€‚åˆ›æ–°èƒ½åŠ›ä¸ä¼ä¸šåˆ©ç”¨ç°æœ‰èµ„æºå’ŒçŸ¥è¯†çš„èƒ½åŠ›å¯†åˆ‡ç›¸å…³ã€‚ä¸­å°ä¼ä¸šä¸€èˆ¬æ²¡æœ‰èƒ½åŠ›å¼€å‘æˆ–è´­ä¹°æˆç†Ÿçš„ã€å¤§å‹çš„çŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œè¿™ä½¿å¾—ä¸­å°ä¼ä¸šä¸æœ¬é¢†åŸŸå†…çš„ä¼˜åŠ¿ä¼ä¸šåœ¨åˆ›æ–°èƒ½åŠ›æ–¹é¢çš„å·®è·è¿›ä¸€æ­¥æ‹‰å¤§ï¼Œå½¢æˆæ¶æ€§å¾ªç¯ã€‚å¦‚æœä½¿ä¸­å°å‹ä¼ä¸šæ–¹ä¾¿ã€å¿«é€Ÿåœ°ç®¡ç†çŸ¥è¯†ï¼Œå·²ç»æˆä¸ºæ€¥éœ€è§£å†³çš„é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæœ¬é¡¹ç›®æå‡ºäº†ä¸€ä¸ªé¢å‘ä¼ä¸šï¼Œä»¥çŸ¥è¯†å›¾è°±å’Œäººå·¥æ™ºèƒ½ä¸ºé©±åŠ¨çš„ä¼ä¸šæ·±åº¦æ™ºèƒ½è¿è¥å’Œè¿ç»´å¹³å°ã€‚å¹³å°é›†æˆäº†çŸ¥è¯†é‡‡é›†ç³»ç»Ÿï¼Œå³é«˜æ•ˆæ•°æ®çˆ¬è™«ã€çŸ¥è¯†ç®¡ç†ç³»ç»Ÿã€åŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿç­‰ï¼Œä¸ºä¼ä¸šæ•´ç†ã€å…±äº«ã€è¯„ä¼°å†…éƒ¨çŸ¥è¯†èµ„äº§æä¾›äº†ç¨³å®šé«˜æ•ˆçš„å¹³å°ã€‚ ä¼ä¸šæ‹¥æœ‰å¤§é‡çš„æ•°æ®ï¼Œä¸»è¦å¯åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œä¸€æ˜¯ä»¥äººä¸ºæ ¸å¿ƒçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¯¹äºç½‘ç«™ä¸­ç”¨æˆ·çš„æµè§ˆè®°å½•ï¼Œä¸ªäººä¿¡æ¯ç­‰ã€‚äºŒæ˜¯ä»¥æœºå™¨ä¸ºæ ¸å¿ƒçš„æ•°æ®ï¼Œä¾‹å¦‚ç³»ç»Ÿè¿è¡Œæ—¥å¿—ç­‰ï¼›è¿™äº›æ•°æ®é€šå¸¸åŒ…æ‹¬ä¸°å¯Œè¯­ä¹‰(semantics) ä¸”æ˜¯å…³ç³»å‹æ•°æ®(relational data)ã€‚åœ¨å¯¹å¤æ‚çš„å…³ç³»å‹æ•°æ®çš„ç®¡ç†ä¸Šï¼ŒçŸ¥è¯†å›¾è°±å…·å¤‡æ˜æ˜¾çš„ä¼˜ç‚¹ã€‚é¦–å…ˆï¼Œåœ¨å…³è”æŸ¥è¯¢çš„æ•ˆç‡ä¸Šä¼šæ¯”ä¼ ç»Ÿçš„å­˜å‚¨æ–¹å¼æœ‰æ˜¾è‘—çš„æé«˜ã€‚å½“æ¶‰åŠ2ã€3åº¦çš„å…³è”æŸ¥è¯¢ï¼ŒåŸºäºçŸ¥è¯†å›¾è°±çš„æŸ¥è¯¢æ•ˆç‡ä¼šé«˜å‡ºå‡ åƒå€ç”šè‡³å‡ ç™¾ä¸‡å€ã€‚å…¶æ¬¡ï¼ŒåŸºäºå›¾çš„å­˜å‚¨åœ¨è®¾è®¡ä¸Šä¼šéå¸¸çµæ´»ï¼Œä¸€èˆ¬åªéœ€å±€éƒ¨çš„æ”¹åŠ¨å³å¯ã€‚æ¯”å¦‚æœ‰äº†ä¸€ä¸ªæ–°çš„æ•°æ®æºï¼Œåªéœ€è¦åœ¨å·²æœ‰çš„å›¾è°±ä¸Šæ’å…¥å°±å¯ä»¥ã€‚ä¸æ­¤ç›¸åï¼Œä¼ ç»Ÿçš„å­˜å‚¨æ–¹å¼çµæ´»æ€§æ¯”è¾ƒå·®ï¼Œå®ƒæ‰€æœ‰çš„Schemaéƒ½æ˜¯æå‰å®šä¹‰å¥½çš„ï¼Œå¦‚æœåç»­è¦æ”¹å˜ï¼Œä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚æœ€åï¼ŒæŠŠå®ä½“å’Œå…³ç³»å­˜å‚¨åœ¨å›¾æ•°æ®ç»“æ„æ˜¯ä¸€ç§ç¬¦åˆæ•´ä¸ªæ•…äº‹é€»è¾‘çš„æœ€å¥½æ–¹å¼ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å…³ç³»è¿›è¡ŒçŸ¥è¯†æ¨ç†ã€‚ æ‰€ä»¥ï¼Œä¸ºäº†æ„å»ºä¼ä¸šçŸ¥è¯†åº“ï¼Œä»è€Œå®ç°é›†çŸ¥è¯†ç®¡ç†ã€çŸ¥è¯†å‘ç°ã€çŸ¥è¯†æœåŠ¡ç­‰åŠŸèƒ½äºä¸€èº«çš„ä¼ä¸šæ·±åº¦æ™ºèƒ½è¿è¥å’Œè¿ç»´å¹³å°ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨çŸ¥è¯†å›¾è°±æŠ€æœ¯å¯¹ä¼ä¸šçŸ¥è¯†æ•°æ®è¿›è¡Œå­˜å‚¨ã€ç®¡ç†ã€‚çŸ¥è¯†å›¾è°±çš„æ¦‚å¿µç”±è°·æ­Œ2012å¹´æ­£å¼æå‡ºï¼Œæ—¨åœ¨å®ç°æ›´æ™ºèƒ½çš„æœç´¢å¼•æ“ï¼Œå¹¶ä¸”äº2013å¹´ä»¥åå¼€å§‹åœ¨å­¦æœ¯ç•Œå’Œä¸šç•Œæ™®åŠï¼Œå¹¶åœ¨æ™ºèƒ½é—®ç­”ã€æƒ…æŠ¥åˆ†æã€æ•°æ®ç®¡ç†ç­‰åº”ç”¨ä¸­å‘æŒ¥ä½œç”¨ã€‚çŸ¥è¯†å›¾è°±æ˜¯ä¸€ç§çŸ¥è¯†æ•°æ®çš„ç®¡ç†æ–¹å¼ï¼Œé€šè¿‡è¯­ä¹‰æ£€ç´¢æŠ€æœ¯è·å–å¹¶æœ‰æœºæ•´åˆå¤šæºæ•°æ®ï¼Œç”¨äºæé«˜æœç´¢å¼•æ“çš„è´¨é‡ã€‚çŸ¥è¯†å›¾è°±æœ¬è´¨ä¸Šæ˜¯ä¸€ç§è¯­ä¹‰ç½‘ç»œï¼Œä½¿ç”¨è¯­ä¹‰ç½‘ç»œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†è‡ªç„¶è¯­è¨€çš„å¥å­ç”¨å›¾æ¥è¡¨è¾¾å’Œå­˜å‚¨ï¼Œç”¨äºæœºå™¨ç¿»è¯‘ï¼Œé—®ç­”ç³»ç»Ÿå’Œè‡ªç„¶è¯­è¨€ç†è§£ã€‚çŸ¥è¯†å›¾è°±ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è¡¨è¾¾çš„æ˜¯ç°å®ä¸–ç•Œä¸­å­˜åœ¨çš„â€œå®ä½“â€ï¼Œæ¯æ¡è¾¹ä¸ºå®ä½“ä¸å®ä½“ä¹‹é—´çš„â€œå…³ç³»â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçŸ¥è¯†å›¾è°±å°±æ˜¯æŠŠæ‰€æœ‰ä¸åŒç§ç±»çš„ä¿¡æ¯è¿æ¥åœ¨ä¸€èµ·è€Œå¾—åˆ°çš„ä¸€ä¸ªå…³ç³»ç½‘ç»œã€‚çŸ¥è¯†å›¾è°±æä¾›äº†ä»â€œå…³ç³»â€çš„è§’åº¦å»åˆ†æé—®é¢˜çš„èƒ½åŠ›ï¼Œä¹Ÿå¼ºè°ƒäº†æ•°æ®é©±åŠ¨åº”ç”¨çš„æ¦‚å¿µã€‚é€šè¿‡çŸ¥è¯†å›¾è°±ï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿæœ‰æ•ˆåœ°è·å–ç›¸å…³çŸ¥è¯†ä»¥åŠçŸ¥è¯†ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œå¹¶å°†ä¸æ˜“ç†è§£çš„æŠ½è±¡ä¿¡æ¯ä»¥ç”¨æˆ·èƒ½å¤Ÿç†è§£çš„å¯è§†åŒ–æ–¹å¼å±•ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¿”å›æ›´å…¨é¢ã€æ›´ä¸°å¯Œçš„ä¿¡æ¯ã€‚ æ„å»ºçŸ¥è¯†å›¾è°±çš„ä¸»è¦ç›®çš„æ˜¯è·å–å¤§é‡çš„ã€è®©è®¡ç®—æœºå¯è¯»çš„çŸ¥è¯†ã€‚åœ¨äº’è”ç½‘é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒçŸ¥è¯†å¤§é‡å­˜åœ¨äºéç»“æ„åŒ–çš„æ–‡æœ¬æ•°æ®ã€å¤§é‡åŠç»“æ„åŒ–çš„è¡¨æ ¼å’Œç½‘é¡µä»¥åŠç”Ÿäº§ç³»ç»Ÿçš„ç»“æ„åŒ–æ•°æ®ä¸­ã€‚åŸºäºç»Ÿè®¡å­¦çš„æ–¹æ³•å°†ä»æ–‡æœ¬ä¸­è¯†åˆ«å®ä½“é—´å…³ç³»çš„é—®é¢˜è½¬åŒ–ä¸ºåˆ†ç±»é—®é¢˜ã€‚åŸºäºç»Ÿè®¡å­¦çš„æ–¹æ³•åœ¨å®ä½“å…³ç³»è¯†åˆ«æ—¶éœ€è¦åŠ å…¥å®ä½“å…³ç³»ä¸Šä¸‹æ–‡ä¿¡æ¯ç¡®å®šå®ä½“é—´çš„å…³ç³»ï¼Œå¸¸ç”¨çš„æ–¹æ³•æœ‰ç›‘ç£å­¦ä¹ ã€éç›‘ç£å­¦ä¹ ç­‰ã€‚ Jainç­‰äººåœ¨Kambhatlaçš„åŸºç¡€ä¸ŠåŠ å…¥äº†åŸºæœ¬è¯ç»„å—ä¿¡æ¯å’ŒworldNetï¼Œä½¿ç”¨SVMä½œä¸ºåˆ†ç±»å™¨ï¼Œåœ¨å®ä½“å…³ç³»è¯†åˆ«çš„å‡†ç¡®ç‡è¾¾åˆ°äº†55.5%ï¼Œå®éªŒè¡¨æ˜å®ä½“ç±»åˆ«ä¿¡æ¯çš„ç‰¹å¾æœ‰åŠ©äºæé«˜å…³ç³»æŠ½å–æ€§èƒ½ï¼›Zelenkoç­‰äººä½¿ç”¨æµ…å±‚å¥æ³•åˆ†ææ ‘ä¸Šæœ€å°å…¬å…±å­æ ‘æ¥è¡¨è¾¾å…³ç³»å®ä¾‹ï¼Œè®¡ç®—ä¸¤æ£µå­æ ‘ä¹‹é—´çš„æ ¸å‡½æ•°ï¼Œé€šè¿‡è®­ç»ƒä¾‹å¦‚SVMæ¨¡å‹çš„åˆ†ç±»å™¨æ¥å¯¹å®ä¾‹è¿›è¡Œåˆ†ã€‚ä½†åŸºäºæ ¸å‡½æ•°çš„æ–¹æ³•çš„é—®é¢˜æ˜¯å¬å›ç‡æ™®éè¾ƒä½ï¼Œè¿™æ˜¯ç”±äºç›¸ä¼¼åº¦è®¡ç®—è¿‡ç¨‹åŒ¹é…çº¦æŸæ¯”è¾ƒä¸¥æ ¼ï¼Œå› æ­¤åœ¨åç»­ç ”ç©¶å¯¹åŸºäºæ ¸å‡½æ•°æ”¹è¿›ä¸­ï¼Œå¤§éƒ¨åˆ†æ˜¯å›´ç»•æ”¹è¿›å¬å›ç‡ã€‚ä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯­æ–™çš„å¢å¤šï¼Œæ·±åº¦å­¦ä¹ åœ¨å›¾åƒå’Œè¯­è¨€é¢†åŸŸè·å¾—æˆåŠŸï¼Œä¿¡æ¯æŠ½å–é€æ¸è½¬å‘äº†åŸºäºç¥ç»ç½‘ç»œæ¨¡å‹çš„ç ”ç©¶ï¼Œç›¸å…³çš„è¯­æ–™è¢«æå‡ºä½œä¸ºæµ‹è¯•æ ‡å‡†ï¼Œå¦‚SemEval-2010 tast 8ã€‚ åŸºäºç¥ç»ç½‘ç»œæ–¹æ³•çš„ç ”ç©¶æœ‰ï¼ŒHashimotoç­‰äººåˆ©ç”¨Word Embeddingæ–¹æ³•ä»æ ‡æ³¨è¯­æ–™ä¸­å­¦ä¹ ç‰¹å®šçš„åç§°å¯¹çš„ä¸Šä¸‹æ–‡ç‰¹å¾ï¼Œç„¶åå°†è¯¥ç‰¹å¾åŠ å…¥åˆ°ç¥ç»ç½‘ç»œåˆ†ç±»å™¨ä¸­ï¼Œåœ¨SemEval-2010 task 8ä¸Šå–å¾—F1å€¼82.8%çš„æ•ˆæœã€‚åŸºäºç¥ç»ç½‘ç»œæ¨¡å‹æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯ä¸éœ€è¦åŠ å…¥å¤ªå¤šçš„ç‰¹å¾ï¼Œä¸€èˆ¬å¯ç”¨çš„ç‰¹å¾æœ‰è¯å‘é‡ã€ä½ç½®ç­‰ã€‚ å½“ä¼ä¸šæ‹¥æœ‰æµ·é‡çš„ä»¥ç”¨æˆ·ä¸ºæ ¸å¿ƒçš„æ•°æ®ï¼Œä»¥åŠä»¥æœºå™¨ä¸ºæ ¸å¿ƒçš„æ—¥å¿—æ•°æ®ï¼Œè¿™ç§æ•°æ®ä½œä¸ºä¸€ç§æ–°çš„ç”Ÿäº§è¦ç´ ï¼Œæ­£åœ¨å¸¦åŠ¨ä¸šåŠ¡å’Œç®¡ç†æ¨¡å¼å‘â€œæ•°æ®é©±åŠ¨å‹â€è½¬å˜ï¼ŒæŠŠæ•°æ®â€œç”¨æ´»â€ï¼Œæ·±åº¦æŒ–æ˜æ•°æ®ä»·å€¼ï¼Œæ˜¯ç›®å‰ä¼ä¸šé¢ä¸´çš„é‡è¦æŒ‘æˆ˜å’Œæœºé‡ã€‚ç›®å‰å¯¹æ•°æ®çš„åº”ç”¨å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€æ˜¯è¿è¥æ•°æ®ã€‚å³å¯¹ä»¥äººä¸ºæ ¸å¿ƒçš„æ•°æ®æ‹“å±•å¼€çš„ä¸šåŠ¡ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç”»åƒã€è¡Œä¸ºåˆ†æã€ä¿¡ç”¨åˆ†æç­‰ï¼›äºŒæ˜¯è¿ç»´æ•°æ®ã€‚å³ä»¥æœºå™¨ä¸ºæ ¸å¿ƒçš„æ—¥å¿—æ•°æ®æ‹“å±•å¼€çš„ä¸šåŠ¡ã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿæ£€æµ‹ã€æ£€æ§ã€åŸºç¡€è®¾æ–½ç®¡ç†ç­‰ï¼›åœ¨ä¼ ç»Ÿçš„è‡ªåŠ¨è¿è¥å’Œè‡ªåŠ¨è¿ç»´ä¸­ï¼Œå¯¹äºä¸åŒçš„é¢†åŸŸä½¿ç”¨å›ºå®šçš„æ¨¡å¼ã€è§„åˆ™æä¾›è¿è¥ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œå½“çŸ¥è¯†å›¾è°±æ¥ç®¡ç†æ•°æ®æ—¶ï¼Œèƒ½é€šè¿‡å®ä½“ä¸å…³ç³»è¿›è¡Œè®¡ç®—ï¼Œä»è€Œæ™ºèƒ½æ¨ç†ã€‚å› æ­¤ï¼Œå¯¹äºä¸åŒçš„é¢†åŸŸæ•°æ®ï¼Œå¯ä»¥é€šè¿‡çŸ¥è¯†å›¾è°±å®ç°æ™ºèƒ½æ¨ç†ï¼Œå¹¶ä¸”è‡ªåŠ¨åˆ¶å®šè¿è¥ã€è¿ç»´è§„åˆ™ã€‚ åº”ç”¨å‰æ™¯æ™ºèƒ½è¿ç»´ç³»ç»Ÿæ™ºèƒ½è¿ç»´ç®¡ç†ç³»ç»Ÿä¸»è¦ä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œé’ˆå¯¹å¹³å°è¿è¡Œæ—¥å¿—æ£€æµ‹ï¼Œé”™è¯¯æ’æŸ¥ï¼Œé¢„æµ‹ç»´æŠ¤ç­‰åŠŸèƒ½ã€‚å¦‚ï¼Œç»“åˆçŸ¥è¯†å›¾è°±å’Œå½“åœ°åœ°é“è¿è¡Œæ—¥å¿—åšæ•…éšœè¯Šæ–­å’Œæ’æŸ¥ç­‰ã€‚å¯é€‚ç”¨çš„åº”ç”¨é¢†åŸŸåŒ…æ‹¬äº¤é€šï¼Œç”µä¿¡ç­‰ã€‚ (1)åŸºäºçŸ¥è¯†å›¾è°±çš„è‡ªåŠ¨é¢„è­¦ç³»ç»Ÿ ç³»ç»Ÿè¿ç»´é¢ä¸´è¶Šæ¥è¶Šå¤šçš„éš¾ç‚¹ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨èŠ‚ç‚¹ç±»å‹å¤æ‚ã€è¿ç»´é—®é¢˜ç±»å‹ä¼—å¤šã€é—®é¢˜å‘ç”Ÿä¸å¯é¢„æµ‹ï¼Œå¦‚ä½•åœ¨å¤§è§„æ¨¡è¿ç»´åœºæ™¯ä¸‹ï¼Œå°†é‡å¤åº¦é«˜çš„å·¥ä½œï¼ŒåŸºäºç›‘æ§æ•°æ®æ™ºèƒ½å†³ç­–è§¦å‘ï¼Œå®ç°æ— äººå‚ä¸çš„è‡ªåŠ¨æ“ä½œçš„è¿ç»´èƒ½åŠ›ï¼Œæ˜¯ç°ä»£åŒ–è¿ç»´æ‰‹æ®µçš„å…³é”®ã€‚ ä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–è¿ç»´ä¸»è¦é€šè¿‡åŸºäºè§„åˆ™çš„æ¨¡æ¿è¿›è¡Œè§¦å‘ï¼Œä½†æ˜¯ç°åœ¨çš„æœåŠ¡å™¨èŠ‚ç‚¹ç±»å‹å¤æ‚ã€è¿ç»´é—®é¢˜ç±»å‹ä¼—å¤šï¼Œå…·æœ‰è®¸å¤šåŸºäºäººå·¥çš„è§„åˆ™æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨çŸ¥è¯†å›¾è°±æ„å»ºä¸€ä¸ªå…¨é¢çš„è¿ç»´çŸ¥è¯†åº“ï¼Œåˆ©ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯å®ç°è‡ªåŠ¨åŒ–è¿ç»´ã€‚é€šè¿‡çŸ¥è¯†å›¾è°±æŠ€æœ¯å¯¹æœåŠ¡å™¨ç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿã€ä½œä¸šè°ƒåº¦ç³»ç»Ÿã€è®¡ç®—åº”ç”¨çš„å„ç§çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚ CPU ä½¿ç”¨ç‡ã€ä½œä¸šè´Ÿè½½ã€å­˜å‚¨ä½¿ç”¨ç‡ç­‰è¿›è¡Œåˆ†æå¤„ç†ï¼Œå½¢æˆä¸šåŠ¡è¿è¡Œæ•°æ®ï¼Œä¸è¿ç»´äº‹ä»¶ç‰¹å¾çŸ¥è¯†åº“æ¯”å¯¹ï¼Œå¯å®ç°è¿ç»´é—®é¢˜è‡ªåŠ¨è¯†åˆ«ï¼Œå¯¹äºç‰¹å®šçš„äº‹ä»¶æƒ…å†µæå‰è¿›è¡Œé¢„è­¦å¤„ç†ã€‚ (2)åŸºäºçŸ¥è¯†å›¾è°±çš„å‘˜å·¥åŸ¹è®­åŠ©æ‰‹ éšç€çŸ¥è¯†å‹ç»æµåœ¨å¸‚åœºä¸­å¤§æ”¾å¼‚å½©ï¼ŒçŸ¥è¯†ç®¡ç†æ‰€å¸¦æ¥çš„çš„ä¼ä¸šç«äº‰è½¯å®åŠ›ä¸å®¹å°è§‘ï¼Œåœ¨ä¼ä¸šçš„ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€èƒ½äº§ç”Ÿå¤§é‡çš„ä¿¡æ¯å’Œæ–‡æ¡£ï¼Œæ¯”å¦‚å‘˜å·¥çš„å·¥ä½œç»éªŒã€æ–°å‘˜å·¥çš„åŸ¹è®­æ–‡æ¡£ï¼Œé¡¹ç›®ç®¡ç†è¿‡ç¨‹ä¸­äº§ç”Ÿçš„è°ƒç ”æŠ¥å‘Šã€å®æ–½æ–¹æ¡ˆç­‰ï¼Œæœ‰æ•ˆåœ°åˆ©ç”¨çŸ¥è¯†å°†æœ‰åˆ©äºä¼ä¸šå‘å±•ã€‚ç›®å‰ï¼Œä¼ ç»Ÿçš„å‘˜å·¥åŸ¹è®­æ³¨é‡äºçŸ¥è¯†ä¼ æˆï¼Œå¯¹äºå‘˜å·¥å¯¹çŸ¥è¯†çš„å¸æ”¶ã€åº”ç”¨çš„å…³æ³¨è¾ƒå°‘ï¼Œæ­¤å¤–ï¼Œç›®å‰è®¸å¤šçŸ¥è¯†ç®¡ç†æ¨¡å¼å¯¹æ•°æ®çš„å­˜å‚¨æ¯”è¾ƒé›¶æ•£ï¼Œå­˜åœ¨ä¿¡æ¯æµªè´¹ï¼Œé€šè¿‡æ„å»ºå‘˜å·¥æŠ€èƒ½çŸ¥è¯†å›¾è°±ï¼Œå¯ä»¥å¿«é€Ÿåœ°å¸®åŠ©å‘˜å·¥å»ºç«‹èµ·å¯¹çŸ¥è¯†æ¶æ„åœ°è®¤è¯†ï¼Œæé«˜å­¦ä¹ æ•ˆç‡ï¼Œæ”¹å˜å­¦ä¹ æ›²çº¿ï¼Œæé«˜çŸ¥è¯†åº”ç”¨æ¯”ä¾‹ï¼Œç¼©çŸ­çŸ¥è¯†å­¦ä¹ åˆ°çŸ¥è¯†åº”ç”¨çš„è·ç¦»ï¼Œåœ¨çŸ¥è¯†ç»æµæ—¶ä»£æ„ç­‘è‡ªèº«æ ¸å¿ƒç«äº‰åŠ›ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡åˆ©ç”¨çŸ¥è¯†å›¾è°±è§£å†³åœ¨å®é™…å·¥ä½œä¸­æ‰€é‡åˆ°åœ°é—®é¢˜ã€‚æ¯”å¦‚æ–°å‘˜å·¥å…¥èŒåœ°æ—¶å€™å¯¹å…¬å¸çš„æ¶æ„å’Œäººäº‹å…³ç³»ä¸äº†è§£ï¼Œå¯ä»¥é€šè¿‡ä¼ä¸šçŸ¥è¯†å›¾è°±å¿«é€Ÿæ„å»ºå¯¹ä¼ä¸šæ¶æ„çš„è®¤è¯†ï¼Œæä¾›åŸ¹è®­çš„æ•ˆç‡ã€‚ (3)åŸºäºçŸ¥è¯†å›¾è°±çš„æœºæ¢°ç»´ä¿®è¿ç»´å¹³å° åœ¨æœºæ¢°ç»´ä¿®é¢†åŸŸä¸­æœ€ä¸ºå…³é”®çš„ä¿¡æ¯å°±æ˜¯æœºæ¢°çš„æ€§èƒ½ã€æœºæ¢°å·¥ä½œæµç¨‹ä¿¡æ¯ä»¥åŠæœºæ¢°æ•…éšœä¿¡æ¯ã€‚äº†è§£å„ç±»æœºæ¢°çš„æ€§èƒ½å’Œå·¥ä½œæµç¨‹ï¼Œèƒ½å¤Ÿä¸ºç»´ä¿®è¿‡ç¨‹ä¸­æä¾›ç§‘å­¦è€Œå…¨é¢çš„ç†è®ºæŒ‡å¯¼ï¼Œæé«˜æœºæ¢°ç»´ä¿®æ•ˆç‡ï¼ŒåŒæ—¶ï¼Œé€šè¿‡å·²æœ‰çš„æ•…éšœä¿¡æ¯ï¼Œå¯ä»¥åˆ¤åˆ«æ•…éšœæ€§è´¨ï¼ŒæŸ¥æ‰¾æ•…éšœæ ¹æœ¬åŸå› ï¼Œä»è€Œæå‡ºæœ‰æ•ˆçš„ç»´æŠ¤æ–¹æ¡ˆã€‚åœ¨æœºæ¢°ç»´ä¿®çš„è¿‡ç¨‹ä¸­ï¼Œæœºæ¢°ç»´ä¿®å·¥ä½œè€…ä¸ºäº†èƒ½å¤Ÿå¯¹æœºæ¢°çš„æ€§èƒ½ã€å·¥ä½œæµç¨‹ç­‰ä¿¡æ¯æœ‰è¾ƒä¸ºå…¨é¢çš„äº†è§£ï¼Œéœ€è¦å¤šå¹´çš„å­¦ä¹ å’Œå·¥ä½œç»éªŒç§¯ç´¯ã€‚è¿™ç§æ–¹å¼éœ€è¦è€—è´¹å¤§é‡çš„æ—¶é—´ã€äººåŠ›å’Œè´¢åŠ›ã€‚è€Œç§‘å­¦åˆç†åœ°æ•´åˆè·å¾—çš„çŸ¥è¯†èƒ½æ›´å¥½åœ°ä¸ºå°†æ¥çŸ¥è¯†å·¥ä½œæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡çŸ¥è¯†å›¾è°±æ„å»ºæœºæ¢°ç»´ä¿®è¿ç»´å¹³å°ã€‚é€šè¿‡æä¾›å¯è§†åŒ–çš„å›¾è°±æ•°æ®æŠ½å–æœºåˆ¶ã€é¢å‘äº‹ä»¶ Pattern çš„æŠ€æœ¯æ–‡çŒ®æ„å›¾ç†è§£åŠæ”¯æŒæœºæ¢°ç»“æ„å›¾çš„å›¾è°±æ•°æ®æŸ¥è¯¢ï¼Œæ„å»ºæœºæ¢°ç»´ä¿®é¢†åŸŸçš„çŸ¥è¯†å›¾è°±å°†ç®€åŒ–æœºæ¢°ç»´ä¿®å·¥ä½œè€…çš„å·¥ä½œå¹¶ååŠ©æœºæ¢°ç»´ä¿®å·¥ä½œè€…è¿›è¡Œæ–°çŸ¥è¯†çš„æŒ–æ˜ã€‚ æ™ºèƒ½è¿è¥ç³»ç»Ÿæ™ºèƒ½è¿è¥ç³»ç»Ÿï¼šæ™ºèƒ½è¿è¥è¿ç”¨å¤§æ•°æ®åˆ†ææŠ€æœ¯å’Œå›¾æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œé’ˆå¯¹äº§å“å†…å®¹è®¾è®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€ç”¨æˆ·ç²˜åº¦æ§åˆ¶ã€ç”¨æˆ·é”€å”®ç­‰ã€‚å¦‚ç»“åˆçŸ¥è¯†å›¾è°±å’Œç”¨æˆ·åœ¨äº’è”ç½‘ç”µè§†çš„ç‚¹æ’­è¡Œä¸ºåšåª’ä½“æ¨èç³»ç»Ÿã€‚å¯é€‚ç”¨çš„åº”ç”¨é¢†åŸŸåŒ…æ‹¬åª’ä½“ã€é‡‘èã€åŒ»ç–—ç­‰ã€‚ (1)è‚¡ç¥¨æŠ•ç ”æƒ…æŠ¥åˆ†æ é€šè¿‡çŸ¥è¯†å›¾è°±ç›¸å…³æŠ€æœ¯ä»æ‹›è‚¡ä¹¦ã€å¹´æŠ¥ã€å…¬å¸å…¬å‘Šã€åˆ¸å•†ç ”ç©¶æŠ¥å‘Šã€æ–°é—»ç­‰åŠç»“æ„åŒ–è¡¨æ ¼å’Œéç»“æ„åŒ–æ–‡æœ¬æ•°æ®ä¸­æ‰¹é‡è‡ªåŠ¨æŠ½å–å…¬å¸çš„è‚¡ä¸œã€å­å…¬å¸ã€ä¾›åº”å•†ã€å®¢æˆ·ã€åˆä½œä¼™ä¼´ã€ç«äº‰å¯¹æ‰‹ç­‰ä¿¡æ¯ï¼Œæ„å»ºå‡ºå…¬å¸çš„çŸ¥è¯†å›¾è°±ã€‚åœ¨æŸä¸ªå®è§‚ç»æµäº‹ä»¶æˆ–è€…ä¼ä¸šç›¸å…³äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ¸å•†åˆ†æå¸ˆã€äº¤æ˜“å‘˜ã€åŸºé‡‘å…¬å¸åŸºé‡‘ç»ç†ç­‰æŠ•èµ„ç ”ç©¶äººå‘˜å¯ä»¥é€šè¿‡æ­¤å›¾è°±åšæ›´æ·±å±‚æ¬¡çš„åˆ†æå’Œæ›´å¥½çš„æŠ•èµ„å†³ç­–ï¼Œæ¯”å¦‚åœ¨ç¾å›½é™åˆ¶å‘ä¸­å…´é€šè®¯å‡ºå£çš„æ¶ˆæ¯å‘å¸ƒä¹‹åï¼Œå¦‚æœæœ‰ä¸­å…´é€šè®¯çš„å®¢æˆ·ä¾›åº”å•†ã€åˆä½œä¼™ä¼´ä»¥åŠç«äº‰å¯¹æ‰‹çš„å…³ç³»å›¾è°±ï¼Œå°±èƒ½åœ¨ä¸­å…´é€šè®¯åœç‰Œçš„æƒ…å†µä¸‹å¿«é€Ÿåœ°ç­›é€‰å‡ºå—å½±å“çš„å›½é™…å›½å†…ä¸Šå¸‚å…¬å¸ä»è€ŒæŒ–æ˜æŠ•èµ„æœºä¼šæˆ–è€…è¿›è¡ŒæŠ•èµ„ç»„åˆé£é™©æ§åˆ¶ã€‚ (2)ç”µä¿¡åæ¬ºè¯ˆåˆ†æ åæ¬ºè¯ˆæ˜¯å¯¹åŒ…å«äº¤æ˜“è¯ˆéª—ï¼Œç½‘ç»œè¯ˆéª—ï¼Œç”µè¯è¯ˆéª—ï¼Œç›—å¡ç›—å·ç­‰æ¬ºè¯ˆè¡Œä¸ºè¿›è¡Œè¯†åˆ«çš„ä¸€é¡¹æœåŠ¡ã€‚ä¼ ç»Ÿçš„æ–¹æ³•æ˜¯ç‰¹å®šçš„äººå·¥è§„åˆ™æ„å»ºæ¬ºè¯ˆè§„åˆ™ï¼Œä½†æ˜¯å¦‚ä½•å°†å¤§é‡çš„å…¨é¢çš„çŸ¥è¯†æ•´åˆåˆ°ä¸€èµ·ï¼Œè¿›è¡Œè®¡ç®—å’Œé¢„æµ‹æ¬ºè¯ˆè¡Œä¸ºéœ€è¦ä¸€ç§é«˜æ•ˆçš„å…·æœ‰æ¨ç†èƒ½åŠ›çš„ç½‘ç»œå¤„ç†æ–¹æ³•ã€‚åŸºäºæµ·é‡æ•°æ®çš„åæ¬ºè¯ˆçš„éš¾ç‚¹åœ¨äºå¦‚ä½•æŠŠç»“æ„åŒ–ã€éç»“æ„è¯æ•°æ®ç»“æ•´åˆåœ¨ä¸€èµ·ï¼Œå¹¶æ„å»ºæ¬ºè¯ˆå¼•æ“ï¼Œä»è€Œæœ‰æ•ˆåœ°è¯†åˆ«å‡ºæ¬ºè¯ˆæ¡ˆä»¶(èº«ä»½é€ å‡ï¼Œå›¢ä½“æ¬ºè¯ˆï¼Œä»£åŠåŒ…è£…ç­‰)ï¼ŒåŒæ—¶ï¼Œä¸å°‘æ¬ºè¯ˆæ¡ˆä»¶ä¼šæ¶‰åŠåˆ°å¤æ‚çš„å…³ç³»ç½‘ç»œï¼ŒçŸ¥è¯†å›¾è°±åŸºäºå›¾çš„è¡¨ç¤ºæ–¹å¼å’Œå­˜å‚¨æ–¹å¼å¯ä»¥æœ‰æ•ˆåœ°è§£å†³è¿™ç±»é—®é¢˜ã€‚ è¦è¯†åˆ«æ½œåœ¨çš„æ¬ºè¯ˆé£é™©ï¼Œé¦–å…ˆï¼Œåæ¬ºè¯ˆçš„æ ¸å¿ƒæ˜¯äººï¼Œéœ€è¦èåˆä¸åŒæ•°æ®æºçš„ä¿¡æ¯æ„æˆçŸ¥è¯†å›¾è°±ï¼Œæ¯”å¦‚åˆ¤æ–­å€Ÿæ¬¾äººçš„æ¬ºè¯ˆé£é™©ï¼ŒçŸ¥è¯†å›¾è°±ä¸ä»…æ•´åˆäº†å€Ÿæ¬¾äººçš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿæ•´åˆå€Ÿæ¬¾äººçš„æ¶ˆè´¹è®°å½•ã€è¡Œä¸ºè®°å½•ã€ç½‘ä¸Šæµè§ˆè®°å½•ç­‰ä¿¡æ¯ï¼Œè¿™äº›å¤šæºçš„ï¼Œéç»“æ„åŒ–çš„æ•°æ®éœ€è¦åˆ©ç”¨æœºå™¨å­¦ä¹ ã€è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯è¿›è¡Œç»“æ„åŒ–å¤„ç†ã€‚å…¶æ¬¡ï¼Œæ ¹æ®é¢†åŸŸä¸“å®¶å»ºç«‹çš„ä¸šåŠ¡è§„åˆ™å’ŒçŸ¥è¯†å›¾è°±è¿›è¡Œä¸ä¸€è‡´æ€§æ£€éªŒï¼Œæ¯”å¦‚å€Ÿæ¬¾äººå¼  xx å’Œå€Ÿæ¬¾äººå´ x å¡«å†™ä¿¡æ¯ä¸ºåŒäº‹ï¼Œä½†æ˜¯ä¸¤ä¸ªäººå¡«å†™çš„å…¬å¸åå´ä¸ä¸€æ · , ä»¥åŠåŒä¸€ä¸ªç”µè¯å·ç å±äºä¸¤ä¸ªå€Ÿæ¬¾äººï¼Œè¿™äº›ä¸ä¸€è‡´æ€§å¾ˆå¯èƒ½æœ‰æ¬ºè¯ˆè¡Œä¸ºã€‚åŒæ—¶ï¼Œé€šè¿‡å¯¹æ•°æ®è¿›è¡Œå¼‚å¸¸åˆ†æå’ŒçŸ¥è¯†æ¨ç†ï¼Œæ‰¾å‡ºå¼‚å¸¸ç»“æ„ï¼Œæœ€åï¼Œæ ¹æ®å¼‚å¸¸ç»“æ„è¿›ä¸€æ­¥åˆ†æï¼Œè¯„ä¼°å‡ºæ¬ºè¯ˆé£é™©ã€‚ (3)åŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½åŒ»ç–— ç–¾ç—…çš„æ²»ç–—çŸ¥è¯†å¤§éƒ¨åˆ†æ¥è‡ªåŒ»ç”Ÿçš„ä¸´åºŠç»éªŒã€å·²å½¢æˆçš„å…³äºç–¾ç—…æ²»ç–—çš„æœ‰æ•ˆæ–¹æ³•ç­‰ï¼Œç‰¹åˆ«æ˜¯æ…¢ç—…ï¼Œè¿™ç§åŒ»ç–—ç»éªŒåŠçŸ¥è¯†åœ¨å…·ä½“çš„åŒ»ç–—è¯Šæ²»ä¸­çš„å·®å¼‚æ€§ç»™æ…¢ç—…çŸ¥è¯†çš„è§„èŒƒã€æ ‡å‡†åŒ–å¸¦æ¥äº†å›°éš¾ï¼Œç›®å‰å°šæ²¡æœ‰è§„èŒƒåŒ–ä½“ç³»çš„æ…¢ç—…ç—…ç†ã€å‘ç—…è§„å¾‹ã€åŒ»ç–—æ§åˆ¶ç­‰æ–¹é¢çš„èµ„æºã€‚æ…¢ç—…çŸ¥è¯†å›¾è°±çš„æ„å»ºéœ€è¦æ•´åˆå¤šæ–¹èµ„æºï¼Œå¦‚å…³äºæ…¢ç—…çš„åŒ»å­¦ç ”ç©¶æ–‡çŒ®ã€æ…¢ç—…ä¿å¥å¸¸è¯†ä»¥åŠä¸´åºŠè¯Šç–—æ¡ˆä¾‹åº“æ•°æ®ç­‰ã€‚è¿™äº›æ•°æ®åˆ†å¸ƒåœ¨äº’è”ç½‘ã€ç§‘å­¦æ–‡çŒ®æ•°æ®åº“ã€ä¸“ç§‘è¯Šç–—æ•°æ®é›†ã€çº¸è´¨ä¹¦ç±ç­‰å¤šä¸ªåœ°æ–¹ï¼Œå¹¶ä¸”è¿™äº›èµ„æºç±»å‹å¤šæ ·ï¼Œå…·æœ‰ä¸åŒçš„ä¾§é‡ç‚¹å’Œä¸åŒçš„è´¨é‡ã€‚æ„å»ºå…³äºæ…¢ç—…çš„çŸ¥è¯†å›¾è°±ï¼Œéœ€è¦è€ƒè™‘è¯¥ä½“ç³»çš„å…¨é¢æ€§ã€é«˜è´¨é‡ï¼Œå› æ­¤éœ€è¦å¯¹ä¼—å¤šçš„èµ„æºè¿›è¡Œè¿‡æ»¤ã€æŠ½å–ï¼Œä½¿ä¹‹ç»“æ„åŒ–ã€ç³»ç»ŸåŒ–ã€‚åŒæ—¶ï¼Œä¸ºäº†å®ç°æ…¢ç—…çŸ¥è¯†çš„æœ‰æ•ˆç»„ç»‡åŠæ‰©å±•æ€§ï¼Œéœ€è¦å¯¹æ…¢ç—…çŸ¥è¯†ä¸­æ¶‰åŠçš„åŒ»å­¦ä¸“ä¸šæœ¯è¯­è¿›è¡Œè§„èŒƒåŒ–ï¼Œä»¥ä¿è¯æ…¢ç—…ç›¸å…³çš„èµ„æ–™æ•°æ®éƒ½èƒ½å¤Ÿè¢«æœ‰æ•ˆåœ°æ”¶é›†å’Œå¤„ç†ã€‚ å› æ­¤ï¼Œä¸ºäº†å®ç°æ…¢ç—…æ²»ç–—ç›¸å…³çŸ¥è¯†çš„ä½“ç³»åŒ–ï¼Œéœ€è¦å¯¹æ…¢ç—…çŸ¥è¯†èµ„æºè¿›è¡Œæ”¶é›†ã€å½’ç±»ä¸æ•´ç†ï¼Œè¿‡æ»¤ä¸ç›¸å…³çš„å†…å®¹ï¼Œæ„å»ºå…³äºæ…¢ç—…è¯Šç–—çš„çŸ¥è¯†å›¾è°±ï¼Œä»è€Œå®ç°æ…¢ç—…çš„æ™ºèƒ½åŒ»ç–—ã€‚æ…¢ç—…çŸ¥è¯†å›¾è°±æ˜¯æ™ºèƒ½æ…¢ç—…è¾…åŠ©è¯Šæ–­ç³»ç»Ÿçš„åŸºç¡€ï¼Œå¯ä»¥åˆ©ç”¨çŸ¥è¯†å›¾è°±å’Œè‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯å°†ä¸åŒæ¥æºã€ä¸åŒç»“æ„çš„æ…¢ç—…çŸ¥è¯†ï¼Œä¾‹å¦‚ä¸´åºŠè·¯å¾„ã€è¯Šç–—è§„èŒƒç­‰æŒ‰ç…§ä¸€å®šçš„æ ‡å‡†(å¦‚ç—…æƒ…é˜¶æ®µç­‰)å’Œç»“æ„ç»“åˆæˆä¸€ä¸ªå¯ä¾›åˆ©ç”¨çš„æœ‰æœºçŸ¥è¯†ä½“ç³»ã€‚é€šè¿‡ä½¿ç”¨æ ¸å¿ƒçš„æ…¢ç—…çŸ¥è¯†åº“å’Œä¸æ–­åœ°æ”¶é›†æ‚£è€…çš„ä¸´åºŠè¯Šç–—æ•°æ®ã€æ—¥å¸¸ç›‘æµ‹æ•°æ®ä»¥åŠä¸“ç§‘ä½“æ£€æ•°æ®å’Œå„ç§è¾“å…¥çš„æ‚£è€…ç—‡çŠ¶æ•°æ®ç­‰ï¼Œé…åˆæ…¢ç—…çŸ¥è¯†åº“çš„è¯­ä¹‰åŒ¹é…ä¸æ¨ç†æŠ€æœ¯è¾…åŠ©ç¡®è®¤æ‚£è€…çš„æ…¢ç—…ç±»å‹ã€æ²»ç–—æ‰‹æ®µä¸è®¡åˆ’ã€æ…¢ç—…ä¿å¥å¸¸è¯†ä¸æ³¨æ„äº‹é¡¹ç­‰ã€‚ é¡¹ç›®ç ”ç©¶å†…å®¹ç ”ç©¶ç›®æ ‡å’Œå†…å®¹éšç€ç§‘å­¦æŠ€æœ¯çš„å‘å±•ï¼Œäººç±»ç¤¾ä¼šè¿›å…¥äº†ä¸€ä¸ªæ–°çš„æ—¶ä»£â€”â€”çŸ¥è¯†ç»æµæ—¶ä»£ï¼ŒçŸ¥è¯†çš„äº§ç”Ÿã€åˆ†é…ã€ä½¿ç”¨å’Œä¼ æ’­æˆä¸ºç»æµå¢é•¿çš„ä¸»è¦åŠ¨åŠ›ï¼Œä¼ä¸šçš„ç«äº‰ã€äº§ä¸šçš„ç«äº‰ã€ç»¼åˆå›½åŠ›çš„ç«äº‰ï¼Œé›†ä¸­è¡¨ç°ä¸ºç§‘æŠ€å‘å±•æ°´å¹³ã€ç®¡ç†æ°´å¹³å’ŒæŠ€æœ¯è½¬å˜ä¸ºç”Ÿäº§èƒ½åŠ›çš„ç«äº‰ã€‚ ä¸è®ºä½ æ˜¯ä¼ä¸šçš„æ–°å…µè¿˜æ˜¯è€å°†ï¼Œéƒ½å¯èƒ½é‡åˆ°ï¼šæ–°åŠ å…¥æŸé¡¹ç›®ç»„ï¼ŒæŸ¥æ‰¾ä¸åˆ°ç›¸å…³èµ„æ–™ï¼Œä¹Ÿæ²¡æœ‰å‰è¾ˆç‰¹åœ°ç»™ä½ ä¼ æˆç»éªŒï¼Œå¯¼è‡´è¿Ÿè¿Ÿä¸Šä¸äº†æ‰‹ï¼›é¡¹ç›®å¼€å‘ä¸­ï¼Œæƒ³å‘ä¼ä¸šé‡ŒæŸäº›æ–¹é¢çš„ä¸“å®¶è¯·æ•™ï¼Œå´ä¸çŸ¥è¯¥æ‰¾è°ï¼›è‡ªå·±å†™è¿‡æˆ–è§è¿‡çš„ä¸€ä»½æœ‰ä»·å€¼çš„æŠ¥å‘Šï¼Œåœ¨éœ€è¦æ—¶å´æ‰¾ä¸ç€äº†ï¼›ä¸€ä½ç¦»èŒåŒäº‹å¸¦èµ°äº†ä»–æ‰‹å¤´æ‰€æœ‰çš„å®¢æˆ·å…³ç³»ï¼Œä¼ä¸šå› æ­¤è’™å—å·¨å¤§æŸå¤±,è¿™äº›éƒ½æ˜¯çŸ¥è¯†ç®¡ç†è¿›é©»ä¼ä¸šä¹‹å‰å¸¸é‡åˆ°çš„å›°å¢ƒã€‚ ä»¥ä¸Šç§ç§é—®é¢˜ï¼Œç©¶å…¶åŸå› ï¼Œåœ¨äºçŸ¥è¯†çš„ç®¡ç†ï¼Œæ²¡æœ‰ä¸€ä¸ªå¯é çš„çŸ¥è¯†ç®¡ç†ä½“ç³»æ¥æ”¯æ’‘ã€‚2000å¹´å·¦å³ï¼ŒçŸ¥è¯†ç®¡ç†åœ¨ä¸­å›½è½åœ°ï¼Œè¿›å…¥åº”ç”¨é˜¶æ®µï¼Œåœ¨è½¯ä»¶å…¬å¸ã€å’¨è¯¢å…¬å¸ç­‰å®è·µä¼ä¸šçš„æ¨åŠ¨ä¸‹ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå¼€å§‹å…³æ³¨çŸ¥è¯†ç®¡ç†ï¼Œå¹¶æŠ•å…¥äººåŠ›ã€è´¢åŠ›å°†å…¶ä»˜è¯¸å®è·µã€‚ä½†ä¼ä¸šå®è·µçŸ¥è¯†ç®¡ç†è¿˜å¤„äºèµ·æ­¥é˜¶æ®µï¼Œè¿œä¸æˆç†Ÿã€‚ç‰¹åˆ«æ˜¯ä¸­å°å‹ä¼ä¸šï¼Œç”±äºè§„æ¨¡çš„é™åˆ¶ï¼Œå…¶çŸ¥è¯†ç®¡ç†æ€è·¯å’ŒçŸ¥è¯†ç®¡ç†ä½“ç³»éƒ½åªèƒ½åœ¨é™åˆ¶çš„èµ„æºä¸­å‘æŒ¥ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ªé€šç”¨æ€§ï¼Œå¼€æ”¾æ€§çš„äº§å“ï¼Œç”¨äºæå‡ä¼ä¸šåœ¨çŸ¥è¯†ç®¡ç†é¢†åŸŸçš„èƒ½åŠ›ã€‚ å› æ­¤ï¼Œè¯¥é¡¹ç›®ä¸ºä¼ä¸šåˆ¶å®šäº†ä¸€æ•´å¥—åŸºäºçŸ¥è¯†å›¾è°±å’Œäººå·¥æ™ºèƒ½é©±åŠ¨çš„çŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨çŸ¥è¯†ç®¡ç†ç³»ç»Ÿçš„åŸºç¡€ä¹‹ä¸Šï¼Œåˆ©ç”¨ç”³æŠ¥å•ä½ç°æœ‰çš„å¤§æ•°æ®æŠ€æœ¯ï¼Œå¢åŠ äº†çŸ¥è¯†å‘ç°å’ŒçŸ¥è¯†æœåŠ¡ç­‰æ–¹æ¡ˆã€‚ (1) çŸ¥è¯†ç®¡ç† ä¼ä¸šæœ‰å¾ˆå¤šæ•°æ®ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šä¸€ã€ä»¥äººä¸ºæ ¸å¿ƒçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œç½‘ç«™ä¸­ç”¨æˆ·çš„æµè§ˆè®°å½•ï¼Œä¸ªäººä¿¡æ¯ç­‰ï¼Œå®šä½æ•°æ®ä¸­äººçš„è½¨è¿¹è·¯å¾„ç­‰æ•°æ®ã€‚äºŒã€ä»¥æœºå™¨ä¸ºæ ¸å¿ƒçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿçš„è°ƒç”¨æ—¥å¿—ä¿¡æ¯ï¼Œåœ°é“ç®¡ç†ç³»ç»Ÿçš„è¿è¡Œæ—¥å¿—ç­‰ã€‚è¿™äº›æ•°æ®é€šå¸¸åŒ…æ‹¬ä¸°å¯Œè¯­è¨€(semantics)ä¸”æ˜¯å…³ç³»å‹æ•°æ®(relational data)ã€‚ä¸ºäº†ç®¡ç†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¼ä¸šçŸ¥è¯†å›¾è°±ã€‚é€šè¿‡å°†ä¼ä¸šæ•°æ®æ„å»ºæˆçŸ¥è¯†å›¾è°±ï¼Œå®ç°äº†ä¼ä¸šçš„çŸ¥è¯†ç®¡ç†ã€‚åŒæ—¶ï¼Œåœ¨ä¼ä¸šè‡ªèº«çš„çŸ¥è¯†ä¹‹ä¸Šï¼Œé€šè¿‡ç”³æŠ¥å•ä½çš„é«˜æ•ˆæ•°æ®çˆ¬è™«ï¼Œè·å–ä¸ä¼ä¸šçŸ¥è¯†é«˜åº¦ç›¸å…³è”çš„å¤šæºæ•°æ®ï¼Œç”¨ä»¥æ‰©å±•ä¼ä¸šçŸ¥è¯†å›¾è°±çš„å†…å®¹å’ŒèŒƒå›´ã€‚ (2) çŸ¥è¯†å‘ç° åœ¨ä¼ä¸šçŸ¥è¯†å›¾è°±çš„åŸºç¡€ä¸Šï¼Œæä¾›åŸºäºè‡ªç„¶è¯­è¨€çš„äººæœºäº¤äº’æ¥å£ï¼Œå³é€šè¿‡è‡ªç„¶è¯­è¨€é—®é¢˜è¿›è¡ŒçŸ¥è¯†å›¾è°±æŸ¥è¯¢å’Œé—®ç­”ï¼Œå®ç°äº†äººæœºæ™ºèƒ½äº¤äº’è·å–çŸ¥è¯†ã€‚åŒæ—¶ï¼Œé€šè¿‡æ·±åº¦å›¾å­¦ä¹ (deep graph learning)æŠ€æœ¯ï¼Œç»“åˆä¼ä¸šçŸ¥è¯†å›¾è°±å’Œå½“å‰ç³»ç»Ÿæ—¥å¿—åšæ¨ç†è¯Šæ–­å¦‚ï¼šç»“åˆçŸ¥è¯†å›¾è°±å’Œç”¨æˆ·çš„è¡Œä¸ºä¹ æƒ¯åšæ¨èç³»ç»Ÿï¼Œæˆ–è€…ç»“åˆçŸ¥è¯†å›¾è°±å’Œå½“åœ°åœ°é“è¿è¡Œæ—¥å¿—åšæ•…éšœè¯Šæ–­å’Œæ’æŸ¥ã€‚ (3)çŸ¥è¯†æœåŠ¡ æ™ºèƒ½è¿è¥ä¸»è¦é’ˆå¯¹ä»¥äººä¸ºæ ¸å¿ƒçš„æ•°æ®è¿›è¡Œäº§å“å†…å®¹è®¾è®¡ã€‚åŒ…æ‹¬ç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œç”¨æˆ·ç²˜åº¦æ§åˆ¶ï¼Œç”¨æˆ·é”€å”®ç­‰ã€‚ä¾‹å¦‚ï¼Œå¯¹äºç½‘ç«™ä¸­ç”¨æˆ·çš„æµè§ˆè®°å½•ï¼Œä¸ªäººä¿¡æ¯ç­‰ï¼Œå®šä½æ•°æ®ä¸­äººçš„è½¨è¿¹è·¯å¾„ç­‰æ•°æ®ï¼Œé€šè¿‡æ•°æ®åˆ†æäººçš„ç¤¾ä¼šå±æ€§ï¼Œç”Ÿæ´»ä¹ æƒ¯å’Œæ¶ˆè´¹è¡Œä¸ºç­‰ä¿¡æ¯è€ŒæŠ½åƒå‡ºçš„ä¸€ä¸ªæ ‡ç­¾åŒ–çš„ç”¨æˆ·ç”»åƒã€‚æˆ–è€…ï¼Œåœ¨é“¶è¡Œä¿¡ç”¨ä½“ç³»ä¸­ï¼Œé€šè¿‡å°†å€Ÿæ¬¾äººç›¸å…³çš„æ‰€æœ‰çš„æ•°æ®æºæ‰“é€šï¼Œå¹¶æ„å»ºåŒ…å«å¤šæ•°æ®æºçš„çŸ¥è¯†å›¾è°±ï¼Œå¦‚ï¼Œæ¶ˆè´¹è®°å½•ã€è¡Œä¸ºè®°å½•ã€ç½‘ä¸Šæµè§ˆè®°å½•ç­‰ã€‚ä»è€Œå¯¹å€Ÿæ¬¾äººè¿›è¡Œåˆ†æå’Œé¢„æµ‹ç­‰ã€‚æ™ºèƒ½è¿è¥å¯é€‚ç”¨äºåº”ç”¨é¢†åŸŸåŒ…æ‹¬åª’ä½“(ç”¨æˆ·ç”»åƒ)ï¼Œé‡‘è(æŠ•èµ„ï¼Œä¿é™©ï¼Œé£æ§)ï¼ŒåŒ»ç–—(å°±è¯Šï¼ŒåŒ»ç–—å’¨è¯¢)ã€‚ æ™ºèƒ½è¿ç»´ä¸»è¦é’ˆå¯¹ä»¥æœºå™¨ä¸ºæ ¸å¿ƒçš„æ•°æ®è¿›è¡Œçš„æ—¥å¿—æ£€æµ‹ï¼Œé”™è¯¯æ’æŸ¥ï¼Œé¢„æµ‹ç»´æŠ¤ç­‰ã€‚åœ¨å·¥ä¸šè¿‡ç¨‹ï¼Œå°¤å…¶æ˜¯æµç¨‹å·¥ä¸šï¼Œåœ¨åŒä¸€è¿‡ç¨‹ä¸­çš„ä¸åŒå˜é‡é—´å¾€å¾€å­˜åœ¨ç›¸äº’å…³è”çš„å…³ç³»ã€‚æ¯”å¦‚åœ¨åœ°é“ç³»ç»Ÿä¸­ï¼Œä¸»å¤„ç†å•å…ƒMPUã€å¸æœºå®¤æ™ºèƒ½æ˜¾ç¤ºå•å…ƒIDUã€ç‰µå¼•æ§åˆ¶å•å…ƒPCUç­‰ç­‰å¤šä¸ªæ¨¡å—ã€‚ä»ç›´è§‚ä¸Šçœ‹ï¼Œè¿™ç§å¤šå˜é‡é—´çš„å…³ç³»å˜åŒ–æ˜¯é”™ç»¼å¤æ‚çš„ã€‚è€ŒçŸ¥è¯†å›¾è°±è¿™ç§è¯­ä¹‰ç½‘ç»œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†å®ä½“å’Œå…³ç³»ï¼Œå³å˜é‡å’Œå˜é‡ä¹‹é—´çš„å…³ç³»ç”¨å›¾æ¥è¡¨è¾¾å’Œå­˜å‚¨ï¼Œè½¬åŒ–ä¸ºè®¡ç®—æœºå¯è¯»çš„çŸ¥è¯†ã€‚ä»è€Œåˆ©ç”¨æ·±åº¦å›¾å­¦ä¹ æŠ€æœ¯ï¼Œç ”å‘å‡ºçš„é”™è¯¯æ’æŸ¥ç³»ç»Ÿï¼Œå’Œé¢„æµ‹ç»´åº¦ç³»ç»Ÿã€‚æ™ºèƒ½èƒ½è¿ç»´å¯é€‚ç”¨äºåº”ç”¨é¢†åŸŸåŒ…æ‹¬äº¤é€š(é«˜é“ï¼Œåœ°é“)ï¼Œç”µä¿¡(åŸºç¡€è®¾æ–½ç®¡ç†)ï¼Œæµç¨‹å·¥ä¸š(é”™è¯¯æ£€æµ‹ï¼Œç›‘æ§ã€é¢„æµ‹)ç­‰ã€‚ é¡¹ç›®å®æ–½çš„æˆæœå°†åŠ©åŠ›ä¼ä¸šé«˜æ•ˆç‡ã€æ™ºèƒ½åŒ–çš„ç®¡ç†çŸ¥è¯†æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå½“æŸ¥æ‰¾ä¸åˆ°èµ„æ–™ï¼Œæœ‰é—®é¢˜æƒ³è¯·æ•™ä¸“å®¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨äººå·¥æ™ºèƒ½äº¤äº’ç³»ç»Ÿï¼Œè¿›è¡ŒæŸ¥è¯¢é—®ç­”ã€‚åœ¨æ€»å¤šå¤æ‚çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾æŸä»½æœ‰ä»·å€¼çš„æŠ¥å‘Šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨äººå·¥æ™ºèƒ½äº¤äº’ç³»ç»Ÿï¼Œè¿›è¡ŒæŸ¥è¯¢ã€‚åœ¨ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°é”™è¯¯æ—¶ï¼Œå¯ä»¥é€šè¿‡çŸ¥è¯†å›¾è°±æŸ¥è¯¢å“ªä¸ªå˜é‡å‡ºé”™å¯¼è‡´çš„é—®é¢˜ç­‰ã€‚ æ‹Ÿè§£å†³çš„å…³é”®æŠ€æœ¯é—®é¢˜çŸ¥è¯†ç®¡ç†å¤šæºæ•°æ®çš„çŸ¥è¯†æŠ½å–å’Œå…³è” é€šå¸¸è€Œè¨€ï¼ŒçŸ¥è¯†æŠ½å–æ˜¯æŒ‡ä»æ•°å­—èµ„æºä¸­è¯†åˆ«ã€å‘ç°å’Œæå–å‡ºæ¦‚å¿µã€ç±»å‹ã€äº‹å®ä»¥åŠç›¸å…³å…³ç³»ã€ç»“æŸè§„åˆ™ï¼Œä»¥åŠè¿›è¡Œé—®é¢˜æ±‚è§£çš„æ­¥éª¤ã€è§„åˆ™çš„è¿‡ç¨‹ã€‚ä¾æ®æ•°å­—èµ„æºç±»å‹çš„ä¸åŒï¼ŒçŸ¥è¯†æŠ½å–çš„æ¦‚å¿µæœ‰å¹¿ä¹‰å’Œç‹­ä¹‰ä¹‹åˆ†ã€‚å¹¿ä¹‰çš„çŸ¥è¯†æŠ½å–æ³›æŒ‡ä»å„ç§ç±»å‹çš„æ•°æ®å’Œä¿¡æ¯èµ„æºä¸­è·å–å„ç§çŸ¥è¯†çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚ä»æ•°å­—ä¿¡å·ä¸­ã€ä»å¤šç§åª’ä½“èµ„æº(å¦‚å›¾åƒã€æ•°æ®ã€è§†é¢‘ã€éŸ³é¢‘)ä¸­æŠ½å–å‡ºçŸ¥è¯†ï¼Œä»æ•°æ®é›†ä¸­å‘ç°é‡è¦æ¨¡å¼çš„è¿‡ç¨‹ç­‰ã€‚ ç‹­ä¹‰çš„çŸ¥è¯†æŠ½å–æ˜¯æŒ‡ä»éç»“æ„åŒ–çš„è‡ªç”±æ–‡æœ¬ä¸­è·å–ç›¸å…³çŸ¥è¯†å†…å®¹çš„è¿‡ç¨‹ã€‚ä¸å¹¿ä¹‰çŸ¥è¯†æŠ½å–é’ˆå¯¹å„ç§ç±»å‹æ•°æ®çš„æƒ…å†µä¸åŒï¼Œç‹­ä¹‰çš„çŸ¥è¯†æŠ½å–åŸºæœ¬ä¸Šå±äºæ–‡æœ¬æŒ–æ˜çš„èŒƒç•´ï¼Œå…¶å¤„ç†çš„å¯¹è±¡æ˜¯è‡ªç”±æ–‡æœ¬ï¼Œç›®æ ‡æ˜¯åˆ†ææ–‡æœ¬å†…å®¹ï¼Œé€šè¿‡è¯†åˆ«æ–‡æœ¬ä¸­çš„çŸ¥è¯†ç‰‡æ®µ(Knowledge Fragments)ï¼Œä¿ƒè¿›å¯¹æ–‡æœ¬å†…å®¹çš„ç†è§£ã€‚ ç›®å‰ï¼Œå¸‚é¢ä¸Šå¤§éƒ¨åˆ†çš„çŸ¥è¯†æŠ½å–æ–¹æ³•å°šå¤„åœ¨ç‹­ä¹‰çš„çŸ¥è¯†æŠ½å–ä¸Šï¼Œå³ä»…ä»…å¯¹æ–‡æœ¬æ•°æ®è¿›è¡Œåˆ†æã€æŒ–æ˜ã€‚ç„¶è€Œç›®å‰å¯¹äºä¼ä¸šæ¥è¯´ï¼Œæ•°æ®çš„ç±»å‹ä¸ä»…ä»…æ˜¯æ–‡æœ¬æ–‡æ¡£ç±»å‹çš„ç»“æ„åŒ–æ•°æ®ï¼Œå…¶ä¸­è¿˜åŒ…å«äº†å¤§é‡çš„éç»“æ„åŒ–ã€åŠç»“æ„åŒ–æ•°æ®ç­‰ï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œè§†é¢‘ç­‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœçŸ¥è¯†æŠ½å–ä¸èƒ½ä»ç‹­ä¹‰çš„çŸ¥è¯†æŠ½å–æ¨å¹¿åˆ°å¹¿ä¹‰çš„çŸ¥è¯†æŠ½å–ï¼Œåœ¨å®é™…åº”ç”¨ä¸­å¯¹ä¼ä¸šçš„æ•ˆç›Šæœ‰é™ã€‚ çŸ¥è¯†æŸ¥è¯¢ä¸å‘ç°(1)åŸºäºçŸ¥è¯†è¡¨ç¤ºçš„çŸ¥è¯†æ¨ç†æ–¹æ³• ä¸ºäº†ä½¿è®¡ç®—æœºå…·æœ‰æ™ºèƒ½ï¼Œä»…ä»…ä½¿è®¡ç®—æœºæ‹¥æœ‰çŸ¥è¯†æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜å¿…é¡»ä½¿å®ƒå…·æœ‰æ€ç»´èƒ½åŠ›ã€æ¨ç†èƒ½åŠ›ã€‚å³èƒ½å¤Ÿè¿ç”¨å·²çŸ¥çš„çŸ¥è¯†æ¨ç†é—®é¢˜ï¼Œæ±‚è§£é—®é¢˜ã€‚æ‰€ä»¥çŸ¥è¯†æ¨ç†ä¹Ÿæ˜¯äººå·¥æ™ºèƒ½ç ”ç©¶çš„é‡ç‚¹ã€‚ ç›®å‰çš„çŸ¥è¯†çš„è¡¨ç¤ºæ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¦‚ï¼šè°“è¯é€»è¾‘ã€äº§ç”Ÿå¼è§„åˆ™ã€è¯­ä¹‰ç½‘ç»œå’Œæ¡†æ¶ç­‰ç­‰ï¼Œè¿™äº›çŸ¥è¯†è¡¨ç¤ºå„æœ‰å„çš„ç‰¹ç‚¹ï¼Œå¦‚ç”Ÿäº§å¼çš„è‡ªç„¶æ€§ï¼Œè¯­ä¹‰ç½‘ç»œçš„å±‚æ¬¡æ€§ï¼Œæ¡†æ¶çš„é€šç”¨æ€§ï¼Œæ¨¡ç³Šé€»è¾‘å¯¹æ¨¡ç³ŠçŸ¥è¯†çš„é€‚ç”¨æ€§ç­‰ï¼Œå®ƒä»¬éƒ½åœ¨æ™ºèƒ½ç³»ç»Ÿä¸­å‘æŒ¥äº†é‡è¦çš„ä½œç”¨ã€‚ä½†å®ƒä»¬ä¹Ÿå„æœ‰å…¶å±€é™æ€§ï¼Œå¦‚äº§ç”Ÿå¼è§„åˆ™ç”¨äºè¡¨è¾¾è¡¨å±‚çŸ¥è¯†ï¼Œè€Œè¡¨è¾¾æ·±å±‚çŸ¥è¯†åˆ™ååˆ†å›°éš¾ã€‚æ¡†æ¶çš„å›ºå®šå¼ä½¿è®¸å¤šè¡¨è¾¾ç»“æœä¸åŸå‹ä¸ç¬¦ç­‰ç­‰ã€‚çŸ¥è¯†è¡¨ç¤ºçš„èƒ½åŠ›ç›´æ¥å½±å“äº†æ¨ç†çš„æœ‰æ•ˆæ€§å’ŒçŸ¥è¯†è·å–çš„èƒ½åŠ›ã€‚å› æ­¤ï¼Œç›®å‰æ™ºèƒ½é—®ç­”ç³»ç»Ÿæ„é€ ä¸­é¢ä¸´äº†ä¸€äº›è¾ƒè¿«åˆ‡éœ€è¦è§£å†³çš„é—®é¢˜ã€‚ä¸€æ˜¯çŸ¥è¯†åº“ä¸­çŸ¥è¯†çš„å®¹é‡å’Œè´¨é‡é—®é¢˜ã€‚è¿™åŒ…æ‹¬ä¸åŒæ•°æ®ç»“æ„çš„çŸ¥è¯†è·å–ï¼Œéœ€è¦è®¾è®¡å‡ºæœ‰æ•ˆè€Œä¸”ä½¿ç”¨ç»å¤§éƒ¨åˆ†æ•°æ®ç»“æ„çš„çŸ¥è¯†è¡¨ç¤ºï¼›äºŒæ˜¯ç°æœ‰çš„é—®ç­”ç³»ç»Ÿå¾ˆå°‘æœ‰è‡ªå­¦æ¨ç†èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œåœ¨åŸºäºçŸ¥è¯†å›¾è°±çš„é—®é¢˜ç³»ç»Ÿä¸­ï¼Œåœ¨é—®ç­”æ—¶çŸ¥è¯†æ—¶ï¼Œç°åœ¨çš„åšæ³•é€šå¸¸æ˜¯ç®€å•çš„ä»é—®é¢˜é‡Œè§£æå‡ºè¯é¢˜å®ä½“(topic entity)å’Œå¯¹åº”çš„å…³ç³»(relations)ï¼Œç„¶ååœ¨çŸ¥è¯†å›¾è°±ä¸Šåšæ£€ç´¢ï¼Œå³ä»è¯é¢˜å®ä½“æ²¿ç€å¯¹åº”çš„å…³ç³»èµ°åˆ°ç›®æ ‡å®ä½“ï¼Œç„¶åè¿”å›ï¼Œç¼ºä¹å¯¹çŸ¥è¯†å›¾è°±è¿›è¡Œæ¨ç†çš„åŠŸèƒ½ã€‚ æ‰€ä»¥å¦‚æœçŸ¥è¯†å›¾è°±å­˜åœ¨ä¸ç¡®å®šå…³ç³»(å³ä»é—®é¢˜ä¸­è§£æå¾—åˆ°çš„æŸä¸ªå…³ç³»é“¾åœ¨çŸ¥è¯†å›¾è°±ä¸Šä¸å­˜åœ¨)ï¼Œè¿™ç§æ£€ç´¢æœ‰å¾ˆå¤§å¤§æœºä¼šä¸èƒ½å¾—åˆ°æœ‰æ•ˆçš„ç­”æ¡ˆï¼› åŒæ—¶ï¼Œç°åœ¨çš„åšæ³•é€šå¸¸è®¤ä¸ºçŸ¥è¯†å›¾è°±ä¸Šçš„å…³ç³»(relations)æ˜¯ç¦»æ•£çš„ï¼Œå·²ç»å®šä¹‰å¥½çš„è°“è¯(predicates)ï¼›ä½†å®é™…ä¼ä¸šçŸ¥è¯†å›¾è°±ä¸­ï¼Œå¾ˆå¯èƒ½å®ä½“ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€å †è‡ªç„¶è¯­è¨€æ–‡æœ¬(æ¯”å¦‚ä¸Šä¸‹æ–‡)ï¼Œè€Œä¸æ˜¯è°“è¯ï¼Œæ‰€ä»¥ç°åœ¨çš„åšæ³•(å³é€šè¿‡è¯é¢˜å®ä½“ï¼è°“è¯ï¼‘ï¼è°“è¯ï¼’ï¼ç›®æ ‡å®ä½“è¿›è¡Œæ£€ç´¢)ä¹Ÿä¸é€‚ç”¨ã€‚ (2)é¢å‘è‡ªç„¶è¯­è¨€çš„å›¾æŸ¥è¯¢æŠ€æœ¯ ç°åœ¨åŸºäºçŸ¥è¯†å›¾è°±çš„é—®ç­”ç³»ç»Ÿä¸»è¦æœ‰ä¸¤å¤§ç±»æ–¹æ³•ï¼šåŸºäºæ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯çš„è®­ç»ƒå’ŒåŸºäºè§„åˆ™çš„çŸ¥è¯†åº“çš„åŒ¹é…ã€‚ä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•éƒ½å­˜åœ¨ç€ç¼ºé™·ï¼ŒåŸºäºè§„åˆ™çš„çŸ¥è¯†åº“çš„åŒ¹é…é¢å¯¹è‡ªç„¶è¯­è¨€å¤„ç†çš„æ—¶å€™ç¼ºä¹æ³›åŒ–æ€§ï¼Œå¯¹äºå‡ºç°è§„åˆ™ä¸­æ²¡èƒ½åŒ¹é…çš„ç‰¹å¾æ— èƒ½ä¸ºåŠ›ã€‚åŸºäºæ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯çš„ç­”æ¡ˆç”Ÿæˆè™½ç„¶è§£å†³äº†è§„åˆ™åŒ¹é…çš„æ³›åŒ–æ€§é—®é¢˜ï¼Œä½†ç”±äºè‡ªç„¶è¯­è¨€çš„å¼€æ”¾æ€§ï¼Œé€šå¸¸æ— æ³•å¾ˆå¥½çš„ç»™å‡ºå‡†ç¡®çš„å›ç­”ï¼ŒåŒæ—¶å¯¹è®­ç»ƒæ ·æœ¬æ•°é‡è¦æ±‚å¾ˆé«˜ï¼Œæ— æ³•åˆ©ç”¨ç°æœ‰çš„çŸ¥è¯†åº“ã€‚ çŸ¥è¯†æœåŠ¡å¤§è§„æ¨¡æ•°æ®å¤„ç†èƒ½åŠ› åœ¨äº’è”ç½‘æ—¶ä»£ä¿¡æ¯å‘ˆç°çˆ†ç‚¸æ€§çš„å¢é•¿ã€‚åœ¨ç§‘å­¦é¢†åŸŸã€å·¥ç¨‹é¢†åŸŸä»¥åŠå•†ä¸šè®¡ç®—é¢†åŸŸæ¯å¤©äº§ç”Ÿå¤§é‡çš„æ•°æ®ã€‚æ®ä¸å®Œå…¨ç»Ÿè®¡æŠ¥å‘Šï¼Œ2016å¹´å…¨çƒä¿¡æ¯é‡å·²è¾¾åˆ°äº†25ZB(ç›¸å½“äº2.5ä¸‡äº¿GB)ï¼Œå‚¨å­˜å•ä½ä»å°åˆ°å¤§ä¾æ¬¡æ˜¯B,KB,NB,GB,TB,PB,EB,ZB,YBï¼ŒIDCæŠ¥å‘Šæ˜¾ç¤ºï¼Œé¢„è®¡åˆ°2020å¹´å…¨çƒæ•°æ®æ€»é‡å°†è¶…è¿‡40ZBï¼Œè¿™ä¸€æ•°æ®é‡æ˜¯2011å¹´çš„22å€ã€‚å¦‚æ­¤æµ·é‡æ•°æ®ç»™è®¡ç®—æœºæ•°æ®çš„å­˜å‚¨å’Œè®¡ç®—å¸¦æ¥äº†ä¸¥å³»çš„æŒ‘æˆ˜ï¼Œå®é™…å¯¹è®¡ç®—èƒ½åŠ›çš„éœ€æ±‚è¿œè¶…è‡ªèº«ITæ¶æ„çš„è®¡ç®—èƒ½åŠ›ï¼Œä¼ ç»Ÿçš„æ–¹å¼æ˜¯ä¸æ–­åœ°åŠ å¤§ç¡¬ä»¶æŠ•å…¥æ¥é€‚åº”å¤§æ•°æ®çš„å¢é•¿ã€‚ä½†æ˜¯ç”±äºä¼ ç»Ÿå¹¶è¡Œç¼–ç¨‹æ¨¡å‹çš„å¤æ‚æ€§ï¼Œè¿™æ— ç–‘é™åˆ¶äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†ç³»ç»Ÿçš„æ˜“ç»´æŠ¤æ€§ã€‚é¢å¯¹æ­¤ç§æƒ…å†µï¼Œè¿™å°±è¿«åˆ‡çš„éœ€è¦ä¸€ç§å…¨æ–°çš„å¹¶è¡Œè®¡ç®—æ¡†æ¶ã€‚ ä¸»è¦åˆ›æ–°ç‚¹åœ¨é¡¹ç›®ä¸­åˆ†ä¸ºäº†ä¸‰ä¸ªéƒ¨åˆ†ï¼ŒçŸ¥è¯†ç®¡ç†ï¼ŒçŸ¥è¯†å‘ç°å’ŒçŸ¥è¯†æœåŠ¡ï¼›åœ¨çŸ¥è¯†ç®¡ç†å±‚ä¸­ï¼Œä¼ä¸šçš„æ•°æ®ä¸ä»…ä»…ä¸ºæ–‡æœ¬ç±»å‹çš„ç»“æ„åŒ–æ•°æ®ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬äº†å¤§é‡çš„éç»“æ„åŒ–æ•°æ®ã€åŠç»“æ„åŒ–æ•°æ®ï¼Œä¾‹å¦‚æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚ä¸ºäº†ä»è¿™äº›å¤šæºçš„æ•°æ®ä¸­æŠ½å–çŸ¥è¯†ï¼Œä½¿ç”¨ç»“æ„åŒ–å®ä½“ç»“åˆåŠç»“æ„åŒ–ã€éç»“æ„åŒ–æ–‡æœ¬æˆ–å¤šåª’ä½“çš„å¼¹æ€§è¡¨å¾æ–¹å¼ï¼Œä»¥åº”å¯¹ä¼ä¸šçš„å¤šæºå¼‚æ„æ•°æ®ï¼›åˆ©ç”¨é›†æˆå­¦ä¹  (ensemble learning)æ¡†æ¶æ¥æœ‰æ•ˆç»“åˆå¤šç§å®ä½“æŠ½å–å·¥å…·ï¼Œä»¥è·å–æœ€å¥½çš„å®ä½“æŠ½å–æ•ˆæœã€‚åŒæ—¶ï¼Œé‡‡ç”¨äº†åˆ©ç”¨æ··åˆåŒ¹é…(hybrid matching)çš„æ¡†æ¶ï¼Œå³ç»“åˆæ¨¡å¼åŒ¹é…å’Œå®ä¾‹åŒ¹é…ï¼Œæ¥å®ç°æœ‰æ•ˆçš„å®ä½“å…³è”å’Œæ•°æ®å…³è”ï¼Œä»è€Œå°†å¤šæºçš„çŸ¥è¯†è¿›è¡ŒçŸ¥è¯†èåˆï¼Œå»ºç«‹ä¼ä¸šçŸ¥è¯†å›¾è°±ï¼Œå®ç°çŸ¥è¯†ç®¡ç†ã€‚åœ¨çŸ¥è¯†å‘ç°å±‚ä¸­ï¼Œä¸ºäº†èƒ½å¤Ÿå®ç°å¯¹å›¾æ•°æ®åº“å¿«é€ŸæŸ¥è¯¢ã€æ£€ç´¢ï¼Œåˆ©ç”¨æ·±åº¦å›¾å­¦ä¹ (deep graph learning)æŠ€æœ¯å’Œè‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯ï¼Œå°†è‡ªç„¶è¯­è¨€é—®é¢˜ç¿»è¯‘æˆSQLæŸ¥è¯¢è¯­å¥ï¼Œå³ç­”æ¡ˆå¯ä»¥ç›´æ¥é€šè¿‡å›¾æ•°æ®åº“æŸ¥è¯¢å¾—åˆ°ã€‚åŒæ—¶ï¼Œä¸ºäº†ä½¿å¾—æ£€ç´¢è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æœºèƒ½å¤Ÿæœ‰æ™ºèƒ½æ¨ç†çš„èƒ½åŠ›ï¼Œé‡‡ç”¨äº†åŸºäºç¿»è¯‘æ¨¡å‹(Transç³»åˆ—)çš„æ–¹æ³•å°†è‡ªç„¶è¯­è¨€é—®é¢˜ç¿»è¯‘æˆå›¾æ¨ç†æŸ¥è¯¢è¯­å¥ï¼Œå³ç­”æ¡ˆéœ€è¦é€šè¿‡å›¾æ•°æ®çš„é€»è¾‘æ¨ç†å¾—åˆ°ã€‚åœ¨çŸ¥è¯†æœåŠ¡å±‚ä¸­ï¼Œä¸ºäº†è§£å†³æ•°æ®çš„å­˜å‚¨å’Œè®¡ç®—é—®é¢˜ï¼Œåˆ›å»ºäº†ä¸€ç§åŸºäºCPUå’ŒGPUçš„åˆ†å¸ƒå¼æ··åˆæ¶æ„ã€‚ åŸºäºå¤šæºæ•°æ®çš„çŸ¥è¯†æŠ½å–æ–¹æ³•çŸ¥è¯†æŠ½å–ä¸»è¦åŒ…æ‹¬å®ä½“æŠ½å–å’Œå…³ç³»æŠ½å–ã€‚çŸ¥è¯†æŠ½å–æ˜¯çŸ¥è¯†æ„å»ºä¸­æœ€é‡è¦å¾—ä¸€ç¯ã€‚æœ¬é¡¹ç›®é‡‡ç”¨äº†é›†æˆå­¦ä¹ ( ensemble learning)çš„æ¡†æ¶ï¼Œå› æ­¤åœ¨çŸ¥è¯†æŠ½å–è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹å¤šæºçš„æ•°æ®åº”ç”¨äº†ä¸åŒçš„å®ä½“æŠ½å–å·¥å…·ã€‚å…¶ä¸­ï¼Œå¯¹äºæ–‡æœ¬æ•°æ®ï¼Œä¸»è¦é‡‡ç”¨åŒå±‚çš„ LSTM-RNN æ¨¡å‹è¿›è¡ŒçŸ¥è¯†æŠ½å–ï¼›å¯¹äºå›¾åƒå’Œè§†é¢‘æ•°æ®ï¼Œä¸»è¦é‡‡ç”¨äº†Fast RCNNæ¨¡å‹å¯¹å›¾åƒè¿›è¡Œè¯­ä¹‰åˆ†å‰²(Image Sematic Segmentation)ï¼Œä»è€Œå®ç°å®ä½“çš„æŠ½å–ã€‚ (1) åŸºäºåŒå±‚çš„ LSTM-RNN æ¨¡å‹ã€‚ç¬¬ä¸€å±‚ LSTM è¾“å…¥çš„æ˜¯è¯å‘é‡ã€ä½ç½®ç‰¹å¾å’Œè¯æ€§æ¥è¯†åˆ«å®ä½“çš„ç±»å‹ã€‚è®­ç»ƒå¾—åˆ°çš„ LSTM ä¸­éšè—å±‚çš„åˆ†å¸ƒå¼è¡¨è¾¾å’Œå®ä½“çš„åˆ†ç±»æ ‡ç­¾ä¿¡æ¯ä½œä¸ºç¬¬äºŒå±‚ RNN æ¨¡å‹çš„è¾“å…¥ï¼Œç¬¬äºŒå±‚çš„è¾“å…¥å®ä½“ä¹‹é—´çš„ä¾å­˜è·¯å¾„ï¼Œç¬¬äºŒå±‚è®­ç»ƒå¯¹å…³ç³»çš„åˆ†ç±»ï¼Œé€šè¿‡ç¥ç»ç½‘ç»œåŒæ—¶ä¼˜åŒ– LSTM å’Œ RNN çš„æ¨¡å‹å‚æ•°ã€‚ (2)åŸºäºFast RCNNæ¨¡å‹çš„å›¾åƒè¯­ä¹‰åˆ†å‰²ã€‚Faster RCNN æ˜¯åœ¨Region CNNç®—æ³•ä¹‹ä¸Šæ”¹è¿›è€Œæˆã€‚ä¸»è¦åŒ…æ‹¬å››ä¸ªæ­¥éª¤å€™é€‰åŒºåŸŸç”Ÿæˆï¼Œç‰¹å¾æå–ï¼Œåˆ†ç±»ï¼Œä½ç½®ç²¾ä¿®ã€‚é‡è¦æ­¥éª¤å¦‚ä¸‹ï¼šé€šè¿‡å¤šä¸ªå°ºåº¦çš„çª—å£é€‰æ‹©æ€§æœç´¢ï¼Œå¹¶æœå¯»å…±äº«çº¹ç†ã€é¢œè‰²æˆ–å¼ºåº¦çš„ç›¸é‚»åƒç´ ï¼Œåˆ›é€ äº†è¿™äº›è¾¹ç•Œæ¡†ï¼Œæˆ–è€…åŒºåŸŸææ¡ˆ(region proposal)å…³äºè¿™ä¸ªè¢«ç§°ä¸ºé€‰æ‹©æ€§æœç´¢(Selective Search)çš„æ–¹æ³•ï¼Œé€‰æ‹©æ€§æœç´¢é€šè¿‡ä¸åŒå°ºå¯¸çš„çª—å£æŸ¥çœ‹å›¾åƒï¼Œå¹¶ä¸”å¯¹äºä¸åŒå°ºå¯¸ï¼Œå…¶å°è¯•é€šè¿‡çº¹ç†ã€é¢œè‰²æˆ–å¼ºåº¦å°†ç›¸é‚»åƒç´ å½’ç±»ï¼Œä»¥è¯†åˆ«ç‰©ä½“ã€‚åœ¨åˆ›å»ºä¸€ç»„åŒºåŸŸææ¡ˆ(region proposal)åï¼ŒFast R-CNN åªéœ€å°†å›¾åƒä¼ é€’ç»™ä¸€ä¸ªè®­ç»ƒå¥½çš„å·ç§¯ç¥ç»ç½‘ç»œä»¥ç¡®å®šå…¶æ˜¯å¦ä¸ºæœ‰æ•ˆåŒºåŸŸï¼Œç„¶åå†é€šè¿‡SVMæŸ¥çœ‹æ¡†å›¾åƒç›®æ ‡ï¼Œæœ€å é€šè¿‡çº¿æ€§å›å½’æ¨¡å‹è¿è¡Œè¾¹æ¡†ï¼Œä¸€æ—¦ç›®æ ‡å®Œæˆåˆ†ç±»ï¼Œè¾“å‡ºè¾¹æ¡†çš„æ›´ç´§å¯†çš„åæ ‡ã€‚ Fast R-CNN å°†å·ç§¯ç¥ç»ç½‘ç»œ(CNN)ï¼Œåˆ†ç±»å™¨å’Œè¾¹ç•Œæ¡†å›å½’å™¨ç»„åˆä¸ºä¸€ä¸ªç®€å•çš„ç½‘ç»œã€‚Fast R-CNN åœ¨å•ä¸€æ¨¡å‹ä¸­è”åˆè®­ç»ƒå·ç§¯ç¥ç»ç½‘ç»œã€åˆ†ç±»å™¨å’Œè¾¹ç•Œæ¡†å›å½’å™¨ã€‚ä¹‹å‰æœ‰ä¸åŒçš„æ¨¡å‹æ¥æå–å›¾åƒç‰¹å¾(CNN)ï¼Œåˆ†ç±»(SVM)å’Œç´§ç¼©è¾¹ç•Œæ¡†(å›å½’å™¨)ï¼Œè€Œ Fast R-CNN ä½¿ç”¨å•ä¸€ç½‘ç»œè®¡ç®—ä¸Šè¿°ä¸‰ä¸ªæ¨¡å‹ã€‚ å¤šæºæ•°æ®èåˆå¤šæºæ•°æ®èåˆå¯¹çŸ¥è¯†åº“çš„æ„å»ºæ˜¯éå¸¸é‡è¦ï¼Œä¸ä¼ ç»Ÿæ•°æ®èåˆ(data fusion)ä»»åŠ¡çš„ä¸»è¦ä¸åŒæ˜¯ï¼ŒçŸ¥è¯†èåˆå¯èƒ½ä½¿ç”¨å¤šä¸ªçŸ¥è¯†æŠ½å–å·¥å…·ä¸ºæ¯ä¸ªæ•°æ®é¡¹ä»æ¯ä¸ªæ•°æ®æºä¸­æŠ½å–ç›¸åº”çš„å€¼ï¼Œè€Œæ•°æ®èåˆæœªè€ƒè™‘å¤šä¸ªæŠ½å–å·¥å…·ã€‚å¤šæºæ•°æ®èåˆå¯ä»¥ä¸°å¯ŒçŸ¥è¯†åº“ï¼Œä½¿å¾—çŸ¥è¯†åº“å¯ä»¥è¡¨ç¤ºçš„ç»´åº¦æ›´å¤šã€‚ çŸ¥è¯†èåˆåŒ…æ‹¬äº†æœ¬ä½“çš„èåˆå’Œå®ä¾‹çš„èåˆã€‚åœ¨çŸ¥è¯†èåˆæŠ€æœ¯ä¸­ï¼Œæœ¬ä½“åŒ¹é…æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œæä¾›äº†æ¦‚å¿µæˆ–è€…å®ä½“ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚æœ¬ä½“åŒ¹é…ç®—æ³•ï¼Œä¸€èˆ¬å¯ä»¥åˆ†ä¸ºæ¨¡å¼åŒ¹é…(schema matching)å’Œå®ä¾‹åŒ¹é…(instance matching)ã€‚æœ¬é¡¹ç›®é‡‡ç”¨äº†æ··åˆåŒ¹é…(hybrid matching)çš„æ¡†æ¶ï¼Œå³æ¨¡å¼åŒ¹é…å’Œå®ä¾‹åŒ¹é…ç›¸ç»“åˆçš„æ–¹æ³•è¿›è¡ŒçŸ¥è¯†èåˆï¼Œå¯¹äºæ–‡æœ¬ç±»æ•°æ®ä¸»è¦é‡‡ç”¨æ¨¡å¼åŒ¹é…ï¼Œå¯¹äºå›¾ç‰‡è§†é¢‘ç­‰å…¶ä»–ç±»å‹æ•°æ®ä¸»è¦é‡‡ç”¨å®ä¾‹åŒ¹é…ã€‚ æ¨¡å¼åŒ¹é…ä¸»è¦å¯»æ‰¾æœ¬ä½“ä¸­å±æ€§å’Œæ¦‚å¿µä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚æœ¬é¡¹ç›®é‡‡ç”¨è‡ªåŠ¨çš„è¯­ä¹‰åŒ¹é…æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é¦–å…ˆåˆ©ç”¨åƒWordNetä¹‹ç±»çš„è¯å…¸ä»¥åŠæœ¬ä½“çš„ç»“æ„ç­‰ä¿¡æ¯è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œç„¶åå°†ç»“æœæ ¹æ®åŠ æƒå¹³å‡çš„æ–¹æ³•æ•´åˆèµ·æ¥ï¼Œå†åˆ©ç”¨ä¸€äº›æ¨¡å¼(patterns)è¿›è¡Œä¸€è‡´æ€§æ£€æŸ¥ï¼Œå»é™¤é‚£äº›å¯¼è‡´ä¸ä¸€è‡´çš„å¯¹åº”å…³ç³»ã€‚è¯¥è¿‡ç¨‹å¯å¾ªç¯çš„ï¼Œç›´åˆ°ä¸å†æ‰¾åˆ°æ–°çš„å¯¹åº”å…³ç³»ä¸ºæ­¢ã€‚åŒæ—¶å…ˆå®ç°è¿‡ç¨‹ä¸­ä¹Ÿè€ƒè™‘å¤šç§åŒ¹é…ç®—æ³•çš„ç»“åˆï¼Œåˆ©ç”¨åŸºäºæœ¯è¯­çš„ä¸€äº›ç›¸ä¼¼åº¦è®¡ç®—ç®—æ³•ï¼Œä¾‹å¦‚ n-gram å’Œç¼–è¾‘è·ç¦»ï¼Œè¿™é‡Œç®—æ³•è®¡ç®—çš„ç»“æœæ ¹æ®åŠ æƒæ±‚å’Œè¿›è¡Œåˆå¹¶ï¼Œè¿˜è€ƒè™‘äº†æ¦‚å¿µçš„å±‚æ¬¡å…³ç³»å’Œä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œæœ€åé€šè¿‡ç”¨æˆ·å®šä¹‰çš„æƒé‡è¿›è¡Œåˆå¹¶ã€‚ å®ä¾‹åŒ¹é…æ˜¯è¯„ä¼°å¼‚æ„çŸ¥è¯†æºä¹‹é—´å®ä¾‹å¯¹çš„ç›¸ä¼¼åº¦ï¼Œç”¨æ¥åˆ¤æ–­è¿™äº›å®ä¾‹æ˜¯å¦æŒ‡å‘ç»™å®šé¢†åŸŸçš„ç›¸åŒå®ä½“ã€‚é¦–å…ˆä½¿ç”¨å‘é‡ç©ºé—´æ¨¡å‹è¡¨ç¤ºå®ä¾‹çš„æè¿°æ€§ä¿¡æ¯ï¼Œå†åŸºäºè§„åˆ™é‡‡ç”¨å€’æ’ç´¢å¼•(inverted indexes)è·å–æœ€åˆçš„åŒ¹é…å€™é€‰ï¼Œåœ¨ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„å±æ€§å€¼å¯¹å€™é€‰è¿›è¡Œè¿‡æ»¤ï¼Œæœ€åè®¡ç®—å‡ºçš„åŒ¹é…å€™é€‰ç›¸ä¼¼åº¦ç”¨æ¥ä½œä¸ºæ•´åˆçš„å‘é‡è·ç¦»ï¼Œç”±æ­¤æŠ½å–å‡ºåŒ¹é…ç»“æœã€‚ åŸºäºçŸ¥è¯†è¡¨ç¤ºçš„çŸ¥è¯†æ¨ç†æ–¹æ³•çŸ¥è¯†åº“æ¨ç†å¯ä»¥åˆ†ä¸ºåŸºäºç¬¦å·çš„æ¨ç†å’ŒåŸºäºç»Ÿè®¡çš„æ¨ç†ã€‚åŸºäºç¬¦å·çš„æ¨ç†ä¸€èˆ¬æ˜¯åŸºäºç»å…¸é€»è¾‘(ä¸€é˜¶è°“è¯é€»è¾‘æˆ–è€…å‘½é¢˜é€»è¾‘)æˆ–è€…ç»å…¸é€»è¾‘çš„å˜å¼‚(æ¯”å¦‚è¯´ç¼ºçœé€»è¾‘)ã€‚åŸºäºç¬¦å·çš„æ¨ç†å¯ä»¥ä»ä¸€ä¸ªå·²æœ‰çš„çŸ¥è¯†å›¾è°±ï¼Œåˆ©ç”¨è§„åˆ™ï¼Œæ¨ç†å‡ºæ–°çš„å®ä½“é—´å…³ç³»ï¼Œè¿˜å¯ä»¥å¯¹çŸ¥è¯†å›¾è°±è¿›è¡Œé€»è¾‘çš„å†²çªæ£€æµ‹ã€‚åŸºäºç»Ÿè®¡çš„æ–¹æ³•ä¸€èˆ¬æŒ‡å…³ç³»æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡ç»Ÿè®¡è§„å¾‹ä»çŸ¥è¯†å›¾è°±ä¸­å­¦ä¹ åˆ°æ–°çš„å®ä½“é—´å…³ç³»ã€‚ æœ¬é¡¹ç›®é‡‡ç”¨åŸºäºç¿»è¯‘æ¨¡å‹(Transç³»åˆ—)çš„çŸ¥è¯†è¡¨ç¤ºå­¦ä¹ æ¥è§£å†³çŸ¥è¯†æ¨ç†é—®é¢˜ã€‚è¡¨ç¤ºå­¦ä¹ æ—¨åœ¨å°†ç ”ç©¶å¯¹è±¡çš„è¯­ä¹‰ä¿¡æ¯è¡¨ç¤ºä¸ºç¨ å¯†ä½ç»´å®å€¼å‘é‡ï¼ŒçŸ¥è¯†è¡¨ç¤ºå­¦ä¹ ä¸»è¦æ˜¯é¢å‘çŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“å’Œå…³ç³»è¿›è¡Œè¡¨ç¤ºå­¦ä¹ ã€‚ä½¿ç”¨å»ºæ¨¡æ–¹æ³•å°†å®ä½“å’Œå‘é‡è¡¨ç¤ºåœ¨ä½ç»´ç¨ å¯†å‘é‡ç©ºé—´ä¸­ï¼Œç„¶åè¿›è¡Œè®¡ç®—å’Œæ¨ç†ã€‚ç¿»è¯‘æ¨¡å‹åŒ…æ‹¬äº†TransEã€TransRã€TransHç­‰ã€‚å…¶å®è´¨æ˜¯åŸºäºåŒä¸€æŸå¤±åº¦é‡å…³ç³»å‘é‡ç©ºé—´çš„å¤´å®ä½“åŠ ä¸Šå…³ç³»ç­‰äºå…³ç³»å‘é‡ç©ºé—´ä¸­çš„å°¾å®ä½“(hr+r=tr)ã€‚ TransE:$$h_r = h$$$$t_r = t$$ TransH:$$h_r = h - (w_r)^{T.h.w_r}$$$$t_r = t - (w_r)^{T.t.w_r}$$ TransR:$$h_r = M_r.h$$$$t_r = M_r.t$$ æœ¬é¡¹ç›®ä¸»è¦é‡‡ç”¨TransRæ¨¡å‹åšçŸ¥è¯†è¡¨ç¤ºå­¦ä¹ ï¼Œæ„å»ºæ¨ç†ç³»ç»Ÿã€‚TransRåœ¨å‡†ç¡®æ€§å’Œæ€§èƒ½ä¸Šéƒ½è¾¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¹³è¡¡ï¼ŒTransRæ¨¡å‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¯¹äºæ¯ä¸ªå…ƒç»„(hï¼Œrï¼Œt)ï¼Œé¦–å…ˆå°†å®ä½“ç©ºé—´ä¸­çš„å®ä½“é€šè¿‡Mrå‘å…³ç³»ræŠ•å½±å¾—åˆ°hrå’Œtrï¼Œç„¶åä½¿hr+r=trã€‚ç‰¹å®šçš„å…³ç³»æŠ•å½±(å½©è‰²çš„åœ†åœˆè¡¨ç¤º)èƒ½å¤Ÿä½¿å¾—å¤´/å°¾å®ä½“åœ¨è¿™ä¸ªå…³ç³»ä¸‹çœŸå®çš„é è¿‘å½¼æ­¤ï¼Œä½¿å¾—ä¸å…·æœ‰æ­¤å…³ç³»(å½©è‰²çš„ä¸‰è§’å½¢è¡¨ç¤º)çš„å®ä½“å½¼æ­¤è¿œç¦»ã€‚ åŸºäºæ·±åº¦å­¦ä¹ çš„SQLè¯­å¥ç”ŸæˆæŠ€æœ¯ç°åœ¨åšé—®ç­”ç³»ç»Ÿä¸»è¦æœ‰ä¸¤å¤§ç±»æ–¹æ³•ï¼šåŸºäºæ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯çš„è®­ç»ƒå’ŒåŸºäºè§„åˆ™çš„çŸ¥è¯†åº“çš„åŒ¹é…ã€‚ä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•éƒ½å­˜åœ¨ç€ç¼ºé™·ï¼ŒåŸºäºè§„åˆ™çš„çŸ¥è¯†åº“çš„åŒ¹é…é¢å¯¹è‡ªç„¶è¯­è¨€å¤„ç†çš„æ—¶å€™ç¼ºä¹æ³›åŒ–æ€§ï¼Œå¯¹äºå‡ºç°è§„åˆ™ä¸­æ²¡èƒ½åŒ¹é…çš„ç‰¹å¾æ— èƒ½ä¸ºåŠ›ã€‚åŸºäºæ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯çš„ç­”æ¡ˆç”Ÿæˆè™½ç„¶è§£å†³äº†è§„åˆ™åŒ¹é…çš„æ³›åŒ–æ€§é—®é¢˜ï¼Œä½†ç”±äºè‡ªç„¶è¯­è¨€çš„å¼€æ”¾æ€§ï¼Œé€šå¸¸æ— æ³•å¾ˆå¥½çš„ç»™å‡ºå‡†ç¡®çš„å›ç­”ï¼ŒåŒæ—¶å¯¹è®­ç»ƒæ ·æœ¬æ•°é‡è¦æ±‚å¾ˆé«˜ï¼Œæ— æ³•åˆ©ç”¨ç°æœ‰çš„çŸ¥è¯†åº“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºä¸€ç§åˆ©ç”¨æ·±åº¦å­¦ä¹ å’ŒçŸ¥è¯†åº“ç›¸ç»“åˆçš„æ–¹æ³•ï¼Œåˆ©ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯å°†è‡ªç„¶è¯­è¨€é—®é¢˜ç¿»è¯‘æˆSQLæŸ¥è¯¢è¯­å¥å¯¹ç°æœ‰çš„çŸ¥è¯†åº“è¿›è¡Œæœç´¢ã€‚ åˆ©ç”¨LSTM-attentionæ¨¡å‹å¯¹è¾“å…¥çš„è‡ªç„¶è¯­è¨€è¿›è¡Œç«¯åˆ°ç«¯çš„è®­ç»ƒï¼Œè¾“å‡ºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå…³äºæ‰€éœ€è¦æŸ¥è¯¢çš„è¡¨åã€åˆ—åå’Œæ“ä½œç¬¦å·çš„é€‰æ‹©ã€‚ å¤§è§„æ¨¡åˆ†å¸ƒå¼æ··åˆæ¶æ„ä¼ ç»Ÿçš„å¤§æ•°æ®æŠ€æœ¯å¤šåŸºäºCPUä¸Šè¿è¡Œï¼Œå¦‚Hadoopã€Sparkç­‰ã€‚ä½†å¯¹äºæ·±åº¦å­¦ä¹ æ¨¡å‹æ¥è¯´ï¼Œç”±äºå…¶å‚æ•°éå¸¸åºå¤§ï¼Œå¯¹å¹¶è¡Œè®¡ç®—è¦æ±‚éå¸¸é«˜ï¼Œä¼ ç»Ÿçš„åŸºäºCPUæ¶æ„ä¸‹çš„åˆ†å¸ƒå¼æ¡†æ¶æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚ä¸ºäº†å¯ä»¥åŒæ—¶ä½¿ç”¨CPUå’ŒGPUï¼Œæœ¬é¡¹ç›®åˆ›å»ºäº†ä¸€ç§åŸºäºCPUå’ŒGPUçš„åˆ†å¸ƒå¼æ··åˆæ¶æ„ã€‚ ä¸ºäº†å¯ä»¥åŒæ—¶å¤„ç†ä¸¤ç§å¼‚æ„çš„åº•å±‚æ¡†æ¶ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªæŠ½è±¡å±‚æ¥å±è”½åº•å±‚èµ„æºï¼Œå®ç°å¯¹åº•å±‚ç‰©ç†èµ„æºçš„å±è”½ï¼Œå°¤å…¶æ˜¯å¯¹GPUèµ„æºçš„æŠ½è±¡å’Œè°ƒåº¦ã€‚åœ¨å±è”½å’ŒæŠ½è±¡åº•å±‚æ¥å£æŠ€æœ¯ä¸Šï¼Œå®¹å™¨æŠ€æœ¯å…·æœ‰å¤©ç„¶çš„ä¼˜åŠ¿ï¼Œç‰¹åˆ«æ˜¯Dockerå’ŒKubernetesçš„å‘å±•ï¼Œå…¶åœ¨GPUè°ƒåº¦ä¸Šååˆ†å®Œå–„ï¼Œå› æ­¤ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨åŸºäºçš„Kuberneteså®¹å™¨é›†ç¾¤ä½œä¸ºä¸­é—´è°ƒåº¦å±‚ã€‚ é›†ç¾¤å†…ç½®äº†Dockeré•œåƒä»“åº“æœåŠ¡ï¼Œå¤šå‰¯æœ¬çš„API Serverå’ŒEtcdé›†ç¾¤ï¼Œä¿è¯äº†æ•´ä¸ªé›†ç¾¤æ‰€æœ‰ç»„ä»¶çš„é«˜å¯ç”¨æ€§ï¼Œåç«¯ä½¿ç”¨Kubernetesç¼–æ’ç³»ç»Ÿï¼Œé€šè¿‡API Serverå®ç°æˆæƒè®¤è¯å’ŒQuotaé…é¢åŠŸèƒ½ã€‚åŸºäºWebæœåŠ¡å™¨å¯ä»¥å®ç°é›†æˆå†…éƒ¨æƒé™ç®¡ç†ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ï¼Œç³»ç»Ÿæä¾›äº†ç±»ä¼¼AWSçš„AKSKç­¾åè®¤è¯æœºåˆ¶ï¼Œç”¨æˆ·æ³¨å†Œç™»å½•åå¯ä»¥è‡ªè¡Œåˆ›å»ºAccess keyå’ŒSecret keyï¼Œè¯·æ±‚æ—¶åœ¨å®¢æˆ·ç«¯è¿›è¡ŒAKSKçš„ç­¾ååå‘é€ï¼Œè¿™æ ·ç”¨æˆ·ä¸éœ€è¦æŠŠè´¦å·å¯†ç æˆ–å¯†é’¥åŠ åˆ°è¯·æ±‚ä¸­ï¼Œå³ä½¿å¯†é’¥æ³„éœ²ä¹Ÿå¯ä»¥ç”±ç”¨æˆ·æ¥ç¦ç”¨ï¼Œè¯·æ±‚æ—¶å³ä½¿ç­¾åè¢«å—…æ¢ä¹Ÿåªèƒ½é‡æ”¾å½“å‰çš„è¯·æ±‚å†…å®¹ï¼ŒåŒæ—¶ï¼Œç³»ç»Ÿå‚è€ƒOpenStacké¡¹ç›®çš„ä½“ç³»æ¶æ„ï¼Œå®ç°äº†å¤šç§Ÿæˆ·å’ŒQuotaåŠŸèƒ½ï¼Œé€šè¿‡è®¤è¯å’Œæˆæƒçš„è¯·æ±‚éœ€è¦ç»è¿‡Quotaé…é¢æ£€æŸ¥ï¼Œåœ¨é«˜å¯ç”¨æ•°æ®åº“ä¸­æŒä¹…åŒ–ç›¸åº”çš„æ•°æ®ï¼Œè¿™æ ·å¹³å°ç®¡ç†å‘˜å°±å¯ä»¥åŠ¨æ€ä¿®æ”¹æ¯ä¸ªç§Ÿæˆ·çš„Quotaï¼Œè€Œä¸”ç”¨æˆ·å¯ä»¥éšæ—¶æŸ¥çœ‹è‡ªèº«çš„å®¡è®¡ä¿¡æ¯ã€‚ é‡‡ç”¨çš„æ–¹æ³•ã€æŠ€æœ¯è·¯çº¿ä»¥åŠå·¥è‰ºæµç¨‹ç³»ç»Ÿæ€»ä½“æ¶æ„æœ¬é¡¹ç›®çš„æ•´ä½“æ¶æ„ä¸»è¦åŒ…æ‹¬å››å±‚ï¼šæ•°æ®é‡‡é›†å±‚ã€çŸ¥è¯†ç®¡ç†å±‚ã€çŸ¥è¯†å‘ç°å±‚ã€çŸ¥è¯†æœåŠ¡å±‚ã€‚æ•°æ®é‡‡é›†å±‚ä¸»è¦ç”±ä¸€ä¸ªåˆ†å¸ƒå¼æ™ºèƒ½é‡‡é›†ç³»ç»Ÿæ„æˆï¼Œå…¶ä¸»è¦åŠŸèƒ½ä¸ºå¯¹äº’è”ç½‘æ•°æ®è¿›è¡Œå®šå‘é‡‡é›†ï¼Œåˆ©ç”¨å¤–éƒ¨æ•°æ®è¡¥å……ä¼ä¸šçŸ¥è¯†æ•°æ®ï¼Œæ˜¯åº•å±‚çš„å¼‚æ„æ•°æ®çš„ä¸»è¦æ¥æºä¹‹ä¸€ã€‚çŸ¥è¯†ç®¡ç†å±‚ä¸»è¦è´Ÿè´£å¯¹çŸ¥è¯†è¿›è¡ŒæŠ½å–ã€è¯†åˆ«ã€å­˜å‚¨ã€ç®¡ç†å’Œç»´æŠ¤å·¥ä½œï¼ŒçŸ¥è¯†ç®¡ç†å±‚ä¸»è¦åŒ…æ‹¬äº†çŸ¥è¯†è‡ªåŠ¨æ„å»ºç³»ç»Ÿå’ŒçŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯æä¾›çŸ¥è¯†æœåŠ¡çš„ä¿éšœã€‚çŸ¥è¯†å‘ç°å±‚ä¸»è¦æ˜¯å°†çŸ¥è¯†è¿›è¡Œè¡¨å¾å­¦ä¹ ï¼Œä½¿å¾—çŸ¥è¯†å¯ä»¥åšæ¨ç†ï¼Œä»è€Œæä¾›è‡ªåŠ¨é—®ç­”å’ŒæŸ¥è¯¢æœåŠ¡ï¼ŒçŸ¥è¯†å‘ç°å±‚ä¸»è¦åŒ…æ‹¬äº†çŸ¥è¯†è¡¨å¾ç³»ç»Ÿå’ŒçŸ¥è¯†æ¨ç†ç³»ç»Ÿä¸¤ä¸ªç³»ç»Ÿã€‚çŸ¥è¯†æœåŠ¡å±‚æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ä»·å€¼çš„ç›´æ¥å±•ç°æ–¹å¼ï¼Œæ˜¯å¯¹å¤–æä¾›æœåŠ¡çš„æ¸ é“ï¼ŒçŸ¥è¯†æœåŠ¡åŒ…æ‹¬äº†ä¸¤ä¸ªæ¨¡å—ï¼šåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½è¿è¥æœåŠ¡ç³»ç»Ÿå’ŒåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½è¿ç»´æœåŠ¡ç³»ç»Ÿã€‚ å¤§è§„æ¨¡åˆ†å¸ƒå¼æ··åˆæ¶æ„ä¼ ç»Ÿçš„å¤§æ•°æ®æŠ€æœ¯å¤šåŸºäºCPUä¸Šè¿è¡Œï¼Œå¦‚Hadoopã€Sparkç­‰ã€‚ä½†å¯¹äºæ·±åº¦å­¦ä¹ æ¨¡å‹æ¥è¯´ï¼Œç”±äºå…¶å‚æ•°éå¸¸åºå¤§ï¼Œå¯¹å¹¶è¡Œè®¡ç®—è¦æ±‚éå¸¸é«˜ï¼Œä¼ ç»Ÿçš„åŸºäºCPUæ¶æ„ä¸‹çš„åˆ†å¸ƒå¼æ¡†æ¶æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚ä¸ºäº†å¯ä»¥åŒæ—¶ä½¿ç”¨CPUå’ŒGPUï¼Œæœ¬é¡¹ç›®åˆ›å»ºäº†ä¸€ç§åŸºäºCPUå’ŒGPUçš„åˆ†å¸ƒå¼æ··åˆæ¶æ„ã€‚ä¸ºäº†å¯ä»¥åŒæ—¶å¤„ç†ä¸¤ç§å¼‚æ„çš„åº•å±‚æ¡†æ¶ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªæŠ½è±¡å±‚æ¥å±è”½åº•å±‚èµ„æºï¼Œå®ç°å¯¹åº•å±‚ç‰©ç†èµ„æºçš„å±è”½ï¼Œå°¤å…¶æ˜¯å¯¹GPUèµ„æºçš„æŠ½è±¡å’Œè°ƒåº¦ã€‚åœ¨å±è”½å’ŒæŠ½è±¡åº•å±‚æ¥å£æŠ€æœ¯ä¸Šï¼Œå®¹å™¨æŠ€æœ¯å…·æœ‰å¤©ç„¶çš„ä¼˜åŠ¿ï¼Œç‰¹åˆ«æ˜¯Dockerå’ŒKubernetesçš„å‘å±•ï¼Œå…¶åœ¨GPUè°ƒåº¦ä¸Šååˆ†å®Œå–„ï¼Œå› æ­¤ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨åŸºäºçš„Kuberneteså®¹å™¨é›†ç¾¤ä½œä¸ºä¸­é—´è°ƒåº¦å±‚ã€‚ é›†ç¾¤å†…ç½®äº†Dockeré•œåƒä»“åº“æœåŠ¡ï¼Œå¤šå‰¯æœ¬çš„API Serverå’ŒEtcdé›†ç¾¤ï¼Œä¿è¯äº†æ•´ä¸ªé›†ç¾¤æ‰€æœ‰ç»„ä»¶çš„é«˜å¯ç”¨æ€§ï¼Œåç«¯ä½¿ç”¨Kubernetesç¼–æ’ç³»ç»Ÿï¼Œé€šè¿‡API Serverå®ç°æˆæƒè®¤è¯å’ŒQuotaé…é¢åŠŸèƒ½ã€‚åŸºäºWebæœåŠ¡å™¨å¯ä»¥å®ç°é›†æˆå†…éƒ¨æƒé™ç®¡ç†ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ï¼Œç³»ç»Ÿæä¾›äº†ç±»ä¼¼AWSçš„AKSKç­¾åè®¤è¯æœºåˆ¶ï¼Œç”¨æˆ·æ³¨å†Œç™»å½•åå¯ä»¥è‡ªè¡Œåˆ›å»ºAccess keyå’ŒSecret keyï¼Œè¯·æ±‚æ—¶åœ¨å®¢æˆ·ç«¯è¿›è¡ŒAKSKçš„ç­¾ååå‘é€ï¼Œè¿™æ ·ç”¨æˆ·ä¸éœ€è¦æŠŠè´¦å·å¯†ç æˆ–å¯†é’¥åŠ åˆ°è¯·æ±‚ä¸­ï¼Œå³ä½¿å¯†é’¥æ³„éœ²ä¹Ÿå¯ä»¥ç”±ç”¨æˆ·æ¥ç¦ç”¨ï¼Œè¯·æ±‚æ—¶å³ä½¿ç­¾åè¢«å—…æ¢ä¹Ÿåªèƒ½é‡æ”¾å½“å‰çš„è¯·æ±‚å†…å®¹ï¼ŒåŒæ—¶ï¼Œç³»ç»Ÿå‚è€ƒOpenStacké¡¹ç›®çš„ä½“ç³»æ¶æ„ï¼Œå®ç°äº†å¤šç§Ÿæˆ·å’ŒQuotaåŠŸèƒ½ï¼Œé€šè¿‡è®¤è¯å’Œæˆæƒçš„è¯·æ±‚éœ€è¦ç»è¿‡Quotaé…é¢æ£€æŸ¥ï¼Œåœ¨é«˜å¯ç”¨æ•°æ®åº“ä¸­æŒä¹…åŒ–ç›¸åº”çš„æ•°æ®ï¼Œè¿™æ ·å¹³å°ç®¡ç†å‘˜å°±å¯ä»¥åŠ¨æ€ä¿®æ”¹æ¯ä¸ªç§Ÿæˆ·çš„Quotaï¼Œè€Œä¸”ç”¨æˆ·å¯ä»¥éšæ—¶æŸ¥çœ‹è‡ªèº«çš„å®¡è®¡ä¿¡æ¯ã€‚ æ•°æ®é‡‡é›†å±‚æ•°æ®é‡‡é›†å±‚ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š(1)ä»ä¼ä¸šæä¾›çš„ç»“æ„åŒ–å’Œéç»“æ„åŒ–çš„æ•°æ®æµä¸­æ”¶é›†çŸ¥è¯†æ•°æ®ï¼Œå¦‚é€šè¿‡ä¼ä¸šçš„æœºå™¨æ—¥å¿—é‡‡é›†CPUã€å†…å­˜å’Œç¨‹åºè¿è¡Œç­‰çŠ¶æ€ï¼Œé€šè¿‡å‘˜å·¥æ‰“å¡è€ƒå‹¤ç™»è®°è¡¨æœé›†å‘˜å·¥çš„è€ƒå‹¤ä¿¡æ¯ï¼›(2)åˆ©ç”¨åˆ†å¸ƒå¼çˆ¬è™«ä»äº’è”ç½‘æ•°æ®ä¸­é‡‡é›†å¤–éƒ¨æ•°æ®ï¼Œæ„å»ºå¤–éƒ¨æ•°æ®çŸ¥è¯†åº“ï¼Œå¯¹ä¼ä¸šçŸ¥è¯†åº“è¿›è¡Œè¡¥å……ã€‚ä¸‹é¢é‡ç‚¹å¯¹åˆ†å¸ƒå¼æ™ºèƒ½é‡‡é›†å¹³å°çš„æ¶æ„è¿›è¡Œè¯´æ˜ã€‚ åˆ†å¸ƒå¼æ™ºèƒ½é‡‡é›†ç³»ç»Ÿä¸»è¦åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†é€šè¿‡å‰ç«¯å°†CSSæˆ–XPATHè§„åˆ™è½¬åŒ–ä¸ºçˆ¬è™«ä»£ç å­˜å…¥çˆ¬è™«æ•°æ®åº“CrawlerDBä¸­ï¼›ç¬¬äºŒéƒ¨åˆ†ä¸ºé€šè¿‡CrawlerDBä¸‹è¾¾æŠ“å–å‘½ä»¤ï¼Œç”Ÿäº§æŠ“å–åˆ—è¡¨fetchlistï¼›ç¬¬ä¸‰éƒ¨åˆ†Fetchlisté€šè¿‡ç»„åˆurlè¯·æ±‚å’ŒIPåœ°å€ã€loginç™»å½•ä¿¡æ¯å¾—åˆ°ç½‘ç»œè¯·æ±‚ï¼›ç¬¬å››éƒ¨åˆ†Fetchlisté€šè¿‡ç½‘ç»œè¯·æ±‚è·å–ç›®æ ‡ç½‘é¡µå†…å®¹ï¼Œå¹¶æäº¤ç»™parseræ¨¡å—è¿›è¡Œé¡µé¢è§£æï¼›ç¬¬äº”éƒ¨åˆ†å°†è§£æç»“æœè¢«å­˜å‚¨æ•°æ®åº“ä¸­ï¼ŒåŒæ—¶å‘CrawlerDBåé¦ˆçˆ¬å–ç»“æœçŠ¶æ€ï¼Œæ›´æ–°çˆ¬å–ä¿¡æ¯ã€‚ çŸ¥è¯†ç®¡ç†å±‚çŸ¥è¯†ç®¡ç†å±‚ä¸»è¦è´Ÿè´£æŠ½å–ã€è¯†åˆ«ã€å­˜å‚¨ã€ç®¡ç†å’Œç»´æŠ¤å·¥ä½œï¼ŒçŸ¥è¯†ç®¡ç†ç³»ç»ŸåŒ…æ‹¬äº†çŸ¥è¯†åº“è‡ªåŠ¨æ„å»ºå’ŒçŸ¥è¯†ç®¡ç†ä¸¤éƒ¨åˆ†ç»„æˆã€‚ çŸ¥è¯†å›¾è°±æ„å»ºä¸»è¦åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯çŸ¥è¯†è·å–ï¼Œä¸»è¦é˜è¿°å¦‚ä½•ä»éç»“æ„åŒ–ã€åŠç»“æ„åŒ–ã€ä»¥åŠç»“æ„åŒ–æ•°æ®ä¸­è·å–çŸ¥è¯†ã€‚ç¬¬äºŒéƒ¨æ˜¯æ•°æ®èåˆï¼Œä¸»è¦é˜è¿°å¦‚ä½•å°†ä¸åŒæ•°æ®æºè·å–çš„çŸ¥è¯†è¿›è¡Œèåˆæ„å»ºæ•°æ®ä¹‹é—´çš„å…³è”ã€‚çŸ¥è¯†è·å–ä¸»è¦åŒ…æ‹¬äº†å®ä½“è¯†åˆ«å’Œå…³ç³»æŠ½å–ã€æ¶ˆé™¤æ­§ä¹‰ã€çŸ¥è¯†å¢å¼ºã€çŸ¥è¯†çº é”™ã€‚ å®ä½“è¯†åˆ«éœ€è¦é€šè¿‡è‡ªç„¶è¯­è¨€æŠ€æœ¯è¯†åˆ«æ–‡ç« ä¸­çš„å®ä½“ï¼Œå®ä½“è¯†åˆ«é€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ç”¨æˆ·æœ¬èº«æœ‰ä¸€ä¸ªçŸ¥è¯†åº“åˆ™å¯ä»¥ä½¿ç”¨å®ä½“é“¾æ¥å°†æ–‡ç« ä¸­å¯èƒ½çš„å€™é€‰å®ä½“é“¾æ¥åˆ°ç”¨æˆ·çš„çŸ¥è¯†åº“ä¸Šã€‚å¦ä¸€ç§æ˜¯å½“ç”¨æˆ·æ²¡æœ‰çŸ¥è¯†åº“åˆ™éœ€è¦ä½¿ç”¨å‘½åå®ä½“è¯†åˆ«æŠ€æœ¯è¯†åˆ«æ–‡ç« ä¸­çš„å®ä½“ã€‚è‹¥æ–‡ç« ä¸­å­˜åœ¨å®ä½“çš„åˆ«åæˆ–è€…ç®€ç§°è¿˜éœ€è¦æ„å»ºå®ä½“é—´çš„åŒä¹‰è¯è¡¨ï¼Œè¿™æ ·å¯ä»¥ä½¿ä¸åŒå®ä½“å…·æœ‰ç›¸åŒçš„æè¿°ã€‚æ­§ä¹‰æ€§å’Œå¤šæ ·æ€§æ˜¯è‡ªç„¶è¯­è¨€çš„å›ºæœ‰å±æ€§ï¼Œä¹Ÿæ˜¯å®ä½“é“¾æ¥çš„æ ¹æœ¬éš¾ç‚¹ã€‚å¦‚ä½•æŒ–æ˜æ›´å¤šã€æ›´åŠ æœ‰æ•ˆçš„æ¶ˆæ­§è¯æ®ï¼Œè®¾è®¡æ›´é«˜æ€§èƒ½çš„æ¶ˆæ­§ç®—æ³•ä¾ç„¶æ˜¯å®ä½“é“¾æ¥ç³»ç»Ÿçš„æ ¸å¿ƒç ”ç©¶é—®é¢˜ã€‚æœ¬é¡¹ç›®æå‡ºæ„ä¸€ç§åŸºäºå›¾çš„æ¨¡å‹ï¼Œå…¶ä¸­å›¾èŠ‚ç‚¹ä¸ºæ‰€æœ‰å®ä½“æŒ‡ç§°å’Œæ‰€æœ‰å€™é€‰å®ä½“ï¼›å›¾çš„è¾¹åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å®ä½“æŒ‡ç§°å’Œå…¶å¯¹åº”çš„å€™é€‰å®ä½“ä¹‹é—´çš„è¾¹ï¼Œæƒé‡ä¸ºå®ä½“æŒ‡ç§°å’Œå€™é€‰å®ä½“ä¹‹é—´çš„å±€éƒ¨æ–‡æœ¬ç›¸ä¼¼åº¦ï¼Œé‡‡ç”¨è¯è¢‹æ¨¡å‹å’Œä½™å¼¦è·ç¦»è®¡ç®—å¾—å‡ºã€‚å¦ä¸€ç±»æ˜¯å€™é€‰å®ä½“ä¹‹é—´çš„è¾¹ï¼Œæƒé‡ä¸ºå€™é€‰å®ä½“ä¹‹é—´çš„è¯­ä¹‰ç›¸å…³åº¦ï¼Œé‡‡ç”¨è°·æ­Œè·ç¦»è®¡ç®—ã€‚ç®—æ³•é¦–å…ˆé‡‡é›†ä¸åŒå®ä½“çš„åˆå§‹ç½®ä¿¡åº¦ï¼Œç„¶åé€šè¿‡å›¾ä¸­çš„è¾¹å¯¹ç½®ä¿¡åº¦è¿›è¡Œä¼ æ’­å’Œå¢å¼ºã€‚ å½“è·å¾—å®ä½“åï¼Œåˆ™éœ€è¦å…³æ³¨å®ä½“é—´çš„å…³ç³»ï¼Œå³å®ä½“å…³ç³»è¯†åˆ«ï¼Œæœ‰äº›å®ä½“å…³ç³»è¯†åˆ«çš„æ–¹æ³•ä¼šåˆ©ç”¨å¥æ³•ç»“æ„æ¥å¸®åŠ©ç¡®å®šä¸¤ä¸ªå®ä½“é—´çš„å…³ç³»ï¼Œå› æ­¤åœ¨æœ‰äº›ç®—æ³•ä¸­ä¼šåˆ©ç”¨ä¾å­˜åˆ†ææˆ–è€…è¯­ä¹‰è§£æã€‚å¦‚æœç”¨æˆ·ä¸ä»…ä»…æƒ³è·å–å®ä½“é—´çš„å…³ç³»ï¼Œè¿˜æƒ³è·å–ä¸€ä¸ªäº‹ä»¶çš„è¯¦ç»†å†…å®¹ï¼Œé‚£ä¹ˆåˆ™éœ€è¦ç¡®å®šäº‹ä»¶çš„è§¦å‘è¯å¹¶è·å–äº‹ä»¶ç›¸åº”æè¿°çš„å¥å­ï¼ŒåŒæ—¶è¯†åˆ«äº‹ä»¶æè¿°å¥å­ä¸­å®ä½“å¯¹åº”äº‹ä»¶çš„è§’è‰²ã€‚ å½“çŸ¥è¯†ä»å„ä¸ªæ•°æ®æºä¸‹è·å–æ—¶éœ€è¦æä¾›ç»Ÿä¸€çš„æœ¯è¯­å°†å„ä¸ªæ•°æ®æºè·å–çš„çŸ¥è¯†èåˆæˆä¸€ä¸ªåºå¤§çš„çŸ¥è¯†åº“ã€‚æä¾›ç»Ÿä¸€æœ¯è¯­çš„ç»“æ„æˆ–è€…æ•°æ®è¢«ç§°ä¸ºæœ¬ä½“ï¼Œæœ¬ä½“ä¸ä»…æä¾›äº†ç»Ÿä¸€çš„æœ¯è¯­å­—å…¸ï¼Œè¿˜æ„å»ºäº†å„ä¸ªæœ¯è¯­é—´çš„å…³ç³»ä»¥åŠé™åˆ¶ã€‚æœ¬ä½“å¯ä»¥è®©ç”¨æˆ·éå¸¸æ–¹ä¾¿å’Œçµæ´»çš„æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡å»ºç«‹æˆ–è€…ä¿®æ”¹æ•°æ®æ¨¡å‹ã€‚é€šè¿‡æ•°æ®æ˜ å°„æŠ€æœ¯å»ºç«‹æœ¬ä½“ä¸­æœ¯è¯­å’Œä¸åŒæ•°æ®æºæŠ½å–çŸ¥è¯†ä¸­è¯æ±‡çš„æ˜ å°„å…³ç³»ï¼Œè¿›è€Œå°†ä¸åŒæ•°æ®æºçš„æ•°æ®èåˆåœ¨ä¸€èµ·ã€‚åŒæ—¶ä¸åŒæºçš„å®ä½“å¯èƒ½ä¼šæŒ‡å‘ç°å®ä¸–ç•Œçš„åŒä¸€ä¸ªå®¢ä½“ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨å®ä½“åŒ¹é…å°†ä¸åŒæ•°æ®æºç›¸åŒå®¢ä½“çš„æ•°æ®è¿›è¡Œèåˆã€‚ä¸åŒæœ¬ä½“é—´ä¹Ÿä¼šå­˜åœ¨æŸäº›æœ¯è¯­æè¿°åŒä¸€ç±»æ•°æ®ï¼Œé‚£ä¹ˆå¯¹è¿™äº›æœ¬ä½“é—´åˆ™éœ€è¦æœ¬ä½“èåˆæŠ€æœ¯æŠŠä¸åŒçš„æœ¬ä½“èåˆã€‚æœ€åèåˆè€Œæˆçš„çŸ¥è¯†åº“éœ€è¦ä¸€ä¸ªå­˜å‚¨ã€ç®¡ç†çš„è§£å†³æ–¹æ¡ˆã€‚çŸ¥è¯†å­˜å‚¨å’Œç®¡ç†çš„è§£å†³æ–¹æ¡ˆä¼šæ ¹æ®ç”¨æˆ·æŸ¥è¯¢åœºæ™¯çš„ä¸åŒé‡‡ç”¨ä¸åŒçš„å­˜å‚¨æ¶æ„å¦‚ NoSQL æˆ–è€…å…³ç³»æ•°æ®åº“ã€‚åŒæ—¶å¤§è§„æ¨¡çš„çŸ¥è¯†åº“ä¹Ÿç¬¦åˆå¤§æ•°æ®çš„ç‰¹å¾ï¼Œå› æ­¤éœ€è¦ä¼ ç»Ÿçš„å¤§æ•°æ®å¹³å°å¦‚ Spark æˆ–è€… Hadoop æä¾›é«˜æ€§èƒ½è®¡ç®—èƒ½åŠ›ï¼Œæ”¯æŒå¿«é€Ÿè¿ç®—ã€‚ çŸ¥è¯†å‘ç°å±‚çŸ¥è¯†å‘ç°å±‚ä¸»è¦æ˜¯å°†çŸ¥è¯†è¿›è¡Œè¡¨å¾å­¦ä¹ ï¼Œä»è€Œå®ç°çŸ¥è¯†çš„æ¨ç†å’Œè®¡ç®—ã€‚çŸ¥è¯†è®¡ç®—ä¸»è¦æ˜¯æ ¹æ®å›¾è°±æä¾›çš„ä¿¡æ¯å¾—åˆ°æ›´å¤šéšå«çš„çŸ¥è¯†ï¼Œå¦‚é€šè¿‡æœ¬ä½“æˆ–è€…è§„åˆ™æ¨ç†æŠ€æœ¯å¯ä»¥è·å–æ•°æ®ä¸­å­˜åœ¨çš„éšå«çŸ¥è¯†ï¼›è€Œé“¾æ¥é¢„æµ‹åˆ™å¯é¢„æµ‹å®ä½“é—´éšå«çš„å…³ç³»ï¼›åŒæ—¶ä½¿ç”¨ç¤¾ä¼šè®¡ç®—çš„ä¸åŒç®—æ³•åœ¨çŸ¥è¯†ç½‘ç»œä¸Šè®¡ç®—è·å–çŸ¥è¯†å›¾è°±ä¸Šå­˜åœ¨çš„ç¤¾åŒºï¼Œæä¾›çŸ¥è¯†é—´å…³è”çš„è·¯å¾„ï¼›é€šè¿‡ä¸ä¸€è‡´æ£€æµ‹æŠ€æœ¯å‘ç°æ•°æ®ä¸­çš„å™ªå£°å’Œç¼ºé™·ã€‚é€šè¿‡çŸ¥è¯†è®¡ç®—çŸ¥è¯†å›¾è°±å¯ä»¥äº§ç”Ÿå¤§é‡çš„æ™ºèƒ½åº”ç”¨å¦‚å¯ä»¥æä¾›ç²¾ç¡®çš„ç”¨æˆ·ç”»åƒä¸ºç²¾å‡†è¥é”€ç³»ç»Ÿæä¾›æ½œåœ¨çš„å®¢æˆ·ï¼›æä¾›é¢†åŸŸçŸ¥è¯†ç»™ä¸“å®¶ç³»ç»Ÿæä¾›å†³ç­–æ•°æ®ï¼Œç»™å¾‹å¸ˆã€åŒ»ç”Ÿã€å…¬å¸ CEO ç­‰æä¾›è¾…åŠ©å†³ç­–çš„æ„è§ï¼›æä¾›æ›´æ™ºèƒ½çš„æ£€ç´¢æ–¹å¼ï¼Œä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€è¿›è¡Œæœç´¢ï¼›åŒæ—¶ä¹Ÿå¯ä»¥åšé—®ç­”ç³»ç»Ÿã€‚ (1)çŸ¥è¯†æ¨ç†ç³»ç»Ÿ çŸ¥è¯†è®¡ç®—çš„æ ¸å¿ƒæ˜¯çŸ¥è¯†æ¨ç†æŠ€æœ¯ã€‚çŸ¥è¯†åº“æ¨ç†å¯ä»¥ç²—ç•¥åœ°åˆ†ä¸ºåŸºäºç¬¦å·çš„æ¨ç†å’ŒåŸºäºç»Ÿè®¡çš„æ¨ç†ã€‚åœ¨äººå·¥æ™ºèƒ½çš„ç ”ç©¶ä¸­ï¼ŒåŸºäºç¬¦å·çš„æ¨ç†ä¸€èˆ¬æ˜¯åŸºäºç»å…¸é€»è¾‘(ä¸€é˜¶è°“è¯é€»è¾‘æˆ–è€…å‘½é¢˜é€»è¾‘)æˆ–è€…ç»å…¸é€»è¾‘çš„å˜å¼‚(æ¯”å¦‚è¯´ç¼ºçœé€»è¾‘)ã€‚åŸºäºç¬¦å·çš„æ¨ç†å¯ä»¥ä»ä¸€ä¸ªå·²æœ‰çš„çŸ¥è¯†å›¾è°±ï¼Œåˆ©ç”¨è§„åˆ™ï¼Œæ¨ç†å‡ºæ–°çš„å®ä½“é—´å…³ç³»ï¼Œè¿˜å¯ä»¥å¯¹çŸ¥è¯†å›¾è°±è¿›è¡Œé€»è¾‘çš„å†²çªæ£€æµ‹ã€‚åŸºäºç»Ÿè®¡çš„æ–¹æ³•ä¸€èˆ¬æŒ‡å…³ç³»æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡ç»Ÿè®¡è§„å¾‹ä»çŸ¥è¯†å›¾è°±ä¸­å­¦ä¹ åˆ°æ–°çš„å®ä½“é—´å…³ç³»ã€‚ çŸ¥è¯†å›¾è°±ä¸­åŸºäºç»Ÿè®¡çš„æ¨ç†æ–¹æ³•ä¸€èˆ¬æŒ‡åˆ©ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•æŠ€æœ¯åšçŸ¥è¯†æ¨ç†ï¼Œå¦‚ç±»å‹æ¨ç†(type inference)æ–¹æ³•ã€æ¨¡å¼å½’çº³(schema induction)æ–¹æ³•ã€åŸºäºå®ä½“å…³ç³»å­¦ä¹ æ–¹æ³•ã€‚çŸ¥è¯†å›¾è°±ä¸Šçš„ç±»å‹æ¨ç†ç›®çš„æ˜¯å­¦ä¹ çŸ¥è¯†å›¾è°±ä¸­çš„å®ä¾‹å’Œæ¦‚å¿µä¹‹é—´çš„å±äºå…³ç³»ï¼Œä¾‹å¦‚SDTypeåˆ©ç”¨ä¸‰å…ƒç»„ä¸»è¯­æˆ–è°“è¯­æ‰€è¿æ¥å±æ€§çš„ç»Ÿè®¡åˆ†å¸ƒä»¥é¢„æµ‹å®ä¾‹çš„ç±»å‹ã€‚è¯¥æ–¹æ³•å¯ä»¥ç”¨åœ¨ä»»æ„å•æ•°æ®æºçš„çŸ¥è¯†å›¾è°±ï¼Œä½†æ˜¯æ— æ³•åšåˆ°è·¨æ•°æ®é›†çš„ç±»å‹æ¨ç†ã€‚æ¨¡å¼å½’çº³æ–¹æ³•å­¦ä¹ æ¦‚å¿µä¹‹é—´çš„å…³ç³»ï¼Œä¸»è¦æœ‰åŸºäº ILP çš„æ–¹æ³•å’ŒåŸºäº ARM çš„æ–¹æ³•ã€‚ILP ç»“åˆäº†æœºå™¨å­¦ä¹ å’Œé€»è¾‘ç¼–ç¨‹æŠ€æœ¯ï¼Œä½¿å¾—äººä»¬å¯ä»¥ä»å®ä¾‹å’ŒèƒŒæ™¯çŸ¥è¯†ä¸­è·å¾—é€»è¾‘ç»“è®ºã€‚å®ä½“å…³ç³»å­¦ä¹ çš„ç›®çš„æ˜¯å­¦ä¹ çŸ¥è¯†å›¾è°±ä¸­å®ä¾‹å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼Œä¾‹å¦‚ç¿»è¯‘(translation)æ¨¡å‹å°±æ˜¯å°†å®ä½“ä¸å…³ç³»ç»Ÿä¸€æ˜ å°„è‡³ä½ç»´å‘é‡ç©ºé—´ä¸­ï¼Œä¸”è®¤ä¸ºå…³ç³»å‘é‡ä¸­æ‰¿è½½äº†å¤´å®ä½“ç¿»è¯‘è‡³å°¾å®ä½“çš„æ½œåœ¨ç‰¹å¾ã€‚å› æ­¤ï¼Œé€šè¿‡å‘æ˜ã€å¯¹æ¯”å‘é‡ç©ºé—´ä¸­å­˜åœ¨ç±»ä¼¼æ½œåœ¨ç‰¹å¾çš„å®ä½“å‘é‡å¯¹ï¼Œå¯ä»¥å¾—åˆ°çŸ¥è¯†å›¾è°±ä¸­æ½œåœ¨çš„ä¸‰å…ƒç»„å…³ç³»ã€‚åŸºäºå®ä½“å…³ç³»å­¦ä¹ çš„æ–¹æ³•å¯ä»¥å¾ˆå¥½çš„å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯ç›¸ç»“åˆï¼Œå› æ­¤æœ¬æ¬¡é¡¹ç›®çš„çŸ¥è¯†æ¨ç†é‡‡ç”¨äº†åŸºäºå®ä½“å…³ç³»å­¦ä¹ çš„æ–¹æ³•ã€‚ (2)é¢å‘è‡ªç„¶è¯­è¨€æŸ¥è¯¢çš„çŸ¥è¯†æœç´¢ åœ¨çŸ¥è¯†å‘ç°å±‚æä¾›äº†ä¸€ç§é¢å‘è‡ªç„¶è¯­è¨€æŸ¥è¯¢å¾—çŸ¥è¯†æœç´¢åŠŸèƒ½ã€‚é‡‡ç”¨äº†åŸºäºçŸ¥è¯†å›¾è°±çš„çŸ¥è¯†æœç´¢å’ŒåŸºäºæœç´¢å¼•æ“çš„çŸ¥è¯†æœç´¢ã€‚åŸºäºè‡ªç„¶è¯­è¨€çš„çŸ¥è¯†æ£€ç´¢ä¸»è¦åŒ…æ‹¬ä¸¤æ–¹é¢ï¼Œä¸€ä¸ªæ˜¯å°†è‡ªç„¶è¯­è¨€è½¬åŒ–ä¸ºæŸ¥è¯¢è¯­å¥ï¼Œä¸€ä¸ªæ˜¯åŸºäºæ·±åº¦å›¾å­¦ä¹ çš„æœç´¢ã€‚ æœ¬é¡¹ç›®æå‡ºä¸€ç§åŸºäºåŸºäºè¯­ä¹‰å…³ç³»æŠ½å–çš„è‡ªåŠ¨ç”Ÿæˆç®—æ³•,å®ç°ä»æ— ç»“æ„åŒ–è‡ªç„¶æŸ¥è¯¢è¯­å¥åˆ°ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥ä¹‹é—´çš„æ˜ å°„ã€‚é’ˆå¯¹éäº‹å®æ€§çš„é—®é¢˜,æœ¬é¡¹ç›®æä¾›äº†åŸºäºæ— ç»“æ„åŒ–çš„ç¤¾åŒºé—®ç­”æ•°æ®çš„çŸ¥è¯†æœç´¢æœåŠ¡ï¼Œä»åŸºäºé—®é¢˜è·Ÿé—®é¢˜ç›¸ä¼¼åº¦åŒ¹é…å’Œé—®é¢˜è·Ÿç­”æ¡ˆç›¸ä¼¼åº¦åŒ¹é…ä¸¤ä¸ªæ–¹å‘è§£å†³é—®é¢˜ã€‚åœ¨é—®é¢˜è·Ÿé—®é¢˜ç›¸ä¼¼åº¦åŒ¹é…æ¨¡å‹ä¸­,æˆ‘ä»¬æå‡ºæ”¹è¿›çš„WMDç®—æ³•,è¯¥ç®—æ³•æ ¹æ®ç¤¾åŒºé—®ç­”æ•°æ®çš„ç‰¹æ€§å¯¹åŸå§‹çš„WMDç®—æ³•è¿›è¡Œæ”¹è¿›,ç®—æ³•çš„ç»“æœæ¯”ä¼ ç»Ÿçš„BM25ç®—æ³•ä»¥åŠåŸå§‹çš„WMDç®—æ³•åœ¨æ€§èƒ½ä¸Šéƒ½æœ‰äº†è¾ƒå¤§æé«˜ã€‚åœ¨é—®é¢˜ä¸ç­”æ¡ˆç›¸ä¼¼åº¦åŒ¹é…æ¨¡å‹ä¸­,é€šè¿‡æ·±åº¦å­¦ä¹ åœ¨NLPé¢†åŸŸçš„åº”ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå¥å­æˆ–è€…æ®µè½çš„è¯­ä¹‰ç›¸ä¼¼åº¦,è€ƒè™‘é—®é¢˜å’Œç­”æ¡ˆåœ¨æ•°æ®é›†ä¸Šçš„å…±ç°ç‰¹å¾,æé«˜äº†æ¨¡å‹åœ¨å¤„ç†ç­”æ¡ˆç®€çŸ­ã€å…³é”®è¯ä¸é—®é¢˜è¯­ä¹‰ä¸åŒ¹é…ç­‰æƒ…å†µä¸‹æ€§èƒ½ä½ä¸‹çš„é—®é¢˜ã€‚ ä¼ ç»Ÿçš„çŸ¥è¯†æœç´¢æ˜¯åŸºäºç»“æ„åŒ–æŸ¥è¯¢çš„å½¢å¼è¿›è¡Œï¼Œè¿™ç§æ£€ç´¢æ¨¡å¼å­˜åœ¨æ£€ç´¢è¯­æ³•å¤æ‚ã€æ•°æ®ç»“æ„å¤æ‚ç­‰é—®é¢˜ï¼Œè€Œä¸”æ— æ³•åšçŸ¥è¯†æ¨ç†ã€‚è€Œä¸”ä¼ä¸šçš„çŸ¥è¯†å›¾è°±å’Œä¼ ç»Ÿçš„çŸ¥è¯†å›¾è°±æœç´¢ä¸åŒï¼Œä¼ ç»Ÿçš„çŸ¥è¯†å›¾è°±æ˜¯åŸºäºç¦»æ•£æ€§å…³ç³»çš„æœç´¢ï¼Œå…¶è°“è¯­åŠ¨è¯æ˜¯å®šä¹‰å¥½çš„ï¼Œå¦‚å¤´å®ä½“-è°“è¯-å°¾å®ä½“ã€‚å› æ­¤æœ¬é¡¹ç›®é‡‡ç”¨ä¸€ç§åˆ©ç”¨æ·±åº¦å­¦ä¹ åœ¨å¼‚è´¨å›¾ä¸Šåšè¯­ä¹‰æ¨ç†çš„æ–¹æ³•ï¼Œåˆ©ç”¨LSTMæ ¹æ®ä¸¤ç‚¹ä¹‹é—´çš„è·¯å¾„ç»“æ„è®­ç»ƒå…¶é‚»è¿‘æ€§è¡¨ç¤ºï¼Œä»è€Œå®ç°é‚»è¿‘æ€§çš„åµŒå…¥è¡¨ç¤ºã€‚ çŸ¥è¯†æœåŠ¡å±‚çŸ¥è¯†æœåŠ¡å±‚æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ä»·å€¼çš„ç›´æ¥å±•ç°æ–¹å¼ï¼Œæ˜¯å¯¹å¤–æä¾›æœåŠ¡çš„æ¸ é“ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„åº”ç”¨å±‚ï¼ŒçŸ¥è¯†æœåŠ¡åŒ…æ‹¬äº†ä¸¤ä¸ªæ–¹é¢åº”ç”¨ï¼šæ™ºèƒ½è¿è¥æœåŠ¡ç³»ç»Ÿå’Œæ™ºèƒ½è¿ç»´æœåŠ¡ç³»ç»Ÿã€‚ (1)åŸºäºæ™ºèƒ½è¿è¥ç³»ç»Ÿ è‡ªåŠ¨åŒ–è¿è¥ä½“ç³»åŠŸèƒ½æ¶æ„åˆ†ä¸ºä¸‰å±‚ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡ä¸ºæ•°æ®å±‚ã€ èƒ½åŠ›å±‚å’Œåº”ç”¨å±‚ã€‚ ä¸Šå±‚è°ƒç”¨ä¸‹å±‚çš„èƒ½åŠ›å’Œåº”ç”¨ï¼Œä¸‹å±‚ä¸ºä¸Šå±‚æä¾›æ”¯æ’‘æœåŠ¡ã€‚ æ•°æ®å±‚ã€‚ æ•°æ®å±‚ä¸»è¦ä¾æ‰˜ä¼ä¸šçŸ¥è¯†åº“ï¼Œæ±‡èšå®¢æˆ·æ ‡ç­¾ã€äº§å“ä¿¡æ¯ã€è§¦ç‚¹ä¿¡æ¯ã€åœºæ™¯æ¨¡å‹ã€è¿è¥æŒ‡æ ‡ç­‰åŸºç¡€æ•°æ®ï¼Œå½¢æˆæ ‡å‡†åŒ–çš„æ•°æ®åº“ï¼Œä¾›èƒ½åŠ›å±‚è°ƒç”¨ã€‚åœ¨æ±‡æ€»æµ·é‡å®¢æˆ·æ•°æ®çš„åŸºç¡€ä¸Šï¼Œå‡†ç¡®æè¿°å®¢æˆ·ç‰¹å¾ï¼Œä»è‡ªç„¶å±æ€§ã€ç¤¾ä¼šå±æ€§ã€ç”µä¿¡å±æ€§ã€äº’è”ç½‘å±æ€§ç­‰ç»´åº¦å¯¹å…¨é‡å®¢æˆ·è¿›è¡Œç”»åƒï¼Œå®ç°å¯¹å®¢æˆ·çš„â€œ è¶…ç»†åˆ†â€ã€‚ èƒ½åŠ›å±‚ã€‚ èƒ½åŠ›å±‚ä¸»è¦ä¾æ‰˜ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨ä¸‹å±‚çš„æ ‡å‡†æ•°æ®åº“ï¼Œå½¢æˆå¯ä¾›åº”ç”¨å±‚è°ƒç”¨çš„æ ‡å‡†åŒ–èƒ½åŠ›ï¼Œä¸»è¦åŒ…æ‹¬äº‹ä»¶(æ—¶æœº)è¯†åˆ«èƒ½åŠ›ã€æ•°æ®æ ‡ç­¾èƒ½åŠ›ã€åœºæ™¯æ¨¡å‹èƒ½åŠ›ã€åŠ¨æ€å†…å®¹å‘å¸ƒèƒ½åŠ›ã€è§¦ç‚¹ç®¡ç†èƒ½åŠ›å’Œè¯„ä¼°ç›‘æ§èƒ½åŠ›ã€‚å…¶ä¸­ï¼Œå…³é”®äº‹ä»¶(æ—¶æœº)è¯†åˆ«èƒ½åŠ›æ˜¯å¼€å±•è‡ªåŠ¨åŒ–è¿è¥çš„å‰æå’ŒåŸºç¡€ã€‚ åº”ç”¨å±‚ã€‚ åº”ç”¨å±‚è°ƒç”¨ä¸‹å±‚çš„æ ‡å‡†åŒ–èƒ½åŠ›ï¼Œå®ç°é—­ç¯çš„è‡ªåŠ¨åŒ–æµç¨‹ï¼ŒåŒ…æ‹¬éœ€æ±‚åˆ†æã€ç­–ç•¥é€‚é…ã€æ—¶æœºè¯†åˆ«ã€è§¦ç‚¹åŒ¹é…ã€æ•ˆæœè¯„ä¼°äº”ä¸ªç¯èŠ‚ã€‚ (2)æ™ºèƒ½è¿ç»´ç³»ç»Ÿ æ™ºèƒ½è¿ç»´ç³»ç»Ÿæ¶æ„å±‚æ¬¡ä¸»è¦åŒ…æ‹¬äº†ä¸‰éƒ¨åˆ†ï¼š ç³»ç»Ÿç›‘æµ‹è‡ªåŠ¨åŒ–ã€‚ç³»ç»Ÿç›‘æµ‹æ˜¯è¿ç»´è‡ªåŠ¨åŒ–çš„åŸºç¡€ï¼Œè‡ªåŠ¨åŒ–æŠ“å–æœåŠ¡å™¨ç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿã€ä½œä¸šè°ƒåº¦ç³»ç»Ÿã€è®¡ç®—åº”ç”¨çš„å„ç§çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚ CPU ä½¿ç”¨ç‡ã€ä½œä¸šè´Ÿè½½ã€å­˜å‚¨ä½¿ç”¨ç‡ç­‰ï¼Œå…¨é¢æŒæ¡é›†ç¾¤çŠ¶æ€ï¼Œå¹¶å°†æ•°æ®å’Œäº‹ä»¶å­˜å‚¨äºçŸ¥è¯†åº“ï¼Œä¸ºè‡ªåŠ¨åŒ–è¿ç»´æä¾›åŸå§‹æ•°æ®ä¸äº‹ä»¶å…³ç³»ã€‚ æ•°æ®åˆ†æè‡ªåŠ¨åŒ–ã€‚ç›‘æµ‹æ•°æ®ä¸€èˆ¬ä¸ºè¿è¡Œä¿¡æ¯ï¼Œæ— æ³•ç›´æ¥ç”¨äºä¸šåŠ¡è¿ç»´ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œåˆ†æå¤„ç†ï¼Œå½¢æˆä¸šåŠ¡è¿è¡Œæ•°æ®ï¼Œæ–¹å¯å®ç°è¿ç»´é—®é¢˜è‡ªåŠ¨è¯†åˆ«ã€‚ é—®é¢˜å¤„ç†è‡ªåŠ¨åŒ–ã€‚ç»åˆ†æçš„ä¸šåŠ¡æ•°æ®å‡ºç°å¼‚å¸¸æ—¶ï¼Œè¯´æ˜ä¸šåŠ¡å­˜åœ¨è¿è¡Œé—®é¢˜ï¼Œéœ€è¿ç»´äººå‘˜å¤„ç†ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯é‡å¤å‡ºç°çš„ç®€å•é—®é¢˜ï¼Œå ç”¨äº†è¿ç»´äººå‘˜å¤§é‡æ—¶é—´ã€‚å°†è¿ç»´äººå‘˜å¤„ç†é—®é¢˜çš„æ–¹æ³•æ€»ç»“å½¢æˆæ ‡å‡†åŒ–å·¥ä½œæµç¨‹ï¼Œæˆ–å°†å¤æ‚æ“ä½œå°è£…ä¸ºå¯è§†åŒ–æ“ä½œï¼Œä¸šåŠ¡å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨è§¦å‘é—®é¢˜å¤„ç†æµç¨‹ï¼Œä¿è¯ä¸šåŠ¡è¿ç»­æ€§ã€‚ é¡¹ç›®æ•ˆç›Šåˆ†æé¡¹ç›®äº§å“å¸‚åœºåˆ†æï¼Œå¹¶æ˜ç¡®è¯´æ˜æœ¬é¡¹ç›®äº§å“å¸‚åœºå®šä½äº§å“ï¼š æ„å»ºçŸ¥è¯†å›¾è°±å’Œäººå·¥æ™ºèƒ½é©±åŠ¨çš„ä¼ä¸šæ·±åº¦æ™ºèƒ½è¿è¥å’Œè¿ç»´å¹³å° èƒŒæ™¯ï¼šä¼ä¸šæœ‰å¾ˆå¤šæ•°æ®ï¼ŒåŒ…æ‹¬å„ç§ç±»å‹æ—¥å¿—ï¼šæ–‡æœ¬æ—¥å¿—(æ¯”å¦‚ç”µä¿¡æ–‡æ¡£ï¼Œæ³•å¾‹å·å®—)ï¼Œç”¨æˆ·æ—¥å¿—(æ¯”å¦‚åª’ä½“æµè§ˆï¼Œåœ°ç†è½¨è¿¹)ï¼Œæœºå™¨æ—¥å¿—(æ¯”å¦‚ç”Ÿäº§çº¿ä¼ æ„Ÿå™¨ï¼Œé«˜é“ï¼åœ°é“è¿è¡Œæ—¥å¿—)ç­‰ã€‚æ•°æ®å®è´µã€‚å¦‚ä½•å¯¹è¿™äº›ä¼ä¸šæ•°æ®è¿›è¡Œç®¡ç†ï¼Œè¿›è€ŒåšçŸ¥è¯†å‘ç°å’ŒçŸ¥è¯†æœåŠ¡ï¼Œåœ¨äººå·¥æ™ºèƒ½æ—¶ä»£å°¤ä¸ºé‡è¦ã€‚ ç”³æŠ¥å•ä½å¸Œæœ›èƒ½å¤Ÿæ„å»ºä¸€ä¸ªæ™ºèƒ½å¹³å°ï¼Œå¯ä»¥å¸®åŠ©ä¼ä¸šï¼š ä¸€ã€çŸ¥è¯†ç®¡ç†ï¼› 1)å°†ä¼ä¸šçš„æ•°æ®æ„å»ºæˆä¼ä¸šä¸“å±çš„çŸ¥è¯†å›¾è°±ï¼Œå®ç°ä¼ä¸šçŸ¥è¯†ç®¡ç†ã€‚æ¯”å¦‚å¯ä»¥ç”¨æ¥å¸®åŠ©åŸ¹è®­å‘˜å·¥ï¼Œé™ä½å‘˜å·¥è®­ç»ƒæˆæœ¬ï¼›2)äººæœºæ™ºèƒ½äº¤äº’ç•Œé¢ç³»ç»Ÿã€‚é€šè¿‡è¯¥ç³»ç»Ÿç•Œé¢ï¼Œä½¿å¾—ä¼ä¸šèƒ½å¤Ÿä½¿ç”¨è‡ªç„¶è¯­è¨€é—®é¢˜æŸ¥è¯¢çŸ¥è¯†åº“ä¸­çŸ¥è¯†ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚ äºŒã€çŸ¥è¯†å‘ç°ï¼› 1)é€šè¿‡é«˜æ•ˆæ•°æ®çˆ¬è™«ï¼Œè·å–å¤šæºå…³è”æ•°æ®ï¼Œç”¨ä»¥æ‰©å±•ä¼ä¸šçŸ¥è¯†å›¾è°±çš„å†…å®¹å’ŒèŒƒå›´ï¼› 2)é€šè¿‡å¤šæºæ•°æ®å…³è”èåˆï¼Œç”¨ä»¥å¸®åŠ©ä¼ä¸šåšçŸ¥è¯†å‘ç°ï¼Œæœ€å¤§åŒ–ä¼ä¸šæ•°æ®çš„æ•ˆèƒ½ï¼Œå®ç°ä¼ä¸šçŸ¥è¯†å‘ç°ã€‚æ¯”å¦‚å¯ä»¥ç”¨æ¥æä¾›è‡ªåŠ¨é—®ç­”å’ŒæŠ€æœ¯æ”¯æŒï¼Œé™ä½äººå·¥æˆæœ¬ï¼› ä¸‰ã€çŸ¥è¯†æœåŠ¡ï¼› åˆ©ç”¨æ‰©å±•è¿‡çš„ä¼ä¸šçŸ¥è¯†å›¾è°±æ‰€å¸¦æ¥çš„ä¸°å¯Œè¯­ä¹‰å’Œå…³è”ä¿¡æ¯ï¼Œæ¥å®ç°çŸ¥è¯†æœåŠ¡ï¼Œå¸®åŠ©æé«˜ä¼ä¸šæ•ˆèƒ½ã€‚å³åˆ©ç”¨ä¼ä¸šçŸ¥è¯†å›¾è°±æ¥å¸®åŠ©ä¼ä¸šåŸæœ‰çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚æ¨èç­‰ã€‚åŒæ—¶å¹³å°å¯ä»¥æ”¯æŒå¤šç§å•†ä¸šæ¨¡å¼ï¼š ï¼‘)çŸ¥è¯†æœåŠ¡æ¨¡å¼(é’ˆå¯¹ä¸­å°å‹ä¼ä¸š)ï¼šç”³æŠ¥å•ä½å·²ç»åœ¨æŸäº›åº”ç”¨è¡Œä¸šæœ‰æ·±è€•ï¼Œå¹¶å·²æ„å»ºè¯¥è¡Œä¸šçš„å¤§å‹çŸ¥è¯†å›¾è°±å’Œæœ‰ç€ä¸€å¥—ç›¸å…³çš„ä¼ä¸šåº”ç”¨è§£å†³æ–¹æ¡ˆã€‚ è¿™æ ·å¯¹äºä¸€ä¸ªæœ‰ä¸šåŠ¡éœ€æ±‚çš„ä¼ä¸šï¼Œå¯ä»¥å°†è¯¥ä¼ä¸šçš„æ•°æ®å’Œå¹³å°å¯¹æ¥ï¼Œè®©è¯¥ä¼ä¸šåœ¨å¹³å°ä¸Šè¿›è¡Œä¼ä¸šåº”ç”¨ã€‚ ï¼’)æŠ€æœ¯æœåŠ¡æ¨¡å¼(é’ˆå¯¹å¤§ä¸­å‹ä¼ä¸š)ï¼šå¯¹äºä¸€ä¸ªæœ‰ä¸šåŠ¡éœ€æ±‚çš„ä¼ä¸šï¼Œä½†å…¶æ‰€å±è¡Œä¸šä¸åœ¨ç”³æŠ¥å•ä½å·²æœ‰çš„ä¸šåŠ¡èŒƒå›´ä¹‹å†…ï¼Œç”³æŠ¥å•ä½å¯ä»¥æä¾›ä¸€æ•´å¥—ä¼ä¸šçŸ¥è¯†å›¾è°±çš„ç«¯åˆ°ç«¯æ–¹æ¡ˆï¼Œå¸®åŠ©ä»–ä»¬æ„å»ºèµ·è‡ªå·±çš„ä¼ä¸šçŸ¥è¯†å›¾è°±å¹¶æä¾›æŠ€æœ¯æ”¯æŒã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>çŸ¥è¯†å›¾è°±</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>çŸ¥è¯†å›¾è°±</tag>
        <tag>äººå·¥æ™ºèƒ½</tag>
        <tag>æ™ºèƒ½è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºå®æ—¶æµå¼è®¡ç®—æŠ€æœ¯çš„é«˜ååé‡ç½‘ç»œæ•°æ®åˆ†æäº‘å¹³å°]]></title>
    <url>%2F2017%2F%E6%9E%B6%E6%9E%84%2F%E5%9F%BA%E4%BA%8E%E5%AE%9E%E6%97%B6%E6%B5%81%E5%BC%8F%E8%AE%A1%E7%AE%97%E6%8A%80%E6%9C%AF%E7%9A%84%E9%AB%98%E5%90%9E%E5%90%90%E9%87%8F%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%BA%91%E5%B9%B3%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[æ€»ä½“æ–¹æ¡ˆåŸºäºå®æ—¶æµå¼è®¡ç®—æŠ€æœ¯çš„é«˜ååé‡ç½‘ç»œæ•°æ®åˆ†æäº‘å¹³å°æ˜¯åˆ©ç”¨è‡ªæœ‰ç ”å‘çš„åˆ†å¸ƒå¼æµå¤„ç†æ¡†æ¶ï¼ŒæŠŠæ•°æ®é‡‡é›†ã€æ•°æ®æŒ–æ˜ã€æ•°æ®å¯è§†åŒ–äºä¸€èº«çš„å¤§æ•°æ®äº‘è®¡ç®—å¹³å°ï¼Œå¹³å°æ¶æ„åˆ›æ–°æ€§çš„æ”¹é€ äº†Heronå’ŒStromçš„åˆ†å¸ƒå¼æµå¼è®¡ç®—æ¡†æ¶ä»¥é€‚åº”é«˜ååé‡ç½‘ç»œå¤§è§„æ¨¡æ•°æ®çš„å¤„ç†ï¼Œä»¥Mesosä¸ºèµ„æºç®¡ç†æ¡†æ¶ï¼ŒåŒæ—¶ç»“åˆdockerå°†è®¡ç®—èŠ‚ç‚¹ã€ç®¡ç†èŠ‚ç‚¹å®¹å™¨åŒ–å¤„ç†ï¼Œä¿è¯å¯¹èµ„æºçš„æ§åˆ¶å’Œéš”ç¦»ã€‚å¹³å°åˆ©ç”¨åˆ†å¸ƒå¼æµå¼å¤„ç†æŠ€æœ¯ä¸ºä¼ä¸šæä¾›é€‚ç”¨ä¸å¤§è§„æ¨¡ç½‘ç»œæ•°æ®é‡‡é›†ã€æŒ–æ˜å’Œå¯è§†åŒ–äº‘æœåŠ¡ã€‚æ­¤å¹³å°åœ¨6å°32æ ¸CPUï¼Œ130Gå†…å­˜çš„æœåŠ¡å™¨ä¸‹å¤„ç†çš„æ•°æ®ååé‡èƒ½è¾¾åˆ°100w/sã€‚å¹³å°é¢„æœŸå¯ä»¥å®ç°åƒä¸‡çš„æˆæœåˆ›æ”¶ï¼Œå¸®åŠ©æ”¿ä¼å®¢æˆ·åŠä¸­å°ä¼ä¸šåˆ›å»ºä¾¿æ·æ˜“ç”¨çš„ä¸€ç«™å¼å¤§æ•°æ®å®æ—¶å¤„ç†åˆ†æå¹³å°ã€‚ ä¸»è¦ç ”ç©¶å†…å®¹åŸºäºå®æ—¶æµå¼è®¡ç®—æŠ€æœ¯çš„é«˜ååé‡ç½‘ç»œæ•°æ®åˆ†æäº‘å¹³å°æ˜¯ä¸€ä¸ªé›†åˆäº†æ•°æ®é‡‡é›†ã€æ•°æ®åˆ†æå’Œæ•°æ®å¯è§†åŒ–çš„å¤§æ•°æ®æœåŠ¡BDPSå¹³å°ï¼Œå¹³å°ä»¥Mesosä¸ºèµ„æºç®¡ç†æ¡†æ¶æ”¯æŒèµ„æºè°ƒåº¦ï¼Œä»¥Heronã€Stormä½œä¸ºå®æ—¶æµè®¡ç®—æ¡†æ¶ï¼Œæ•´åˆæ•°æ®é‡‡é›†ã€æ•°æ®å¯è§†åŒ–ç³»ç»Ÿï¼Œä½¿ç”¨Dockerä½œä¸ºå®¹å™¨å®ç°èµ„æºéš”ç¦»å’Œé™åˆ¶ã€‚ é¡¹ç›®ä¸»è¦ç”±ä¸‰å¤§å¹³å°ç»„æˆï¼ŒåŒ…æ‹¬äº†æ•°æ®é‡‡é›†å¹³å°ã€å¤§æ•°æ®åˆ†æå¹³å°ã€æ•°æ®å¯è§†åŒ–å¹³å°ä¸‰å¤§éƒ¨åˆ†ï¼Œå…·æœ‰å®Œæ•´çš„æ•°æ®æŒ–æ˜å’Œå¤„ç†æµç¨‹ï¼Œå…¶å·¥è‰ºæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æŠ€æœ¯è·¯çº¿æ•°æ®é‡‡é›†å¹³å°æ•°æ®é‡‡é›†å¹³å°ä¸»è¦å°†äº’è”ç½‘æ•°æ®é€šè¿‡ç‰¹å®šè§„åˆ™é‡‡é›†ä¸‹æ¥ï¼Œæ•°æ®é‡‡é›†å¹³å°å®ç°å¿«é€Ÿä½æˆæœ¬å¼€å‘ç‰¹å®šä¸»é¢˜ç½‘ç»œçˆ¬è™«ï¼Œä½¿å¾—çˆ¬è™«å¼€å‘æŠ€æœ¯å˜æˆwebçª—å£åŒ–ç•Œé¢æ“ä½œï¼Œé™ä½å­¦ä¹ é—¨æ§›ï¼Œå¹³æ»‘å­¦ä¹ æ›²çº¿ï¼ŒåŒæ—¶å°†æ›´å¤šè®¾ç½®æ”¾åœ¨åº•å±‚å¤„ç†ï¼Œå®ç°åŠè‡ªåŠ¨åŒ–è®¾è®¡ï¼Œä½¿å¾—ç•Œé¢ç®€å•æ¸…æ™°ã€‚åŒ…å«ä¸»è¦åŠŸèƒ½ï¼š 1ï¼‰å¯è§†åŒ–åˆ¶å®šçˆ¬å–è§„åˆ™ å¹³å°å…·æœ‰WebUIæ“ä½œç•Œé¢ï¼Œå¯ä»¥é€šè¿‡æ“ä½œé¡µé¢è®¾å®šè§„åˆ™ï¼Œå¦‚ç‰¹å®šæ ‡ç­¾æŠ“å–ï¼Œå¾ªç¯æŠ“å–å’Œé¡µé¢è·³è½¬è§„åˆ™ç­‰ã€‚ 2ï¼‰å›ºå®šçˆ¬å–æ›´æ–°é—´éš” çˆ¬è™«ç³»ç»Ÿå…·æœ‰ç‰¹å®šæ—¶é—´å¯¹å†…å®¹è¿›è¡Œæ›´æ–°çˆ¬å–è®¾ç½®ï¼ŒåŒæ—¶çˆ¬è™«ç³»ç»Ÿå¯ä»¥åœ¨å¤šæ¬¡æ›´æ–°ä¸­é€šè¿‡å­¦ä¹ ç®—æ³•å­¦ä¹ åˆ°ç‰¹å®šç½‘é¡µæ›´æ–°æ—¶é—´ï¼Œä»è€Œå‡å°‘äººå·¥ä»‹å…¥ã€‚ 3ï¼‰æ¨¡æ‹Ÿjsä»£ç è¿è¡Œï¼Œè‡ªåŠ¨æ¨¡æ‹Ÿç™»é™† çˆ¬è™«æ¡†æ¶åŒ…å«jsè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥è§£æjsæºç ï¼Œå¹¶è¿›è¡Œæ¨¡æ‹Ÿç™»é™†æ“ä½œã€‚ 4ï¼‰è¯†åˆ«é€šç”¨æ€§éªŒè¯ç  å…·æœ‰å¯¹é€šç”¨å‹éªŒè¯ç å¦‚å­—æ¯æ•°å­—æ··åˆå‹éªŒè¯ç è¿›è¡Œè¯†åˆ«åŠŸèƒ½ï¼Œå®ç°è‡ªåŠ¨ç™»é™†åŠŸèƒ½ã€‚ 5ï¼‰é«˜æ€§èƒ½ï¼Œåˆ†å¸ƒå¼çˆ¬å–åŠå­˜å‚¨ å…·æœ‰é«˜å¹¶å‘çˆ¬å–åŠŸèƒ½ï¼Œå¯ä»¥å®ç°åˆ†å¸ƒå¼çˆ¬å–å’Œå­˜å‚¨ä»»åŠ¡ã€‚ 6ï¼‰IPä»£ç†æœåŠ¡ è®¾ç½®IPä»£ç†æ± å’ŒUAæ± ï¼Œçˆ¬è™«ç³»ç»Ÿå¯ä»¥è‡ªåŠ¨åˆ‡æ¢IPåŠUAï¼Œé˜²æ­¢ç½‘ç«™å°æ€ã€‚ æ•°æ®é‡‡é›†å¹³å°æ¨¡å—è®¾è®¡ä¸»è¦åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†é€šè¿‡å‰ç«¯å°†UIè§„åˆ™è½¬æ¢ä¸ºçˆ¬è™«ä»£ç å­˜å…¥çˆ¬è™«æ•°æ®åº“CrawlerDBä¸­ï¼›ç¬¬äºŒéƒ¨åˆ†ä¸ºé€šè¿‡CrawlerDBä¸‹è¾¾æŠ“å–å‘½ä»¤ï¼Œç”Ÿäº§æŠ“å–åˆ—è¡¨fetchlistï¼›ç¬¬ä¸‰éƒ¨åˆ†Fetchlisté€šè¿‡ç»„åˆurlè¯·æ±‚å’ŒIPåœ°å€ã€loginç™»é™†ä¿¡æ¯å¾—åˆ°ç½‘ç»œè¯·æ±‚ï¼›ç¬¬å››éƒ¨åˆ†Fetchlisté€šè¿‡ç½‘ç»œè¯·æ±‚è·å–ç›®æ ‡ç½‘é¡µå†…å®¹ï¼Œå¹¶æäº¤ç»™parseræ¨¡å—è¿›è¡Œé¡µé¢è§£æï¼›ç¬¬äº”éƒ¨åˆ†å°†è§£æç»“æœè¢«å­˜å‚¨æ•°æ®åº“ä¸­ï¼ŒåŒæ—¶å‘CrawlerDBåé¦ˆçˆ¬å–ç»“æœçŠ¶æ€ï¼Œæ›´æ–°çˆ¬å–ä¿¡æ¯ã€‚è®¾è®¡å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å¤§æ•°æ®åˆ†æå¹³å°å¤§æ•°æ®åˆ†æå¹³å°æ˜¯ä¸€ä¸ªé›†æ•°æ®å¤„ç†ã€ç‰¹å¾å·¥ç¨‹ã€æœºå™¨å­¦ä¹ ç®—æ³•ã€æ–‡æœ¬ç®—æ³•äºä¸€èº«çš„åˆ†å¸ƒå¼æµå¼å¤„ç†å¹³å°ï¼Œå¹³å°æä¾›ä»æ•°æ®é¢„å¤„ç†åˆ°æ¨¡å‹è¯„ä¼°çš„ä¸€ç«™å¼å¹³å°æœåŠ¡ï¼ŒåŸºäºWEBå·¥ä½œç•Œé¢ï¼Œé€šè¿‡æ‹–ã€æ‹‰ã€æ‹½ç­‰æ–¹å¼å³å¯å®Œæˆå¤æ‚æ•°æ®æŒ–æ˜æµç¨‹ï¼Œæ”¯æŒè‡ªå®šä¹‰ç®—æ³•å’Œç»„ä»¶ï¼Œçµæ´»å¼€æ”¾çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œæä¾›ä¸°å¯Œçš„åˆ†å¸ƒå¼ç®—æ³•ï¼Œæé«˜æ¨¡å‹ç²¾åº¦ã€‚ å¹³å°é™¤äº†å…·æœ‰æ•°æ®åˆ†æåŠŸèƒ½ï¼Œå…¶ä¸€ä¸ªæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä»¥åšå®æ—¶è®¡ç®—çš„æµå¤„ç†å¹³å°ã€‚å¹³å°æ•´åˆäº†Stormã€Heronç­‰å®æ—¶è®¡ç®—åˆ†å¸ƒå¼æµå¤„ç†æŠ€æœ¯ï¼Œä»¥Mesosä¸ºèµ„æºç®¡ç†æ¡†æ¶ç®¡ç†ç®¡ç†æµå¼å¤„ç†å®ä½“ï¼Œä»è€Œå®ç°ååé‡è¾¾åˆ°100w/sçš„å®æ—¶æ•°æ®åˆ†æã€‚åœ¨ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸Šä¸»è¦é‡‡ç”¨äº†åå‹æœºåˆ¶æ¥ç¡®ä¿æ‹“æ‰‘åœ¨ç»„ä»¶ç¼“æ…¢çš„æƒ…å†µä¸‹å¯ä»¥è‡ªé€‚åº”ï¼ŒåŒæ—¶é‡‡ç”¨äº†dockerå®¹å™¨æŠ€æœ¯ä½œä¸ºæ‹“æ‰‘èŠ‚ç‚¹çš„éš”ç¦»å’Œèµ„æºçš„é™åˆ¶ï¼Œä»è€Œä¿è¯æ°¸è¿œä¸èƒ½è¶…è¿‡åˆå§‹åˆ†é…çš„èµ„æºé™åˆ¶ã€‚ æ•°æ®å¯è§†åŒ–å¹³å°æ•°æ®å¯è§†åŒ–å¹³å°é‡‡ç”¨EChartsæ¡†æ¶å’ŒD3æ¡†æ¶ç›¸ç»“åˆçš„æ–¹å¼ã€‚æä¾›å¯è§†åŒ–åœºæ™¯æ¨¡æ¿ï¼ŒåŒ…æ‹¬è¿è¥åŠ¨æ€ç›´æ’­ã€æ•°æ®ç»¼åˆå±•ç¤ºã€è®¾å¤‡ç›‘æ§é¢„è­¦ç­‰å¤šç§åœºæ™¯æ¨¡æ¿ï¼Œç¨åŠ ä¿®æ”¹å°±èƒ½å¤Ÿç›´æ¥æœåŠ¡äºæ‚¨çš„å¯è§†åŒ–éœ€æ±‚ï¼Œæ•°æ®å¯è§†åŒ–å¹³å°é‡‡ç”¨æ‹–æ‹½å¼ç•Œé¢å¸ƒå±€ï¼Œé€šè¿‡æ‹–æ‹½å³å¯å®ç°çµæ´»çš„å¯è§†åŒ–å¸ƒå±€ï¼Œä»¥WebGLæŠ€æœ¯ä½œä¸ºæ”¯æ’‘ï¼Œèƒ½å¤Ÿç»˜åˆ¶æµ·é‡æ•°æ®ä¸‹çš„åœ°ç†è½¨è¿¹ã€é£çº¿ã€çƒ­åŠ›ã€åŒºå—ã€3Dåœ°å›¾/åœ°çƒï¼Œæ”¯æŒå¤šå±‚å åŠ ï¼Œæ”¯æŒå…³ç³»å‹æ•°æ®åº“ã€éå…³ç³»å‹æ•°æ®åº“ã€Restful APIã€CSVã€é™æ€JSONç­‰å¤šç§æ•°æ®æ¥æºï¼Œä¸”èƒ½å¤Ÿå®ç°åŠ¨æ€è½®è¯¢ï¼Œå°†å¤šä¸ªæ•°æ®æºæ±‡èšäºä¸€ä¸ªå¯è§†åŒ–ç•Œé¢ä¸­ã€‚ åˆ›æ–°ç‚¹1ã€é€šè¿‡æ”¹åŠ¨å¼€æºæ¡†æ¶Heronå’ŒStormæ„å»ºå®æ—¶æ¸…æ´—ç³»ç»Ÿçš„åº•å±‚æ¡†æ¶ï¼Œå®ç°äº†åŸºäºè¿›ç¨‹çš„å®æ—¶è®¡ç®—æ¨¡å‹ï¼Œå¤§å¤§é™ä½äº†å¤§è§„æ¨¡ç½‘ç»œæ•°æ®å¯¹å†…å­˜çš„å æœ‰é‡ï¼Œæå‡äº†å®æ—¶å¤„ç†å¹³å°çš„ç¨³å®šæ€§ã€‚ 2ã€è§£å†³äº†å¤§è§„æ¨¡ç½‘ç»œæ•°æ®çš„å®æ—¶æ€§å¤„ç†æ•°æ®æ—¶çš„ååé‡é—®é¢˜ï¼Œå¹³å°èƒ½ä»¥é«˜ååé‡åœ°è¿›è¡Œæ•°æ®æ¸…æ´—ã€æ¨¡å‹è®­ç»ƒåŠå®æ—¶åé¦ˆï¼Œä¸ºå®æ—¶è€Œä¸”ç²¾å‡†çš„è¥é”€æä¾›ä¸€ä¸ªè‰¯å¥½çš„åŸºç¡€ã€‚ 3ã€é€šè¿‡æ•´åˆæ•°æ®é‡‡é›†ã€æ•°æ®æ¸…æ´—ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ï¼Œæ„å»ºä¸€ç«™å¼å¤§æ•°æ®æœåŠ¡å¹³å°(Big Data Platform as a Service , BDPS)ã€‚ äº§å“å¯¹æ¯”å¸‚é¢ä¸Šç°å­˜ä¸»è¦å¤§æ•°æ®æŒ–æ˜å¹³å°çš„äº§å“ä¸»è¦æœ‰å›½äº‘æ•°æ®çš„â€œé­”é•œâ€ã€é˜¿é‡Œå·´å·´çš„â€œæ•°åŠ â€ã€æ°¸æ´ªå•†æ™ºçš„æ°¸æ´ªå¤§æ•°æ®è®¡ç®—å¹³å°ç­‰ã€‚å°†å¸‚åœºä¸Šä¸»è¦çš„ä¸‰ä¸ªäº§å“å’Œæœ¬äº§å“è¿›è¡Œå¯¹æ¯”ã€‚ é€šè¿‡å¯¹æ¯”å¯çŸ¥ï¼šç°æœ‰å„å¹³å°çš„å¤§æ•°æ®å·¥å…·è¾ƒä¸ºå•ä¸€ï¼Œä¸»è¦é›†ä¸­åœ¨äº‘è®¡ç®—ã€æ•°æ®æŒ–æ˜å’Œæ•°æ®å¯è§†åŒ–ç­‰é¢†åŸŸï¼Œä½†æ˜¯å„ä¼ä¸šçš„äº§å“è¾ƒä¸ºåˆ†æ•£ï¼Œå„ä¼ä¸šæ²¡æœ‰ä¸€å¥—å®Œæ•´çš„ä»æ•°æ®é‡‡é›†åˆ°æ•°æ®æ¸…æ´—ã€åˆ°æ•°æ®æŒ–æ˜å’Œæ•°æ®å¯è§†åŒ–çš„å¤§æ•°æ®è§£å†³æ–¹æ¡ˆã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>å¤§æ•°æ®</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>æµå¼è®¡ç®—</tag>
        <tag>Storm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºDockerå®¹å™¨äº‘æŠ€æœ¯çš„å¤§æ•°æ®æ™ºèƒ½æŒ–æ˜å¤„ç†ä¸€ç«™å¼æœåŠ¡å¹³å°]]></title>
    <url>%2F2017%2F%E6%9E%B6%E6%9E%84%2F%E5%9F%BA%E4%BA%8EDocker%E5%AE%B9%E5%99%A8%E4%BA%91%E6%8A%80%E6%9C%AF%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%99%BA%E8%83%BD%E6%8C%96%E6%8E%98%E5%A4%84%E7%90%86%E4%B8%80%E7%AB%99%E5%BC%8F%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯ç®€ä»‹éšç€å„è¡Œä¸šä¿¡æ¯åŒ–é€Ÿåº¦çš„åŠ å¿«ï¼Œä¸åŒç±»å‹çš„æ•°æ®çš†å‘ˆç°å‡ºçˆ†å‘æ€§çš„å¢é•¿å¹¶è´¨å˜æˆå¤§æ•°æ®ã€‚éšç€æµ·é‡ã€ç»†è‡´çš„æ–°æ•°æ®æºçš„ä¸æ–­å‘ˆç°ï¼Œå¤§æ•°æ®åœ¨è¿è¥ã€ç­–åˆ’ã€è¥é”€ç­‰æ–¹é¢çš„åº”ç”¨ï¼Œå¾—åˆ°ä¸åŒå±‚é¢çš„æŠ€æœ¯æŒ‡æ ‡ï¼Œäº§ç”Ÿç³»åˆ—çš„æŠ¥è¡¨å¹¶åé¦ˆåœ¨ç”Ÿäº§å’Œè¿è¥ä¸­ï¼Œå¤§æ•°æ®ä»·å€¼çš„æŒ–æ˜åº”ç”¨æˆä¸ºæ™ºæ…§ä¼ä¸šå‘å±•çš„æ‰€è¿«åˆ‡éœ€è¦è¿ˆå‡ºçš„é‡è¦ä¸€æ­¥ã€‚ éšç€æµ·é‡ã€ç»†è‡´çš„æ–°æ•°æ®æºçš„å‘ˆç°ï¼ŒåŸºäºæµ·é‡æ•°æ®çš„å­˜å‚¨æŠ€æœ¯ã€æŒ–æ˜æŠ€æœ¯ã€è®¡ç®—æŠ€æœ¯ã€å‰–ææŠ€æœ¯ç­‰å„ç§æŠ€æœ¯çš„é£é€Ÿè¿›æ­¥ï¼Œä½¿ä¼ä¸šå¯ä»¥æ·±åŒ–å‘æ˜å¤§æ•°æ®çš„å‘å±•æ½œåŠ›ï¼Œåº”ç”¨ä»¥å¾€æ— æ³•åº”ç”¨çš„å•†ä¸šä¿¡æ¯ï¼Œä»è€Œå‘ç°å¤§é‡çš„å•†æœºã€‚è‡ª2012å¹´å‘å±•è‡³ä»Šï¼Œå¤§æ•°æ®å·²ç»æ¸—é€åˆ°äº†æ¯ä¸ªè¡Œä¸šå’Œä¸šåŠ¡é¢†åŸŸï¼Œé€æ¸æˆä¸ºé‡è¦çš„ç”Ÿäº§å› ç´ ã€‚ä½†æ˜¯ï¼Œä¼ ç»Ÿçš„ä¿¡æ¯åŒ–ç³»ç»Ÿå’Œå·¥å…·é€æ¸æ— æ³•æ‰¿è½½å¦‚æ­¤åºå¤§çš„æ•°æ®å­˜å‚¨å’Œè¿ç®—ï¼Œåˆ†ææ•ˆç‡é€æ­¥åœ°ä¸‹ï¼Œä»¥è‡³äºæ— æ³•èƒœä»»æ•°æ®æŒ–æ˜åˆ†æçš„éœ€æ±‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†³ç­–è€…ä»¬å¾€å¾€å‘å¤§æ•°æ®é æ‹¢ï¼Œå¯¹åŸæœ‰ä¿¡æ¯ç³»ç»Ÿè¿›è¡Œæ”¹é€ ï¼Œå»æ‹¥æŠ±çœŸæ­£æ„ä¹‰ä¸Šçš„å¤§æ•°æ®èµ„äº§ã€‚ é¢å¯¹å¦‚æ­¤åºå¤§è€Œå¤æ‚çš„æ•°æ®ï¼Œè¿˜éœ€è¦ä¸“é—¨è®¾è®¡çš„è½¯ç¡¬ä»¶å·¥å…·è¿›è¡Œå¤„ç†ï¼Œæ•°æ®åˆ†æç±»äº§å“åº”è¿è€Œç”Ÿã€‚æ•°æ®åˆ†æç±»äº§å“ä¾§é‡äºæ•°æ®çš„åˆ†æå’ŒæŒ–æ˜ä»¥åŠä¸ºä¼ä¸šç”¨æˆ·æä¾›æ¯”è¾ƒå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚ç›®å‰å›½å†…å¤–å¸‚åœºçš„å¤§æ•°æ®æœåŠ¡å•†çº·çº·æ¨å‡ºäº†é¢å‘äº‘è®¡ç®—ã€æ•°æ®æŒ–æ˜å’Œæ•°æ®å¯è§†åŒ–ç­‰é¢†åŸŸçš„çš„å¤§æ•°æ®æœåŠ¡åº”ç”¨æŠ€æœ¯åŠå¹³å°ï¼Œä½†ç”±äºå—åˆ°ç ”å‘æŠ•å…¥ä¸è¶³ã€ç ”å‘äººæ‰ç¨€ç¼ºç­‰å› ç´ çš„åˆ¶çº¦ï¼Œä¸»è¦æ˜¯ä»…é¢å‘å…¶ä¸­ä¸€ä¸ªç»†åˆ†é¢†åŸŸåº”ç”¨çš„åŠŸèƒ½æ€§äº§å“ï¼Œå­˜åœ¨åº”ç”¨æ“ä½œå¤æ‚ã€å¯¹æ“ä½œäººå‘˜çš„æŠ€æœ¯ç´ è´¨çš„è¦æ±‚é«˜ã€å¤šåŠŸèƒ½äº§å“æ•´åˆåˆ©ç”¨æˆæœ¬é«˜ç­‰ä¸è¶³ï¼Œåˆ¶çº¦äº†ä¸­å°ä¼ä¸šå¯¹å¤§æ•°æ®æŠ€æœ¯çš„åº”ç”¨ã€‚ å› æ­¤ï¼Œç«™åœ¨å¯¹å¤§æ•°æ®å…¨å±€è®¤è¯†çš„è§’åº¦ã€æ·±å…¥ä¸­å°ä¼ä¸šçš„å¤§æ•°æ®åº”ç”¨éœ€æ±‚ç ”ç©¶ä¸€å¥—ä»å¤§æ•°æ®æ•°æ®é‡‡é›†åˆ°æ•°æ®æ¸…æ´—ã€åˆ°æ•°æ®æŒ–æ˜å’Œæ•°æ®å¤„ç†å¯è§†åŒ–çš„ä¸€ç«™å¼å¤§æ•°æ®åº”ç”¨è§£å†³æ–¹æ¡ˆå¯¹æ¨åŠ¨å¤§æ•°æ®åŠç›¸å…³è¡Œä¸šçš„å‘å±•å…·æœ‰éå¸¸é‡è¦æ„ä¹‰ã€‚ æŠ€æœ¯ç ”å‘æƒ…å†µæœ¬é¡¹ç›®æ˜¯ç«™åœ¨å¯¹å¤§æ•°æ®å…¨å±€è®¤è¯†çš„è§’åº¦ã€æ·±å…¥ä¸­å°ä¼ä¸šä½æˆæœ¬å¤§æ•°æ®åº”ç”¨éœ€æ±‚ï¼Œç ”ç©¶çš„ä¸€å¥—åŸºäºDockerå®¹å™¨äº‘æŠ€æœ¯çš„å¤§æ•°æ®æ™ºèƒ½æŒ–æ˜å¤„ç†ä¸€ç«™å¼æœåŠ¡å¹³å°ï¼Œæ˜¯ä¸€ä¸ªé¢å‘ä¸­å°ä¼ä¸šé€šç”¨å‹çš„é›†æˆæ™ºèƒ½æ•°æ®é‡‡é›†ã€æ•°æ®åˆ†ææŒ–æ˜ã€æ•°æ®å¯è§†åŒ–çš„ä¸€ç«™å¼å¤§æ•°æ®æœåŠ¡å¹³å°ï¼Œä½¿å¾—ç”¨æˆ·æ— éœ€å…³å¿ƒé›†ç¾¤çš„æ­å»ºå’Œè¿ç»´ï¼ŒWEBé¡µé¢çš„å·¥ä½œç¯å¢ƒå®ç°äº†æ‹–æ‹½å¼ã€ç‚¹å‡»å¼ç­‰ç±»ä¼¼äºæ¡Œé¢æ“ä½œæ–¹å¼ï¼Œä»æœ€åˆå§‹çš„ç½‘ç«™æ•°æ®é‡‡é›†åˆ°å¯¹é‡‡é›†å›æ¥çš„æ•°æ®è¿›è¡Œæ•°æ®æ¸…æ´—å’Œæ•°æ®åˆ†æï¼Œæœ€åä»¥å¯è§†åŒ–å›¾è¡¨çš„å½¢å¼å‘ˆç°åˆ†æç»“æœï¼Œä¸ºä¸­å°ä¼ä¸šæä¾›å®‰å…¨ã€ä¾¿æ·ã€é«˜æ•ˆçš„ä¸€ç«™å¼æ•°æ®æŒ–æ˜å¤„ç†æœåŠ¡ï¼ŒåŸºäºè½»é‡çº§è™šæ‹ŸåŒ–æŠ€æœ¯â€”â€”dockeræŠ€æœ¯å®ç°äº†ä¸€ç«™å¼äº‘è®¡ç®—ä¸å¤§æ•°æ®æ™ºèƒ½æŒ–æ˜å¤„ç†çš„å®Œç¾ç»“åˆã€‚ æ‰€é‡‡ç”¨çš„å…³é”®æŠ€æœ¯ï¼ˆ1ï¼‰ åŸºäºDockerå’ŒMesosç»“åˆçš„åˆ†å¸ƒå¼è®¡ç®—æ¶æ„æœ¬é¡¹ç›®æ•´åˆäº†Mesoså’ŒDockerçš„ä¼˜åŠ¿ï¼Œå®ç°Mesoså’ŒDockerçš„æ— ç¼å¯¹æ¥ï¼Œå°†å„åº”ç”¨é€šè¿‡Dockerè¿›è¡Œå®¹å™¨åŒ–ç®¡ç†ï¼Œè®©åº”ç”¨åœ¨æ›´è½»é‡åŒ–çš„æƒ…å†µä¸‹åˆ†é…èµ„æºã€éš”ç¦»è¿›ç¨‹å’Œç½‘ç»œï¼Œå®Œæˆä»å¼€å‘åˆ°éƒ¨ç½²çš„å¿«é€Ÿæ­å»ºï¼ŒåŒæ—¶å°†Dockerä½œä¸ºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„è¿›ç¨‹ç®¡ç†ï¼Œå¯¹é€šè¿‡Mesoså„åº”ç”¨è¿›è¡Œç®¡ç†ï¼Œæ—¢è§£å†³äº†åˆ†å¸ƒå¼çš„ç—›ç‚¹ï¼Œåˆä¸ºç”¨æˆ·æä¾›åŸºäºé›†ç¾¤ç¯å¢ƒçš„é«˜é€Ÿè®¡ç®—èƒ½åŠ›ï¼Œæå¤§åœ°æé«˜äº†å‘å¸ƒæ•ˆç‡ã€‚ ï¼ˆ2ï¼‰ åŸºäºæœºå™¨å­¦ä¹ çš„é˜²å°æ€æ™ºèƒ½æ•°æ®çˆ¬å–æŠ€æœ¯è¯¥å¹³å°é¦–å…ˆï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨å¤´æ–‡ä»¶è¯·æ±‚ï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨å¤´æ–‡ä»¶è¯·æ±‚å¯ä»¥ä¼ªè£…æˆæµè§ˆå™¨å¯¹æœåŠ¡å™¨è¿›è¡Œè®¿é—®ï¼Œæ¨¡æ‹Ÿçš„å¤´è¯·æ±‚åŒ…æ‹¬äº†æ‰‹æœºPCç«¯ç­‰æ•°åç§æµè§ˆå™¨ï¼›å…¶æ¬¡ï¼Œæ„å»ºipä»£ç†æ± ï¼Œå¯ä»¥é€šè¿‡åˆ‡æ¢ipé˜²æ­¢æœåŠ¡å™¨å¯¹ipè®¿é—®çš„é™åˆ¶ï¼Œé€šè¿‡è’™ç‰¹å¡ç½—ç®—æ³•éšæœºåˆ‡æ¢ipä»£ç†ï¼Œä¼ªè£…æˆå¤šä¸ªç”¨æˆ·è¿›è¡Œè®¿é—®ï¼Œå¹¶åˆ©ç”¨æœºå™¨å­¦ä¹ å­¦ä¹ ç½‘ç«™å°æ€è§„å¾‹ä½¿å¾—ä»£ç†æ± å¯ä»¥æœ€å¤§æ•ˆç‡çš„åˆ©ç”¨ä»£ç†ipï¼Œä»è€Œé˜²æ­¢æŸäº›ç½‘ç«™å¯¹å•ä¸ªç”¨æˆ·çš„è®¿é—®é™åˆ¶ï¼›æœ€åï¼Œé€šè¿‡Phantomjså¯¹javascriptä»£ç è¿›è¡Œæ¨¡æ‹Ÿè¿è¡Œï¼Œä»è€Œå®ç°å¯¹ç½‘ç«™çš„äº¤äº’å¼æ“ä½œï¼Œæ¨¡èŒƒçœŸäººä¸Šç½‘è¡Œä¸ºï¼Œé˜²æ­¢ç½‘ç«™å¯¹çˆ¬è™«çš„å°æ€ã€‚é‡‡ç”¨åŸºäºæœºå™¨å­¦ä¹ çš„å¤šç§åå°æ€ç»„åˆå®ç°å¯¹æ•°æ®çš„æ™ºèƒ½çˆ¬å–ï¼Œæé«˜æŠ“å–æ•°æ®çš„è´¨é‡ã€å¯é æ€§å’Œå®Œæ•´æ€§ã€‚ ï¼ˆ3ï¼‰ åŸºäºMD5æ ‘çš„URLå»é‡ç®—æ³•çš„æ•°æ®æ¸…æ´—æŠ€æœ¯å¯¹URLè¿›è¡Œå»é‡æ˜¯å®ç°é«˜æ€§èƒ½æ•°æ®æŒ–æ˜æœåŠ¡çš„ä¸€é¡¹ååˆ†å…³é”®çš„æŠ€æœ¯ä¹‹ä¸€ã€‚è¯¥å¹³å°å°† MD5 åŠ å¯†ç®—æ³•ä»¥åŠæ ‘ç›¸ç»“åˆè®¾è®¡å‡ºä¸€ç§åŸºäº MD5 çš„URLå»é‡æ ‘å¯¹URLè¿›è¡Œå»é‡å¤„ç†ï¼Œé¿å…äº†æ•°æ®çš„é‡å¤ã€‚ä¸»è¦æ–¹æ³•å¦‚ä¸‹ï¼š1ï¼‰ç”±äºåœ¨ç½‘ç»œçˆ¬è™«æŠ“å–è¿‡ç¨‹ä¸­éœ€è¦é¢‘ç¹çš„è§£æURLï¼Œå¯¼è‡´å¯¹DNSæœåŠ¡å™¨çš„å‹åŠ›è¿‡å¤§ï¼Œæœ¬é¡¹ç›®å¼•å…¥å¹¶ä¸”ä¼˜åŒ–äº† DNS æœ¬åœ°ç¼“å­˜æ¨¡å—ï¼Œå°†åŸŸåä½¿ç”¨å“ˆå¸Œå‡½æ•°åˆ°å“ˆå¸Œè¡¨ï¼Œåˆ©ç”¨çº¿æ€§æŒ‡é’ˆå°†åŸŸååˆ°ipçš„æ˜ å°„æŒ‡å‘è‡³å†²çªåŸŸï¼Œä»¥æ­¤è§£å†³å½“æ•°æ®é‡è¾ƒå¤§æ—¶å‘ç”Ÿç¢°æ’çš„æƒ…å½¢ã€‚2ï¼‰å†åˆ©ç”¨äº†MD5åŠ å¯†çš„ä½ç¢°æ’ç‡ï¼Œå°†MD5å’Œæ ‘ç›¸ç»“åˆæ„æˆå»é‡æ ‘ï¼Œç”±äºæ ‘çš„ç»“æ„ä¸æ“ä½œç³»ç»Ÿæ–‡ä»¶ç›®å½•çš„ç»“æ„ä¸€æ ·ï¼Œå»é‡æ ‘ä¹Ÿå¯ä»¥ç”¨å¦ä¸€ç§æ–¹æ³•å³åŸºäºç£ç›˜ç¬¦å·çš„æŸ¥æ‰¾æ–¹å¼ï¼Œå°†å¯†æ–‡ç”Ÿæˆçš„æ•°ç»„è½¬ä¸ºç›¸åº”çš„è·¯å¾„ï¼Œå¦‚æœè·¯å¾„å­˜åœ¨åˆ™ä»£è¡¨linkurlä¸­å·²æœ‰ç›¸åº”çš„urlï¼Œå¦‚æœä¸å­˜åœ¨è¯´æ˜æ­¤urlä¸ºæ–°çš„urlã€‚ ï¼ˆ4ï¼‰ åŸºäºäºŒåˆ†ç­–ç•¥åˆ†ç»„çš„è´Ÿè½½å‡è¡¡æ”¹è¿›ç®—æ³•çš„æ•°æ®åˆ†ææŠ€æœ¯å¯¹äºæœåŠ¡ç±»å‹çš„åº”ç”¨ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿç”¨è´Ÿè½½å‡è¡¡å™¨å’ŒæœåŠ¡å‘ç°æ¥ä¿è¯é«˜å¯é æ€§çš„æœåŠ¡ã€‚æœ¬é¡¹ç›®åŸºäºSparkå¯¹APFP_Growth ç®—æ³•è¿›è¡Œæ”¹è¿›ï¼Œç ”ç©¶åŸºäºäºŒåˆ†ç­–ç•¥åˆ†ç»„çš„è´Ÿè½½å‡è¡¡æ”¹è¿›ï¼Œæ”¹è¿›ç°æœ‰çš„å¹¶è¡ŒPFP_Growth ç®—æ³•åœ¨ FList åˆ†ç»„çš„æ­¥éª¤ä¸­æ²¡æœ‰è€ƒè™‘åˆ†ç»„ä¸­è´Ÿè½½å‡è¡¡çš„é—®é¢˜ï¼Œæ”¹è¿›çš„ APFP_Growth ç®—æ³•å…·æœ‰å¾ˆå¥½çš„å¯æ‰©å±•æ€§ï¼Œå¹¶ä¸”æ¯” PFP_Growth ç®—æ³•å…·æœ‰æ›´å¥½çš„è´Ÿè½½å‡è¡¡æ•ˆæœã€‚ ï¼ˆ5ï¼‰ åŸºäºæ”¹è¿›çš„å¹¶è¡ŒååŒè¿‡æ»¤ç®—æ³•çš„æ•°æ®å¤„ç†æŠ€æœ¯æœ¬é¡¹ç›®åŸºäºSparké€šè¿‡å°†æ„å»ºå…±ç°çŸ©é˜µã€çŸ©é˜µç›¸ä¹˜ç®€åŒ–ä¸ºè·å–é‚»å±…ç”¨æˆ·æ”¹è¿›åŸºäºå…±ç°çŸ©é˜µçš„å¹¶è¡Œç®—æ³•ï¼Œæ”¹è¿›çš„å¹¶è¡ŒååŒè¿‡æ»¤ç®—æ³•æ¯”åŸæ¥åŸºäºå…±ç°çŸ©é˜µçš„å¹¶è¡Œç®—æ³•æ›´é€‚åˆäºåˆ†å¸ƒå¼å¹¶è¡Œè®¡ç®—ï¼Œå…·æœ‰æ›´å¥½çš„è¿è¡Œæ•ˆç‡å’Œæ›´é«˜çš„æ¨èç²¾åº¦ã€‚æ”¹è¿›åçš„å¹¶è¡Œç®—æ³•ä¸»è¦é€šè¿‡ä¸‰ä¸ªæ­¥éª¤å®ç°ï¼šç”Ÿæˆè¯„åˆ†çŸ©é˜µã€è·å–é‚»å±…ç”¨æˆ·ã€å½¢æˆæ¨èã€‚è·å–é‚»å±…ç”¨æˆ·ä¸»è¦æ˜¯é€šè¿‡ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æ¥æ‰¾å‡ºç›®æ ‡ç”¨æˆ·çš„ K ä¸ªé‚»å±…ç”¨æˆ·ï¼Œå³ç”¨ K æœ€å°å †çš„ç®—æ³•æ¥æ‰¾å‡º K ä¸ªç›¸ä¼¼åº¦æœ€å¤§å€¼ã€‚ æŠ€æœ¯ç ”å‘æ–¹æ¡ˆè¯¥å¹³å°ä»¥Apache Mesosä¸ºèµ„æºç®¡ç†æ¡†æ¶æ”¯æŒèµ„æºè°ƒåº¦ï¼Œä»¥Sparkã€Stormã€Hiveä½œä¸ºè®¡ç®—æ¡†æ¶ï¼Œä½¿ç”¨Dockerä½œä¸ºå®¹å™¨åŒ…è£…Mesosã€Sparkã€Stormã€Hiveå®ç°èµ„æºéš”ç¦»ã€‚ æœ¬é¡¹ç›®ä»¥Dockerå®¹å™¨ä¸ºå•å…ƒä¸ºæ¯ä¸ªåº”ç”¨æ„å»ºä¸€ä¸ªå®¹å™¨ï¼ˆå¦‚å›¾1æ‰€ç¤ºï¼‰ï¼Œå€ŸåŠ©Dockerå®ç°ç”¨æˆ·å®šåˆ¶çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚ Dockerä¸»è¦åŒ…æ‹¬äº†Docker Clientã€Docker Daemonã€Docker Registryã€Graphã€Driverã€libcontainerä»¥åŠDocker containerä¸ƒä¸ªæ¨¡å—ï¼Œå…¶ä¸­Docker Clientæ˜¯Dockeræ¶æ„ä¸­ç”¨æˆ·ç”¨æ¥å’ŒDocker Daemonå»ºç«‹é€šä¿¡çš„å®¢æˆ·ç«¯;Docker Daemonæ˜¯Dockeræ¶æ„ä¸­ä¸€ä¸ªå¸¸é©»åœ¨åå°çš„ç³»ç»Ÿè¿›ç¨‹ï¼Œå…¶è´Ÿè´£æ¥å—å¹¶å¤„ç†Docker Clientå‘é€çš„è¯·æ±‚;Docker Registryæ˜¯ä¸€ä¸ªå­˜å‚¨å®¹å™¨é•œåƒçš„ä»“åº“;Graphè´Ÿè´£å¯¹Dockerå·²ä¸‹è½½å®¹å™¨é•œåƒçš„ä¿ç®¡è€…ï¼Œä»¥åŠå·²ä¸‹è½½å®¹å™¨é•œåƒä¹‹é—´å…³ç³»çš„è®°å½•è€…;Driveræ˜¯Dockeræ¶æ„ä¸­çš„é©±åŠ¨æ¨¡å—ï¼Œé€šè¿‡Driveré©±åŠ¨ï¼ŒDockerå¯ä»¥å®ç°å¯¹Dockerå®¹å™¨æ‰§è¡Œç¯å¢ƒçš„å®šåˆ¶ï¼Œä¸ºäº†å°†Dockerå®¹å™¨çš„ç®¡ç†ä»Docker Daemonå†…éƒ¨ä¸šåŠ¡é€»è¾‘ä¸­åŒºåˆ†å¼€æ¥ï¼Œè®¾è®¡äº†Driverå±‚é©±åŠ¨æ¥æ¥ç®¡æ‰€æœ‰è¿™éƒ¨åˆ†è¯·æ±‚ï¼›libcontaineræ˜¯Dockeræ¶æ„ç›´æ¥è®¿é—®å†…æ ¸ä¸­ä¸å®¹å™¨ç›¸å…³çš„APIï¼Œlibcontaineræ‰©å±•äº†LXCç‰¹æ€§å¹¶ä½¿ç”¨é«˜å±‚çš„ APIï¼ŒLXC ä½œä¸ºä¸€ç§å…±äº« Kernel çš„æ“ä½œç³»ç»Ÿçº§åˆ«çš„è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åœ¨æ‰§è¡Œæ—¶ä¸é‡å¤åŠ è½½å†…æ ¸ï¼Œä¸”è™šæ‹Ÿå®¹å™¨(Container)ä¸å®¿ä¸»æœº(Host)ä¹‹é—´å…±äº«å†…æ ¸æ¥åŠ å¿«å¯åŠ¨é€Ÿåº¦å’Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼›Docker containerï¼ˆDockerå®¹å™¨ï¼‰æ˜¯Dockeræ¶æ„ä¸­æœåŠ¡äº¤ä»˜çš„æœ€ç»ˆä½“ç°å½¢å¼ã€‚ Mesosç”¨äºå®ç°äº†åŒå±‚è°ƒåº¦æœºåˆ¶ï¼Œä½¿å®ƒå¯ä»¥ç®¡ç†å¤šç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼šç¬¬ä¸€çº§è°ƒåº¦æ˜¯Masterçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç®¡ç†Mesosé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¸Šè¿è¡Œçš„Slaveå®ˆæŠ¤è¿›ç¨‹ã€‚é›†ç¾¤ç”±ç‰©ç†æœåŠ¡å™¨æˆ–è™šæ‹ŸæœåŠ¡å™¨ç»„æˆï¼Œç”¨äºè¿è¡Œåº”ç”¨ç¨‹åºçš„ä»»åŠ¡ï¼Œæ¯”å¦‚Hadoopå’ŒMPIä½œä¸šï¼›ç¬¬äºŒçº§è°ƒåº¦ç”±è¢«ç§°ä½œFrameworkçš„â€œç»„ä»¶â€ç»„æˆï¼ŒåŒ…æ‹¬è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰å’Œæ‰§è¡Œå™¨ï¼ˆExecutorï¼‰è¿›ç¨‹ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šè¿è¡Œæ‰§è¡Œå™¨ã€‚ Mesosç”±å››ä¸ªç»„ä»¶ç»„æˆï¼Œåˆ†åˆ«æ˜¯Mesos-masterï¼Œmesos-slaveï¼Œframeworkå’Œexecutorã€‚Mesos-masteræ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼Œè´Ÿè´£ç®¡ç†æ¥å…¥mesosçš„å„ä¸ªframeworkå’Œslaveï¼Œå¹¶å°†slaveä¸Šçš„èµ„æºæŒ‰ç…§æŸç§ç­–ç•¥åˆ†é…ç»™frameworkã€‚Mesos-slaveè´Ÿè´£æ¥æ”¶å¹¶æ‰§è¡Œæ¥è‡ªmesos-masterçš„å‘½ä»¤ã€ç®¡ç†èŠ‚ç‚¹ä¸Šçš„mesos-taskï¼Œå¹¶ä¸ºå„ä¸ªtaskåˆ†é…èµ„æºã€‚mesos-slaveå°†è‡ªå·±çš„èµ„æºé‡å‘é€ç»™mesos-masterï¼Œç”±mesos-masterä¸­çš„Allocatoræ¨¡å—å†³å®šå°†èµ„æºåˆ†é…ç»™å“ªä¸ªframeworkã€‚Frameworkæ˜¯æŒ‡å¤–éƒ¨çš„è®¡ç®—æ¡†æ¶ï¼Œæœ¬é¡¹ç›®ä¸­é‡‡ç”¨çš„è®¡ç®—æ¡†æ¶åŒ…æ‹¬äº†Sparkã€Stormã€Hiveç­‰ï¼Œå¯é€šè¿‡æ³¨å†Œçš„æ–¹å¼æ¥å…¥mesosï¼Œä»¥ä¾¿mesosè¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œèµ„æºåˆ†é…ï¼Œæ•´ä¸ªmesosç³»ç»Ÿé‡‡ç”¨äº†åŒå±‚è°ƒåº¦æ¡†æ¶ï¼šç¬¬ä¸€å±‚ï¼Œç”±mesoså°†èµ„æºåˆ†é…ç»™æ¡†æ¶ï¼›ç¬¬äºŒå±‚ï¼Œæ¡†æ¶è‡ªå·±çš„è°ƒåº¦å™¨å°†èµ„æºåˆ†é…ç»™è‡ªå·±å†…éƒ¨çš„ä»»åŠ¡ã€‚Executorä¸»è¦ç”¨äºå¯åŠ¨æ¡†æ¶å†…éƒ¨çš„taskã€‚ç”±äºä¸åŒçš„æ¡†æ¶ï¼Œå¯åŠ¨taskçš„æ¥å£æˆ–è€…æ–¹å¼ä¸åŒï¼Œå½“ä¸€ä¸ªæ–°çš„æ¡†æ¶è¦æ¥å…¥mesosæ—¶ï¼Œéœ€è¦ç¼–å†™ä¸€ä¸ªexecutorï¼Œå‘Šè¯‰mesoså¦‚ä½•å¯åŠ¨è¯¥æ¡†æ¶ä¸­çš„taskã€‚ è¯¥å¹³å°çš„æ¶æ„ä¸»è¦å›´ç»•è¿™æ•°æ®é‡‡é›†ã€æ•°æ®åˆ†ææŒ–æ˜ã€æ•°æ®å¤„ç†è¿™å‡ ä¸ªå…³é”®ç‚¹è¿›è¡Œæ„å»ºï¼Œåˆ†åˆ«å®ç°åœ¨äº‘å¹³å°ä¸Šå®è¡Œæ•°æ®è®¡ç®—ã€æŒ–æ˜ã€æœåŠ¡ç­‰ç›¸å…³åŠŸèƒ½ï¼Œæ•°æ®é‡‡é›†æŒ–æ˜èƒ½åŠ›æ˜¯è¯¥æ¶æ„çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œå¯ä»¥å®ç°åœ¨äº‘è®¡ç®—å¹³å°ä¸Šå®ç°å¯¹ä¸åŒæ ¼å¼çš„æ•°æ®è¿›è¡Œå¹¶è¡ŒæŒ–æ˜ï¼Œä½¿æ•°æ®çš„åˆ†æå¤„ç†èƒ½å¤Ÿè¿è¡Œæ›´åŠ ç¨³å®šï¼Œæ–¹ä¾¿æ•´ä¸ªæ¶æ„çš„é«˜æ•ˆè¿è¡Œã€‚ A. å¤§æ•°æ®é‡‡é›†å¤§æ•°æ®çš„é‡‡é›†æ˜¯æ•´ä¸ªæµç¨‹çš„åŸºç¡€ã€‚éšç€äº’è”ç½‘æŠ€æœ¯å’Œåº”ç”¨çš„å‘å±•ä»¥åŠå„ç§ç»ˆç«¯è®¾å¤‡çš„æ™®åŠï¼Œä½¿å¾—æ•°æ®ç”Ÿäº§è€…èŒƒå›´è¶Šæ¥è¶Šå¤§ï¼Œæ•°æ®çš„äº§é‡ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œæ•°æ®ä¹‹é—´çš„å…³è”ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå› æ­¤å¯¹æ•°æ®é‡‡é›†é€Ÿåº¦å’Œç²¾åº¦çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚ è¯¥æ¨¡å—çš„æ ¸å¿ƒæ˜¯æ™ºèƒ½çˆ¬è™«æŠ“å–æ¨¡å—çš„å®ç°ï¼Œä¸»è¦å°†äº’è”ç½‘æ•°æ®é€šè¿‡WebUIæ“ä½œç•Œé¢å¯¹æ•°æ®é‡‡é›†è§„åˆ™è¿›è¡Œä¸ªæ€§åŒ–è®¾å®šå®ç°å¯¹å¤§æ•°æ®çš„ä¸ªæ€§åŒ–é‡‡é›†ï¼Œè¯¥å¹³å°é‡‡ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•çš„ä¸»åŠ¨çˆ¬è™«æŠ€æœ¯å®ç°æ™ºèƒ½æ•°æ®é«˜å¹¶å‘çˆ¬å–æé«˜æ•°æ®çš„é‡‡é›†ç²¾åº¦ï¼Œæ•´ä¸ªè¿‡ç¨‹æ— éœ€å¤ªå¤šçš„äººå·¥ä»‹å…¥ï¼Œé™ä½å­¦ä¹ é—¨æ§›ï¼Œå¹³æ»‘å­¦ä¹ æ›²çº¿ï¼ŒåŒæ—¶å°†æ›´å¤šè®¾ç½®æ”¾åœ¨åº•å±‚å¤„ç†ï¼Œå®ç°åŠè‡ªåŠ¨åŒ–è®¾è®¡ï¼Œä½¿å¾—ç•Œé¢ç®€å•æ¸…æ™°ï¼Œæé«˜æ•°æ®çš„é‡‡é›†æ•ˆç‡ã€‚ B. å¤§æ•°æ®æŒ–æ˜å¤„ç†å¤§æ•°æ®æŒ–æ˜æ˜¯æ•´ä¸ªæµç¨‹çš„æ ¸å¿ƒï¼Œæ•°æ®æŒ–æ˜åˆ™æ˜¯å°†å¤§é‡çš„ã€ä¸å®Œå…¨çš„ã€æœ‰å™ªå£°çš„ã€æ¨¡ç³Šçš„ã€éšæœºçš„å®é™…åº”ç”¨æ•°æ®ç»è¿‡åŠ å·¥å¤„ç†ï¼Œç­›é€‰ä¼˜åŒ–åï¼Œæå–éšè—å…¶ä¸­çš„æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚ç”±äºæ•°æ®å¤æ‚å¤šæ ·ã€æ•°æ®æŒ–æ˜å’Œå¤„ç†éœ€è¦é«˜é€Ÿã€é«˜æ•ˆï¼ŒåŸºäºDockerå®¹å™¨äº‘æŠ€æœ¯çš„æ•°æ®æŒ–æ˜æ¶æ„æ˜¯èƒ½å¤Ÿåˆ©ç”¨Dockerå®¹å™¨äº‘æŠ€æœ¯çš„è½»é‡çº§è™šæ‹ŸåŒ–æµ·é‡å­˜å‚¨å’Œå¹¶è¡Œè®¡ç®—èƒ½åŠ›è§£å†³äº†å¤§æ•°æ®çš„æµ·é‡ã€é«˜å¯é æ€§å’Œé«˜æ•ˆæ€§è¦æ±‚ã€‚ è¯¥æ¨¡å—ä¸»è¦æä¾›æ•°æ®é¢„å¤„ç†åˆ°æ¨¡å‹è¯„ä¼°çš„ä¸€ç«™å¼å¹³å°æœåŠ¡ï¼ŒåŸºäºWEBå·¥ä½œç•Œé¢ï¼Œé€šè¿‡æ‹–ã€æ‹‰ã€æ‹½ç­‰æ–¹å¼å³å¯å®Œæˆå¤æ‚æ•°æ®æŒ–æ˜æµç¨‹ï¼Œæ”¯æŒè‡ªå®šä¹‰ç®—æ³•å’Œç»„ä»¶ï¼Œçµæ´»å¼€æ”¾çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œæä¾›ä¸°å¯Œçš„åˆ†å¸ƒå¼ç®—æ³•ï¼Œæé«˜æ¨¡å‹ç²¾åº¦ï¼Œå…¶æ ¸å¿ƒå†…å®¹ä¸»è¦åŒ…æ‹¬ï¼šæ•°æ®æŒ–æ˜æµç¨‹é…ç½®æœåŠ¡ã€DMSæ•°æ®æŒ–æ˜æœåŠ¡ã€æ•°æ®æŒ–æ˜æ¨¡å‹ç®¡ç†ç­‰ã€‚ C. å¤§æ•°æ®åˆ†æå±•ç¤ºå¤§æ•°æ®åˆ†æå±•ç¤ºæ˜¯æ•´ä¸ªæµç¨‹çš„ç›®æ ‡ã€‚åœ¨å®Œæˆæ•°æ®çš„é‡‡é›†å’Œå¤„ç†åï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†æï¼Œå› ä¸ºåœ¨è¿›è¡Œæ•°æ®åˆ†æåæ‰èƒ½ä½“ç°æ‰€æœ‰å¤§æ•°æ®çš„é‡è¦ä»·å€¼ã€‚æ•°æ®åˆ†æçš„å¯¹è±¡æ˜¯å¯¹ä¸Šä¸€æ­¥æ•°æ®çš„å¤„ç†ä¸é›†æˆåçš„ç»Ÿä¸€æ ¼å¼æ•°æ®ï¼Œæ ¹æ®æ‰€éœ€æ•°æ®çš„åº”ç”¨éœ€æ±‚å’Œä»·å€¼ä½“ç°æ–¹å‘å¯¹è¿™äº›æ•°æ®è¿›ä¸€æ­¥å¤„ç†å’Œåˆ†æï¼Œå¹¶å°†åˆ†æçš„ç»“æœå‘ç”¨æˆ·è¿›è¡Œäº¤äº’å±•ç¤ºã€‚ è¯¥å¹³å°ä¸»è¦é‡‡ç”¨EChartsæ¡†æ¶å’ŒD3æ¡†æ¶ç›¸ç»“åˆçš„æ–¹å¼ï¼Œä¸ºä¸­å°ä¼ä¸šæä¾›è¿è¥åŠ¨æ€ç›´æ’­ã€æ•°æ®ç»¼åˆå±•ç¤ºã€è®¾å¤‡ç›‘æ§é¢„è­¦ç­‰å¤šç§å¯è§†åŒ–åœºæ™¯æ¨¡æ¿ï¼›é€šè¿‡æ‹–æ‹½å³å¯å®ç°çµæ´»çš„å¯è§†åŒ–å¸ƒå±€ï¼›ä»¥WebGLæŠ€æœ¯ä½œä¸ºæ”¯æ’‘ï¼Œèƒ½å¤Ÿç»˜åˆ¶æµ·é‡æ•°æ®ä¸‹çš„åœ°ç†è½¨è¿¹ã€é£çº¿ã€çƒ­åŠ›ã€åŒºå—ã€3Dåœ°å›¾/åœ°çƒï¼Œæ”¯æŒå¤šå±‚å åŠ ï¼Œæ”¯æŒå…³ç³»å‹æ•°æ®åº“ã€éå…³ç³»å‹æ•°æ®åº“ã€Restful APIã€CSVã€é™æ€JSONç­‰å¤šç§æ•°æ®æ¥æºï¼Œä¸”èƒ½å¤Ÿå®ç°åŠ¨æ€è½®è¯¢ï¼Œå°†å¤šä¸ªæ•°æ®æºæ±‡èšäºä¸€ä¸ªå¯è§†åŒ–ç•Œé¢ä¸­ï¼Œå¹¶åŒæ—¶å®ç°åœ¨çº¿åˆ†äº«åº”ç”¨åŠŸèƒ½ã€‚ å…³é”®æŠ€æœ¯ A. è¯¥å¹³å°æ•´åˆäº†Mesoså’ŒDockerçš„ä¼˜åŠ¿ï¼Œå®ç°Mesoså’ŒDockerçš„æ— ç¼å¯¹æ¥ï¼Œåˆ©ç”¨Mesoså®ç°å¯¹åˆ†å¸ƒå¼é›†ç¾¤åšç»†ç²’åº¦èµ„æºåˆ†é…ï¼Œç»“åˆDockerè§„é¿äº†Mesosæ— ä¸­å¿ƒåŒ–ç¼ºé™·ï¼Œå°†å„åº”ç”¨é€šè¿‡Dockerè¿›è¡Œå®¹å™¨åŒ–ç®¡ç†ï¼Œè®©åº”ç”¨åœ¨æ›´è½»é‡åŒ–çš„æƒ…å†µä¸‹åˆ†é…èµ„æºã€éš”ç¦»è¿›ç¨‹å’Œç½‘ç»œï¼Œå®Œæˆä»å¼€å‘åˆ°éƒ¨ç½²çš„å¿«é€Ÿæ­å»ºï¼Œæ—¢è§£å†³äº†åˆ†å¸ƒå¼çš„ç—›ç‚¹ï¼Œåˆä¸ºç”¨æˆ·æä¾›åŸºäºé›†ç¾¤ç¯å¢ƒçš„é«˜é€Ÿè®¡ç®—èƒ½åŠ›ï¼Œæå¤§åœ°æé«˜äº†å‘å¸ƒæ•ˆç‡ B. è¯¥å¹³å°å°†æ•°æ®é‡‡é›†æ¨¡å—çš„è§£æã€è®¾è®¡å’Œç‚¹å‡»åŠŸèƒ½å…¨éƒ¨é€šè¿‡ç½‘é¡µçš„Webç«¯å®ç°ï¼Œä»è€Œå¯ä»¥ä½¿å¾—å¹³å°å…·æœ‰è·¨å¹³å°ç‰¹æ€§å’Œè‡ªå®šä¹‰æ•°æ®æœåŠ¡åŠŸèƒ½ï¼Œæ»¡è¶³ä¸­å°ä¼ä¸šä½æˆæœ¬äº«å—ä¸€ç«™å¼å¤§æ•°æ®æœåŠ¡éœ€æ±‚ã€‚ C. é‡‡ç”¨åŸºäºæœºå™¨å­¦ä¹ çš„å¤šç§åå°æ€ç»„åˆå®ç°å¯¹æ•°æ®çš„æ™ºèƒ½çˆ¬å–ï¼Œç»“åˆåŸºäº MD5 çš„URLå»é‡æ ‘å¯¹URLè¿›è¡Œå»é‡å¤„ç†å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œæé«˜æŒ–æ˜æ•°æ®çš„è´¨é‡ã€å¯é æ€§å’Œå®Œæ•´æ€§ã€‚ D. è¯¥å¹³å°åŸºäºSparkå¯¹å¹¶è¡ŒååŒè¿‡æ»¤ç®—æ³•å’ŒAPFP_Growth ç®—æ³•è¿›è¡Œæ”¹è¿›ï¼Œæ”¹è¿›çš„å¹¶è¡ŒååŒè¿‡æ»¤ç®—æ³•æ¯”åŸæ¥åŸºäºå…±ç°çŸ©é˜µçš„å¹¶è¡Œç®—æ³•å…·æœ‰æ›´é«˜çš„è¿è¡Œæ•ˆç‡å’Œæ›´é«˜çš„æ¨èç²¾åº¦ï¼ŒåŸºäºäºŒåˆ†ç­–ç•¥åˆ†ç»„çš„è´Ÿè½½å‡è¡¡æ”¹è¿›çš„APFP_Growthç®—æ³•ï¼Œè§„é¿äº†ç°æœ‰çš„å¹¶è¡Œ PFP_Growth ç®—æ³•åœ¨ FList åˆ†ç»„çš„æ­¥éª¤ä¸­æ²¡æœ‰è€ƒè™‘åˆ†ç»„ä¸­è´Ÿè½½å‡è¡¡çš„é—®é¢˜ï¼Œè¾¾åˆ°æ›´å¥½çš„è´Ÿè½½å‡è¡¡æ•ˆæœã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>å¤§æ•°æ®</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>Dokcer</tag>
        <tag>å®¹å™¨æŠ€æœ¯</tag>
        <tag>æ•°æ®æŒ–æ˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CAPç®€æ˜“ç†è§£]]></title>
    <url>%2F2017%2F%E6%9E%B6%E6%9E%84%2FCAP%E7%AE%80%E6%98%93%E7%90%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œé¢ï¼ŒèŠ‚ç‚¹ç»„æˆçš„ç½‘ç»œæœ¬æ¥åº”è¯¥æ˜¯è¿é€šçš„ã€‚ç„¶è€Œå¯èƒ½å› ä¸ºä¸€äº›æ•…éšœï¼Œä½¿å¾—æœ‰äº›èŠ‚ç‚¹ä¹‹é—´ä¸è¿é€šäº†ï¼Œæ•´ä¸ªç½‘ç»œå°±åˆ†æˆäº†å‡ å—åŒºåŸŸã€‚æ•°æ®å°±æ•£å¸ƒåœ¨äº†è¿™äº›ä¸è¿é€šçš„åŒºåŸŸä¸­ã€‚è¿™å°±å«åˆ†åŒºã€‚å½“ä½ ä¸€ä¸ªæ•°æ®é¡¹åªåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸­ä¿å­˜ï¼Œé‚£ä¹ˆåˆ†åŒºå‡ºç°åï¼Œå’Œè¿™ä¸ªèŠ‚ç‚¹ä¸è¿é€šçš„éƒ¨åˆ†å°±è®¿é—®ä¸åˆ°è¿™ä¸ªæ•°æ®äº†ã€‚è¿™æ—¶åˆ†åŒºå°±æ˜¯æ— æ³•å®¹å¿çš„ã€‚æé«˜åˆ†åŒºå®¹å¿æ€§çš„åŠæ³•å°±æ˜¯ä¸€ä¸ªæ•°æ®é¡¹å¤åˆ¶åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆå‡ºç°åˆ†åŒºä¹‹åï¼Œè¿™ä¸€æ•°æ®é¡¹å°±å¯èƒ½åˆ†å¸ƒåˆ°å„ä¸ªåŒºé‡Œã€‚å®¹å¿æ€§å°±æé«˜äº†ã€‚ç„¶è€Œï¼Œè¦æŠŠæ•°æ®å¤åˆ¶åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œå°±ä¼šå¸¦æ¥ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œå°±æ˜¯å¤šä¸ªèŠ‚ç‚¹ä¸Šé¢çš„æ•°æ®å¯èƒ½æ˜¯ä¸ä¸€è‡´çš„ã€‚è¦ä¿è¯ä¸€è‡´ï¼Œæ¯æ¬¡å†™æ“ä½œå°±éƒ½è¦ç­‰å¾…å…¨éƒ¨èŠ‚ç‚¹å†™æˆåŠŸï¼Œè€Œè¿™ç­‰å¾…åˆä¼šå¸¦æ¥å¯ç”¨æ€§çš„é—®é¢˜ã€‚æ€»çš„æ¥è¯´å°±æ˜¯ï¼Œæ•°æ®å­˜åœ¨çš„èŠ‚ç‚¹è¶Šå¤šï¼Œåˆ†åŒºå®¹å¿æ€§è¶Šé«˜ï¼Œä½†è¦å¤åˆ¶æ›´æ–°çš„æ•°æ®å°±è¶Šå¤šï¼Œä¸€è‡´æ€§å°±è¶Šéš¾ä¿è¯ã€‚ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œæ›´æ–°æ‰€æœ‰èŠ‚ç‚¹æ•°æ®æ‰€éœ€è¦çš„æ—¶é—´å°±è¶Šé•¿ï¼Œå¯ç”¨æ€§å°±ä¼šé™ä½ã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„CAPç†è®ºï¼š Pï¼šPartition toleranceï¼Œè¦æœ‰é«˜å®¹é”™æ€§å°±å¿…é¡»è¦é‡‡ç”¨å¤šèŠ‚ç‚¹ï¼Œæ•°æ®å’ŒèŠ‚ç‚¹è¶Šå†—ä½™ï¼Œå®¹é”™æ€§è¶Šå¥½ã€‚ Aï¼šAvailabilityï¼Œè¿™é‡Œçš„å¯ç”¨æ€§æŒ‡å¾—æ˜¯ç³»ç»Ÿå¯¹æ“ä½œçš„å“åº”é€Ÿåº¦ï¼Œå¯¹å…·ä½“çš„æ“ä½œå“åº”è¶Šå¿«ï¼Œå…¶å¯ç”¨æ€§è¶Šé«˜ã€‚ Cï¼šConsistencyï¼Œè¦ä¿è¯å„èŠ‚ç‚¹æ•°æ®çš„ä¸€è‡´ï¼Œåœ¨è·¨èŠ‚ç‚¹é€šä¿¡ä¸­ï¼Œé‚£å¿…ä¸å¯å°‘éœ€è¦å¯¹æ•°æ®åšæ ¡éªŒå’Œæ£€æŸ¥ï¼Œå¦‚æœé€šä¿¡èŠ‚ç‚¹è¶Šå¤šï¼ˆé«˜å®¹é”™ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ“ä½œéƒ½åšæ ¡éªŒï¼ˆå¼ºä¸€è‡´ï¼‰ï¼Œé‚£ä¹ˆå“åº”é€Ÿåº¦å°±è¶Šæ…¢ï¼ˆä½å¯ç”¨ï¼‰ã€‚ åˆ†å¸ƒå¼ç³»ç»ŸCAPæ¨è®º performance -&gt; shardingæœ€å¼€å§‹ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼çš„ç³»ç»Ÿï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæå‡ºæœ€æ—©å°±æ˜¯ä¸ºäº†è§£å†³ç”¨ä¸€å †å»‰ä»·æœºå™¨ä»£æ›¿ä¸€å°å¾ˆNBæœºå™¨çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯å•æœºæ€§èƒ½é—®é¢˜ã€‚ sharding -&gt; failed toleranceå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”±äºå„ç»„ä»¶æ˜¯é€šè¿‡ç½‘ç»œé€šä¿¡ï¼Œæ˜¯éå¸¸ä¸å¯é çš„ï¼Œè¿™æ—¶å€™å°±è¦è€ƒè™‘å®¹é”™æ€§ï¼Œéœ€è¦å°½é‡éœ€è¦å»ºç«‹ä¸€ä¸ªå…·æœ‰å®¹é”™æ€§çš„ç³»ç»Ÿã€‚ tolerance -&gt; replicationéœ€è¦ä¸€ä¸ªå…·æœ‰å®¹é”™æ€§çš„ç³»ç»Ÿï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å¤šå‡†å¤‡å‡ ä»½æ•°æ®ï¼Œé€šè¿‡å¤šå‰¯æœ¬çš„æ–¹å¼è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿå®¹æ˜“å‡ºé”™çš„é—®é¢˜ã€‚ replication -&gt; inconsistencyä½†æ˜¯å¤šå‰¯æœ¬å°±å¿…ç„¶éœ€è¦é¢ä¸´æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œåœ¨ä¸»æ•°æ®è¢«æ›´æ–°çš„æ—¶å€™æœ‰å¯èƒ½å¯¼è‡´å…¶ä»–çš„å‰¯æœ¬æ²¡æœ‰åŒæ­¥è¿‡æ¥ï¼Œä»è€Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚ consistency -&gt; low performanceä¸ºäº†è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡lockæˆ–è€…è¿›è¡Œå¤šä¸ªèŠ‚ç‚¹è¿›è¡Œé€šä¿¡ç¡®è®¤çš„æ–¹å¼æ¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯è¿™æ ·å°±å¿…ç„¶ä¼šé™ä½æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯å‡ºç°å¤±è”èŠ‚ç‚¹ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿæ¶æ„</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>CAP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”µä¿¡wifiå¤§æ•°æ®èƒ½åŠ›å¹³å°]]></title>
    <url>%2F2017%2F%E6%9E%B6%E6%9E%84%2F%E7%94%B5%E4%BF%A1wifi%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%83%BD%E5%8A%9B%E5%B9%B3%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[æ¼”ç¤ºç¨¿]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>å¤§æ•°æ®</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>WIFI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Djangoå°çŸ¥è¯†]]></title>
    <url>%2F2017%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2FDjango%E5%B0%8F%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[DjangoçŸ¥è¯†å°é—®ç­” DjangoçŸ¥è¯†å°é—®ç­”å…³äºmakemigrationsé—®ï¼šæˆ‘ç”¨python manage.py makemigrationsæ€ä¹ˆæ²¡èƒ½å°†æˆ‘çš„modelæ–‡ä»¶ç”Ÿæˆæ•°æ®ï¼Ÿ ç­”ï¼šå¯ä»¥çµ¦æˆ‘çœ‹ä¸‹modelçš„æ–‡ä»¶ç›®å½•å—ï¼Ÿ é—®ï¼šç›®å½•æ˜¯è¿™æ ·çš„12345678(venv) G:\git\bigbooom\bigboomm\citizen&gt;tree /få· study çš„æ–‡ä»¶å¤¹ PATH åˆ—è¡¨å·åºåˆ—å·ä¸º 0000000F B64E:66E1G:. models.py models.pyc __init__.py __init__.pyc ç­”ï¼šå—¯å—¯ï¼Œæˆ‘çŸ¥é“ï¼Œæˆ‘æƒ³ä½ åº”è¯¥æ˜¯å°‘äº†ä¸€ä¸ªmigrationsçš„æ–‡ä»¶å¤¹å§ï¼Œæ‰€ä»¥ä»–ä¸çŸ¥é“ä½ éœ€è¦ç”Ÿæˆmigrationsï¼Œä½ è¯•è¯•åœ¨citizenæ–‡ä»¶å¤¹ä¸‹é¢å»ºä¸€ä¸ªmigrationsï¼Œè®°å¾—è¦åœ¨é‡Œé¢åŠ ä¸€ä¸ªinit.pyå“¦ï¼Œä¸ç„¶ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ é—®ï¼šå•Šï¼Œå¯ä»¥äº†~~ Good Job1234(venv) G:\git\bigbooom\bigboomm&gt;python manage.py makemigrationsMigrations for &apos;citizen&apos;: citizen\migrations\0001_initial.py: - Create model Citizen ç­”ï¼šå…¶å®ï¼Œä¸€èˆ¬Djangoä¸­å»ºappå»ºè®®ç”¨manage.py startapp ```è¿™ä¸ªå‘½ä»¤ï¼Œè¿™æ ·å¯ä»¥å¸®ä½ å»ºç«‹ä¸€ä¸ªå®Œæ•´çš„appç›®å½•å“¦~~1234## cryptography é”™è¯¯æŠ¥`RuntimeError: cryptography is required for sha256_password or caching_sha2_password`é”™ï¼š File â€œC:\Users\shikanon\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\venv\lib\site-packages\pymysql\connections.pyâ€, line 325, in init self.connect() File â€œC:\Users\shikanon\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\venv\lib\site-packages\pymysql\connections.pyâ€, line 599, in connect self._request_authentication() File â€œC:\Users\shikanon\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\venv\lib\site-packages\pymysql\connections.pyâ€, line 882, in _request_authentication auth_packet = _auth.caching_sha2_password_auth(self, auth_packet) File â€œC:\Users\shikanon\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\venv\lib\site-packages\pymysql_auth.pyâ€, line 264, in caching_sha2_password_auth data = sha2_rsa_encrypt(conn.password, conn.salt, conn.server_public_key) File â€œC:\Users\shikanon\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\venv\lib\site-packages\pymysql_auth.pyâ€, line 142, in sha2_rsa_encrypt raise RuntimeError(â€œcryptography is required for sha256_password or caching_sha2_passwordâ€)RuntimeError: cryptography is required for sha256_password or caching_sha2_password123åªè¦å®‰è£…`cryptography`åŒ…å°±å¯ä»¥äº†ï¼š```pip install cryptography windows äºŒè¿›åˆ¶åŒ…ä¸‹è½½https://www.lfd.uci.edu/~gohlke/pythonlibs/]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Webå¼€å‘</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoä½¿ç”¨æ–‡æ¡£]]></title>
    <url>%2F2017%2F%E8%BF%90%E7%BB%B4%2FHexo%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[å¿«é€Ÿå¼€å§‹å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚ $ hexo init $ cd $ npm install æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š .â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes æŒ‡ä»¤init1$ hexo init [folder] æ–°å»ºä¸€ä¸ªç½‘ç«™ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® folder ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™ã€‚ new1$ hexo new [layout] &lt;title&gt; æ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® layout çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ _config.yml ä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚ generate1$ hexo generate ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚ é€‰é¡¹ æè¿° -d, --deploy æ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™ -w, --watch ç›‘è§†æ–‡ä»¶å˜åŠ¨ è¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸º1$ hexo g publish1$ hexo publish [layout] &lt;filename&gt; å‘è¡¨è‰ç¨¿ã€‚ server1$ hexo server å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ã€‚ é€‰é¡¹ æè¿° -p, --port é‡è®¾ç«¯å£ -s, --static åªä½¿ç”¨é™æ€æ–‡ä»¶ -l, --log å¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼ deploy1$ hexo deploy éƒ¨ç½²ç½‘ç«™ã€‚ å‚æ•° æè¿° -g, --generate éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶ è¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸ºï¼š1$ hexo d render1$ hexo render &lt;file1&gt; [file2] ... æ¸²æŸ“æ–‡ä»¶ã€‚ å‚æ•° æè¿° -o, --output è®¾ç½®è¾“å‡ºè·¯å¾„ migrate1$ hexo migrate &lt;type&gt; ä»å…¶ä»–åšå®¢ç³»ç»Ÿ è¿ç§»å†…å®¹ã€‚ clean1$ hexo clean æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚ åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ list1$ hexo list &lt;type&gt; åˆ—å‡ºç½‘ç«™èµ„æ–™ã€‚ version1$ hexo version æ˜¾ç¤º Hexo ç‰ˆæœ¬ã€‚ é€‰é¡¹å®‰å…¨æ¨¡å¼1$ hexo --safe åœ¨å®‰å…¨æ¨¡å¼ä¸‹ï¼Œä¸ä¼šè½½å…¥æ’ä»¶å’Œè„šæœ¬ã€‚å½“æ‚¨åœ¨å®‰è£…æ–°æ’ä»¶é­é‡é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ä»¥å®‰å…¨æ¨¡å¼é‡æ–°æ‰§è¡Œã€‚ è°ƒè¯•æ¨¡å¼1$ hexo --debug åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯å¹¶è®°å½•åˆ° debug.logã€‚å½“æ‚¨ç¢°åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ç”¨è°ƒè¯•æ¨¡å¼é‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ æäº¤è°ƒè¯•ä¿¡æ¯åˆ° GitHubã€‚ ç®€æ´æ¨¡å¼1$ hexo --silent éšè—ç»ˆç«¯ä¿¡æ¯ã€‚ è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„1$ hexo --config custom.yml è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œæ‰§è¡Œåå°†ä¸å†ä½¿ç”¨ _config.ymlã€‚ æ˜¾ç¤ºè‰ç¨¿1$ hexo --draft æ˜¾ç¤º source/_drafts æ–‡ä»¶å¤¹ä¸­çš„è‰ç¨¿æ–‡ç« ã€‚ è‡ªå®šä¹‰ CWD1$ hexo --cwd /path/to/cwd è‡ªå®šä¹‰å½“å‰å·¥ä½œç›®å½•ï¼ˆCurrent working directoryï¼‰çš„è·¯å¾„ã€‚ å†™ä½œä½ å¯ä»¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« ã€‚ 1$ hexo new [layout] &lt;title&gt; æ‚¨å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæ–‡ç« çš„å¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œé»˜è®¤ä¸º postï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ _config.yml ä¸­çš„ default_layout å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚ å¸ƒå±€ï¼ˆLayoutï¼‰Hexo æœ‰ä¸‰ç§é»˜è®¤å¸ƒå±€ï¼špostã€page å’Œ draftï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ä¸åŒçš„è·¯å¾„ï¼Œè€Œæ‚¨è‡ªå®šä¹‰çš„å…¶ä»–å¸ƒå±€å’Œ post ç›¸åŒï¼Œéƒ½å°†å‚¨å­˜åˆ° source/_posts æ–‡ä»¶å¤¹ã€‚ å¸ƒå±€ è·¯å¾„ post source/_posts page source draft source/_drafts å¦‚æœä½ ä¸æƒ³ä½ çš„æ–‡ç« è¢«å¤„ç†ï¼Œä½ å¯ä»¥å°† Front-Matter ä¸­çš„layout: è®¾ä¸º false ã€‚ æ–‡ä»¶åç§°Hexo é»˜è®¤ä»¥æ ‡é¢˜åšä¸ºæ–‡ä»¶åç§°ï¼Œä½†æ‚¨å¯ç¼–è¾‘ new_post_name å‚æ•°æ¥æ”¹å˜é»˜è®¤çš„æ–‡ä»¶åç§°ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œè®¾ä¸º :year-:month-:day-:title.md å¯è®©æ‚¨æ›´æ–¹ä¾¿çš„é€šè¿‡æ—¥æœŸæ¥ç®¡ç†æ–‡ç« ã€‚ å˜é‡ æè¿° :title æ ‡é¢˜ï¼ˆå°å†™ï¼Œç©ºæ ¼å°†ä¼šè¢«æ›¿æ¢ä¸ºçŸ­æ ï¼‰ :year å»ºç«‹çš„å¹´ä»½ï¼Œæ¯”å¦‚ï¼Œ 2015 :month å»ºç«‹çš„æœˆä»½ï¼ˆæœ‰å‰å¯¼é›¶ï¼‰ï¼Œæ¯”å¦‚ï¼Œ 04 :i_month å»ºç«‹çš„æœˆä»½ï¼ˆæ— å‰å¯¼é›¶ï¼‰ï¼Œæ¯”å¦‚ï¼Œ 4 :day å»ºç«‹çš„æ—¥æœŸï¼ˆæœ‰å‰å¯¼é›¶ï¼‰ï¼Œæ¯”å¦‚ï¼Œ 07 :i_day å»ºç«‹çš„æ—¥æœŸï¼ˆæ— å‰å¯¼é›¶ï¼‰ï¼Œæ¯”å¦‚ï¼Œ 7 è‰ç¨¿åˆšåˆšæåˆ°äº† Hexo çš„ä¸€ç§ç‰¹æ®Šå¸ƒå±€ï¼šdraftï¼Œè¿™ç§å¸ƒå±€åœ¨å»ºç«‹æ—¶ä¼šè¢«ä¿å­˜åˆ° source/_drafts æ–‡ä»¶å¤¹ï¼Œæ‚¨å¯é€šè¿‡ publish å‘½ä»¤å°†è‰ç¨¿ç§»åŠ¨åˆ° source/_posts æ–‡ä»¶å¤¹ï¼Œè¯¥å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ new ååˆ†ç±»ä¼¼ï¼Œæ‚¨ä¹Ÿå¯åœ¨å‘½ä»¤ä¸­æŒ‡å®š layout æ¥æŒ‡å®šå¸ƒå±€ã€‚ 1$ hexo publish [layout] &lt;title&gt; è‰ç¨¿é»˜è®¤ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸­ï¼Œæ‚¨å¯åœ¨æ‰§è¡Œæ—¶åŠ ä¸Š --draft å‚æ•°ï¼Œæˆ–æ˜¯æŠŠ render_drafts å‚æ•°è®¾ä¸º true æ¥é¢„è§ˆè‰ç¨¿ã€‚ æ¨¡ç‰ˆï¼ˆScaffoldï¼‰åœ¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffolds æ–‡ä»¶å¤¹å†…ç›¸å¯¹åº”çš„æ–‡ä»¶æ¥å»ºç«‹æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š 1$ hexo new photo "My Gallery" åœ¨æ‰§è¡Œè¿™è¡ŒæŒ‡ä»¤æ—¶ï¼ŒHexo ä¼šå°è¯•åœ¨ scaffolds æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾ photo.mdï¼Œå¹¶æ ¹æ®å…¶å†…å®¹å»ºç«‹æ–‡ç« ï¼Œä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨çš„å˜é‡ï¼š å˜é‡ æè¿° layout å¸ƒå±€ title æ ‡é¢˜ date æ–‡ä»¶å»ºç«‹æ—¥æœŸ]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å‘½ä»¤å·¥å…·</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±åº¦å­¦ä¹ ä»å°ç™½åˆ°å…¥é—¨ â€”â€” åŸºäºkerasçš„æ·±åº¦å­¦ä¹ åŸºæœ¬æ¦‚å¿µè®²è§£]]></title>
    <url>%2F2017%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2FLearnOfDeepLearning%2F</url>
    <content type="text"><![CDATA[æ·±åº¦å­¦ä¹  Author: shikanonCreateTime: 2017/2/13 ç›®å½• 1.softmax 2.æŸå¤±å‡½æ•° 3.æ¿€æ´»å‡½æ•° 4.sigmoid 5.ReLu 6.å­¦ä¹ é€Ÿç‡ 7.Dropout ä¸€ã€åŸºç¡€ç¯‡ç¥ç»ç½‘ç»œä¸­çš„æ¯ä¸ªç¥ç»å…ƒ å¯¹å…¶æ‰€æœ‰çš„è¾“å…¥è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¹¶æ·»åŠ ä¸€ä¸ªè¢«ç§°ä¸ºåç½®ï¼ˆbiasï¼‰ çš„å¸¸æ•°ï¼Œç„¶åé€šè¿‡ä¸€äº›éçº¿æ€§æ¿€æ´»å‡½æ•°æ¥åé¦ˆç»“æœã€‚ æ•°æ®é›†æˆ‘ä»¬é‡‡ç”¨æ·±åº¦å­¦ä¹ ç•Œçš„Hello-Wordâ€”â€”â€”â€” MNISTæ‰‹å†™æ•°å­—æ•°æ®é›†ï¼Œå­¦ä¹ ä»ç¬¬ä¸€ä¸ªsoftmaxå¼€å§‹ã€‚ 1. softmaxsoftmaxä¸»è¦ç”¨æ¥åšå¤šåˆ†ç±»é—®é¢˜ï¼Œæ˜¯logisticå›å½’æ¨¡å‹åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸Šçš„æ¨å¹¿ï¼Œsoftmax å…¬å¼ï¼š å½“k=2æ—¶ï¼Œè½¬æ¢ä¸ºé€»è¾‘å›å½’å½¢å¼ã€‚ softmaxä¸€èˆ¬ä½œä¸ºç¥ç»ç½‘ç»œæœ€åä¸€å±‚ï¼Œä½œä¸ºè¾“å‡ºå±‚è¿›è¡Œå¤šåˆ†ç±»ï¼ŒSoftmaxçš„è¾“å‡ºçš„æ¯ä¸ªå€¼éƒ½æ˜¯&gt;=0ï¼Œå¹¶ä¸”å…¶æ€»å’Œä¸º1ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºå…¶ä¸ºæ¦‚ç‡åˆ†å¸ƒã€‚ softmax ç¤ºæ„å›¾ softmax è¾“å‡ºå±‚ç¤ºæ„å›¾ 1%pylab inline Populating the interactive namespace from numpy and matplotlib 12345678910from IPython.display import SVGfrom keras.datasets import mnistfrom keras.models import Sequentialfrom keras.layers import Dense, Dropout, Activation, Reshapefrom keras.optimizers import SGD, Adamfrom keras.utils.visualize_util import model_to_dotfrom keras.utils import np_utilsimport matplotlib.pyplot as pltimport tensorflow as tfimport pandas as pd Using TensorFlow backend. 1234567891011121314151617181920212223242526#è®¾ç½®éšæœºæ•°ç§å­,ä¿è¯å®éªŒå¯é‡å¤import numpy as npnp.random.seed(0)#è®¾ç½®çº¿ç¨‹THREADS_NUM = 20tf.ConfigProto(intra_op_parallelism_threads=THREADS_NUM)(X_train, Y_train),(X_test, Y_test) = mnist.load_data()print('åŸæ•°æ®ç»“æ„ï¼š')print(X_train.shape, Y_train.shape)print(X_test.shape, Y_test.shape)#æ•°æ®å˜æ¢#åˆ†ä¸º10ä¸ªç±»åˆ«nb_classes = 10x_train_1 = X_train.reshape(60000, 784)#x_train_1 /= 255#x_train_1 = x_train_1.astype('float32')y_train_1 = np_utils.to_categorical(Y_train, nb_classes)print('å˜æ¢åçš„æ•°æ®ç»“æ„ï¼š')print(x_train_1.shape, y_train_1.shape)x_test_1 = X_test.reshape(10000, 784)y_test_1 = np_utils.to_categorical(Y_test, nb_classes)print(x_test_1.shape, y_test_1.shape) åŸæ•°æ®ç»“æ„ï¼š ((60000, 28, 28), (60000,)) ((10000, 28, 28), (10000,)) å˜æ¢åçš„æ•°æ®ç»“æ„ï¼š ((60000, 784), (60000, 10)) ((10000, 784), (10000, 10)) 123456789101112131415161718192021222324252627282930# æ„å»ºä¸€ä¸ªsoftmaxæ¨¡å‹# neural network with 1 layer of 10 softmax neurons## Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· (input data, flattened pixels) X [batch, 784] # 784 = 28 * 28# \x/x\x/x\x/x\x/x\x/ -- fully connected layer (softmax) W [784, 10] b[10]# Â· Â· Â· Â· Â· Â· Â· Â· Y [batch, 10]# The model is:## Y = softmax( X * W + b)# X: matrix for 100 grayscale images of 28x28 pixels, flattened (there are 100 images in a mini-batch)# W: weight matrix with 784 lines and 10 columns# b: bias vector with 10 dimensions# +: add with broadcasting: adds the vector to each line of the matrix (numpy)# softmax(matrix) applies softmax on each line# softmax(line) applies an exp to each value then divides by the norm of the resulting line# Y: output matrix with 100 lines and 10 columnsmodel = Sequential()model.add(Dense(nb_classes, input_shape=(784,)))#å…¨è¿æ¥ï¼Œè¾“å…¥784ç»´åº¦, è¾“å‡º10ç»´åº¦ï¼Œéœ€è¦å’Œè¾“å…¥è¾“å‡ºå¯¹åº”model.add(Activation('softmax'))sgd = SGD(lr=0.005)#binary_crossentropyï¼Œå°±æ˜¯äº¤å‰ç†µå‡½æ•°model.compile(loss='binary_crossentropy', optimizer=sgd, metrics=['accuracy'])#model æ¦‚è¦model.summary() ____________________________________________________________________________________________________ Layer (type) Output Shape Param # Connected to ==================================================================================================== dense_1 (Dense) (None, 10) 7850 dense_input_1[0][0] ____________________________________________________________________________________________________ activation_1 (Activation) (None, 10) 0 dense_1[0][0] ==================================================================================================== Total params: 7,850 Trainable params: 7,850 Non-trainable params: 0 ____________________________________________________________________________________________________ 1SVG(model_to_dot(model).create(prog='dot', format='svg')) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546from keras.callbacks import Callback, TensorBoardimport tensorflow as tf#æ„å»ºä¸€ä¸ªè®°å½•çš„lossçš„å›è°ƒå‡½æ•°class LossHistory(Callback): def on_train_begin(self, logs=&#123;&#125;): self.losses = [] def on_batch_end(self, batch, logs=&#123;&#125;): self.losses.append(logs.get('loss'))# æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„TensorBoardç±»ï¼Œä¸“é—¨ç”¨æ¥è®°å½•batchä¸­çš„æ•°æ®å˜åŒ–class BatchTensorBoard(TensorBoard): def __init__(self,log_dir='./logs', histogram_freq=0, write_graph=True, write_images=False): super(BatchTensorBoard, self).__init__() self.log_dir = log_dir self.histogram_freq = histogram_freq self.merged = None self.write_graph = write_graph self.write_images = write_images self.batch = 0 self.batch_queue = set() def on_epoch_end(self, epoch, logs=None): pass def on_batch_end(self,batch,logs=None): logs = logs or &#123;&#125; self.batch = self.batch + 1 for name, value in logs.items(): if name in ['batch', 'size']: continue summary = tf.Summary() summary_value = summary.value.add() summary_value.simple_value = float(value) summary_value.tag = "batch_" + name if (name,self.batch) in self.batch_queue: continue self.writer.add_summary(summary, self.batch) self.batch_queue.add((name,self.batch)) self.writer.flush() 12345678tensorboard = TensorBoard(log_dir='/home/tensorflow/log/softmax/epoch')my_tensorboard = BatchTensorBoard(log_dir='/home/tensorflow/log/softmax/batch')model.fit(x_train_1, y_train_1, nb_epoch=20, verbose=0, batch_size=100, callbacks=[tensorboard, my_tensorboard]) &lt;keras.callbacks.History at 0xa86d650&gt; æŸå¤±å‡½æ•°æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§å°†ä¸€ä¸ªäº‹ä»¶ï¼ˆåœ¨ä¸€ä¸ªæ ·æœ¬ç©ºé—´ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼‰æ˜ å°„åˆ°ä¸€ä¸ªè¡¨è¾¾ä¸å…¶äº‹ä»¶ç›¸å…³çš„ç»æµæˆæœ¬æˆ–æœºä¼šæˆæœ¬çš„å®æ•°ä¸Šçš„ä¸€ç§å‡½æ•°ï¼Œåœ¨ç»Ÿè®¡å­¦ä¸­æŸå¤±å‡½æ•°æ˜¯ä¸€ç§è¡¡é‡æŸå¤±å’Œé”™è¯¯ï¼ˆè¿™ç§æŸå¤±ä¸â€œé”™è¯¯åœ°â€ä¼°è®¡æœ‰å…³ï¼Œå¦‚è´¹ç”¨æˆ–è€…è®¾å¤‡çš„æŸå¤±ï¼‰ç¨‹åº¦çš„å‡½æ•°ã€‚ äº¤å‰ç†µï¼ˆcross-entropyï¼‰å°±æ˜¯ç¥ç»ç½‘ç»œä¸­å¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚ äº¤å‰ç†µæ€§è´¨ï¼š ï¼ˆ1ï¼‰éè´Ÿæ€§ã€‚ ï¼ˆ2ï¼‰å½“çœŸå®è¾“å‡ºaä¸æœŸæœ›è¾“å‡ºyæ¥è¿‘çš„æ—¶å€™ï¼Œä»£ä»·å‡½æ•°æ¥è¿‘äº0.(æ¯”å¦‚y=0ï¼Œaï½0ï¼›y=1ï¼Œa~1æ—¶ï¼Œä»£ä»·å‡½æ•°éƒ½æ¥è¿‘0)ã€‚ ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç†è§£å°±æ˜¯ä½¿å¾— é¢„æµ‹å€¼Yiå’ŒçœŸå®å€¼Yâ€™ å¯¹æ¥è¿‘ï¼Œå³ä¸¤è€…çš„ä¹˜ç§¯è¶Šå¤§ï¼Œcoss-entropyè¶Šå°ã€‚ äº¤å‰ç†µå’Œå‡†ç¡®åº¦å˜åŒ–å›¾åƒå¯ä»¥çœ‹ TensorBoard ã€‚ æ¢¯åº¦ä¸‹é™å¦‚æœå¯¹äºæ‰€æœ‰çš„æƒé‡å’Œæ‰€æœ‰çš„åç½®è®¡ç®—äº¤å‰ç†µçš„åå¯¼æ•°ï¼Œå°±å¾—åˆ°ä¸€ä¸ªå¯¹äºç»™å®šå›¾åƒã€æ ‡ç­¾å’Œå½“å‰æƒé‡å’Œåç½®çš„ã€Œæ¢¯åº¦ã€ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š æˆ‘ä»¬å¸Œæœ›æŸå¤±å‡½æ•°æœ€å°ï¼Œä¹Ÿå°±æ˜¯éœ€è¦åˆ°è¾¾äº¤å‰ç†µæœ€å°çš„å‡¹ç‚¹çš„ä½éƒ¨ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œäº¤å‰ç†µè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªæƒé‡çš„å‡½æ•°ã€‚ è€Œå­¦ä¹ é€Ÿç‡ï¼Œå³åœ¨æ¢¯åº¦ä¸‹é™ä¸­çš„æ­¥ä¼å¤§å°ã€‚ 123456#æ¨¡å‹çš„æµ‹è¯•è¯¯å·®æŒ‡æ ‡print(model.metrics_names)# å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œæµ‹è¯•model.evaluate(x_test_1, y_test_1, verbose=1, batch_size=100) [&apos;loss&apos;, &apos;acc&apos;] 9800/10000 [============================&gt;.] - ETA: 0s [0.87580669939517974, 0.94387999653816224] ä¸Šé¢ï¼Œæˆ‘ä»¬æ¢ç´¢äº†softmaxå¯¹å¤šåˆ†ç±»çš„æ”¯æŒå’Œç†è§£ï¼ŒçŸ¥é“softmaxå¯ä»¥ä½œä¸ºä¸€ä¸ªè¾“å‡ºæˆå±‚è¿›è¡Œå¤šåˆ†ç±»ä»»åŠ¡ã€‚ ä½†æ˜¯ï¼Œè¿™ç§åˆ†ç±»ä»»åŠ¡è§£å†³çš„éƒ½æ˜¯çº¿æ€§å› ç´ å½¢æˆçš„é—®é¢˜ï¼Œå¯¹äºéçº¿æ€§çš„ï¼Œç‰¹åˆ«æ˜¯å¼‚æˆ–é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ è¿™æ—¶ï¼Œä¸€ç§åŒ…å«å¤šå±‚éšå«å±‚çš„æ·±åº¦ç¥ç»ç½‘ç»œçš„æ¦‚å¿µè¢«æå‡ºã€‚ 3. æ¿€æ´»å‡½æ•°æ¿€æ´»å‡½æ•°ï¼ˆactivation functionï¼‰å¯ä»¥ä½¿å¾—æ¨¡å‹åŠ å…¥éçº¿æ€§å› ç´ çš„ã€‚ è§£å†³éçº¿æ€§é—®é¢˜æœ‰ä¸¤ä¸ªåŠæ³•ï¼šçº¿æ€§å˜æ¢ã€å¼•å…¥éçº¿æ€§å‡½æ•°ã€‚ ï¼ˆ1ï¼‰çº¿æ€§å˜æ¢(linear transformation) åŸæœ¬ä¸€ä¸ªçº¿æ€§ä¸å¯åˆ†çš„æ¨¡å‹å¦‚ï¼šX^2 + Y^2 = 1 å…¶å›¾å½¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 123456789101112131415fig = plt.figure(0)degree = np.random.rand(50)*np.pi*2x_1 = np.cos(degree)*np.random.rand(50)y_1 = np.sin(degree)*np.random.rand(50)x_2 = np.cos(degree)*(1+np.random.rand(50))y_2 = np.sin(degree)*(1+np.random.rand(50))# x_3 å’Œ y_3 å°±æ˜¯åˆ‡åˆ†çº¿t = np.linspace(0,np.pi*2,50)x_3 = np.cos(t)y_3 = np.sin(t)scatter(x_1,y_1,c='red',s=50,alpha=0.4,marker='o')scatter(x_2,y_2,c='black',s=50,alpha=0.4,marker='o')plot(x_3,y_3) [&lt;matplotlib.lines.Line2D at 0x86c7510&gt;] å°†åæ ‡è½´è¿›è¡Œé«˜ç»´å˜æ¢ï¼Œæ¨ªåæ ‡å˜æˆX^2ï¼Œçºµåæ ‡å˜æˆ Y^2ï¼Œè¿™æ˜¯è¡¨è¾¾å¼å˜ä¸ºäº† X + Y = 1ï¼Œè¿™æ ·ï¼ŒåŸæ¥çš„éçº¿æ€§é—®é¢˜ï¼Œå°±å˜æˆäº†ä¸€ä¸ªçº¿æ€§å¯åˆ†çš„é—®é¢˜ï¼Œå˜æˆäº†ä¸€ä¸ªç®€å•çš„ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹äº†ã€‚ è¯¦ç»†å¯ä»¥å‚è§ä¸‹å›¾ï¼š 1234567891011121314fig2 = plt.figure(1)#ä»¤æ–°çš„æ¨ªåæ ‡å˜æˆx^2,çºµåæ ‡å˜æˆ Y^2x_4 = x_1**2y_4 = y_1**2x_5 = x_2**2y_5 = y_2**2# è¿™æ ·å°±å¯ä»¥æ„å»ºä¸€ä¸ªä¸€å…ƒçº¿æ€§æ–¹ç¨‹è¿›è¡Œæ‹Ÿåˆx_6 = np.linspace(-1,2,50)y_6 = 1 - x_6scatter(x_4,y_4,c='red',s=50,alpha=0.4,marker='o')scatter(x_5,y_5,c='black',s=50,alpha=0.4,marker='o')plot(x_6,y_6) [&lt;matplotlib.lines.Line2D at 0x984bf10&gt;] ï¼ˆ2ï¼‰å¼•å…¥éçº¿æ€§å‡½æ•° å¼‚æˆ–æ˜¯ä¸€ç§åŸºäºäºŒè¿›åˆ¶çš„ä½è¿ç®—ï¼Œç”¨ç¬¦å·XOR è¡¨ç¤º(Pythonä¸­çš„å¼‚æˆ–æ“ä½œç¬¦ä¸º ^ )ï¼Œå…¶è¿ç®—æ³•åˆ™æ˜¯å¯¹è¿ç®—ç¬¦ä¸¤ä¾§æ•°çš„æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼ŒåŒå€¼å–0ï¼Œå¼‚å€¼å–1ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„å¼‚æˆ–è¡¨ï¼š 1234table = &#123;'x':[1,0,1,0],'y':[1,0,0,1]&#125;df = pd.DataFrame(table)df['z'] = df['x']^df['y']df x y z 0 1 1 0 1 0 0 0 2 1 0 1 3 0 1 1 x = 1, y = 1, åˆ™ z = 0 x = 0, y = 0, åˆ™ z = 0 x = 1, y = 0, åˆ™ z = 1 x = 0, y = 1, åˆ™ z = 1 â€¦ å…¶å›¾å½¢å¦‚ä¸‹ï¼š 1234fig3 = plt.figure(2)groups = df.groupby('z')for name, group in groups: scatter(group['x'],group['y'],label=name,s=50,marker='o') é‚£ä¹ˆå¦‚æœå¯ä»¥æ„å»ºä¸€ä¸ªå‡½æ•°æ‹Ÿåˆè¿™æ ·çš„å›¾å½¢å‘¢ï¼Ÿå³å¦‚ä½•æ„å»ºä¸€ä¸ªf()ï¼Œä½¿å¾—ï¼šf(x,y)=zå‘¢ï¼Ÿ ä¸ºäº†è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬æ¥æ„å»ºä¸€ä¸ªä¸¤å±‚çš„ç¥ç»ç½‘ç»œï¼Œè¯¥ç¥ç»ç½‘ç»œæœ‰ä¸¤ä¸ªæ¿€æ´»å‡½æ•°ï¼ŒF(x,y)å’Œ H(x,y), å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š F(x,y)ä¸ºä¸€ä¸ªé˜ˆå€¼ä¸º1çš„é˜ˆå€¼å‡½æ•°ï¼š å³ï¼šå½“AX+BY&gt;1æ—¶å€™,F(x,y) = 1;å¦åˆ™ä¸º0ï¼›1234if AX+BY &gt; 1: F = 1else: F = 0 H(x,yï¼‰ä¸ºä¸€ä¸ªé˜ˆå€¼ä¸º0çš„é˜ˆå€¼å‡½æ•°ï¼š1234if AX+BY &gt; 0: H = 1else: H = 0 å›¾ä¸­çº¿çš„æ•°å­—è¡¨ç¤ºæƒé‡å€¼ï¼Œ 1234567- å¯¹äº(1,1)çš„ç‚¹ï¼Œç¬¬äºŒå±‚ä»å·¦åˆ°å³éšè—å±‚çš„å€¼åˆ†åˆ«ä¸º(1,1,1),æœ€åè¾“å‡ºä¸º(1,1,1)*(1,-2,1)=0ï¼›- å¯¹äº(0,0)çš„ç‚¹ï¼Œç¬¬äºŒå±‚ä»å·¦åˆ°å³éšè—å±‚çš„å€¼åˆ†åˆ«ä¸º(0,0,0),æœ€åè¾“å‡ºä¸º(0,0,0)*(1,-2,1)=0ï¼›- å¯¹äº(1,0)çš„ç‚¹ï¼Œç¬¬äºŒå±‚ä»å·¦åˆ°å³éšè—å±‚çš„å€¼åˆ†åˆ«ä¸º(1,0,0),æœ€åè¾“å‡ºä¸º(1,0,0)*(1,-2,1)= 1ï¼›- å¯¹äº(0,1)çš„ç‚¹ï¼Œç¬¬äºŒå±‚ä»å·¦åˆ°å³éšè—å±‚çš„å€¼åˆ†åˆ«ä¸º(0,0,1),æœ€åè¾“å‡ºä¸º(0,0,1)*(1,-2,1)= 1ï¼› 123first_hidder_layer_table = &#123;'x':[1,0,1,0],'y':[1,0,0,0],'z':[1,0,0,1],'output':[0,0,1,1]&#125;first_hidder_layer_data = pd.DataFrame(first_hidder_layer_table)first_hidder_layer_data output x y z 0 0 1 1 1 1 0 0 0 0 2 1 1 0 0 3 1 0 0 1 è¿™æ ·æˆ‘ä»¬å°±æ„å»ºå‡ºäº†ä¸€ä¸ªå¯ä»¥è®¡ç®—æ‹Ÿåˆçš„å‡½æ•°äº†ã€‚ æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹ç¬¬ä¸€ä¸ªéšå«å±‚ï¼Œå…¶æ€»å…±æœ‰ä¸‰ä¸ªç»´åº¦ï¼Œä¸‰ä¸ªæƒé‡å€¼ï¼Œä»è¾“å…¥å±‚åˆ°ç¬¬ä¸€å±‚ï¼Œå®é™…ä¸Šï¼Œå°±æ˜¯ä»å°†ä¸€ä¸ªäºŒç»´çš„æ•°ç»„å˜æˆä¸€ä¸ªä¸‰ç»´æ•°ç»„ï¼Œä»è€Œå®ç°çº¿æ€§åˆ‡åˆ†ã€‚ å›¾å½¢åŒ–è§£é‡Šï¼š 123456789from mpl_toolkits.mplot3d import Axes3Dfig4 = plt.figure(3)ax = fig4.add_subplot(111, projection='3d')groups = first_hidder_layer_data.groupby('output')for name, group in groups: ax.scatter(group['x'],group['y'],group['z'],label=name,c=np.random.choice(['black','blue']),s=50,marker='o')ax.set_xlabel('X Label')ax.set_ylabel('Y Label')ax.set_zlabel('Z Label') &lt;matplotlib.text.Text at 0xb7b0d90&gt; ç»è¿‡å˜æ¢åçš„æ•°æ®æ˜¯çº¿æ€§å¯åˆ†çš„ï¼ˆnç»´ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­å¯ä»¥ç”¨å¹³é¢å°†ä¸¤ä¸ªä¸åŒé¢œè‰²çš„ç‚¹åˆ‡åˆ†ï¼‰ æ›´å¤šçš„æ“ä½œå¯ä»¥å‚è€ƒtensorflowæä¾›çš„ä¸€ä¸ªç¥ç»ç½‘ç»œçš„ç½‘é¡µå°ç¨‹åºï¼Œé€šè¿‡è‡ªå·±è°ƒæ•´ç¨‹åºå‚æ•°å¯ä»¥æ›´æ·±åˆ»ç†è§£ç¥ç»ç½‘ç»œã€æ¿€æ´»å‡½æ•°çš„ä½œç”¨ã€‚ æ¼”ç¤ºç½‘å€ï¼š http://playground.tensorflow.org/ å¯ä»¥è‡ªå·±å»ºç«‹ä¸€ä¸ªå°å‹ç¥ç»ç½‘ç»œå¸®åŠ©ç†è§£ã€‚ 4. sigmoidsigmoidæ˜¯ä¸€ä¸ªç”¨æ¥åšäºŒåˆ†ç±»çš„â€Sâ€å½¢é€»è¾‘å›å½’æ›²çº¿ sigmoidå…¬å¼ï¼š sigmoidå›¾åƒï¼š å…¶æŠ‘åˆ¶ä¸¤å¤´,å¯¹ä¸­é—´ç»†å¾®å˜åŒ–æ•æ„Ÿï¼Œå› æ­¤sigmoidå‡½æ•°ä½œä¸ºæœ€ç®€å•å¸¸ç”¨çš„ç¥ç»ç½‘ç»œæ¿€æ´»å±‚è¢«ä½¿ç”¨ã€‚ ä¼˜ç‚¹ï¼š ï¼ˆ1ï¼‰è¾“å‡ºèŒƒå›´(0,1)ï¼Œæ•°æ®åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­ä¸å®¹æ˜“å‘æ•£ ï¼ˆ2ï¼‰å•å‘é€’å¢ ï¼ˆ3ï¼‰æ˜“æ±‚å¯¼ sigmodæœ‰ä¸ªç¼ºç‚¹ï¼Œsigmoidå‡½æ•°åå‘ä¼ æ’­æ—¶ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±,åœ¨æ¥è¿‘é¥±å’ŒåŒºçš„æ—¶å€™ï¼Œå¯¼æ•°è¶‹å‘0ï¼Œä¼šå˜å¾—éå¸¸ç¼“æ…¢ã€‚å› æ­¤ï¼Œåœ¨ä¼˜åŒ–å™¨é€‰æ‹©æ—¶é€‰ç”¨Adamä¼˜åŒ–å™¨ã€‚ Adam ä¹Ÿæ˜¯åŸºäºæ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ï¼Œä½†æ˜¯æ¯æ¬¡è¿­ä»£å‚æ•°çš„å­¦ä¹ æ­¥é•¿éƒ½æœ‰ä¸€ä¸ªç¡®å®šçš„èŒƒå›´ï¼Œä¸ä¼šå› ä¸ºå¾ˆå¤§çš„æ¢¯åº¦å¯¼è‡´å¾ˆå¤§çš„å­¦ä¹ æ­¥é•¿ï¼Œå‚æ•°çš„å€¼æ¯”è¾ƒç¨³å®šã€‚æœ‰åˆ©äºé™ä½æ¨¡å‹æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜çš„é£é™©ï¼Œè€ŒSGDå®¹æ˜“æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜ï¼Œå¦‚æœä¸‹é¢ä»£ç ä¸­çš„optimizeræ”¹æˆSGDçš„åŒ–ï¼Œåœ¨ä¸€æ¬¡epochåå°±accå€¼ä¸ä¼šæ”¹å˜äº†ï¼Œé™·å…¥å±€éƒ¨æœ€ä¼˜ 1234567891011121314151617181920212223242526272829303132333435# æ„å»ºä¸€ä¸ªäº”å±‚sigmodå…¨è¿æ¥ç¥ç»ç½‘ç»œ# neural network with 5 layers## Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· (input data, flattened pixels) X [batch, 784] # 784 = 28*28# \x/x\x/x\x/x\x/x\x/ -- fully connected layer (sigmoid) W1 [784, 200] B1[200]# Â· Â· Â· Â· Â· Â· Â· Â· Â· Y1 [batch, 200]# \x/x\x/x\x/x\x/ -- fully connected layer (sigmoid) W2 [200, 100] B2[100]# Â· Â· Â· Â· Â· Â· Â· Y2 [batch, 100]# \x/x\x/x\x/ -- fully connected layer (sigmoid) W3 [100, 60] B3[60]# Â· Â· Â· Â· Â· Y3 [batch, 60]# \x/x\x/ -- fully connected layer (sigmoid) W4 [60, 30] B4[30]# Â· Â· Â· Y4 [batch, 30]# \x/ -- fully connected layer (softmax) W5 [30, 10] B5[10]# Â· Y5 [batch, 10]model = Sequential()model.add(Dense(200, input_shape=(784,)))#å…¨è¿æ¥ï¼Œè¾“å…¥784ç»´åº¦, è¾“å‡º10ç»´åº¦ï¼Œéœ€è¦å’Œè¾“å…¥è¾“å‡ºå¯¹åº”model.add(Activation('sigmoid'))model.add(Dense(100))# é™¤äº†é¦–å±‚éœ€è¦è®¾ç½®è¾“å…¥ç»´åº¦ï¼Œå…¶ä»–å±‚åªéœ€è¦è¾“å…¥è¾“å‡ºç»´åº¦å°±å¯ä»¥äº†ï¼Œè¾“å…¥ç»´åº¦è‡ªåŠ¨ç»§æ‰¿ä¸Šå±‚ã€‚model.add(Activation('sigmoid'))model.add(Dense(60))model.add(Activation('sigmoid'))model.add(Dense(30)) #model.add(Activation('sigmoid'))å’Œmodel.add(Dense(30))å¯ä»¥åˆå¹¶å†™å‡ºmodel.add(Activation('sigmoid'))#model.add(Dense(30,activation='softmax'))model.add(Dense(10))model.add(Activation('softmax'))sgd = Adam(lr=0.003)model.compile(loss='binary_crossentropy', optimizer=sgd, metrics=['accuracy'])#model æ¦‚è¦model.summary() ____________________________________________________________________________________________________ Layer (type) Output Shape Param # Connected to ==================================================================================================== dense_23 (Dense) (None, 200) 157000 dense_input_7[0][0] ____________________________________________________________________________________________________ activation_23 (Activation) (None, 200) 0 dense_23[0][0] ____________________________________________________________________________________________________ dense_24 (Dense) (None, 100) 20100 activation_23[0][0] ____________________________________________________________________________________________________ activation_24 (Activation) (None, 100) 0 dense_24[0][0] ____________________________________________________________________________________________________ dense_25 (Dense) (None, 60) 6060 activation_24[0][0] ____________________________________________________________________________________________________ activation_25 (Activation) (None, 60) 0 dense_25[0][0] ____________________________________________________________________________________________________ dense_26 (Dense) (None, 30) 1830 activation_25[0][0] ____________________________________________________________________________________________________ activation_26 (Activation) (None, 30) 0 dense_26[0][0] ____________________________________________________________________________________________________ dense_27 (Dense) (None, 10) 310 activation_26[0][0] ____________________________________________________________________________________________________ activation_27 (Activation) (None, 10) 0 dense_27[0][0] ==================================================================================================== Total params: 185,300 Trainable params: 185,300 Non-trainable params: 0 ____________________________________________________________________________________________________ 1SVG(model_to_dot(model).create(prog='dot', format='svg')) 1234567tensorboard2 = TensorBoard(log_dir='/home/tensorflow/log/five_layer_sigmoid/epoch', histogram_freq=0)my_tensorboard2 = BatchTensorBoard(log_dir='/home/tensorflow/log/five_layer_sigmoid/batch')model.fit(x_train_1, y_train_1, nb_epoch=20, verbose=0, batch_size=100, callbacks=[my_tensorboard2, tensorboard2]) &lt;keras.callbacks.History at 0xf868a90&gt; 123456#æ¨¡å‹çš„æµ‹è¯•è¯¯å·®æŒ‡æ ‡print(model.metrics_names)# å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œæµ‹è¯•model.evaluate(x_test_1, y_test_1, verbose=1, batch_size=100) [&apos;loss&apos;, &apos;acc&apos;] 9800/10000 [============================&gt;.] - ETA: 0s [0.036339853547979147, 0.98736999988555907] æ ¹æ®ä¸Šé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ·±åº¦è¶Šæ·±ï¼Œæ•ˆæœè¶Šå¥½ã€‚ ä½†æ˜¯ï¼Œå¯¹äºæ·±å±‚ç½‘ç»œï¼Œsigmoidå‡½æ•°åå‘ä¼ æ’­æ—¶ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±çš„æƒ…å†µä»è€Œæ— æ³•å®Œæˆæ·±å±‚ç½‘ç»œçš„è®­ç»ƒã€‚åœ¨sigmoidæ¥è¿‘é¥±å’ŒåŒºæ—¶ï¼Œå˜æ¢éå¸¸ç¼“æ…¢ï¼Œå¯¼æ•°è¶‹äº0ï¼Œå‡ç¼“æ”¶æ•›é€Ÿåº¦ã€‚ 5. ReLuReLuæ¥è‡ªäºå¯¹äººè„‘ç¥ç»ç»†èƒå·¥ä½œæ—¶çš„ç¨€ç–æ€§çš„ç ”ç©¶ï¼Œåœ¨ Lennie,P.(2003)æå‡ºäººè„‘ç¥ç»å…ƒæœ‰95%ï¼99%æ˜¯é—²ç½®çš„ï¼Œè€Œæ›´å°‘å·¥ä½œçš„ç¥ç»å…ƒæ„å‘³ç€æ›´å°çš„è®¡ç®—å¤æ‚åº¦ï¼Œæ›´ä¸å®¹æ˜“è¿‡æ‹Ÿåˆ ä¿®æ­£çº¿æ€§å•å…ƒ(Rectified linear unit,ReLU)å…¬å¼ï¼š $$ReLU\left(x\right)=\left\lbrace\begin{align}x, \quad x \gt 0 \cr0, \quad x \le 0\end{align}\right .$$ å…¶å›¾åƒï¼š ReLUå…·æœ‰çº¿æ€§ã€éé¥±å’Œæ€§ï¼Œè€Œå…¶éé¥±å’Œæ€§ä½¿å¾—ç½‘ç»œå¯ä»¥è‡ªè¡Œå¼•å…¥ç¨€ç–æ€§ã€‚ ReLUçš„ä½¿ç”¨è§£å†³äº†sigmoidæ¢¯åº¦ä¸‹é™æ…¢ï¼Œæ·±å±‚ç½‘ç»œçš„ä¿¡æ¯ä¸¢å¤±çš„é—®é¢˜ã€‚ ReLUåœ¨è®­ç»ƒæ—¶æ˜¯éå¸¸è„†å¼±çš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šâ€œæ­»â€ã€‚ä¾‹å¦‚ï¼Œç»è¿‡ReLUç¥ç»å…ƒçš„ä¸€ä¸ªå¤§æ¢¯åº¦å¯èƒ½å¯¼è‡´æƒé‡æ›´æ–°åè¯¥ç¥ç»å…ƒæ¥æ”¶åˆ°ä»»ä½•æ•°æ®ç‚¹éƒ½ä¸ä¼šå†æ¿€æ´»ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¹‹åé€šè¿‡è¯¥å•ä½ç‚¹çš„æ¢¯åº¦å°†æ°¸è¿œæ˜¯é›¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒReLUå¯èƒ½ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸å¯é€†åœ°æ­»äº¡ï¼Œå¹¶ä¸”ç ´åæ•°æ®æµå½¢ã€‚å¦‚æœå­¦ä¹ ç‡å¤ªé«˜ï¼Œå¤§éƒ¨åˆ†ç½‘ç»œå°†ä¼šâ€œæ­»äº¡â€ï¼ˆå³ï¼Œåœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­ç¥ç»å…ƒéƒ½æ²¡æœ‰æ¿€æ´»ï¼‰ã€‚è€Œè®¾ç½®ä¸€ä¸ªé€‚å½“çš„å­¦ä¹ ç‡ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…è¿™ä¸€é—®é¢˜ã€‚ 6. å­¦ä¹ é€Ÿç‡ä¸Šé¢è¯´æ¢¯åº¦ä¸‹é™çš„æ—¶å€™ï¼Œè¯´è¿‡å­¦ä¹ é€Ÿç‡å…¶å®å°±æ˜¯æ¢¯åº¦ä¸‹é™çš„æ­¥ä¼ã€‚å› æ­¤ï¼Œä¸ºäº†åˆ°è¾¾å±±è°·ï¼Œéœ€è¦æ§åˆ¶æ­¥ä¼çš„å¤§å°ï¼Œå³å­¦ä¹ é€Ÿç‡ã€‚ å­¦ä¹ é€Ÿç‡å¤§å°çš„è°ƒèŠ‚ä¸€èˆ¬å–å†³äº loss çš„å˜åŒ–å¹…åº¦ã€‚ 1234567891011121314151617181920212223242526272829303132# neural network with 5 layers## Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· (input data, flattened pixels) X [batch, 784] # 784 = 28*28# \x/x\x/x\x/x\x/x\x/ -- fully connected layer (relu) W1 [784, 200] B1[200]# Â· Â· Â· Â· Â· Â· Â· Â· Â· Y1 [batch, 200]# \x/x\x/x\x/x\x/ -- fully connected layer (relu) W2 [200, 100] B2[100]# Â· Â· Â· Â· Â· Â· Â· Y2 [batch, 100]# \x/x\x/x\x/ -- fully connected layer (relu) W3 [100, 60] B3[60]# Â· Â· Â· Â· Â· Y3 [batch, 60]# \x/x\x/ -- fully connected layer (relu) W4 [60, 30] B4[30]# Â· Â· Â· Y4 [batch, 30]# \x/ -- fully connected layer (softmax) W5 [30, 10] B5[10]# Â· Y5 [batch, 10]model = Sequential()model.add(Dense(200, input_shape=(784,)))#å…¨è¿æ¥ï¼Œè¾“å…¥784ç»´åº¦, è¾“å‡º10ç»´åº¦ï¼Œéœ€è¦å’Œè¾“å…¥è¾“å‡ºå¯¹åº”model.add(Activation('relu'))# å°†æ¿€æ´»å‡½æ•°sigmoidæ”¹ä¸ºReLUmodel.add(Dense(100))model.add(Activation('relu'))model.add(Dense(60))model.add(Activation('relu'))model.add(Dense(30)) model.add(Activation('relu'))model.add(Dense(10))model.add(Activation('softmax'))sgd = Adam(lr=0.001)model.compile(loss='binary_crossentropy', optimizer=sgd, metrics=['accuracy'])#model æ¦‚è¦model.summary() ____________________________________________________________________________________________________ Layer (type) Output Shape Param # Connected to ==================================================================================================== dense_16 (Dense) (None, 200) 157000 dense_input_4[0][0] ____________________________________________________________________________________________________ activation_16 (Activation) (None, 200) 0 dense_16[0][0] ____________________________________________________________________________________________________ dense_17 (Dense) (None, 100) 20100 activation_16[0][0] ____________________________________________________________________________________________________ activation_17 (Activation) (None, 100) 0 dense_17[0][0] ____________________________________________________________________________________________________ dense_18 (Dense) (None, 60) 6060 activation_17[0][0] ____________________________________________________________________________________________________ activation_18 (Activation) (None, 60) 0 dense_18[0][0] ____________________________________________________________________________________________________ dense_19 (Dense) (None, 30) 1830 activation_18[0][0] ____________________________________________________________________________________________________ activation_19 (Activation) (None, 30) 0 dense_19[0][0] ____________________________________________________________________________________________________ dense_20 (Dense) (None, 10) 310 activation_19[0][0] ____________________________________________________________________________________________________ activation_20 (Activation) (None, 10) 0 dense_20[0][0] ==================================================================================================== Total params: 185,300 Trainable params: 185,300 Non-trainable params: 0 ____________________________________________________________________________________________________ 1SVG(model_to_dot(model).create(prog='dot', format='svg')) 1234567tensorboard3 = TensorBoard(log_dir='/home/tensorflow/log/five_layer_relu/epoch', histogram_freq=0)my_tensorboard3 = BatchTensorBoard(log_dir='/home/tensorflow/log/five_layer_relu/batch')model.fit(x_train_1, y_train_1, nb_epoch=30, verbose=0, batch_size=100, callbacks=[my_tensorboard3, tensorboard3]) &lt;keras.callbacks.History at 0xe3c6d50&gt; 123456#æ¨¡å‹çš„æµ‹è¯•è¯¯å·®æŒ‡æ ‡print(model.metrics_names)# å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œæµ‹è¯•model.evaluate(x_test_1, y_test_1, verbose=1, batch_size=100) [&apos;loss&apos;, &apos;acc&apos;] 9600/10000 [===========================&gt;..] - ETA: 0s [0.017244604945910281, 0.99598000288009647] 7.Dropout è¿è¡Œç›®å½•ä¸‹çš„mnist_2.1_five_layers_relu_lrdecay.py éšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æµ‹è¯•æ•°æ®çš„losså€¼å’Œè®­ç»ƒæ•°æ®çš„losså­˜åœ¨ç€å·¨å¤§çš„å·®è·ï¼Œ éšç€è¿­ä»£æ¬¡æ•°å¢åŠ ï¼Œtrain loss è¶Šæ¥è¶Šå¥½ï¼Œä½†test loss çš„ç»“æœç¡®è¶Šæ¥è¶Šå·®ï¼Œtest loss å’Œ train loss å·®è·è¶Šæ¥è¶Šå¤§ï¼Œæ¨¡å‹å¼€å§‹è¿‡æ‹Ÿåˆã€‚ Dropoutæ˜¯æŒ‡å¯¹äºç¥ç»ç½‘ç»œå•å…ƒæŒ‰ç…§ä¸€å®šçš„æ¦‚ç‡å°†å…¶æš‚æ—¶ä»ç½‘ç»œä¸­ä¸¢å¼ƒ,ä»è€Œè§£å†³è¿‡æ‹Ÿåˆé—®é¢˜ã€‚ å¯ä»¥å¯¹æ¯”mnist_2.1_five_layers_relu_lrdecay.py å’Œ åŠ äº†dropoutçš„/mnist_2.2_five_layers_relu_lrdecay_dropout.pyçš„ç»“æœ 1234567891011121314151617181920212223242526272829303132333435# neural network with 5 layers## Â· Â· Â· Â· Â· Â· Â· Â· Â· Â· (input data, flattened pixels) X [batch, 784] # 784 = 28*28# \x/x\x/x\x/x\x/x\x/ âœ -- fully connected layer (relu+dropout) W1 [784, 200] B1[200]# Â· Â· Â· Â· Â· Â· Â· Â· Â· Y1 [batch, 200]# \x/x\x/x\x/x\x/ âœ -- fully connected layer (relu+dropout) W2 [200, 100] B2[100]# Â· Â· Â· Â· Â· Â· Â· Y2 [batch, 100]# \x/x\x/x\x/ âœ -- fully connected layer (relu+dropout) W3 [100, 60] B3[60]# Â· Â· Â· Â· Â· Y3 [batch, 60]# \x/x\x/ âœ -- fully connected layer (relu+dropout) W4 [60, 30] B4[30]# Â· Â· Â· Y4 [batch, 30]# \x/ -- fully connected layer (softmax) W5 [30, 10] B5[10]# Â· Y5 [batch, 10]model = Sequential()model.add(Dense(200, input_shape=(784,)))#å…¨è¿æ¥ï¼Œè¾“å…¥784ç»´åº¦, è¾“å‡º10ç»´åº¦ï¼Œéœ€è¦å’Œè¾“å…¥è¾“å‡ºå¯¹åº”model.add(Activation('relu'))# å°†æ¿€æ´»å‡½æ•°sigmoidæ”¹ä¸ºReLUmodel.add(Dense(100))model.add(Activation('relu'))model.add(Dropout(0.25))# æ·»åŠ ä¸€ä¸ªdropoutå±‚, éšæœºç§»é™¤25%çš„å•å…ƒmodel.add(Dense(60))model.add(Activation('relu'))model.add(Dropout(0.25))model.add(Dense(30)) model.add(Activation('relu'))model.add(Dropout(0.25))model.add(Dense(10))model.add(Activation('softmax'))sgd = Adam(lr=0.001)model.compile(loss='binary_crossentropy', optimizer=sgd, metrics=['accuracy'])#model æ¦‚è¦model.summary() ____________________________________________________________________________________________________ Layer (type) Output Shape Param # Connected to ==================================================================================================== dense_171 (Dense) (None, 200) 157000 dense_input_35[0][0] ____________________________________________________________________________________________________ activation_171 (Activation) (None, 200) 0 dense_171[0][0] ____________________________________________________________________________________________________ dense_172 (Dense) (None, 100) 20100 activation_171[0][0] ____________________________________________________________________________________________________ activation_172 (Activation) (None, 100) 0 dense_172[0][0] ____________________________________________________________________________________________________ dropout_100 (Dropout) (None, 100) 0 activation_172[0][0] ____________________________________________________________________________________________________ dense_173 (Dense) (None, 60) 6060 dropout_100[0][0] ____________________________________________________________________________________________________ activation_173 (Activation) (None, 60) 0 dense_173[0][0] ____________________________________________________________________________________________________ dropout_101 (Dropout) (None, 60) 0 activation_173[0][0] ____________________________________________________________________________________________________ dense_174 (Dense) (None, 30) 1830 dropout_101[0][0] ____________________________________________________________________________________________________ activation_174 (Activation) (None, 30) 0 dense_174[0][0] ____________________________________________________________________________________________________ dropout_102 (Dropout) (None, 30) 0 activation_174[0][0] ____________________________________________________________________________________________________ dense_175 (Dense) (None, 10) 310 dropout_102[0][0] ____________________________________________________________________________________________________ activation_175 (Activation) (None, 10) 0 dense_175[0][0] ==================================================================================================== Total params: 185,300 Trainable params: 185,300 Non-trainable params: 0 ____________________________________________________________________________________________________ 1SVG(model_to_dot(model).create(prog='dot', format='svg')) 12345678tensorboard4 = TensorBoard(log_dir='/home/tensorflow/log/five_layer_relu_dropout/epoch')my_tensorboard4 = BatchTensorBoard(log_dir='/home/tensorflow/log/five_layer_relu_dropout/batch')model.fit(x_train_1, y_train_1, nb_epoch=30, verbose=0, batch_size=100, callbacks=[tensorboard4, my_tensorboard4]) &lt;keras.callbacks.History at 0x27819610&gt; 123456#æ¨¡å‹çš„æµ‹è¯•è¯¯å·®æŒ‡æ ‡print(model.metrics_names)# å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œæµ‹è¯•model.evaluate(x_test_1, y_test_1, verbose=1, batch_size=100) [&apos;loss&apos;, &apos;acc&apos;] 9900/10000 [============================&gt;.] - ETA: 0s [0.025450729207368569, 0.99462999999523161]]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>ç®—æ³•</tag>
        <tag>Keras</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IoTçš„PaaSå¹³å°]]></title>
    <url>%2F2017%2F%E6%9E%B6%E6%9E%84%2FIoT%E7%9A%84PaaS%E5%B9%B3%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[æ¼”è®²ç¨¿ï¼ˆå›¾æ–‡ç‰ˆï¼‰ æ–‡å­—ç‰ˆIoTä¸äº‘è®¡ç®—ä¸ºä»€ä¹ˆæIoTä¸äº‘è®¡ç®—ï¼Ÿ 1ï¼‰å›°æ‰°ç‰©è”ç½‘å‘å±•çš„ç“¶é¢ˆä¹‹ä¸€ç‰©è”ç½‘å¹³å°éšç€äº‘è®¡ç®—çš„å‘å±•è€Œå¾—åˆ°äº†é•¿è¶³çš„è¿›æ­¥ã€‚ä»¥AWSæä¾›çš„IoTæœåŠ¡ä¸ºä¾‹ï¼Œå®ƒå¯ä»¥æ”¯æŒæ•°åäº¿å°è®¾å¤‡å’Œæ•°ä¸‡äº¿æ¡æ¶ˆæ¯ï¼Œå¹¶ä¸”å¯ä»¥å¯¹è¿™äº›æ¶ˆæ¯è¿›è¡Œå¤„ç†å¹¶å°†å…¶å®‰å…¨å¯é åœ°è·¯ç”±è‡³ç»ˆç«¯èŠ‚ç‚¹å’Œå…¶ä»–è®¾å¤‡ï¼Œè€Œä¸”è¿™æ ·çš„ä¸€ä¸ªå¹³å°å¯ä»¥æå¤§ç®€åŒ–å¼€å‘ç‰©è”ç½‘åº”ç”¨çš„å¤æ‚æ€§ã€‚ 2ï¼‰ä½åŠŸè€—å¹¿åŸŸç½‘ï¼ˆLPWANï¼‰åœ¨è¿‡å»ä¸€å¹´è¿›æ­¥æƒŠäººã€‚ç›¸æ¯”äºçŸ­è·æŠ€æœ¯ï¼ˆè“ç‰™ã€Wi-Fiã€ZigBeeç­‰ï¼‰ï¼ŒLPWAæ— éœ€é¢å¤–éƒ¨ç½²æ±‡èšç½‘å…³ï¼Œå¤§å¤§é™ä½äº†ç”¨æˆ·çš„éƒ¨ç½²æˆæœ¬å’Œå¤æ‚åº¦ï¼Œåº”ç”¨ç»ˆç«¯å³æ’å³ç”¨æ¶ˆé™¤äº†éƒ¨ç½²é™åˆ¶ã€‚ 3ï¼‰NB-IoTæŠ€æœ¯åè®®è·å¾—äº†3GPPæ— çº¿æ¥å…¥ç½‘ï¼ˆRANï¼‰æŠ€æœ¯è§„èŒƒç»„ä¼šè®®é€šè¿‡ï¼Œå·²ç»å…·å¤‡äº†åœ¨2017å¹´æŠ•å…¥å•†ç”¨çš„æ¡ä»¶ã€‚LoRaä½œä¸ºä¸€ç§æ— çº¿æŠ€æœ¯ä»¥è¾ƒä½åŠŸè€—è¿œè·ç¦»é€šä¿¡ï¼Œå¯¹å»ºç­‘ç‰©çš„ç©¿é€åŠ›å¾ˆå¼ºã€‚LoRaçš„æŠ€æœ¯ç‰¹ç‚¹æ›´é€‚åˆäºä½æˆæœ¬å¤§è§„æ¨¡çš„ç‰©è”ç½‘éƒ¨ç½²ï¼Œä¾‹å¦‚æ™ºæ…§åŸå¸‚ã€‚ IoTå¼€å‘çš„ç—›ç‚¹IoTå¼€å‘çš„ç—›ç‚¹ï¼š 1ï¼‰é¿å…â€œé‡å¤é€ è½®å­â€ï¼Œå°†å¸¸ç”¨çš„åŠŸèƒ½ç»„ä»¶å’Œæ•´åˆæˆç»Ÿä¸€çš„å¹³å°æ¥å£ï¼Œé›†ä¸­ç²¾åŠ›è§£å†³æ ¸å¿ƒä¸šåŠ¡ç ”å‘ã€‚ 2ï¼‰é™ä½ä½¿ç”¨IoTå¼€å‘çš„â€œé—¨æ§›â€ï¼Œå°†åˆ†å¸ƒå¼é›†ç¾¤éƒ¨ç½²ã€å¼¹æ€§æ‰©å®¹ã€å®‰å…¨ç­‰éš¾é¢˜äº¤ç”±ç»Ÿä¸€çš„å¹³å°å¤„ç†ã€‚ 3ï¼‰ç®€åŒ–å¤§æ•°æ®å¼€å‘æµç¨‹ï¼Œå°†å¤§æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ç­‰åŠŸèƒ½ä»¥äº‘ç«¯APIçš„å½¢å¼å°è£…ï¼Œä¾›ä¸šåŠ¡äººå‘˜ä½¿ç”¨ï¼Œä½¿ä¸šåŠ¡å‘˜æ— éœ€å…³æ³¨å¤§æ•°æ®åº•å±‚æ¶æ„å’Œç®—æ³•ã€‚ PaaSä¸»è¦è§£å†³çš„é—®é¢˜IoT PaaSä¸»è¦è§£å†³çš„é—®é¢˜ï¼š 1ï¼‰ä½¿å¾—IoTå¼€å‘è½¬å‘serverlessæ¶æ„ï¼Œé™ä½ä½¿ç”¨IoTå¼€å‘çš„â€œé—¨æ§›â€ï¼Œè®©ç³»ç»Ÿé’Ÿæœ€å¤æ‚çš„æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§ã€ä»»åŠ¡è°ƒåº¦ä»¥åŠè¿ç»´å·¥ä½œç”¨æœåŠ¡æä¾›è€…è½¬ä¸ºç®¡ç†ï¼Œå®ç°no-Architectureå’Œno-Opsè½¬å˜ã€‚ 2ï¼‰åšæ•°æ®è¿è¥ï¼Œç±»ä¼¼DaaS(Data as a Service)ã€‚ä½œä¸ºä¸€ä¸ªå¼€ç®±å³ç”¨çš„å·¥å…·è‡ªåŠ¨é’ˆå¯¹ç”¨æˆ·å’Œè®¾å¤‡ä½¿ç”¨è¡Œä¸ºè¿›è¡Œåˆ†æï¼Œ ä»¥æŒ‡å¯¼äº§å“åŠŸèƒ½æ”¹è¿›ã€è¥é”€ç­–ç•¥å®æ–½ã€å¢å€¼æœåŠ¡è¿è¥ã€‚ 3ï¼‰æä¾›æˆç†Ÿå’Œæ ‡å‡†åŒ–çš„å¹³å°æ¥å£ï¼Œå¦‚è´¦å·ä½“ç³»ã€è®¾å¤‡ç»‘å®šç®¡ç†ã€äº‹ä»¶é€šçŸ¥å¼•æ“ã€OTAç®¡ç†ã€å®šæ—¶ä»»åŠ¡å¼•æ“ã€è®¾å¤‡åˆ†äº«ã€å¾®ä¿¡æ¥å…¥ç­‰ï¼Œé¿å…â€œé‡å¤é€ è½®å­â€ã€‚ 4)ç½‘ç»œåŠŸèƒ½è™šæ‹ŸåŒ–NFV(Network Function Virtualization)ã€‚é€šè¿‡è½¯ç¡¬ä»¶è§£è€¦åŠåŠŸèƒ½æŠ½è±¡ï¼Œä½¿ç½‘ç»œè®¾å¤‡åŠŸèƒ½ä¸å†ä¾èµ–äºä¸“ç”¨ç¡¬ä»¶ï¼Œèµ„æºå¯ä»¥å……åˆ†çµæ´»å…±äº«ï¼Œå®ç°æ–°ä¸šåŠ¡çš„å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²ã€‚ å‘å±•æ–¹å‘ä¸€ï¼‰å‘å±•Serverlessæ¶æ„ã€‚aï¼‰åº”ç”¨é€»è¾‘å¹¶éå…¨éƒ¨åœ¨æœåŠ¡ç«¯å®ç°ï¼Œè€Œæ˜¯é‡‡ç”¨FAASï¼ˆFunction as a Serviceï¼‰æ¶æ„ï¼Œé€šè¿‡åŠŸèƒ½ç»„åˆæ¥å®ç°åº”ç”¨ç¨‹åºé€»è¾‘ã€‚bï¼‰Serverlessæ¶æ„èƒ½å¤Ÿè®©å¼€å‘è€…åœ¨æ„å»ºåº”ç”¨çš„è¿‡ç¨‹ä¸­æ— éœ€å…³æ³¨è®¡ç®—èµ„æºçš„è·å–å’Œè¿ç»´ï¼Œç”±å¹³å°æ¥æŒ‰éœ€åˆ†é…è®¡ç®—èµ„æºå¹¶ä¿è¯åº”ç”¨æ‰§è¡Œçš„SLAï¼ŒæŒ‰ç…§è°ƒç”¨æ¬¡æ•°è¿›è¡Œè®¡è´¹ï¼Œæœ‰æ•ˆçš„èŠ‚çœåº”ç”¨æˆæœ¬ã€‚ äºŒï¼‰æ•°æ®è¿è¥ã€‚aï¼‰å®ç°DaaSï¼ˆData as a Serviceï¼‰çš„æ¶æ„ã€‚å°†æ•°æ®é‡‡é›†ã€æ ‡å‡†åŒ–ã€èšåˆå’Œåˆ†ææ”¾åœ¨ä¸€ä¸ªé›†ä¸­åŒ–çš„ä½ç½®ï¼Œä½¿å¾—æ•°æ®ç®¡ç†æ›´é›†ä¸­åŒ–å’Œæ ‡å‡†åŒ–ï¼Œè®©IoTçš„ç ”ç©¶å’Œå¼€å‘ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡ï¼Œå¯ä»¥å¿«é€Ÿçš„æ¢ç´¢æ•°æ®ã€‚bï¼‰å°†å„ç±»ç®—æ³•ã€å¯è§†åŒ–å·¥å…·æ•´åˆæˆå¤šä¸ªç›¸äº’ç‹¬ç«‹åŠŸèƒ½ç»„ä»¶ï¼Œå¹¶ä»¥APIæœåŠ¡çš„å½¢å¼å‘å¤–æä¾›æœåŠ¡ã€‚cï¼‰æ­å»ºæ•°æ®ä¸­å¿ƒï¼Œè´Ÿè´£æ—¶åºå­˜å‚¨ã€æ•°æ®å¤„ç†ç¾¤é›†ã€æ•°æ®APIç½‘å…³è®¿é—®ï¼Œä»¥åŠå¯è§†åŒ–WebæœåŠ¡ç­‰ä»»åŠ¡ã€‚ ä¸‰ï¼‰SDNæŠ€æœ¯ï¼ˆSoftware Defined Networkï¼‰ä¸NFVæŠ€æœ¯(Network Function Virtualization)aï¼‰æ§åˆ¶è½¬å‘åˆ†ç¦»æ¶æ„ã€‚é€šè¿‡openflowç­‰å°†ç½‘ç»œè®¾å¤‡æ§åˆ¶é¢ä¸æ•°æ®é¢åˆ†ç¦»å¼€æ¥ï¼Œç”±é›†ä¸­çš„æ§åˆ¶å™¨ç®¡ç†ï¼Œæ— é¡»ä¾èµ–åº•å±‚ç½‘ç»œè®¾å¤‡ï¼Œæ§åˆ¶æƒå®Œå…¨å¼€æ”¾ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä»»ä½•æƒ³å®ç°çš„ç½‘ç»œè·¯ç”±å’Œä¼ è¾“è§„åˆ™ç­–ç•¥ï¼Œä»è€Œå®ç°äº†ç½‘ç»œæµé‡çš„çµæ´»æ§åˆ¶ï¼Œä½¿ç½‘ç»œä½œä¸ºç®¡é“å˜å¾—æ›´åŠ æ™ºèƒ½ã€‚ å¹³å°æ¶æ„è®¾è®¡IoT PaaSè®¾è®¡æ¶æ„ã€‚å·¦ä¾§æ˜¯æ•°æ®ä¸­å¿ƒï¼Œå³ä¾§æ˜¯IoTç½‘å…³ã€‚ä½¿ç”¨OpenStackä½œä¸ºæ‰¿è½½æ‰€æœ‰æ§åˆ¶æœåŠ¡çš„äº‘ï¼Œç½‘å…³ä½¿ç”¨Kuberneteså¯¹æœåŠ¡è¿›è¡Œå¾®åˆ†éš”ï¼Œä¸ºäº†å®ç°å¤šç§Ÿæˆ·åŠŸèƒ½å¹¶ç¡®ä¿ä¸åŒä¼ æ„Ÿå™¨çš„å®‰å…¨ï¼Œä½¿ç”¨OpenContrailå°†ä¸¤ç«¯è¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶ä¸ºKubernetes PODå’ŒOpenStack Projectè™šæ‹Ÿæœºæä¾›ç½‘ç»œåˆ†éš”ã€‚ ç½‘å…³æ“ä½œç³»ç»Ÿå’Œæ•°æ®ä¸­å¿ƒè¾¹ç¼˜è·¯ç”±å™¨ä¹‹é—´çš„VPNè¿æ¥å¯ä»¥çœ‹ä½œè¯¥å¹³å°çš„æœ€åº•å±‚ï¼Œè¯¥å±‚ä¹‹ä¸Šæ˜¯SDNï¼Œåœ¨è¿™é‡Œå¯ä»¥é€šè¿‡OpenContrailå®ç°è™šæ‹Ÿæœºï¼ˆOpenStackäº‘ï¼‰å’Œå®¹å™¨ï¼ˆç½‘å…³ï¼‰ä¹‹é—´çš„ç›´æ¥é€šä¿¡ã€‚ æ•°æ®ä¸­å¿ƒæ•°æ®ä¸­å¿ƒæ˜¯æ•´ä¸ªIoTå¹³å°çš„ä¸­å¿ƒç®¡ç†ç‚¹ã€‚å…¶ä¸­åŒ…å«OpenStack IaaSäº‘ï¼Œä»¥åŠä¼´éšäº‘åŒæ—¶è¿è¡Œçš„è™šæ‹Ÿæœºå’ŒSDNæ§åˆ¶é¢æ¿ã€‚è¿™äº›è®¡ç®—æœºè´Ÿè´£äº†æ—¶åºå­˜å‚¨ã€æ•°æ®å¤„ç†ç¾¤é›†ã€æ•°æ®APIç½‘å…³è®¿é—®ï¼Œä»¥åŠå¯è§†åŒ–WebæœåŠ¡ç­‰ä»»åŠ¡ã€‚ æ•°æ®ä¸­å¿ƒåŒ…å«ä¸‹åˆ—æœåŠ¡ï¼š 1ï¼‰ç®¡ç†æœåŠ¡ã€‚ç¡¬ä»¶ç¾¤é›†ä¸­è¿è¡Œçš„è™šæ‹Ÿæœºæ‰¿è½½äº†æ‰€æœ‰æ§åˆ¶æœåŠ¡ï¼šOpenStackæ§åˆ¶å™¨ã€OpenContrailæ§åˆ¶å™¨ï¼ˆSDNï¼‰ã€Kubernetesä¸»æœºã€Saltä¸»æœºã€‚ 2ï¼‰OpenStackäº‘ã€‚OpenStacké¡¹ç›®ä¸ºæ•°æ®åº“ã€å¤§æ•°æ®å¤„ç†ï¼Œä»¥åŠæ•°æ®å¯è§†åŒ–æ‰€æ¶‰åŠçš„ä¸åŒè™šæ‹ŸæœºæœåŠ¡æä¾›äº†åˆ†éš”å’Œåˆ’åˆ†ã€‚è¿™ä¸ªäº‘è¿è¡Œåœ¨KVM hypervisorä¹‹ä¸Šï¼Œé€šè¿‡OpenContrailçš„Neutronæ’ä»¶å®ç°ç½‘ç»œè¿æ¥ã€‚ 3ï¼‰è¾¹ç¼˜è·¯ç”±å™¨ã€‚OpenContrailä¼šä¸æ•°æ®ä¸­å¿ƒè¾¹ç¼˜è·¯ç”±å™¨åˆ›å»ºiBGPå¯¹ç«¯ï¼Œè¿™æ ·ä¾¿å¯ä»¥å°†OpenStackè™šæ‹Ÿæœºå’ŒKubernetes PODçš„åŠ¨æ€ç½‘ç»œè·¯ç”±ä¼ æ’­è‡³IoTç½‘å…³ã€‚è¯¥è®¾å¤‡å¯ä»¥MPLSoverGREæˆ–MPLSoverUDPæ–¹å¼åˆ›å»ºæ ‡å‡†çš„L3VPNã€‚ ç½‘å…³IoTç½‘å…³å¯ä½äºä»»ä½•ç›®æ ‡ä½ç½®ï¼Œä¾‹å¦‚è¡—ç¯ã€å·¥å‚æœºæ¢°ã€å®¶ç”¨ç”µå™¨ä¸­ã€‚SDNæä¾›çš„ä¼ è¾“å±‚å°†è¿œç¨‹IoTç½‘å…³ä¸äº‘æœåŠ¡è¿æ¥åœ¨ä¸€èµ·ã€‚ç½‘å…³å¯æ”¯æŒå¤šå¹³å°ï¼Œç”šè‡³å¯èƒ½æ··åˆä½¿ç”¨äº†x86/64å’ŒARMè®¾å¤‡ã€‚è¯¥æŠ€æœ¯å¯ä»¥é€šè¿‡ä¸€ä¸ªç½‘å…³ä¸ºå¤šä¸ªå®¢æˆ·æ‰¿è½½å¤šç§ä¼ æ„Ÿå™¨å¹³å°ï¼Œè¿™ä¸€ç‰¹æ€§æ˜¯é€šè¿‡å¾®æœåŠ¡åˆ†éš”ï¼ˆDockerå®¹å™¨ï¼‰å’ŒKuberneteså¯¹å¤šç§Ÿæˆ·çš„æ”¯æŒå®ç°çš„ã€‚æ•´ä¸ªå¹³å°å¯ä»¥æä¾›å¯ä¼¸ç¼©çš„å¤šç§Ÿæˆ·ç¯å¢ƒï¼Œæ— è®ºå¤šè¿œè·ç¦»çš„åº”ç”¨ç¨‹åºå’Œä¼ æ„Ÿå™¨éƒ½å¯ä½äºåŒä¸€ä¸ªç½‘ç»œä¸­ã€‚ è¿œç¨‹ç½‘å…³åŒ…å«ä¸‹åˆ—ç»„ä»¶ï¼š 1ï¼‰Kubernetes MinionKubernetes minionè´Ÿè´£ä¸æ•°æ®ä¸­å¿ƒå†…çš„Kubernetesä¸»æœºé€šä¿¡ï¼Œå¹¶è´Ÿè´£ç®¡ç†Kubeletand PODã€‚Kubeletä½¿ç”¨äº†Opencontrailæ’ä»¶ï¼Œå€Ÿæ­¤å°†Dockerå®¹å™¨ä¸vRouterä»£ç†è¿æ¥åœ¨ä¸€èµ·ã€‚ 2ï¼‰Kubernetes PODKubernetes PODæ˜¯è¿æ¥åˆ°vRouterçš„ä¸€ä¸ªæˆ–å¤šä¸ªDockerå®¹å™¨ã€‚PODå¯æŒ‰ç…§æ ‡ç­¾è¿›è¡Œåˆ†éš”ï¼Œè¿™æ ·å³å¯å¯åŠ¨ä¸åŒåº”ç”¨ç¨‹åºï¼Œä»ä¸åŒæ¶ˆæ¯æ€»çº¿ä»¥IQRFã€è“ç‰™ï¼Œæˆ–GPIOæ–¹å¼è¯»å–æ•°æ®ã€‚ 3ï¼‰Dockerå®¹å™¨Kubernetes PODä¸­çš„Dockerå®¹å™¨ä¸ºæ•´ä¸ªå¹³å°æä¾›äº†æå¤§çš„æ”¶ç›Šï¼Œå¯åœ¨æ— éœ€ç‰¹åˆ«å®‰è£…çš„æƒ…å†µä¸‹æ”¯æŒä»»ä½•ç±»å‹çš„æ“ä½œç³»ç»Ÿã€‚ä¾‹å¦‚ï¼ŒIQRFä½¿ç”¨äº†æŸä¸€ç‰ˆæœ¬çš„ç®€å•Javaåº”ç”¨ç¨‹åºï¼Œå¯é€šè¿‡å®¹å™¨åœ¨å‡ åˆ†é’Ÿå†…äº¤ä»˜ï¼Œå¹¶ä¸”ä¸ä¼šä¸ç½‘å…³æœ¬èº«çš„æ“ä½œç³»ç»Ÿäº§ç”Ÿä¸åŒ¹é…çš„æƒ…å†µã€‚ å€ŸåŠ©OpenContrailè¦†ç›–çš„å¸®åŠ©ï¼ŒOpenStackäº‘å†…éƒ¨çš„è™šæ‹Ÿæœºå¯ä»¥é€šè¿‡L2æˆ–L3ç§æœ‰ç½‘ç»œè”ç³»ä½äºä»»ä½•åœ°ç†ä½ç½®çš„Dockerå®¹å™¨ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºå¼€å‘è€…å¯ä»¥ä½¿ç”¨æ ‡å‡†äº‘å¹³å°ä¸­ç”¨è¿‡çš„åŒä¸€å¥—å·¥å…·ã€‚ ä¼ æ„Ÿå™¨ç›´æ¥è¿æ¥è‡³å®¹å™¨ï¼Œæ•°æ®åœ¨Dockerå®¹å™¨ä¸­å¤„ç†åå‘é€è‡³Graphiteæ—¶åºæ•°æ®åº“ï¼Œæœ€åä»¥å›¾å½¢åŒ–æ–¹å¼å®æ—¶å‘ˆç°æ•°æ®ã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>ç‰©è”ç½‘</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
        <tag>ç‰©è”ç½‘</tag>
        <tag>Paas</tag>
        <tag>Serverless</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KVMè™šæ‹Ÿæœºé™æ€è¿ç§»]]></title>
    <url>%2F2016%2F%E8%BF%90%E7%BB%B4%2FKVM%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81%E8%BF%81%E7%A7%BB%2F</url>
    <content type="text"><![CDATA[KVM èƒŒæ™¯ç®€ä»‹KVM å…¨ç§°æ˜¯ åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœºï¼ˆKernel-based Virtual Machineï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ª Linux çš„ä¸€ä¸ªå†…æ ¸æ¨¡å—ï¼Œè¯¥å†…æ ¸æ¨¡å—ä½¿å¾— Linux å˜æˆäº†ä¸€ä¸ª Hypervisorï¼ŒKVM æ˜¯åŸºäºè™šæ‹ŸåŒ–æ‰©å±•ï¼ˆIntel VT æˆ–è€… AMD-Vï¼‰çš„ X86 ç¡¬ä»¶çš„å¼€æºçš„ Linux åŸç”Ÿçš„å…¨è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆã€‚KVM ä¸­ï¼Œè™šæ‹Ÿæœºè¢«å®ç°ä¸ºå¸¸è§„çš„ Linux è¿›ç¨‹ï¼Œç”±æ ‡å‡† Linux è°ƒåº¦ç¨‹åºè¿›è¡Œè°ƒåº¦ï¼›è™šæœºçš„æ¯ä¸ªè™šæ‹Ÿ CPU è¢«å®ç°ä¸ºä¸€ä¸ªå¸¸è§„çš„ Linux è¿›ç¨‹ã€‚è¿™ä½¿å¾— KMV èƒ½å¤Ÿä½¿ç”¨ Linux å†…æ ¸çš„å·²æœ‰åŠŸèƒ½ã€‚ä½†æ˜¯ï¼ŒKVM æœ¬èº«ä¸æ‰§è¡Œä»»ä½•ç¡¬ä»¶æ¨¡æ‹Ÿï¼Œéœ€è¦å®¢æˆ·ç©ºé—´ç¨‹åºé€šè¿‡ /dev/kvm æ¥å£è®¾ç½®ä¸€ä¸ªå®¢æˆ·æœºè™šæ‹ŸæœåŠ¡å™¨çš„åœ°å€ç©ºé—´ï¼Œå‘å®ƒæä¾›æ¨¡æ‹Ÿçš„ I/Oï¼Œå¹¶å°†å®ƒçš„è§†é¢‘æ˜¾ç¤ºæ˜ å°„å›å®¿ä¸»çš„æ˜¾ç¤ºå±ã€‚ Guestï¼šå®¢æˆ·æœºç³»ç»Ÿï¼ŒåŒ…æ‹¬CPUï¼ˆvCPUï¼‰ã€å†…å­˜ã€é©±åŠ¨ï¼ˆConsoleã€ç½‘å¡ã€I/O è®¾å¤‡é©±åŠ¨ç­‰ï¼‰ï¼Œè¢« KVM ç½®äºä¸€ç§å—é™åˆ¶çš„ CPU æ¨¡å¼ä¸‹è¿è¡Œã€‚ KVMï¼šè¿è¡Œåœ¨å†…æ ¸ç©ºé—´ï¼Œæä¾›CPU å’Œå†…å­˜çš„è™šçº§åŒ–ï¼Œä»¥åŠå®¢æˆ·æœºçš„ I/O æ‹¦æˆªã€‚Guest çš„ I/O è¢« KVM æ‹¦æˆªåï¼Œäº¤ç»™ QEMU å¤„ç†ã€‚ QEMUï¼šä¿®æ”¹è¿‡çš„ä¸º KVM è™šæœºä½¿ç”¨çš„ QEMU ä»£ç ï¼Œè¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´ï¼Œæä¾›ç¡¬ä»¶ I/O è™šæ‹ŸåŒ–ï¼Œé€šè¿‡ IOCTL /dev/kvm è®¾å¤‡å’Œ KVM äº¤äº’ã€‚ å®‰è£…virshã€qemu sudo apt-get install qemu-kvm libvirt æ‹·è´imageæ–‡ä»¶å…ˆæŸ¥çœ‹ä¸‹è¦imgçš„æ ¼å¼ï¼šqemu-img info devstack-controller-clone.img image: devstack-controller.imgfile format: rawvirtual size: 120G (128849125376 bytes)disk size: 120G[root@ue211 images]# qemu-img info devstack-controller.imgimage: devstack-controller.imgfile format: rawvirtual size: 120G (128849018880 bytes)disk size: 120G è¯´æ˜è¿™æ˜¯ä¸€ä¸ªrawæ ¼å¼çš„imageï¼Œimageæ–‡ä»¶é€šå¸¸æ˜¯rawï¼Œç›¸å¯¹è¾ƒå¤§ï¼Œä¸é€‚åˆä¼ è¾“ï¼Œæ‰€ä»¥å…ˆæŠŠrawè½¬ä¸ºqcow2æ ¼å¼:qemu-img convert -c -f raw -O qcow2 devstack-controller.img devstack-controller-clone2.img çœ‹çœ‹è½¬æ¢åçš„æ ¼å¼ï¼šqemu-img info devstack-controller-clon2e.img image: devstack-controller-clone2.imgfile format: qcow2virtual size: 120G (128849018880 bytes)disk size: 3.5Gcluster_size: 65536Format specific information: compat: 1.1 lazy refcounts: false ç”¨scpä¼ åˆ°ç›®æ ‡åœ°å€ä¸Šï¼šscp /var/lib/libvirt/images/devstack-controller-clone2.img root@192.168.0.12:/var/lib/libvirt/images/devstack-controller-clone2.img ä¿®æ”¹å’Œæ‹·è´é…ç½®æ–‡ä»¶å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼š virsh dumpxml devstack-controller &gt; /home/devstack-controller.xml æˆ–è€…ç›´æ¥æ‰¾åˆ°è·¯å¾„æ‹·è´ä¹Ÿå¯ä»¥ï¼Œcentosä¸‹è·¯å¾„åœ¨ï¼š`` ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¸»è¦éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æœ‰nameã€uuidã€mac: &lt;name&gt;devstack-controller&lt;/name&gt;&lt;uuid&gt;4aba494c-6f6a-f992-2ec2-23795f6c4680&lt;/uuid&gt;&lt;mac address=&#39;52:54:00:49:03:d2&#39;/&gt; nameè¡¨ç¤ºè™šæ‹Ÿæœºçš„åå­— ,uuidè¡¨ç¤ºidå·ï¼Œå¯ä»¥ç”¨uuidå‘½ä»¤ç”Ÿæˆ,macè¡¨ç¤ºç½‘å…³macåœ°å€, å¦‚æœæ˜¯è¿ç§»åˆ°å…¶ä»–ç³»ç»Ÿï¼Œå…¶ä»–æœºå™¨ä¸Šï¼Œè¿˜éœ€è¦ä¿®æ”¹emulatorã€source file: &lt;emulator&gt;/usr/bin/kvm-spice&lt;/emulator&gt;&lt;source file=&#39;/var/lib/libvirt/images/devstack-controller-clone2.img&#39;/&gt; emulatorè¡¨ç¤ºkvmè·¯å¾„,source file è¡¨ç¤ºimageè·¯å¾„ ç”¨scpä¼ åˆ°ç›®æ ‡åœ°å€ä¸Šï¼š scp /home/devstack-controller.xml root@192.168.0.12:/home/devstack-controller.xml å°†é…ç½®æ–‡ä»¶å’Œimageéƒ½ä¼ åˆ°ç›®æ ‡æœºåï¼Œå°†qcow2è½¬æ¢ä¸ºrawï¼š qemu-img convert -f qcow2 -O raw devstack-controller-clone2.img devstack-controller.img å¯åŠ¨è™šæ‹Ÿæœºç”¨virshå¯åŠ¨æ–°çš„è™šæ‹Ÿæœº virsh define devstack-controller.xml å‘½ä»¤è§£è¯´qemu-img convert [-c] [-e] [-f format] filename [-O output_format] output_filename qemu-img convertä¸»è¦ç”¨æ¥è½¬æ¢é•œåƒæ ¼å¼ï¼Œ-cè¡¨ç¤ºå‹ç¼©ï¼Œåªæœ‰qcowå’Œqcow2æ‰æœ‰å‹ç¼©ï¼Œ-fè¡¨ç¤ºè¾“å…¥çš„æ ¼å¼,-Oè¡¨ç¤ºè¾“å‡ºçš„æ ¼å¼]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>KVM</tag>
        <tag>è™šæ‹ŸåŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºwifiçš„è¡Œä¸ºè½¨è¿¹æ•°æ®æŒ–æ˜åˆ†äº«]]></title>
    <url>%2F2016%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E5%9F%BA%E4%BA%8Ewifi%E7%9A%84%E8%A1%8C%E4%B8%BA%E8%BD%A8%E8%BF%B9%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%88%86%E4%BA%AB%2F</url>
    <content type="text"><![CDATA[æ¼”è®²ç¨¿ï¼ˆå›¾æ–‡ç‰ˆï¼‰ ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®æŒ–æ˜æ–¹æ³•ç ”ç©¶ç»¼è¿°ï¼ˆæ–‡å­—ç‰ˆï¼‰ç³»ç»Ÿæ¡†æ¶ ï¼ˆ1ï¼‰æ•°æ®å±‚ã€‚ç”¨æ¥æ”¶é›†ç›¸å…³ç§»åŠ¨å¯¹è±¡çš„è½¨è¿¹æ•°æ®å¹¶å­˜å‚¨åœ¨ç›¸åº”æ•°æ®åº“ä¸­ï¼Œå·¥ä½œåŒ…æ‹¬ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®çš„é‡‡é›†ã€æ¸…æ´—ä»¥åŠä¸åŒè½¨è¿¹æ•°æ®çš„é›†æˆã€‚ ï¼ˆ2ï¼‰é€»è¾‘å±‚ã€‚ä»¥ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®ä¸ºåŸºç¡€è¿›è¡Œç§»åŠ¨å¯¹è±¡æ´»åŠ¨è§„å¾‹çš„æŒ–æ˜ï¼Œå¹¶å¯¹æŒ–æ˜ç»“æœè¿›è¡Œæ·±å…¥çš„åˆ†æã€‚é€»è¾‘å±‚ä¸Šé’ˆå¯¹å¯¹è±¡çš„è½¨è¿¹æ•°æ®å¯ä»¥åˆ†ä¸ºå››ä¸ªå±‚ï¼šå¾®è§‚å±‚æ¬¡çš„æ•°æ®æŒ–æ˜ã€å®è§‚å±‚æ¬¡çš„æ•°æ®æŒ–æ˜ã€æ¨¡å¼å‘ç°ç›¸å…³çš„æ•°æ®æŒ–æ˜ã€çŸ¥è¯†å‘ç°ç›¸å…³çš„æ•°æ®æŒ–æ˜ã€‚ ï¼ˆ3ï¼‰ç”¨æˆ·å±‚ã€‚ç”¨æˆ·å±‚ä¸»è¦åŒ…æ‹¬ç”¨æˆ·çš„è¾“å…¥äº¤äº’ä»¥åŠç§»åŠ¨å¯¹è±¡çš„æ•°æ®æŒ–æ˜çš„ç»“æœå¯è§†åŒ–å±•ç¤ºä¸¤æ–¹é¢åŠŸèƒ½ã€‚å±•ç¤ºä¸»è¦åŒ…æ‹¬ï¼šè½¨è¿¹å†ç°ï¼ŒæŒ–æ˜ç»“æœçš„å±•ç¤ºï¼Œç›¸å…³æ•°æ®çš„ç»Ÿè®¡å›¾è¡¨å±•ç¤ºç­‰ã€‚ æ–¹æ³•å±‚æ¬¡ï¼ˆ1ï¼‰å¾®è§‚å±‚æ¬¡çš„æ•°æ®æŒ–æ˜ï¼Œä¸»è¦åœ¨ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®å†…éƒ¨ï¼Œä»é‡‡æ ·ç‚¹åŠé‡‡æ ·æ—¶é—´çš„åˆ†å¸ƒä¸Šæ¥ç ”ç©¶ç§»åŠ¨å¯¹è±¡çš„æ´»åŠ¨ç‰¹å¾ã€‚å…¶åŒ…æ‹¬è½¨è¿¹çš„èšç±»åˆ†æã€è½¨è¿¹çš„åˆ†ç±»åˆ†æã€è½¨è¿¹çš„å¼‚å¸¸æ£€æµ‹åˆ†æã€è½¨è¿¹çš„å¼‚å¸¸æ£€æµ‹åˆ†æã€è½¨è¿¹çš„ç´¢å¼•å»ºç«‹ã€‚ ï¼ˆ2ï¼‰å®è§‚å±‚æ¬¡çš„æ•°æ®æŒ–æ˜ï¼Œé€šè¿‡åˆ©ç”¨å¾®è§‚åˆ†æçš„ç»“æœï¼Œæˆ–è€…å¾®è§‚å±‚æ¬¡åˆ†æçš„ç›¸å…³æ–¹æ³•å¯¹ç§»åŠ¨å¯¹è±¡çš„å®è§‚æ´»åŠ¨è¿›è¡Œå‘ç°ï¼Œå‘ç°å¯¹è±¡è¾ƒä¸ºæœ‰æ„ä¹‰çš„æ´»åŠ¨ã€‚å…¶åŒ…æ‹¬ï¼šå¯¹è±¡çš„STPM å‘ç°ã€å…´è¶£åŒºåŸŸå‘ç°ã€è¿åŠ¨ç‰¹å¾åˆ†æã€å¯¹è±¡çš„æ´»åŠ¨å‘ç°ã€‚ ï¼ˆ3ï¼‰æ¨¡å¼å‘ç°ç›¸å…³çš„æ•°æ®æŒ–æ˜ï¼Œä¸»è¦åœ¨ç§»åŠ¨å¯¹è±¡å¾®è§‚å’Œå®è§‚åˆ†æçš„åŸºç¡€ä¸Šï¼Œç ”ç©¶å¯¹è±¡æ´»åŠ¨çš„æ—¶é—´å’Œç©ºé—´ç‰¹ç‚¹æ¥å‘ç°å¯¹è±¡çš„æ´»åŠ¨è§„å¾‹ï¼Œä»åºæ‚çç¢çš„ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®ä¸­åˆ†æå‡ºå¯¹è±¡çš„æ´»åŠ¨è§„å¾‹å’Œè¡Œä¸ºæ¨¡å¼ã€‚ ï¼ˆ4ï¼‰çŸ¥è¯†å‘ç°ç›¸å…³çš„æ•°æ®æŒ–æ˜ï¼Œæ•´åˆå·²çŸ¥çš„æŒ–æ˜æˆæœæˆ–å…ˆéªŒçŸ¥è¯†å¹¶ä»¥æ­¤ä¸ºåŸºç¡€è¿›è¡Œé«˜å±‚æ¬¡çš„çŸ¥è¯†å‘ç°ï¼Œä¸»è¦åŒ…æ‹¬ï¼šç§»åŠ¨å¯¹è±¡æ´»åŠ¨çš„é¢„æµ‹ã€ç§»åŠ¨å¯¹è±¡æ—¶ç©ºçŸ¥è¯†æ¨ç†ã€ç§»åŠ¨å¯¹è±¡æ—¶ç©ºçŸ¥è¯†æ¨ç†ã€‚ ç³»ç»Ÿç»“æ„ï¼ˆ1ï¼‰æ•°æ®é¢„å¤„ç†æ¨¡å—ã€‚å¯¹è½¨è¿¹æ•°æ®è¿›è¡Œæ¸…æ´—å’Œé™å™ªç­‰å¤„ç†ï¼Œå¢å¼ºç§»åŠ¨å¯¹è±¡è½¨è¿¹æŒ–æ˜ç›¸å…³æ–¹æ³•çš„è¿è¡Œæ•ˆç‡ï¼Œä¸»è¦åŒ…æ‹¬ï¼šè½¨è¿¹æ•°æ®çš„æ¸…æ´—ï¼Œè½¨è¿¹æ•°æ®çš„é™å™ªä»¥åŠè½¨è¿¹è¯†åˆ«ç­‰æ“ä½œã€‚ ï¼ˆ2ï¼‰è½¨è¿¹æ•°æ®çš„å¾®è§‚åˆ†ææ¨¡å—ã€‚ä»è½¨è¿¹æ•°æ®æœ¬èº«å‡ºå‘ï¼Œç ”ç©¶ç§»åŠ¨å¯¹è±¡çš„è¿åŠ¨ç‰¹ç‚¹ï¼Œé€šè¿‡è½¨è¿¹æ•°æ®çš„å¼‚å¸¸æ£€æµ‹ä¸è½¨è¿¹çš„èšç±»æ¥æè¿°è¯¥æ¨¡å—åœ¨å¾®è§‚åˆ†æä¸­çš„åŠŸèƒ½ã€‚ ï¼ˆ3ï¼‰è½¨è¿¹æ•°æ®çš„å®è§‚åˆ†ææ¨¡å—ã€‚é€šè¿‡ç§»åŠ¨å¯¹è±¡çš„å…´è¶£æ´»åŠ¨å‘ç°ã€å¯¹è±¡çš„å…´è¶£è·¯å¾„å‘ç°ä¸¤ä¸ªæ–¹é¢çš„åº”ç”¨ï¼Œå¯¹è¯¥æ¨¡å—çš„å®è§‚è½¨è¿¹æ•°æ®åˆ†æè¿‡ç¨‹è¿›è¡Œæè¿°ã€‚ ï¼ˆ4ï¼‰è½¨è¿¹æ•°æ®çš„æ¨¡å¼å‘ç°æ¨¡å—ã€‚è¿‡ç§»åŠ¨å¯¹è±¡çš„å¤šç²’åº¦å…´è¶£æ´»åŠ¨å‘ç°ã€å¯¹è±¡æ´»åŠ¨çš„å¤šç²’åº¦å‘¨æœŸæ¨¡å¼å‘ç°ä¸¤ä¸ªæ–¹é¢æ¥å¯¹ç§»åŠ¨å¯¹è±¡æ´»åŠ¨çš„æ¨¡å¼è¿›è¡Œå‘ç°å’Œåˆ†æã€‚ ï¼ˆ5ï¼‰è½¨è¿¹æ•°æ®çš„å¯è§†åŒ–åˆ†ææ¨¡å—ã€‚ä»¥è½¨è¿¹æ•°æ®çš„åˆ†æç»“æœä¸ºåŸºç¡€ï¼Œé€šè¿‡å‚æ•°è¾“å…¥è°ƒæ•´å„ç§æ–¹æ³•çš„è®¡ç®—ï¼Œæœ€åé€šè¿‡ç”¨æˆ·ç•Œé¢å°†ç»“æœå±•ç°å‡ºæ¥ã€‚ å…³é”®æŠ€æœ¯ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®æŒ–æ˜çš„å…³é”®æŠ€æœ¯ï¼š ï¼ˆ1ï¼‰åŸºäºç»“æ„ç‰¹å¾çš„è½¨è¿¹å¾®è§‚æ•°æ®åˆ†ææŠ€æœ¯ã€‚åŸºäºç»“æ„ç‰¹å¾çš„è½¨è¿¹å¾®è§‚æ•°æ®åˆ†ææŠ€æœ¯ä¸»è¦ä»¥ä»è½¨è¿¹æ•°æ®å…¥æ‰‹ï¼Œæ·±å…¥ç ”ç©¶è½¨è¿¹æ•°æ®çš„ç‰¹å¾ï¼Œä»è€Œå®Œæˆå¯¹è½¨è¿¹ç»“æ„çš„æŠ½å–ã€è®¡ç®—å’Œåˆ†æã€‚ ï¼ˆ2ï¼‰åŸºäºååŒè¿‡æ»¤çš„å¯¹è±¡å®è§‚æ´»åŠ¨åˆ†ææŠ€æœ¯ã€‚åœ¨è½¨è¿¹å¾®è§‚åˆ†æçš„åŸºç¡€ä¸Šï¼Œåº”ç”¨ç§»åŠ¨å¯¹è±¡å¾®è§‚çš„åˆ†ææ–¹æ³•ï¼Œä»ä¸­å‘ç°ä¸è¯†åˆ«å·²çŸ¥å…´è¶£åŒºåŸŸï¼Œæ‰¾åˆ°ç§»åŠ¨å¯¹è±¡æ½œåœ¨çš„å…´è¶£åŒºåŸŸã€‚ ï¼ˆ3ï¼‰åŸºäºå¤šç²’åº¦çš„å¯¹è±¡æ´»åŠ¨çš„æ¨¡å¼å‘ç°æŠ€æœ¯ã€‚åº”ç”¨åŸºäºå¯†åº¦èšç±»çš„æ–¹æ³•å‘ç°åœ¨ç‰¹å®šè½¨è¿¹ä¸Šå¯¹è±¡æ´»åŠ¨è¾ƒä¸ºé›†ä¸­çš„çƒ­ç‚¹åŒºåŸŸï¼Œå¹¶æ ‡è®°ä¸ºä¸€ä¸ªå¯¹è±¡æ´»åŠ¨ï¼Œè®°å½•æ´»åŠ¨çš„ç›¸å…³å±æ€§ï¼Œé€šè¿‡æ˜ç¡®æ—¶é—´ç²’åº¦å’Œè¡¨ç¤ºå’Œè½¬åŒ–å…³ç³»ï¼Œå®ç°ç§»åŠ¨å¯¹è±¡çš„å¤šç²’åº¦å‘¨æœŸæ´»åŠ¨æŒ–æ˜ï¼Œå‘ç°å…³è”çš„å‘¨æœŸæ´»åŠ¨ã€å‘¨æœŸçš„é•¿åº¦ã€é—´éš”æ—¶é—´ç­‰ä¿¡æ¯ã€‚ åŸºäºç»“æ„ç‰¹å¾çš„è½¨è¿¹åˆ†ææ–¹æ³•åŸºäºç»“æ„ç‰¹å¾çš„è½¨è¿¹æ•°æ®åˆ†ææ–¹æ³•ä¸»è¦å¯ä»¥åˆ†ä¸º 5 ä¸ªæ­¥éª¤ï¼š ï¼ˆ1ï¼‰è½¨è¿¹æ•°æ®çš„åŠ è½½ã€é‡æ„ã€‚å¯¹æ•°æ®çš„é™å™ªå¤„ç†ï¼Œæ„å»ºç´¢å¼•ç»“æ„ï¼Œç„¶åè¿›è¡Œé‡æ„ã€‚ ï¼ˆ2ï¼‰è½¨è¿¹æ•°æ®çš„è½¬è§’è®¡ç®—ä¸åˆ’åˆ†ã€‚è®¡ç®—è½¨è¿¹çš„è½¬å‘è§’ï¼Œè®¾å®šè½¬è§’é˜ˆå€¼ï¼Œæ ¹æ®è½¬è§’é˜ˆå€¼å¯¹è½¨è¿¹è¿›è¡Œåˆ’åˆ†ï¼Œä¿è¯æ¯ä¸ªè½¨è¿¹ç‰‡æ®µéƒ½å…·æœ‰ç›¸å¯¹å¹³ç¨³çš„ç»“æ„ç‰¹å¾ã€‚ ï¼ˆ3ï¼‰è½¨è¿¹ç»“æ„ç‰¹å¾çš„æŠ½å–ã€‚å¯¹è½¨è¿¹è¿›è¡Œç»“æ„å»ºæ¨¡å¹¶æŠ½å–è½¨è¿¹çš„ç»“æ„ç‰¹å¾ï¼Œæ ¹æ®ç§»åŠ¨å¯¹è±¡çš„è¿åŠ¨ç‰¹ç‚¹ä»¥åŠè½¨è¿¹ç›¸å…³å±æ€§ï¼ŒæŠ½å–é€Ÿåº¦ã€æ–¹å‘ã€è½¬è§’ã€å¯†åº¦ç­‰ ç­‰ç‰¹å¾å¯¹è½¨è¿¹è¿›è¡Œè¡¨ç¤ºã€‚ ï¼ˆ4ï¼‰è½¨è¿¹çš„ç»“æ„ç›¸ä¼¼åº¦è®¡ç®—ã€‚é€šè¿‡ç»“æ„ç›¸ä¼¼åº¦è®¡ç®—ï¼Œç”Ÿæˆçš„è½¨è¿¹ç»“æ„ç›¸ä¼¼åº¦çŸ©é˜µï¼Œå¹¶å°†è®¡ç®—ç»“æœåº”ç”¨åˆ°è½¨è¿¹èšç±»å’Œå¼‚å¸¸æ£€æµ‹ç­‰æ–¹æ³•ä¸Šã€‚ ï¼ˆ5ï¼‰ç»“æœæ£€éªŒå’ŒéªŒè¯ã€‚å¯¹åˆ†ææ•ˆæœè¿›è¡ŒéªŒè¯ï¼Œé€šè¿‡è®¾ç½®ä¸åŒçš„å‚æ•°éªŒè¯è¯¥æ–¹æ³•çš„å¯é æ€§å’Œæ€§èƒ½ã€‚ åŸºäºååŒè¿‡æ»¤çš„ç§»åŠ¨å¯¹è±¡å…´è¶£æ´»åŠ¨å‘ç°æµç¨‹åŸºäºååŒè¿‡æ»¤çš„ç§»åŠ¨å¯¹è±¡å…´è¶£æ´»åŠ¨å‘ç°æ­¥éª¤ï¼š ï¼ˆ1ï¼‰ç¡®å®šè½¨è¿¹ä¸­çš„åœç•™ç‚¹ã€‚å¯¹ç§»åŠ¨å¯¹è±¡è½¨è¿¹æ•°æ®è¿›è¡ŒStop-Moveç‚¹è¯†åˆ«ï¼Œç¡®å®šè½¨è¿¹ä¸­çš„åœç•™ç‚¹ã€‚ ï¼ˆ2ï¼‰å‘ç°å…´è¶£åŒºåŸŸã€‚é‡‡ç”¨èšç±»æ–¹æ³•å°†å±äºåŒä¸€åœç•™åŒºåŸŸçš„Stopç‚¹èšé›†èµ·æ¥ï¼Œå‘ç°ç§»åŠ¨å¯¹è±¡çš„å…´è¶£åŒºåŸŸã€‚ ï¼ˆ3ï¼‰æ„å»ºå…´è¶£åŒºåŸŸé›†åˆã€‚æ ¹æ®å¯¹å•ä¸ªç§»åŠ¨å¯¹è±¡çš„æ¯ä¸ªå…´è¶£åŒºåŸŸè®¿é—®è¿›è¡Œä¿¡æ¯æ”¶é›†å’Œæ ‡æ³¨ï¼ŒåŒ…æ‹¬ï¼šç§»åŠ¨å¯¹è±¡æ ‡è¯†ã€å…´è¶£åŒºåŸŸè¡¨ç¤ºï¼Œè®¿é—®æ—¶é—´ã€åœç•™æ—¶é•¿ã€è®¿é—®æ¬¡æ•°ç­‰ä¿¡æ¯ï¼Œå½¢æˆç§»åŠ¨å¯¹è±¡çš„å…´è¶£åŒºåŸŸé›†åˆã€‚ ï¼ˆ4ï¼‰æ‰¾å‡ºé‡å åŒºåŸŸã€‚æ‰¾å‡ºä¸åŒç§»åŠ¨å¯¹è±¡çš„å…´è¶£åŒºåŸŸåœ¨åœ°ç†ç©ºé—´ä¸Šå…·æœ‰ä¸€å®šçš„é‡å ã€‚ ï¼ˆ5ï¼‰å‘ç°æ½œåœ¨çš„å…´è¶£æ´»åŠ¨ä»¥åŠæ„Ÿå…´è¶£çš„è·¯å¾„ã€‚åˆ©ç”¨ååŒè¿‡æ»¤è®¡ç®—é‡å çš„åŒºåŸŸå‡ºç°çš„æ¬¡æ•°ã€å‘ç”Ÿæ—¶åˆ»ã€åœç•™çš„æ—¶é—´ç­‰çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œç¡®å®šç›¸ä¼¼ç¨‹åº¦è¾ƒé«˜çš„ç§»åŠ¨å¯¹è±¡ä¸ºç›¸ä¼¼çš„å¯¹è±¡ï¼Œä»¥ç›¸ä¼¼çš„ç§»åŠ¨å¯¹è±¡ä¸ºåŸºç¡€å‘ç°ä»–ä»¬ä¹‹é—´æ½œåœ¨çš„å…´è¶£æ´»åŠ¨ä»¥åŠæ„Ÿå…´è¶£çš„è·¯å¾„ã€‚ åŸºäºå¤šç²’åº¦çš„å¯¹è±¡æ´»åŠ¨çš„æ¨¡å¼å‘ç°ç§»åŠ¨å¯¹è±¡å‘¨æœŸæ´»åŠ¨æŒ–æ˜çš„æ­¥éª¤ï¼š ï¼ˆ1ï¼‰æ˜ç¡®æè¿°å½¢å¼ã€‚å¯¹æ—¶é—´ç©ºé—´ã€æ—¶é—´å•å…ƒã€æ—¶åˆ»ã€æ—¶é—´ç²’åº¦ç­‰è¿›è¡Œå½¢å¼åŒ–æè¿°ï¼Œæ˜ç¡®æ—¶é—´ç²’åº¦çš„è¡¨ç¤ºæ–¹å¼ï¼Œä»¥åŠä¸åŒç²’åº¦çš„è½¬æ¢å…³ç³»ã€‚ ï¼ˆ2ï¼‰ç¡®å®šç§»åŠ¨å¯¹è±¡çš„æ´»åŠ¨ï¼Œé€šè¿‡åŸºäºå¯†åº¦çš„èšç±»æ–¹å¼ï¼Œå‘ç°ç§»åŠ¨å¯¹è±¡é¢‘ç¹åœç•™åŒºåŸŸï¼Œæ ‡è®°ç§»åŠ¨å¯¹è±¡å¯¹è¯¥åŒºåŸŸçš„è®¿é—®ä¸ºä¸€ä¸ªå¯¹è±¡æ´»åŠ¨ï¼Œè®°å½•å¯¹è±¡æ´»åŠ¨çš„ç›¸å…³å±æ€§ä¿¡æ¯ã€‚ ï¼ˆ3ï¼‰å¯¹ç§»åŠ¨å¯¹è±¡å•ä¸ªæ´»åŠ¨è¿›è¡Œå‘¨æœŸæ¨¡å¼æŒ–æ˜ã€‚é’ˆå¯¹ç§»åŠ¨å¯¹è±¡å•ä¸ªæ´»åŠ¨åˆ†æå…¶å‘ç”Ÿçš„æ—¶é—´ç‰¹å¾ï¼Œå½¢æˆå¯¹è±¡æ´»åŠ¨åºåˆ—ï¼Œé€šè¿‡è®¡ç®—æ”¯æŒåº¦å¯¹æ´»åŠ¨å¯¹è±¡ç»„çš„é¢‘ç¹æ¨¡å¼è¿›è¡Œç­›é€‰å’Œè¯„ä»·ï¼Œè¿‡æ»¤å‘ç”Ÿæ¦‚ç‡è¾ƒä½çš„å‘¨æœŸæ¨¡å¼ã€‚ ï¼ˆ4ï¼‰å¯¹ç§»åŠ¨å¯¹è±¡å…³è”æ´»åŠ¨è¿›è¡Œå‘¨æœŸæ¨¡å¼æŒ–æ˜ï¼Œé€šè¿‡åº”ç”¨åŸºäºå¯¹è±¡å•æ´»åŠ¨å‘¨æœŸæ¨¡å¼å‘ç°çš„ç»“æœï¼Œè®¡ç®—å¯¹è±¡æ´»åŠ¨çš„å…³è”ç¨‹åº¦ï¼Œå‘ç°å…³è”åº¦è¾ƒé«˜çš„å¯¹è±¡æ´»åŠ¨ï¼Œé€šè¿‡æ„é€ æœ€å¤§å­æ¨¡å¼æ ‘çš„æ–¹å¼è¿›è¡Œå¯¹è±¡å…³è”æ´»åŠ¨çš„å‘ç°ï¼Œæœ€åé€šè¿‡æ”¯æŒåº¦ã€å’Œæ—¶é—´ä¿®æ­£å€¼å¯¹æŒ–æ˜çš„ç§»åŠ¨å¯¹è±¡å…³è”å‘¨æœŸæ¨¡å¼è¿›è¡Œè°ƒæ•´ã€‚ ï¼ˆ5ï¼‰å¯¹æ´»åŠ¨å‘ç”Ÿæ—¶é—´è¿›è¡Œå¤šç²’åº¦æè¿°ï¼Œå‘ç°æ›´ä¸ºç²¾å‡†ã€å…¨é¢çš„å‘¨æœŸæ¨¡å¼ã€‚ åŸºäºwifiçš„ç”¨æˆ·ç”Ÿæ´»æ¨¡å¼æŒ–æ˜ï¼ˆ1ï¼‰æ•°æ®é¢„å¤„ç†ã€‚ä»wifiæ‰«æåˆ—è¡¨æå–æ•°æ®ï¼Œå‘ç°è®¿é—®åœ°ç‚¹ã€‚ ï¼ˆ2ï¼‰æ„å»ºç§»åŠ¨å›¾æ¨¡å‹ã€‚åŸºäºç”¨æˆ·åœ¨åœ°ç‚¹é—´çš„è½¨è¿¹æ¥æ„å»ºç§»åŠ¨å›¾ã€‚ ï¼ˆ3ï¼‰åŸºäºåœ°ç‚¹æ—¶é—´ç‰¹å¾çš„èšç±»è´¨ä¹Ÿå åŠ æ–¹æ³•æ¥è¯†åˆ«æ‰€æœ‰ç”¨æˆ·çš„å®¶å’Œå·¥ä½œåœ°ç‚¹ï¼Œé€šè¿‡åˆ†æç”¨æˆ·åœ¨å®¶å’Œå·¥ä½œåœ°çš„è¡Œä¸ºæ¥ç†è§£ç”¨æˆ·ä½œæ¯è§„å¾‹ ç§»åŠ¨å›¾æ¨¡å‹æ„å»º è®¿é—®åœ°ç‚¹å‘ç°ã€‚å°†wifiæ‰«æåˆ—è¡¨ä½œä¸ºä½ç½®æŒ‡çº¹ï¼Œå‘ç°ç”¨æˆ·çš„è®¿é—®åœ°ç‚¹ï¼Œè¿™äº›åœ°ç‚¹æ˜¯é€»è¾‘åœ°ç‚¹ã€‚ åœç•™ç‚¹æå–ã€‚æ¯ä¸€ä¸ªæ‰«æåˆ—è¡¨éƒ½ä»£è¡¨ä¸€ä¸ªåœç•™ç‚¹ï¼Œç›¸ä¼¼çš„åœç•™ç‚¹å¯èƒ½ä»£è¡¨ç€ç”¨æˆ·å¯¹æŸä¸ªåœ°ç‚¹çš„å¤šæ¬¡è®¿é—®ï¼Œä»åŸå§‹wifiæ‰«æåˆ—è¡¨æ•°æ®ä¸­å°†ä»£è¡¨åœç•™ç‚¹çš„æ‰«æåˆ«è¡¨æ‰¾å‡ºæ¥ï¼Œç„¶åé€šè¿‡èšç±»å°†é‚£äº›ç›¸è¿‘çš„åœç•™ç‚¹ç»„åˆåœ¨ä¸€èµ·ä¾¿å¯ï¼·å”¯ä¸€è¡¨ç¤ºä¸€ä¸ªè®¿é—®åœ°ç‚¹ã€‚ åœç•™ç‚¹èšç±»ã€‚æ¯ä¸€ä¸ªåœç•™ç‚¹éƒ½å«æœ‰ä¸€äº›å›ºå®šä¸”é¢‘ç¹å‡ºç°çš„wifiç»„åˆï¼Œå¯è¡¨å¾è¯¥åœ°ç‚¹çš„éƒ¨åˆ†ç‰¹å¾ï¼Œä¸ºäº†æ‰¾åˆ°å¯è¡¨è¯¥åœ°ç‚¹å…¨éƒ¨ç‰¹å¾çš„wifiç»„åˆï¼Œå¯¹ç›¸ä¼¼çš„åœç•™ç‚¹è¿›è¡Œèšç±»ï¼Œå¾—åˆ°çš„åœç•™ç‚¹ç°‡ä¾¿æ˜¯ç”¨æˆ·é•¿æ—¶é—´é€—ç•™çš„è®¿é—®åœ°ç‚¹ã€‚ ç”¨æˆ·åŒºåŸŸæ´»åŠ¨ç‰¹å¾å‘ç°ç”¨æˆ·æ¯å¤©çš„è½¨è¿¹å…¶å®å°±æ˜¯ç§»åŠ¨å›¾ä¸Šç”±è‹¥å¹²ä¸ªè®¿é—®åœ°ç‚¹æ„æˆçš„è·¯å¾„ï¼Œç”¨æˆ·è§„å¾‹æ€§ç§»åŠ¨å½¢æˆçš„å¤§é‡è·¯å¾„å°†é‚£äº›å…·æœ‰ç›¸ä¼¼æ€§è´¨çš„ç»“ç‚¹è”ç³»èµ·æ¥ï¼Œæ„æˆæ´»åŠ¨åŒºåŸŸï¼Œåœ¨åŒºåŸŸå†…ç»“ç‚¹ä¹‹é—´è”ç³»ç´§å¯†æ„å‘³ç€ç”¨æˆ·ç§»åŠ¨è¾ƒä¸ºé¢‘ç¹ï¼Œè€Œåœ¨åŒºåŸŸé—´ç»“ç‚¹è”ç³»è¾ƒä¸ºç¨€ç–ï¼Œæ„å‘³ç€ç”¨æˆ·ç§»åŠ¨è¾ƒå°‘ã€‚ é‡è¦åœ°ç‚¹èšç±»ã€‚ç”¨æˆ·çš„é‡è¦åœ°ç‚¹å‘ç°é—®é¢˜å¯è½¬ä¸ºç§»åŠ¨å›¾ä¸­é‡è¦ç»“ç‚¹çš„å‘ç°é—®é¢˜ï¼Œå›¾ä¸­ç»“ç‚¹çš„é‡è¦æ€§ä¸»è¦åŸºäºè¯¥ç»“ç‚¹ä¸ç›¸é‚»ç»“ç‚¹çš„è¿æ¥å…³ç³»æ‰€å±•ç°çš„æ˜¾è‘—æ€§ï¼Œæ¯”å¦‚ç»“ç‚¹çš„åº¦ã€æœ€çŸ­è·¯å¾„å’Œæƒå€¼ç­‰åŸºæœ¬å±æ€§ã€‚]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æŠ€æœ¯åˆ†äº«</tag>
        <tag>wifi</tag>
        <tag>è¡Œä¸ºè½¨è¿¹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pycon2016å¯è§†åŒ–çˆ¬è™«æŠ€æœ¯åˆ†äº«]]></title>
    <url>%2F2016%2F%E6%9E%B6%E6%9E%84%2FPycon2016%E5%8F%AF%E8%A7%86%E5%8C%96%E7%88%AC%E8%99%AB%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯Pycon2016çš„ä¸€ä»½å…³äºè‡ªç ”çˆ¬è™«æ¡†æ¶æŠ€æœ¯åˆ†äº«ã€‚ æ­£æ–‡]]></content>
      <categories>
        <category>æ¼”è®²ç¨¿å±•ç¤º</category>
        <category>ç½‘ç»œçˆ¬è™«</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯åˆ†äº«</tag>
        <tag>ç½‘ç»œçˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>æŠ€æœ¯æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰«æ¥¼å°åŠ©æ‰‹é¡¹ç›®å°ç»“(1)]]></title>
    <url>%2F2016%2F%E6%9E%B6%E6%9E%84%2F%E6%89%AB%E6%A5%BC%E5%B0%8F%E5%8A%A9%E6%89%8B%E9%A1%B9%E7%9B%AE%E5%B0%8F%E7%BB%93-1%2F</url>
    <content type="text"><![CDATA[äº§å“è¯ç”ŸèƒŒæ™¯ æ‰«æ¥¼å°åŠ©æ‰‹æ˜¯ä¸€æ¬¾ç”¨äºè¿è¥å•†ä¸šåŠ¡æ¨å¹¿çš„è¾…åŠ©å·¥å…·ï¼Œè¿™ä¸ªé¡¹ç›®æœ€æ—©è¡ç”Ÿäºâ€œæ™ºæ…§åœ°äº§â€çš„æ¦‚å¿µï¼ŒæŸè¿è¥å•†ç ”ç©¶é™¢è·Ÿç‰©ä¸šé—¨ç¦å…¬å¸åˆä½œï¼Œæäº†ä¸€ä¸ªæ™ºæ…§åœ°äº§é¡¹ç›®ï¼Œå®ç°äº†æ•°æ®äº’è”äº’é€šï¼Œå¸Œæœ›å¯ä»¥åˆ©ç”¨æ•°æ®åšä¸ªå†…éƒ¨ä½¿ç”¨çš„å·¥å…·ï¼ˆä¸»è¦ç”±äºæ•°æ®æ•æ„Ÿï¼Œä¸æ•¢åšå¤–éƒ¨å·¥å…·ï¼‰ã€‚ç ”ç©¶é™¢è¿™è¾¹å¸Œæœ›å¯ä»¥åŸºäºç‰©ä¸šå…¬å¸æä¾›å°åŒºä½æˆ·æ•°æ®æ„å»ºä¸€å¥—ä¾›å†…éƒ¨ä¸šåŠ¡æ¨å¹¿çš„è¾…åŠ©å·¥å…·ï¼Œå¸®å¿™ä¸šåŠ¡äººå‘˜æ¨é”€å„ç±»ç”µä¿¡å¢å€¼å¥—é¤ï¼Œä»è€Œæå‡ä¸šç»©ã€‚å› ä¸ºå½“æ—¶æ™ºæ…§åœ°äº§çš„å·¥ä½œå†…å®¹ä¸»è¦é’ˆå¯¹å®¢æˆ·ï¼ˆå¼€å‘å•†/ç‰©ä¸šå…¬å¸ï¼‰éœ€æ±‚æœ¬èº«ï¼Œå¯¹æœ€ç»ˆç”¨æˆ·çš„ç”µä¿¡ä¸šåŠ¡æ¨å¹¿æˆ–è¥é”€æœåŠ¡æœ‰æ‰€æ¬ ç¼ºã€‚åŒæ—¶ç”µä¿¡å†…éƒ¨å·²æœ‰çš„ç”¨æˆ·ä¸­ï¼Œç»å¤§éƒ¨åˆ†ä¸ºéç”µä¿¡ç”¨æˆ·ï¼Œç¤¾åŒºç»ç†ç¼ºä¹ç²¾å‡†è¥é”€çš„æœ‰åŠ›æ­¦å™¨ï¼Œæ— æ³•è¿…é€Ÿæ‰¾åˆ°å¼‚ç½‘ç›®æ ‡å®¢æˆ·è¿›è¡Œä¸šåŠ¡æ¨å¹¿æˆ–ç­–åã€‚å› æ­¤ï¼Œå¸Œæœ›åˆ©ç”¨å¤–éƒ¨æ•°æ®ç»“åˆç”µä¿¡è‡ªèº«çš„æ•°æ®èµ„æºå¼€å‘ä¸€ä¸ªå®ç”¨çš„ç­–åå·¥å…·ã€‚ äº§å“è®¾è®¡ é¦–å…ˆï¼Œç¡®å®šäº†é¡¹ç›®çš„æ ¸å¿ƒéœ€æ±‚ï¼Œæ˜¯è§£å†³ä¸šåŠ¡äººå‘˜ä¸Šé—¨æ¨å¹¿ä¸æ¸…æ¥šä¸šåŠ¡ä¿¡æ¯çš„é—®é¢˜ï¼ŒåŒæ—¶å¸®åŠ©ä¸šåŠ¡ç»ç†äº†è§£æ•´ä¸ªç‰‡åŒºçš„çŠ¶å†µï¼Œå¯ä»¥æ¸…æ™°åˆ¶å®šé”€å”®ç­–ç•¥ã€‚å› ä¸ºè¿™ä¸¤ä¸ªéœ€æ±‚æ‰€é¢å¯¹çš„ç¾¤ä½“æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æŠŠä»–æ‹†åˆ†ä¸ºä¸¤ä¸ªå½¢æ€çš„åº”ç”¨ï¼š1ã€ä¸€ä¸ªæ˜¯ç»™ä¸šåŠ¡ç»ç†ä½¿ç”¨ï¼Œä¾§é‡ç‚¹æ˜¯å„ç±»æ•°æ®åˆ†æå’Œå›¾è¡¨çš„å±•ç¤ºï¼Œä¸ºäº†ä»–èƒ½å¤Ÿæ›´å¥½åœ°ä»æ€»ä½“æŠŠæ¡æƒ…å†µï¼›2ã€ä¸€ä¸ªæ˜¯ç»™ä¸€çº¿ä¸šåŠ¡äººå‘˜ä½¿ç”¨ï¼Œä¾§é‡ç‚¹æ˜¯è¦æ±‚ç®€å•æ–¹ä¾¿ï¼Œä¸»è¦ç”¨æ¥æŸ¥è¯¢ä¿¡æ¯ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£å®¢æˆ·çš„çŠ¶å†µï¼Œæ ¹æ®ä¸åŒä½å®¢åº”ç”¨ä¸åŒçš„è¯æœ¯æ¨é”€ï¼ŒåŒæ—¶å¯ä»¥è®°å½•å®¢æˆ·çš„æ„å‘å’Œæ‹œè®¿æƒ…å†µï¼› åœ¨å½¢æ€ä¸Šç”±äºä¸šåŠ¡ç»ç†ä¸€èˆ¬åœ¨åŠå…¬å®¤åŠå…¬ï¼ŒåŒæ—¶éœ€è¦å¤§é‡å›¾è¡¨ï¼Œå…¶å±•ç¤ºå½¢æ€ä»¥PCç«¯å½¢æ€å‘ˆç°ï¼›è€Œä¸€çº¿ä¸šåŠ¡äººå‘˜ç»å¸¸åœ¨å¤–é¢è·‘ï¼Œä¸€èˆ¬æºå¸¦æ‰‹æœºç­‰ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œå› æ­¤ä¸šåŠ¡ç‰ˆä»¥ç§»åŠ¨åº”ç”¨å½¢æ€å‘ˆç°ï¼› é«˜ä¿çœŸå›¾ PCç«¯ï¼šç»ç†ç‰ˆ ç§»åŠ¨ç«¯ï¼šå‘˜å·¥ç‰ˆ æŠ€æœ¯é€‰å‹ åœ¨æŠ€æœ¯é€‰å‹ä¸Šï¼Œåç«¯é‡‡ç”¨ Django ï¼Œå‰ç«¯é‡‡ç”¨ AngluarJSï¼Œæ•°æ®åº“é‡‡ç”¨äº†å›¾æ•°æ®åº“ neo4j å’Œå…³ç³»å‹æ•°æ®åº“ mysqlã€‚ é‚£ä¸ºä»€ä¹ˆä¼šç”¨åˆ° å›¾æ•°æ®åº“ neo4j å‘¢ï¼Œä¸»è¦æ˜¯ç”±äºæ¯é—´æˆ¿çš„äººå‘˜æ•°é‡ä¸å›ºå®šï¼Œä¸€èˆ¬æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè€Œæˆ‘ä»¬é‚£æ—¶å€™å¸Œæœ›å¯ä»¥é€šè¿‡ä½æˆ¿ç¡®å®šä¸€ä¸ªå…³ç³»ç½‘ï¼Œæ¯”å¦‚æˆ¿å­h1å±äºæˆ¿ä¸œAï¼ŒåŒæ—¶ä½ç€ B,C,D, æˆ¿å­h2ä¹Ÿå±äºæˆ¿ä¸œAï¼ŒåŒæ—¶ä½ç€ F,G, é‚£ä¹ˆç”¨å›¾æ•°æ®å»æŸ¥è¯¢è¿™ç§å…³ç³»å°±ä¼šå¾ˆå¿«äº†ã€‚]]></content>
      <categories>
        <category>éšç¬”æ—¥å¿—</category>
        <category>é¡¹ç›®ç®¡ç†</category>
      </categories>
      <tags>
        <tag>é¡¹ç›®ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[fabric åˆæ­¥å®è·µ]]></title>
    <url>%2F2016%2F%E8%BF%90%E7%BB%B4%2Ffabric-%E5%88%9D%E6%AD%A5%E5%AE%9E%E8%B7%B5%2F</url>
    <content type="text"><![CDATA[åœ¨é›†ç¾¤éƒ¨ç½²æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨åˆ°å ¡å’æœºä½œä¸ºè·³æ¿ï¼Œå ¡å’æœºå’Œé›†ç¾¤çš„å…¶ä»–çš„ç”¨æˆ·åã€å¯†ç ã€ç«¯å£å·éƒ½æ˜¯ä¸åŒçš„ï¼Œfabricå¦‚ä½•è¿›è¡Œé…ç½®ä¸åŒçš„ç”¨æˆ·ã€ç«¯å£å·å’Œå¯†ç ã€‚ fabricä½œä¸ºä¸€ç§å¼ºå¤§çš„è¿ç»´å·¥å…·ï¼Œå¯ä»¥è®©éƒ¨ç½²è¿ç»´è½»æ¾å¾ˆå¤šï¼Œæœ€ç®€å•çš„fabricä½¿ç”¨ï¼Œé¦–å…ˆè®¾ç½®env.user, env.port, env.hosts, env.password,å¦‚ï¼š 12345678910#coding:utf8from fabric.api import *#ç”¨æˆ·åenv.user = &quot;shikanon&quot;#ä¸­è½¬ipï¼Œå ¡å’æœºenv.gateway = &quot;10.17.35.92&quot;env.port = 12303env.hosts = [&quot;192.168.6.%d&quot;%i for i in range(2,11)]#å¯†ç env.password = &quot;shikanon_123456&quot; è¿™æ ·å°±é…ç½®å¥½äº†é›†ç¾¤ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ä¸ºäº†å®‰å…¨å ¡å’æœºå’Œå„æœºå™¨çš„ç”¨æˆ·åã€ç«¯å£å·ã€å¯†ç éƒ½æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆéœ€è¦æœ‰é’ˆå¯¹æ€§è®¾ç½®ï¼Œåœ¨fabricä¸­ç”¨env.hostså’Œenv.passwordç»„åˆå°±å¯ä»¥äº†ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯åŸæ¥çš„ipå½¢å¼éœ€è¦å…¨éƒ¨æ”¹ä¸ºuser@host:portè¿™ç§å½¢å¼ï¼Œä»£ç å¦‚ä¸‹123456789101112131415161718192021222324252627282930313233343536373839#éœ€è¦ä»¥user@host:portå¡«å†™env.gateway = &quot;shikanon@183.3.169.134:12020&quot;env.hosts = [&quot;shikanon@183.3.169.134:12020&quot;, &quot;root@192.168.0.171:22&quot;, &quot;root@192.168.0.181:22&quot;]#å¯ä»¥å®šä¹‰ä¸åŒçš„å¯†ç env.passwords = &#123; &quot;shikanon@183.3.169.134:12020&quot;:&quot;shikanon_123456&quot;, &quot;root@192.168.0.171:22&quot;:&quot;12shikanon_3456&quot;, &quot;root@192.168.0.181:22&quot;:&quot;1234shikanon_56&quot;&#125;#ä¸‹é¢æ˜¯rsaå…ç™»å½•è®¾ç½®#def create_keygen(): with settings(warn_only=True): run(&quot;rm -rf shikanon/.ssh&quot;) with settings(warn_only=True): run(&quot;mkdir -p shikanon/.ssh&quot;) with settings(warn_only=True): result = run(r&quot;ssh-keygen -t rsa -P &apos;&apos; -f ~/shikanon/.ssh/id_rsa&quot;)def get_ras_id(): get(&quot;~/shikanon/.ssh/id_rsa.pub&quot;,&quot;./rsa/rsa_%s_id_rsa.pub&quot;%(env.host))@runs_oncedef zip(): local(&quot;zip -r authorized_keys.zip rsa/&quot;)def clean(): run(&quot;rm -rf ~/shikanon/&quot;)def upload(): run(&quot;rm -f authorized_keys.zip&quot;) put(&quot;authorized_keys.zip&quot;,&quot;~/shikanon/&quot;) with settings(warn_only=True): run(&quot;unzip ~/shikanon/authorized_keys.zip -d ~/shikanon/.ssh&quot;) rsa_files = run(&quot;ls ~/shikanon/.ssh/rsa/&quot;) for commandline in rsa_files.split(&quot;\r\n&quot;): for rsa_file in commandline.split(&quot; &quot;): if rsa_file: print(&quot;rsa_file:&quot;,rsa_file) run(&quot;cat ~/shikanon/.ssh/rsa/%s &gt;&gt; ~/shikanon/.ssh/authorized_keys&quot;%rsa_file) ä»¥ä¸Šæ˜¯ä¸€ä¸ªè®¾ç½®sshå…å¯†ç ç™»é™†çš„è„šæœ¬]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç³»ç»Ÿè¿ç»´</category>
      </categories>
      <tags>
        <tag>å…¥é—¨æ•™ç¨‹</tag>
        <tag>fabric</tag>
        <tag>å…å¯†ç ç™»å½•</tag>
        <tag>éƒ¨ç½²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonä¸­çƒ¦äººçš„ç¼–ç é—®é¢˜]]></title>
    <url>%2F2015%2F%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%2Fpython%E4%B8%AD%E7%83%A6%E4%BA%BA%E7%9A%84%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[è¢«Python2çƒ¦äº†ä¸€å¤©å†™ä¸ªæ„Ÿæƒ³ mysqlæ•°æ®ä¸­éƒ½æ˜¯UTFç¼–ç ï¼Œå¯¼å‡ºåˆ°æ–‡ä»¶ç§°csvè¿˜æ˜¯xlséƒ½æ˜¯utf-8ï¼Œç”¨pythonçš„pandasè¯»å–å¯ä»¥ï¼Œä½†æ¯æ¬¡å†™ä»£ç çš„æ—¶å€™éƒ½éœ€è¦å¾ˆå°å¿ƒçœ‹æ–‡ä»¶åŸæ¥æ˜¯ä»€ä¹ˆç¼–ç  æ¯”å¦‚å¦‚æœåœ¨read_csv()ä¸­æ²¡ç”¨encodingè½¬æ¢ä¸ºUnicodeç¼–ç çš„è¯åœ¨åé¢çš„å­—æ®µåä»€ä¹ˆéƒ½è¦ç”¨.decode(â€˜utf-8â€™)æ¥è§£ç å·¨éº»çƒ¦ï¼Œè€Œä¸”åœ¨ç”¨to_csv()ä¹‹ç±»çš„ä¿å­˜æ—¶å€™è¿˜å¾—å†æ¬¡ç”¨åˆ°encodingç¼–ç å°†å…¶Unicodeè½¬æ¢ä¸ºutf-8,è€Œä¸”å¥½åƒwindowéƒ½ä¸è®¤utf-8çš„ï¼Œæœç„¶è¿˜æ˜¯åº”è¯¥è½¬æ¢ä¸ºgbkå‘¢ï¼Œï¼Œï¼Œ æœ€æœ€å…³é”®æ˜¯pythonåœ¨shellå’Œè‡ªå¸¦çš„IDELä¸­çš„ç¼–ç ç«Ÿç„¶æ˜¯ä¸åŒçš„ï¼ï¼æ˜æ˜åœ¨IDELä¸­ç”¨encoding=utfï¼Œä¹Ÿå°±æ˜¯ ï¼š 123456789101112131415161718192021222324252627#coding=UTF-8print repr(&apos;æˆ‘&apos;)#è¿™ä¸ªæ˜¯ä¸€ä¸ªutfç¼–ç print repr(u&apos;æˆ‘&apos;)#è¿™ä¸ªæ˜¯ä¸€ä¸ªUnicodeprint repr(&apos;æˆ‘&apos;.decoding=&apos;UTF-8&apos;)#è¿™ä¸ªæ˜¯ä¸€ä¸ªUnicodeä½†åœ¨shellä¸­å´æ˜¯ï¼šprint repr(&apos;æˆ‘&apos;)#è¿™ä¸ªæ˜¯ä¸€ä¸ªGBKç¼–ç print repr(u&apos;æˆ‘&apos;)#è¿™ä¸ªæ˜¯ä¸€ä¸ªç”¨unicodeæ¥è¯»çš„GBKç¼–ç ï¼Œä¹Ÿå°±æ˜¯ä¹±ç ã€‚ã€‚ã€‚print repr(&apos;æˆ‘&apos;.decode(&apos;gbk&apos;))#è¿™ä¸ªæ‰æ˜¯ä¸€ä¸ªUnicode ä»¥åå†windowå¹³å°ä¸ç®¡ä¸‰ä¸ƒäºŒä¸€éƒ½æ”¹æˆGBKç¼–ç ç®—äº†ï¼Œçœå¿ƒ Windowsä¸Šå¾—ä¸­æ–‡PythonäºŒè¿›åˆ¶åŒ…èµ„æºï¼šhttps://www.lfd.uci.edu/~gohlke/pythonlibs/]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>ç¼–ç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºopencvçš„æ‘„åƒå¤´è„¸éƒ¨è¯†åˆ«æŠ“å–åŠæ ¼å¼å‚¨å­˜(python)]]></title>
    <url>%2F2014%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E5%9F%BA%E4%BA%8Eopencv%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E8%84%B8%E9%83%A8%E8%AF%86%E5%88%AB%E6%8A%93%E5%8F%96%E5%8F%8A%E6%A0%BC%E5%BC%8F%E5%82%A8%E5%AD%98-python%2F</url>
    <content type="text"><![CDATA[opencvä½œä¸ºä¼˜ç§€çš„è§†è§‰å¤„ç†åœ¨åŠ¨æ€å›¾åƒå¤„ç†ä¸Šä¹Ÿæ˜¯å¾ˆä¸é”™çš„ï¼Œæœ¬æ¬¡ä¸»è¦åŸºäºOpencvæŠ“å–è§†é¢‘ï¼Œç„¶åä¿å­˜ä¸ºaviï¼ŒåŒæ—¶è¿›è¡Œè„¸éƒ¨è¯†åˆ«ä½œä¸š åˆšæ¥è§¦opencvï¼Œå‚ç…§opencvçš„sampleä¾‹å­åšäº†ä¸€ä¸ªè§†é¢‘å¤´åƒæŠ“å–çš„å°ä»£ç ï¼Œé¡ºä¾¿ä¸€èµ·å­¦ä¹ ç€ç”¨ï¼Œå…ˆä¸Šè§†é¢‘æŠ“å–åŠå­˜å‚¨ä»£ç ï¼š 1234567891011121314151617181920212223242526272829# -*- coding: cp936 -*-import cv2capture=cv2.VideoCapture(0)#å°†captureä¿å­˜ä¸ºmotion-jpeg,cv_fourccä¸ºä¿å­˜æ ¼å¼size = (int(capture.get(cv2.cv.CV_CAP_PROP_FRAME_WIDTH)), int(capture.get(cv2.cv.CV_CAP_PROP_FRAME_HEIGHT)))#cv_fourccå€¼è¦è®¾ç½®å¯¹ï¼Œä¸ç„¶æ— æ³•å†™å…¥ï¼Œè€Œä¸”ä¸æŠ¥é”™ï¼Œå‘video=cv2.VideoWriter(&quot;VideoTest.avi&quot;, cv2.cv.CV_FOURCC(&apos;I&apos;,&apos;4&apos;,&apos;2&apos;,&apos;0&apos;), 30, size)#isopenedå¯ä»¥æŸ¥çœ‹æ‘„åƒå¤´æ˜¯å¦å¼€å¯print capture.isOpened()num=0#è¦ä¸æ–­è¯»å–imageéœ€è¦è®¾ç½®ä¸€ä¸ªå¾ªç¯while True: ret,img=capture.read() #è§†é¢‘ä¸­çš„å›¾ç‰‡ä¸€å¼ å¼ å†™å…¥ video.write(img) cv2.imshow(&apos;Video&apos;,img) key=cv2.waitKey(1)#é‡Œé¢æ•°å­—ä¸ºdelayæ—¶é—´ï¼Œå¦‚æœå¤§äº0ä¸ºåˆ·æ–°æ—¶é—´ï¼Œ #è¶…è¿‡æŒ‡å®šæ—¶é—´åˆ™è¿”å›-1ï¼Œç­‰äº0æ²¡æœ‰è¿”å›å€¼,ä½†ä¹Ÿå¯ä»¥è¯»å–é”®ç›˜æ•°å€¼ï¼Œ cv2.imwrite(&apos;%s.jpg&apos;%(str(num)),img) num=num+1 if key==ord(&apos;q&apos;):#ordä¸ºé”®ç›˜è¾“å…¥å¯¹åº”çš„æ•´æ•°, breakvideo.release()#å¦‚æœä¸ç”¨releaseæ–¹æ³•çš„è¯æ— æ³•å‚¨å­˜ï¼Œè¦ç­‰ç»“æŸç¨‹åºå†ç­‰æ‘„åƒå¤´å…³äº†æ‰èƒ½æ˜¾ç¤ºä¿æŒæˆåŠŸcapture.release()#æŠŠæ‘„åƒå¤´ä¹Ÿé¡ºä¾¿å…³äº†cv2.destroyAllWindows() opencvè§†é¢‘æŠ“å–å¥½ç®€å•ï¼Œä¸»è¦ç”¨videowriterå°±å¯ä»¥äº†ï¼Œä¸»è¦è¦æ³¨æ„çš„æ˜¯opencvä¸­çš„æŠ“å–æ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªé‡Šæ”¾å‘½ä»¤ï¼Œä¸ç„¶å°±åªèƒ½ç­‰åˆ°ç¨‹åºå…³é—­åè¿›è¡Œåƒåœ¾å›æ”¶æ—¶æ‰èƒ½é‡Šæ”¾äº†ã€‚è§†é¢‘æŠ“å–å°±ä¸ä¸Šå›¾äº†ã€‚ ç„¶åæ˜¯è„¸éƒ¨è¯†åˆ«ï¼Œopencvè‡ªå¸¦äº†å¾ˆå¤šç‰¹å¾åº“æœ‰è„¸éƒ¨ï¼Œçœ¼ç›çš„è¿˜æœ‰å¾ˆå¤šï¼ŒåŸç†éƒ½ä¸€æ ·ï¼Œåªæ˜¯çœ¼ç›çš„åº“è¯†åˆ«ç‡è§†ä¹å¹¶ä¸é«˜ï¼Œç›´æ¥ä¸Šä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#coding=utf-8import cv2import cv2.cv as cvimg = cv2.imread(&quot;5.jpg&quot;)def detect(img, cascade): &apos;&apos;&apos;detectMultiScaleå‡½æ•°ä¸­smallImgè¡¨ç¤ºçš„æ˜¯è¦æ£€æµ‹çš„è¾“å…¥å›¾åƒä¸ºsmallImgï¼Œfacesè¡¨ç¤ºæ£€æµ‹åˆ°çš„äººè„¸ç›®æ ‡åºåˆ—ï¼Œ1.3è¡¨ç¤ºæ¯æ¬¡å›¾åƒå°ºå¯¸å‡å°çš„æ¯”ä¾‹ä¸º1.3ï¼Œ 4è¡¨ç¤ºæ¯ä¸€ä¸ªç›®æ ‡è‡³å°‘è¦è¢«æ£€æµ‹åˆ°3æ¬¡æ‰ç®—æ˜¯çœŸçš„ç›®æ ‡(å› ä¸ºå‘¨å›´çš„åƒç´ å’Œä¸åŒçš„çª—å£å¤§å°éƒ½å¯ä»¥æ£€æµ‹åˆ°äººè„¸), CV_HAAR_SCALE_IMAGEè¡¨ç¤ºä¸æ˜¯ç¼©æ”¾åˆ†ç±»å™¨æ¥æ£€æµ‹ï¼Œè€Œæ˜¯ç¼©æ”¾å›¾åƒï¼ŒSize(20, 20)ä¸ºç›®æ ‡çš„æœ€å°æœ€å¤§å°ºå¯¸&apos;&apos;&apos; rects = cascade.detectMultiScale(img, scaleFactor=1.3, minNeighbors=5, minSize=(30, 30), flags = cv.CV_HAAR_SCALE_IMAGE) if len(rects) == 0: return [] rects[:,2:] += rects[:,:2] print rects return rects#åœ¨imgä¸Šç»˜åˆ¶çŸ©å½¢def draw_rects(img, rects, color): for x1, y1, x2, y2 in rects: cv2.rectangle(img, (x1, y1), (x2, y2), color, 2)#è½¬æ¢ä¸ºç°åº¦å›¾gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)#ç›´æ–¹å›¾å‡è¡¡å¤„ç†gray = cv2.equalizeHist(gray)#è„¸éƒ¨ç‰¹å¾åˆ†ç±»åœ°å€ï¼Œé‡Œé¢è¿˜æœ‰å…¶ä»–cascade_fn = &apos;data/haarcascades/haarcascade_frontalface_alt.xml&apos;#è¯»å–åˆ†ç±»å™¨,CascadeClassifierä¸‹é¢æœ‰ä¸€ä¸ªdetectMultiScaleæ–¹æ³•æ¥å¾—åˆ°çŸ©å½¢cascade = cv2.CascadeClassifier(cascade_fn)#é€šè¿‡åˆ†ç±»å™¨å¾—åˆ°rectsrects = detect(gray, cascade)#visä¸ºimgå‰¯æœ¬vis = img.copy()#ç”»çŸ©å½¢draw_rects(vis, rects, (0, 255, 0))cv2.imshow(&apos;facedetect&apos;, vis)cv2.waitKey(0)cv2.destroyAllWindows() ç›´æ¥ä¸Šæ•ˆæœå›¾å’ŒåŸå›¾å¯¹æ¯”ï¼š]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>å›¾åƒè¯†åˆ«</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>opencv</tag>
        <tag>å›¾åƒè¯†åˆ«</tag>
        <tag>æ‘„åƒå¤´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›´å¢™çš„æ–‡åŒ–å’Œç¤¾ä¼šæ€§è½¬å˜â€”â€”ä»é‡ŒåŠåˆ¶åˆ°é—¨ç¦ç¤¾åŒº]]></title>
    <url>%2F2014%2F%E7%94%9F%E6%B4%BB%2F%E5%9B%B4%E5%A2%99%E7%9A%84%E6%96%87%E5%8C%96%E5%92%8C%E7%A4%BE%E4%BC%9A%E6%80%A7%E8%BD%AC%E5%8F%98%2F</url>
    <content type="text"><![CDATA[å¢™è¢«è®¤ä¸ºæ˜¯å…·æœ‰ä¿æŠ¤æ€§å’Œæ’ä»–æ€§çš„ç©ºé—´è¾¹ç•Œï¼ŒåŒæ—¶æ˜¯ä¸€ç§éš”ç¦»çš„ç¬¦å·ã€‚ä¼å°”å¾·å–œä»é¾™(Osvald Siren)åœ¨æè¿°ä¸­å›½åŸå¸‚æ—¶ï¼Œæ›¾ç»æåˆ°å¢™çš„æ— å¤„ä¸åœ¨ï¼šâ€œå¢™è¿æ¥ç€å¢™ï¼Œè¿ç€è¿˜æ˜¯å¢™ï¼Œè¿™å½¢æˆäº†æ¯ä¸ªä¸­å›½åŸå¸‚çš„åŸºæœ¬æ„æ¶ã€‚å“ªäº›å¢™åŒ…å›´ç€ç©ºé—´ï¼Œå¹¶ä¸”å°†ç©ºé—´åˆ’åˆ†æˆä¸ºåœ°å—å’Œå¤§é™¢ï¼Œè¿™æ ‡å¿—ç€ä¸­å›½ç¤¾åŒºåŒºåˆ«äºå…¶ä»–ç»“æ„çš„åŸºæœ¬ç‰¹å¾ã€‚â€å¢™ä¸€ç›´ä»å¤ä»£å»¶ç»­åˆ°ç°åœ¨ï¼Œå¤§å‹çš„åŸå¢™é€æ¸æ¶ˆå¤±æˆ–è¢«é—ç•™ä¸ºå†å²é—è¿¹ï¼Œè€Œä½œä¸ºâ€œç©ºé—´å°ç¢ç‰‡â€çš„å›´å¢™å»¶ç»­äº†ä¸‹æ¥ï¼Œå°†åŸå¸‚åˆ†å‰²æˆä¸€å—å—çš„â€œç©ºé—´ç¢ç‰‡â€ï¼Œäººè¢«åˆ†å¼€æˆäº†â€œå¢™å†…äººâ€å’Œâ€œå¢™å¤–äººâ€ï¼Œè€Œå¢™çš„ç•Œé™åˆ†å‰²äº†å¢™å†…å¤–çš„è®¤çŸ¥ï¼Œä½¿å¾—å¢™å†…çš„äººç¾¤ç»“æ„åŒè´¨åŒ–é€æ¸å½¢æˆä¸€ä¸ªç›¸äº’è®¤åŒçš„ç¾¤ä½“ï¼Œè€Œå¢™å¤–åˆ™è¢«è§†ä¸ºâ€œä»–è€…â€ï¼ˆthe otherï¼‰çš„å­˜åœ¨ã€‚ä»å¤ä»£çš„é‡ŒåŠåˆ°ç°ä»£çš„é—¨ç¦ç¤¾åŒºï¼Œç”±äºç¤¾ä¼šç»“æ„çš„æ”¹å˜ï¼Œå¢™çš„ç¤¾ä¼šæ€§å’Œæ–‡åŒ–æ€§ç‰¹å¾å‘ç”Ÿäº†é‡æ„ï¼Œå¢™çš„ç¤¾ä¼šæ§åˆ¶åŠŸèƒ½å‡å¼±ï¼Œå‡ºäºä¸ªä½“å®‰å…¨å’Œå½’å®¿çš„éœ€æ±‚å¢å¼ºï¼Œå¢™çš„æ„å»ºæœºåˆ¶é€æ¸ç”±æƒå¨å‹ä¸»å¯¼è½¬å‘èµ„æœ¬å‹ä¸»å¯¼ï¼ŒåŒæ—¶ä½¿å¾—å¢™çš„ç©ºé—´ç»“æ„å‘ç”Ÿäº†é‡æ„ã€‚ å›´åˆçš„å¢™â€”â€”èº²é¿é£é™©çš„å½’å®¿å¢™æ˜¯ç©ºé—´çš„ç‰©è´¨è½½ä½“ï¼Œæ„é€ äº†å®ä½“æ€§ç©ºé—´ï¼Œä½¿å¾—ç©ºé—´å®šæ ¼åœ¨å…·ä½“çš„èŒƒå›´ä¸­ã€‚å¢™çš„å†…éƒ¨ç©ºé—´å¾—ä»¥ç»´æŒç¨³å®šçš„ç¤¾ä¼šæ–‡åŒ–ç©ºé—´ï¼Œåœ¨å›´åˆçš„å¢™å†…ï¼Œä¸€åˆ‡éƒ½å¯ä»¥è¢«æ§åˆ¶å’Œå®‰å…¨åœ°æ„å»ºèµ·æ¥ã€‚æ—è”š(Arthur Waldron)åœ¨å…³äºä¸­å›½é•¿åŸçš„ç ”ç©¶ä¸­ï¼Œæå‡ºä¸­å›½æœ€æ—©çš„å¢™å¯èƒ½æ˜¯ä¸ºäº†å®¶åº­ä¹‹é—´çš„åˆ†éš”è€Œå»ºèµ·çš„ã€‚éšåï¼Œå¢™çš„ä½œç”¨è¢«å»¶ä¼¸è€Œç”¨äºå›´åˆæ‘åº„å’ŒåŸé•‡ã€‚å¢™åœ¨æ—©æœŸçš„åŠŸèƒ½ä¸»è¦æ˜¯ç”¨æ¥è§„é¿å¤–ç•Œä¸ç¡®å®šçš„é£é™©è€Œè¥é€ çš„ä¸€ä¸ªç¨³å®šçš„ç¤¾ä¼šç¯å¢ƒï¼Œäººç±»ä¸ºäº†é€ƒé¿ä¸å®‰å®šçš„è‡ªç„¶é€æ¸å»ºèµ·æ¥äº†å¢™ã€‚â€œå®¶â€çš„æ„å»ºæ˜¯é€šè¿‡åˆ›å»ºâ€œè¾¹ç•Œâ€æ¥å®ç°çš„ï¼Œå¢™ä¸ä»…ä»…æ˜¯ç‰©è´¨æ€§çš„è¾¹ç•Œï¼Œæ›´æ˜¯ä¸€ç§ç¤¾ä¼šå’Œæ–‡åŒ–çš„å»ºæ„ï¼Œå®ƒæ„å»ºäº†â€œå®¶â€ï¼Œä½¿â€œå®¶â€åœ¨ç©ºé—´ç»“æ„ä¸Šå¾—ä»¥ä½“ç°ã€‚ â€œå®¶â€çš„æ¦‚å¿µè¿ç”¨ä¸ä»…ä»…æ˜¯å¼ºè°ƒä¸ªäººä¸åœ°æ–¹çš„æƒ…æ„Ÿä¾æ‹ï¼Œè¿˜å¼ºåŒ–äº†ä¸å¤–ç•Œçš„å¯¹ç«‹ï¼Œä¸ºäº†å¼ºåŒ–å’Œç»´æŠ¤è¿™ç§èº«ä»½ç»Ÿä¸€çš„å¹»è±¡ï¼Œå›´å¢™å¤–é¢çš„äººè¢«æ„å»ºä¸ºâ€œä»–è€…â€ï¼Œé™Œç”Ÿäººå’Œâ€œéå®¶äººâ€ã€‚ è©¹çº³ï¼ˆW.J.F.Jennerï¼‰è®¤ä¸ºä»è¿ç»µä¸‡é‡Œçš„é•¿åŸåˆ°å‡ åç±³é«˜çš„åŸå¢™ï¼Œå†åˆ°åŸå¸‚ä¸­çš„åŸºæœ¬å•å…ƒå››åˆé™¢ï¼Œå¢™éƒ½åœ¨åŠªåŠ›æ‰®æ¼”è€…å°†â€œä»–è€…â€æ’é™¤åœ¨å¤–ï¼Œé•¿åŸå°†å¤–å›½äººæ’é™¤åœ¨ä¸­å›½ä¹‹å¤–ï¼ŒåŸå¢™å°†å†œæ°‘æ’é™¤åœ¨åŸå¸‚ä¹‹å¤–ï¼Œé™¢å¢™å°†å¤–äººæ’é™¤åœ¨å®¶åº­ä¹‹å¤–ã€‚æ„å»ºèµ·å…±åŒçš„â€œä»–è€…â€æ¦‚å¿µä»è€ŒåŠ å¼ºå¯¹ç¾¤ä½“çš„è®¤åŒã€‚éšç€å†å²çš„å˜è¿ï¼Œå¤ä»£çš„å¤§é™¢é€æ¸éšé€€ï¼Œä½†å®ƒçš„å¢™å´ä»¥ä¸€ç§æ–°çš„æ–¹å¼å»¶ç»­ä¸‹æ¥â€”â€”é—¨ç¦ç¤¾åŒºã€‚éšç€èµ„æœ¬çš„å‘å±•ï¼Œå®ä½“ç©ºé—´ç«äº‰çš„çŸ›ç›¾è¢«æ¿€å‘ï¼Œäººä»¬å¼€å§‹é€‰æ‹©â€œç°‡æ‹¥è€Œå±…â€ï¼Œè€Œåœ¨ç©ºé—´é€‰æ‹©ä¸Šï¼Œèµ„æœ¬ä½¿å¾—ç›¸ä¼¼èº«ä»½çš„äººç¾¤åœ¨ç©ºé—´ä¸Šå¾—ä»¥â€œç°‡æ‹¥â€åŒæ—¶è¿‡æ»¤æ‰â€œé‚£äº›ä¸è¾¾æ ‡çš„ä¸ªä½“â€ã€‚ç‰¹åˆ«åœ¨èµ„æœ¬é©±åŠ¨ä¸‹ï¼Œä¸ºäº†ç»™äºˆä¸ªä½“â€œå®¶â€çš„ä¾æ‹ï¼Œâ€œå®¶â€çš„æ¦‚å¿µè¢«å¤§é‡æ„å»ºèµ·æ¥ï¼Œâ€œå¢™â€ä¹Ÿå¤§é‡çš„å»ºç«‹èµ·æ¥ã€‚ å°é—­çš„å¢™â€”â€”æˆ‘ä¸ä»–è€…çš„è¾¹ç•Œå›´å¢™æˆ–ç¯±ç¬†ä½œä¸ºè¾¹ç•Œçš„ç‰©è´¨æ€§è½½ä½“ï¼Œå®ƒåˆ†éš”äº†ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿåˆ†å‰²å¢™å†…å¤–çš„ç›¸äº’è®¤çŸ¥ï¼Œå¯¹å¢™å†…äººæ¥è¯´å¢™å†…ä¸ºå®¶äººï¼Œæ¢¦å¹»ä¹å›­ï¼Œå¢™å¤–ä¸ºæ··ä¹±ï¼Œåµæ‚çš„â€œä»–è€…â€ã€‚ å¢™é˜»éš”äº†è®¤çŸ¥ç©ºé—´çš„è¿ç»­æ€§ï¼Œä½¿å¾—å®è·µè®¤çŸ¥åœ¨è¾¹ç•Œå¤„æ–­è£‚åªå‰©å¹»æƒ³çš„å»¶ç»­ã€‚ è§„æ•´çš„å¢™â€”â€”ç¤¾ä¼šç©ºé—´ç»“æ„çš„æ„é€ è©¹çº³ï¼ˆW.J.F.Jennerï¼‰è®¤ä¸ºå¢™åœ¨ä¸­å›½å†å²æ¼”å˜ä¸­çš„æ„ä¹‰åœ¨äºå›´åˆã€é™å®šå’Œç¤¾ä¼šæ§åˆ¶ã€‚Huang è®¤ä¸ºï¼Œå›´å¢™ä¹‹æ‰€ä»¥åœ¨ä¸­å›½ç¤¾ä¼šä¸­é•¿ç››ä¸è¡°ï¼Œç¼˜äºæ”¿åºœé•¿æœŸä»¥æ¥åœ¨å±…ä½åŒºå±‚é¢çš„æ”¿æ²»æ§åˆ¶ï¼Œè€Œé—¨ç¦ç¤¾åŒºæ­£æ˜¯è¿™ç§æ”¿æ²»æ§åˆ¶çš„ä½“ç°ã€‚ è¯»ä¹¦ç¬”è®° å‚è€ƒæ–‡çŒ® Low S . Behind the Gates: Life , Security and the Pursuit of Happiness in Fortress America 1 New York: Rout le dg e,2003 Davis M . City of quartz: Excavating the Future of Los Angeles 1 New York: Verso , 1990. Sibley, D. Geographies of exclusion: society and difference in the West[M]. London: Routledge, 1995. Dixon, J. Contact and boundaries: â€˜Locatingâ€™ the social psychology of intergroup relations [J]. Theory &amp; Psychology, 2001, 11(5): 587-608. Young, M. House and home: feminist variations on a theme, in Intersecting Voices: Dilemmas of Gender, Political Philosophy, and Policy[M]. Princeton, NJ: Princeton University Press, 1997: 134 â€“164. Breitung, W. Borders and the city â€“Intra-urban boundaries in Guangzhou (China). Quaestiones Geographicae[M]. Poznan: Adam Mickiewicz University Press, 2012. åŠ è—¤ç¹ï¼š ã€Šä¸­å›½ç»æµå²è€ƒè¯ã€‹ ç¬¬1 å·ï¼Œ å°åŒ—åä¸–å‡ºç‰ˆç¤¾ 1981 å¹´ç‰ˆï¼Œ ç¬¬ 464 é¡µã€‚ ï¼ˆæ¸…ï¼‰æ›¹å¯…ç­‰ç¼–çº‚ï¼š ã€Šå…¨å”è¯—ã€‹ï¼Œ ä¸­åä¹¦å±€ 1960 å¹´ç‰ˆï¼Œç¬¬ 5041 é¡µã€‚ ï¼ˆå®‹ï¼‰å®‹æ•æ±‚ï¼š ã€Šé•¿å®‰å¿—ã€‹å· 7ï¼Œä¸­åä¹¦å±€ 1990 å¹´å½±å°æœ¬ã€‚ ï¼ˆäº”ä»£ï¼‰ç‹æº¥ï¼š ã€Šå”ä¼šè¦ã€‹å· 25ï¼Œä¸Šæµ·å¤ç±å‡ºç‰ˆç¤¾ 1991 å¹´ç‰ˆã€‚ ä½†â€œæœ‰æ•…è€…ä¸åâ€ã€‚ ï¼ˆå”ï¼‰é•¿å­™æ— å¿Œï¼š ã€Šå”å¾‹ç–è®®ã€‹å· 26ã€Šæ‚å¾‹ã€‹ï¼Œ ä¸­åä¹¦å±€ 1993 å¹´ç‰ˆã€‚ ï¼ˆåæ™‹ï¼‰åˆ˜æ˜«ç­‰ï¼š ã€Šæ—§å”ä¹¦ã€‹å· 15ï¼Œä¸­åä¹¦å±€ 1986 å¹´ç‰ˆã€‚ ï¼ˆæ¸…ï¼‰æ›¹å¯…ç­‰ç¼–çº‚ï¼š ã€Šå…¨å”è¯—ã€‹ï¼Œ ç¬¬ 979 é¡µã€‚ ï¼ˆäº”ä»£ï¼‰ç‹æº¥ï¼š ã€Šå”ä¼šè¦ã€‹å· 86 ï¼ˆäº”ä»£ï¼‰ç‹æº¥ï¼š ã€Šå”ä¼šè¦ã€‹å· 86 ï¼ˆå”ï¼‰å¼ ä¹é¾„ï¼š ã€Šå”å…­å…¸ã€‹å· 20ï¼Œä¸­åä¹¦å±€ï¼Œ1992 å‡ºç‰ˆã€‚]]></content>
      <categories>
        <category>äººæ–‡åœ°ç†</category>
        <category>ç¤¾ä¼šå­¦</category>
      </categories>
      <tags>
        <tag>å¢™</tag>
        <tag>ç¤¾ä¼šéš”ç¦»</tag>
        <tag>å“²å­¦</tag>
        <tag>ç¤¾ä¼šå­¦</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çº¿æ€§è§„åˆ’é—®é¢˜è§£å†³å¼€æºå·¥å…·(GNU Linear Programming Kit)]]></title>
    <url>%2F2014%2F%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%2F%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7-GNU-Linear-Programming-Kit%2F</url>
    <content type="text"><![CDATA[GNU Linear Programming Kit (GLPK)ä¸€ä¸ªå¼€æºçš„çº¿æ€§è§„åˆ’å·¥å…·ï¼Œç”¨äº†ä¸€ä¸‹æ„Ÿè§‰è¯­æ³•è¿˜æŒºç®€å•äº†ï¼ˆæœ‰ç‚¹åƒpythonçš„æ„Ÿè§‰ï¼Œä½†æ²¡pythonæ¸…æ™°ï¼‰å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹ å…¥é—¨å®è·µæœ€è¿‘åœ¨åšä¸€ä¸ªå«äº¤é€šæœ€å°é€šå‹¤è®¡ç®—é—®é¢˜ï¼Œéœ€è¦ç”¨åˆ°çº¿æ€§è§„åˆ’æ¥è§£å†³ï¼Œå› æ­¤åœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹å•Šçº¿æ€§è§„åˆ’å·¥å…·ï¼Œå› ä¸ºä¸æƒ³è£…MATLABï¼Œ(å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œç”µè„‘cç›˜å‰©ä¸‹ä¸åˆ°4gäº†)å°±æ‰¾äº†ä¸€ä¸ªå¼€æºçš„çº¿æ€§è§„åˆ’å°å·¥å…·ï¼Œæ„Ÿè§‰è¿˜è›®å®ç”¨çš„ï¼Œ(GNU Linear Programming Kit, GLPK)[http://gnu.april.org/software/glpk/] ä¸€ä¸ªå¼€æºçš„çº¿æ€§è§„åˆ’å·¥å…·ï¼Œå†è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä»‹ç»ã€‚ glpsol.exeå°±æ˜¯ä¸»ç¨‹åºäº†ï¼Œglpsol.exeä¸»è¦æ˜¯é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œï¼Œå¯ä»¥é€šè¿‡ â€“help å‘½ä»¤äº†è§£ä¸‹ä»–çš„ä¸»è¦å‘½ä»¤ï¼š GLPKæ‰€ä½¿ç”¨çš„ç¼–è¯‘è¯­è¨€ä¸»è¦æ˜¯ GNU MathProg languageï¼Œæˆ‘ä¸»è¦å°è¯•äº†glpsolçš„ä¸¤ä¸ªå‘½ä»¤â€“math å’Œ â€“modelï¼Œåˆ†åˆ«ä»‹ç»ä¸‹ï¼š çº¿æ€§è§„åˆ’æ–¹ç¨‹ï¼š æœ¬æ¡ˆåˆ—å°±ç”¨Sriramåœ¨Courseraå…¬å¼€è¯¾çš„ä¸Šè®²çš„æ¡ˆä¾‹ç›´æ¥è¿›è¡Œä»‹ç»äº†ï¼Œmathæ–¹æ³•æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥æŠŠçº¿æ€§æ–¹ç¨‹å†™ä¸‹æ¥ï¼Œæ‰¾ä¸€ä¸ªtxtè®°äº‹æœ¬ï¼š 1234567891011var x1&gt;=0;var x2&gt;=0;maximize obj:x1+2*x2;c1:-3*x1+x2&lt;=2;c2:x2&lt;=11;c3:x1-x2&lt;=3;c4:x1&lt;=6;solve;display x1;display x2;end; å¯ä»¥çœ‹å‡ºMathProg languageå¾ˆç®€å•ï¼Œå®šä¹‰å˜é‡èŒƒå›´var,å®šä¹‰ç›®æ ‡maximize obj:å’Œçº¦æŸæ¡ä»¶å°±å¯ä»¥äº†ï¼Œæœ€åæ±‚è§£solveå’Œæ˜¾ç¤ºdisplay ç„¶åä¿æŒä¸ºfirst.ampl åœ¨CMDå‘½ä»¤è¡Œç›´æ¥è¾“å…¥glpsol â€“math fitst.amplå°±å¯ä»¥äº† å¯ä»¥çœ‹åˆ°ç»“æœä¸º12è¿™ç§æ–¹æ³•åœ¨è§£å†³ç®€å•å°‘é‡çš„çº¿æ€§è§„åˆ’çš„æ—¶å€™å¾ˆç®€å•æ¸…æ™°ï¼Œä½†æ˜¯åœ¨è§£å†³å¤§é‡çº¿æ€§è§„åˆ’çš„æ—¶å€™æ˜¯ä¸å…·å¤‡å¯æ“ä½œæ€§çš„ï¼Œå› æ­¤ä»‹ç»GLPKçš„ç¬¬äºŒç§å‘½ä»¤--model,è¿™ç§å‘½ä»¤å¯ä»¥ç”¨ä¸¤ä¸ªæ–‡ä»¶å­˜å‚¨ä¸€ä¸ªä¸ºMODELæ–‡ä»¶ï¼Œä¸€ä¸ªä¸ºDATAæ–‡ä»¶ï¼ŒMODELæ–‡ä»¶ä¸»è¦é€šè¿‡æ„å»ºçŸ©é˜µè¿›è¡Œçº¿æ€§è§„åˆ’è®¡ç®—ï¼ŒåŒæ ·ä»¥ä¸Šé¢çš„çº¿æ€§è§„åˆ’ä¸ºä¾‹ï¼Œå¯ä»¥å¾—å‡ºå…¶å®ä¸Šé¢çš„çº¦æŸæ–¹ç¨‹å¯ä»¥çœ‹å‡ºä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜ï¼Œåˆ†åˆ«ä¸ºä¸€ä¸ªç³»æ•°çŸ©é˜µAå’Œæ‰€æ±‚çŸ©é˜µXç›¸ä¹˜å°äºç­‰äºbçŸ©é˜µ(A*x&lt;=b)ï¼š param m;param n; param c{i in 1..n};param A{i in 1..m,j in 1..n};param b{i in 1..m}; var x{i in 1..n}&gt;=0; maximize obj:sum{i in 1..n} c[i]x[i];s.t.e{j in 1..m}:sum{i in 1..n} A[j,i]x[i]&lt;=b[j]; solve;display x;end;12å†™å®Œmodelæ–‡ä»¶è¿˜éœ€è¦å†™ä¸€ä¸ªèµ‹å€¼çš„dataæ–‡ä»¶å¯¹modelä¸­çš„å‚æ•°èµ‹å€¼ï¼š param n:=2; param m:=4; param c:=1 2ï¼š1 2; param A:=1 2ï¼š1 -3 12 0 13 1 -14 1 0; param b:= 1ï¼š1 22 113 34 6;123456789101112131415161718192021å…·ä½“dataæ–‡ä»¶çš„å†™ä½œæ ¼å¼å¯ä»¥å‚è€ƒæˆ‘çš„ç™¾åº¦äº‘ç›˜ä¸Šçš„gmplæ–‡ä»¶ï¼ˆ http://pan.baidu.com/s/1i3CDq8t ï¼‰é‡Œé¢æœ‰è¯¦ç»†è¯´æ˜ï¼Œç„¶ååªè¦å†åœ¨cmdä¸­ç”¨å‘½ä»¤--modelæ‰§è¡Œå°±å¯ä»¥äº†ï¼š![GLPK-è®¡ç®—ç»“æœ](./img/GLPK-è®¡ç®—ç»“æœ.png)ç»“æœå’Œmathå‘½ä»¤ä¸€æ ·ï¼Œä¸è¿‡å†…å­˜ä½¿ç”¨ç¨å¾®å¤§äº†ç‚¹ã€‚## è¿‡å‰©é€šå‹¤åº”ç”¨&gt; æœ¬æ–‡ç»§ç»­å¯¹ GNU Linear Programming Kitè¿›è¡Œè§£é‡Šï¼Œæœ¬æ¬¡ä»‹ç»å¼•è¿›å®é™…åº”ç”¨ï¼Œè®¡ç®—æœ€å¤§è¿‡å‰©é€šå‹¤å’Œæœ€å°è¿‡å‰©é€šå‹¤ã€‚---------------é€šè¿‡ä¸Šé¢å¯¹GLPKçš„å»ºæ¨¡è®¡ç®—æœ‰äº†å¤§æ¦‚äº†è§£ï¼Œæœ¬ç« å®ŒæˆBOSSä¸‹è¾¾ä»»åŠ¡ï¼Œå®Œæˆä¸€ä¸ªè¿‡å‰©é€šå‹¤è®¡ç®—ã€‚é¦–å…ˆå½“ç„¶æ˜¯å†™å¥½modelæ–‡ä»¶,å…¶ä¸­æœ€å¤§é€šå‹¤ä¸ºï¼š param n;param m; param Population{i in 1..n,j in 1..m};param Distance{i in 1..n,j in 1..m}; var x{i in 1..n,j in 1..m}&gt;=0,integer; maximize obj:sum{i in 1..n}sum{j in 1..m} Distance[i,j]*x[i,j];s.t.e{i in 1..n}:sum{j in 1..m}x[i,j]=sum{j in 1..m}Population[i,j];f{j in 1..m}:sum{i in 1..n}x[i,j]=sum{i in 1..n}Population[i,j]; solve;printf â€œmin sum:%dâ€,sum{i in 1..n}sum{j in 1..m} Distance[i,j]*x[i,j];end;12æœ€å°é€šå‹¤ä¸ºï¼š param n;param m; param Population{i in 1..n,j in 1..m};param Distance{i in 1..n,j in 1..m}; var x{i in 1..n,j in 1..m}&gt;=0,integer; minimize obj:sum{i in 1..n}sum{j in 1..m} Distance[i,j]*x[i,j];s.t.e{i in 1..n}:sum{j in 1..m}x[i,j]=sum{j in 1..m}Population[i,j];f{j in 1..m}:sum{i in 1..n}x[i,j]=sum{i in 1..n}Population[i,j]; solve;printf â€œmin sum:%dâ€,sum{i in 1..n}sum{j in 1..m} Distance[i,j]*x[i,j];end;12å°±æ˜¯å°†maximizeæ”¹ä¸ºminiminzeï¼Œå†™äº†ä¸ªrun.batæ–‡ä»¶æ–¹ä¾¿è¾“å‡ºï¼š glpsol â€“model MaxTrafficCommuting.model â€“data Data.data â€“output max.solveglpsol â€“model MinTrafficCommuting.model â€“data Data.data â€“output min.solve12æ¥ä¸‹æ¥æ˜¯dataæ–‡ä»¶éƒ¨åˆ†äº†ï¼Œç”±äºåŸå§‹æ•°æ®æ˜¯excelæ•°æ®ï¼Œéœ€è¦å…ˆè¿›è¡Œæ ¼å¼æ•´ç†ï¼Œä¸»è¦å°±ç”¨pandasè¿›è¡Œæ•´ç†ï¼Œæ“ä½œæ–¹ä¾¿ï¼Œç›´æ¥é™„ä¸Špythonä»£ç ï¼šï¼ˆdataæ–‡ä»¶çš„æ ¼å¼å¯ä»¥å‚ç…§ä¸Šä¸€ç¯‡GPLKè§£é‡Šçš„æ–‡ç« ï¼‰ -- coding: cp936 --import pandas as pd def toformat(): #data is big table, and data1 is small table #make the big equal to the small data=pd.read_excel(&apos;Distance.xlsx&apos;,index_col=None)#big data1=pd.read_excel(&apos;Population.xlsx&apos;,index_col=None)#small #change its column data=data[data1.columns] if len(data1.columns)!=len(data.columns): print &quot;row exist Duplicate items&quot; #change its row&apos;s index data=data.loc[data1.index] if len(data1.index)!=len(data.index): print &quot;row exist Duplicate items&quot; data.to_excel(&apos;Distance.xlsx&apos;,sheet_name=&apos;Sheet1&apos;,engine=&apos;xlsxwriter&apos;) #to creat txt file data.to_csv(&apos;Distance.txt&apos;,sep=&apos;\t&apos;) data1.to_csv(&apos;Population.txt&apos;,sep=&apos;\t&apos;) pop,popnum=changeformat(&apos;Population.txt&apos;) dis,disnum=changeformat(&apos;Distance.txt&apos;) if popnum!=disnum: print &apos;ä¸¤ä¸ªçŸ©é˜µå¤§å°ä¸ç›¸ç­‰ï¼Œè¯·æ£€æŸ¥æ•°æ®&apos; print &apos;å®é™…é€šå‹¤ä¸º%d&apos;%(sum(data*data1)) return pop,dis,str(len(data.index)),str(len(data.columns)) def todealmiss(): data=pd.read_excel(â€˜Population.xlsxâ€™,â€™Sheet1â€™,index_col=None,na_values=[â€˜0â€™]) data=data.fillna(0) data.to_excel(â€˜Population.xlsxâ€™,sheet_name=â€™Sheet1â€™,engine=â€™xlsxwriterâ€™) def changeformat(filename=â€™Population.txtâ€™): with open(filename,â€™râ€™) as datafile: data=datafile.read().split(â€˜\nâ€™) n=len(data) data[0]=&apos;param &apos;+filename[:-4]+&apos;:&apos;+data[0][1:]+&apos;:=&apos; #ä»excelè½¬æ¢ä¸ºtxtæ—¶æœ€åä¸€ä¸ªç©ºæ ¼é”®å¤šå‡ºäº†ä¸€è¡Œï¼Œ data[n-2]=data[n-2]+&apos;;&apos; outputname=&apos;new_&apos;+filename return data,n todealmiss()pop,dis,row,col=toformat()with open(â€˜Data.dataâ€™,â€™wâ€™) as datafile: datafile.write(â€˜param n:=â€™+row+â€™;â€™+â€™\nâ€™) datafile.write(â€˜param m:=â€™+col+â€™;â€™+â€™\nâ€™) for p in pop: datafile.write(p+â€™\nâ€™) for d in dis: datafile.write(d+â€™\nâ€™)``` ä»£ç å†™çš„å¾ˆä¹±ï¼Œæ²¡ä¼˜åŒ–äº†ï¼Œç›´æ¥è¿è¡Œç»“æœï¼Œæ€»ä½“æ¥è¯´é€Ÿåº¦è¿˜æ˜¯æŒºå¿«çš„ï¼Œ381*381ï¼ˆ145161ï¼‰ä¸ªæ•°æ®å¤§æ¦‚ç”¨äº†5ç§’å¤šï¼š]]></content>
      <categories>
        <category>æŠ€æœ¯åšæ–‡</category>
        <category>æ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>çº¿æ€§è§„åˆ’</tag>
        <tag>GLPK</tag>
        <tag>è¿‡å‰©é€šå‹¤</tag>
      </tags>
  </entry>
</search>
